//	Playerjs.com 9.07.1
//	12.11.2018 20:11

var pljssglobal = [];
var pljssglobalid;

function Playerjs(options) {
    var o = {
        play: false,
        playerid: '37slbumsc7ml',
        default_w: 640,
        default_h: 360,
        version: '9.07',
        compilation: ['HLS', '', ''],
        compilations: '',
        fullscreen: false,
        realfullscreen: false,
        nativecontrols: false,
        fullwheel: false,
        fullscreen_start: false,
        airplay: false,
        pipwebkit: false,
        ispipkit: false,
        u: '#1yfQgs3QFtq5Dv2ecwCP6PDhdTkhdTjPMPHYcv2eCsrPCVHMCs29Mv3PCVCPdTkhdTkhCSjQIuqYFPDIeSjQasrQHuq4CVCPaTDhATjhdPkhCSjQHwGmEuqpbxjP6TZdCsq5Jvqm0uq9bPDICsqeduNlCSjQBPDIezZdCs29bxOQcvm90urYMtZP6yfQcwGYFwCP6TZdCv24CVDlMPGmDxNFcvCP6PHYJxNeFPCdCxOFdtZP6PHYFyOXCSjQdv3UJxNFcvCP6PHYcwj1Mtqt0PCdCs2eJs2MCVDhMPGBBvGXCVDhMPHYFyOXCVCPCSjQ2srPCVCQ0urYMtZPMPGBJtNoCVDlMPGBJtNpcvHiMsrECVDlMPGmbuq1BxNFcvCP6PHicw2F0uq9bPCdCsGwCVDlMPGQHsZP6Tj40SjQCt3iBtNYJvGwCVCP2PksAUCh2PH0MPGUcvHYfv2ezvNFbtZP6yfQcwGYFwCP6TfdCv24CVDhMPHY5wNoCVCQguNmdtZPMPGmDxNFcvCP6PGeJvGoCSjQIPDI0SjQfv3pbtNFbtfP6TjdCxfP6TnhdSjQBPDIeSjQBsGwCVCPdSDTCSjQBvN9BtjP6PDhbUjPMPGmcxGpfPDICTjPMPGUcvN9fPDICtGtGtGtGPCdCs29Mv3QCtfP6PGtGtGtGtCPMPGUcvN9fvN9BtjP6PGtGtGtGtCPMPGUcvN9fv3tFwCP6PGtGtGtGtCPMPGQ1tGtFwCP6yfQcvCP6TjdCs29Mv3PCVCQGtGtGtGsCSjQBPDIdSDp9SjQdv3UJxNFcvCP6PGQcxOYcvZPMPG1BwGxJvCP6PDhATnhATgXATnhCSjQIsq5EvNoCVDhMPGQHwNmEtNFbtfP6PDoATjh1PkhCSjQ0urhCVDlMPGBJtNoCVDlMPGBJtNpcvGeJxGoCVDm9SjQDv250wG9Mr3iMsrECVHMCv3QEtrPCVDPMPG9bPDIeSjQJs29bPDICWOU2tfi3uqY0uk0HTDhHPNBFuqxIxk0HTDhHWDeHPOYfsq5gtG9fvn0HxOQBvHUMsrYFRkoMPkTJQg48wN9MyqeJvGoAwN9JvHYgWZwdSDo5Tgw1PkhbUkA0TgAATj41UDP1PklgSDoeUnsgPkleSDXgUgoAUfhdSDo5Tgw1PkhbUkA0TgAHPNtJvNd9QfUGtGtGtGsHSg48S2w#Wj9gxGw#PCdCuqUcvDPCVCP8w3tHPOxJtOYIWZwfTjwAuNpJt2B0WZwfTjw#WNwAtGFMvj1fxqeFWZxbv256trQcQfi0wGmbw2tcwG09Q3Yfsq5gvNm0tZA1Sjh0RZw#WOQFs3XAyk0HTjwAyn0HTjwAx2FExNA9QgTbUZwAuNpJt2B0WZweTCwAtGFMvk0HP2tGtGtGtCwcWDeftqU0POA9QgsbUZwAyn0HTjwAx2FExNA9QgTbUZwAuNpJt2B0WZweTCwAtGFMvk0HP2tGtGtGtCwcWDdctg48S3U2tg4CSjQJs29bTfP6PDegxGwAx2FExNA9QgPdQfiItqFHuOX9QgPdQg48tfi0wGmbw2tcwG09Q3Yfsq5gvNm0tZAfSjhgRZw#WOiBxNAAtk0Hnnl2SkwbTnT2UDleTgPAnkl2SkwbTnh5Tns5UkoAnkl1SDPdVkl3VkoMUf4eTkEeUDE0UZiTTnXbTDw1TkEgSkwbTnh5Tns5UkoAXgl0SDP3Unh5TfdgSDl5VnlfUDP1PkleSDh2Tgl5UfddPkwbTnT3UnX2UkoMTjikTf4fTnl4Vno5TZddPkhMTf4eVnEeTDsfUZhdSkwbTnh5Tns5UkoAXghMTnlbTkl5TDlfUChgSDPeTnA5UnEeSkl0SDPeVkTgVkEAUf4eTgw1Uks0UZdeUj4fTnAgTgA5Pld3SDlgUgo0UDX1SklfSDX0Tnh0UDoAXgXbTnEgTgh4UnoMTnPbUkXeTkX2UZheSDw4UkT4UDsfSkldSDh0TnwdTnAATZ43VkXgVks2TCd3SDldVnl2VnX1PlTeSDw4UkT4UDsfSkXbTnw2UDT3TkoAUj4eVnTgTkA1UZdeSDw3UgP5TDT2PkwbTnT3UnX2UkoMTZ43UgwfVnPgUCikTnhbTkAeUgA0UjdeSDw3UgP5TDT2PklfSDX5TkwdUDTMUj4eUgs2TgwdUZheTC40Vnh3TksgSkwbTnh5Tns5UkoAnkldSDs0UkoeUDwMUf4eTkEeUDE0UZiTTnTbTgAfVkE5UCdeTZ41UnP0Tkh0PldeUCd3SDlgUDseTnTfPmIHPNtJvNd9QfUGtGtGtGsHWDdcwNm0uk48S2w#Wj9gxGw#PCdCsqU0uq9bPDICwNeByZPMPGmDxNFcvDPCVCQdsrpgtZPMPHY5wNoCVCQgxGwCSjQgs2mMtZP6TZ4fSjQgs2mMtq92trPCVDlbUZdCvqmft2FbPDICTjheUZhdPkPdPH0MPGUcvHYfv2ezvrp0tZP6yfQcwGYFwCP6UjdCv24CVDlMPGFDv24CVCP8w3tHPOxJtOYIWZwfTjwAuNpJt2B0WZwfTjw#WNwAxOQBvHUGv3QaWZx0wGmbw2eBxNoITfdATCEHWDedv2e5t29bPNtJvNdawHpMtn0HvG9byGpfvfwAwN9JvHYgWZw4SDA4Tnw4UkQFSnl2PkXbTgw0UCh4SDA4Tnw4UkQFSnl2PkldSDsfUnT5PkTbTnhdTDEATnhbUDP1TgEAUf43Ukl0TfheUZh3SDw0Ukl5PkhATf4eTkPgUfh0SDT3UksePklbUgw2Tgo2VkYFSnl1PkXbTgw0UDlATZ43UgsgUns4UNoaTnoAUj4gUgX2QfiGuqeMWZwDtGtGtGtGQf8#WOiBxNAAtk0HnnldSDX0Tns3SkTbUDPeVkoAXgldSDl3Ukh1SkTbTgl0TnEAVZ43UkXgUjdgSDTeUkl5PkEbUkw4TkAMTf42TDT0TfikVZ4fTnP1TZdgSDEgTDs4PkEbTDlfUnlMUj40TgTgTCh5SDX3VnX0SkXbUgXgTgoAnkEbUkw5UkXMUj43Ukl3VjikTnhbTks3TnTMUZ40TDoeTCheTj40TDE0TZd2SDT2TDT0PkldSDXfVnXeSkwbUkhgVnsAXgldSDXfVnXeSkAbUkX0UgEATnhbTks3VklMVZ4gUgA4UZh5SDX4TkAMTnhbTksfTnEAXgEbTDlfUZdeTj4gUDE4UZh5SDPeTDoMTnhbVkwdUkEAVZ40UgE0UjdeTZ4eVklgTZikVZ42TnPfTfdeTZ4gTgo1Ujh5SDw4UDo3SkleSDXeTgh0PkEbVnsdVZdeTZ40TnTdUjikTnhbTnT1VnlMTnlbUklgTkXATnhbTgldTDXMTnlbTgT1UnXATnhbUkXgTkTMTnlbTnAeTglAXgleSDP3Unl5SkldSDPeUDXePkleSDw5TnT4SkAbVkw1VkTATnlbUgEdUfd3SDXdTgE2PlTeTZ43VnlgVjd1SDEfVkEfPkleSDP3Tgl1SkXbUnA2UgsATnhbUkXeUDwMTf42TDl4UCiTTnhbUkXeUDwMTf42TDl4UZiuQfiJtk0HwNJgr3tcvOpatp9FvNpatq50TZwAtGFMvk0HP2tGtGtGtCwcWDedsrYIPNX9Q00eTZ45VnXeTfdeSDA2TDw4PlTeTZ43TDP4VZdfSDl3TDo3PkleSDwfTDA5SkPbUDw0VkEATnlbVnE0TnTMTC45VkTdVZikTnPbVnE3UkwMUj4eTgP3TZheTf42TnsdVjd1SDweUklgPklgSDseUDh4SkwbUks4TDEAXglgSDseUDh4SkEbTDPdVkoATnPbVnE3UkwMTnhbVkheUkEATnlbVnE1UnPMTnlbVnoeVZikTnlbUgP0TDwMTnPbTDsdVkEATnlbUgP0TDwMTnPbUgsfUkTATnlbVnE1UnPMTnTbTkwfTDlAXglfSDlgTkX1SklgSDPfUDwePklfSDTdUgsMTnTbTgh0TgoATnPbUkA1UkTMTnTbTgh0TgoAXglfSDs2TDo2SklgSDTdUkT1PklfSDAgVnweSklgSDPfUDwePklfSDE3Uks0SklgSDh3TDPePlTeUj4fTDo2VZdeTZ42TgA5UjheUZ4dTklgVjd5SDs1TgX1Pkl1SkwbUks4TDEAXgl1SDhdTks5SkobTDAeUnXATnXbTDP1SkTbTDE0UksATnPbVnweVkwMTZ44UDP3VjikTnPbUDE5VnTMTZ41UnP5VZheTC4fUDTgSklbUnofVnEATnlbVnE0TnTMTZ44UDP3VjiTTnlbVnE0TnTMTZ44UDP3VjiuQfiJtk0HwNJgr3tcvOpatp9FvNpatq50TCwAtGFMvk0HP2tGtGtGtCwcWDdctg48S3U2tg4CSjQJs29bTCP6PDegxGwAx2FExNA9QgPdQfiItqFHuOX9QgPdQg48tfiGuqeMSrQ1vNo9Q25cvHJFwG8HPOYfsq5gtG9fvn0HxOQBvHUMsrYFRkTMPkPJQg48wN9MyqxcvCidv2FbxOT9QgAbVkAeUgA0TGoaTnsAUj4gUgX2PkAbVkAeUgA0TGoaTnsATnhbUDP1TgEATf4eTkhfVZheTj42TDogVZh3SDw0TnXgPkl1PkwbUgX0TnEATjhgSDldTDT3PkXbTgw0UDlATZ43UgsgUns4UNoaTnoAUj4gUgX2TZheSDw3UDT1UDA0tZ0eUZh0SDT3UksHPNtJvNd9QfUGtGtGtGsHSg48wNm0ujiEWZxUTnlbVnP2Ugw2Ufd2SDs0UgX0UgEePld5SDA3VnTfUgP2SkXbUnE5VnE4UkwAnkEMUZ40UgEgTDo3TfiTTnlbTkX3UkX5Ujd3SDofUDw3Unl3Pld5SkEbUnw0TDP0UDlAnkEbVkw5TgP3TDsMTnhbUkogUnoeVZiTTnlbVnP2Ugw2Ufd4SDXdUDldTDXgPldeTf45UgXfTDseSkldSDX1Tgo1TnEAnkl0SDA1Tgo1TgXMVZ41UgXfTDX2TZiTTnPbVkh2Tnh0SkwbUnP2Ugw1TnwAnkl0SDA1Tgo1TgXMUZ40UgEgTDo3TfiTTnTbVnw0TDP2TZd0SDo5VnE5VkX3PldeTZ45TDs3Ugs3SksbUDX3UkX3VnlAqCwAtGFMvk0HP2tGtGtGtCwcWDdctg48S3U2tg4CSjQBs3YJv24CVCQaxrYFPCdCsqU0uq9bTCP6PHpbvrp0tZPMPHY5wNoCVCQgxGwCzZdCs29bxOQcvm92v2e1vqoCVHMCv3QEtrPCVDoMPG9bPDIeSjQ0yriFPDICw2BBwNoCSjQBs3YJv24CVCQ2v2e1vqoCSjQIPDI0SjQfv3pbtNFbtfP6TjdCs3pgxN9ax2FExNACVDlMPHwCVDldTjdCsZP6TZdCsqQHPDICTj4gPCdCsq92trPCVCPdPCdCs29Mv3PCVCQGtGtGtGsCSjQDv2ecwGQHPDICtGtGtGtGPCdCs29Mv3QcxGpfPDICtGtGtGtGPCdCuNFEtZP6TZdCuNFEtq91xN11xNoCVDlMPHQcxNm0uq9bPDIdSjQCt3iBtNYJvGwCVCP1PkhAUZhdPCdCsGwCVDhMPGBBvGYMtZP6Tr0MPGUcvHYfv2ezxNFatZP6yfQcwGYFwCP6UCdCv24CVDhMPGmDxNFcvCP6PHYJvqoCSjQ0yriFPDICxNp4xjPMPHYFyOXCVCPdVDhdPCdCtG9bxOUJyGoCVDldSjQasrQHuq4CVCPdPkhATjheUZPMPGUMuqULPDIdSjQgtriBwGm0v3PCVCPcPH0MPGUcvHYfv2eztOpfsrYJv24CVHMCv3QEtrPCVDwMPG9bPDIdSjQBs3YJv24CVCQExrQBxNFcvCPMPHY5wNoCVCQ0trB0PCdCxNp4xjP6PC8ATkIdTjPMPGtcvHYgurJFPDIeTjdCvqmft2FbPDICTjhdPkhATjPMPGUMuqULPDIdzZdCs29bxOQcvm9CxqtGtrPCVHMCv3QEtrPCVDAMPG9bPDIeSjQJs29bPDICWNYJxCiDvNmgwg0HvN9BtNpfROQBvGXJQg48w3tHPNUMsrUgWZxDurQDxqeBwCBfsq5ERZwAxGFFx0Qcyk0HTDoATDoAUnhAUnhHWDeDurQDvNoAs2eBw3T9Q3iBxNAIwGmbtjEHPOU0wG9Ltn0HRNUcvN9fRZwAs3A9QgodQfiDyn0HUnhHPOP9QgPdQfiGuqeMWZxbv25FQfigxOQcu2oax2FExNA9QgPHPOU0wG9LtZ1aurYFwGeJvqF0WZweTjwcWDdcw3tHWDdctNF2WHe8zj5Mv2mEtrPIwGmbtjEAy3icw2F0uq9bVCiftqeBxNF2tnaasrQHuq46PkhAsrp0vga3uqY0ukIAUnidyka9SGecsqYFwCBfsq5ERnJCtqtcwGoAy2UcvHYFvHX6PjwHV2YJw3iMsrE6PNQMv2ULV3iBtNYJvGwaxN9dVCheTkhFV30bs2Ffs3pMsrPIwGmbtjEAyf13tqQLurXasq5Jvqm0uq9bVCifv3YBxNoATHTAvNFbtqmfPNFbtGFburYFV2mbuq1BxNFcvDIAwG90srYFPkQgPNeJvGpBwCiJvGtJvGF0tnaItqFHuOX6PkldTjo7SrxFsGaJxj10wGmbw2tcwG0av3QJt2FbVCiDtq50trPAs2pbxNpfV3Yfsq5gtG9fvZ1cwGFHuq46PNUFvHYFwCiDtq50trP7x2FExNA6PkldTjo7wN9gurYJv246PNmCw29MxrYFV3YcwkIATkaCv3Y0v206Pkh7vNpGxkIATkafuqxIxkIATkaasrQHuq46PNm1xN87zZ5dsrYIROQBvGXJPOagxOQcu2oatNmguNmfwGm5VCheSjhfTkh7w3Yfv2aFSqYBw2BctGtgtrX6Pkh7SrxFsGaJxj1BvGFasrYJv246PNYBw2AATZ41wfiFsrUFSqFbSq91xjiJvGtJvGF0tnaBvGFasrYJv246PNYBw2AATZ41wfiFsrUFSqFbSq91xjiJvGtJvGF0tna9Xj13tqQLurXau2p5tHQBvqpgPOQcxNm0tZi7TnhdQZi7SrxFsGaJxj10wGmbw2tcwG06POQcxNm0tZAgUDiEtqwJV3Yfsq5gtG9fvnIAwG90srYFRkT2TNYFtfE7zr1hu2p5tHQBvqpgPOQcxNm0tZi7TnhdQZi7SrxFsGaJxj10wGmbw2tcwG06POQcxNm0tZAgUDiEtqwJV3Yfsq5gtG9fvnIAwG90srYFRkT2TNYFtfE7zr1hSrxFsGaJxj1LtrFGwGmatrTAtNmguji7TjoAy3U0wG9LtZ1EsrUIsrQfsrE6PklMPkPdTkagxOQcu2oatNmguN9GtHUFxkIATka9UnhFPOagxOQcu2oatNmguNmfwGm5VCh4VZdATDhdV3U0wG9LtZ1EsrUIv2tGw2p0VChaTgpdyka9TnhdQZi7w3Yfv2aFSqYBw2BBwHQBynIAVkEMPkPdTkagxOQcu2oatNmguN9GtHUFxkIASnlfUOi4V319XNaFyqtfsq1FwfiEsrUIPOMdQZi7w3Yfv2aFSqYBw2BBwHQBynIATZdATDhdV3U0wG9LtZ1EsrUIv2tGw2p0VChdV301TjoAy3U0wG9LtZ1EsrUIsrQfsrE6PkA5SjhfTkh7w3Yfv2aFSqYBw2BctGtgtrX6Pj0gUri4V30eTkhFPOagxOQcu2oatNmguNmfwGm5VCh4VZdATDhdV3U0wG9LtZ1EsrUIv2tGw2p0VChaTnP0wOA7zr0CSjQBs3YJv24CVCQCxqtGtrPCSjQ0yriFPDICs3UgPCdCwN9gurYJv24CVCQDtq50trPCSjQgs2mMtZP6TZdCs2eJs2MCVDhMPGBJtNoCVDm9SjQDv250wG9Mr3UFxOYJvGxgPDJ7PG9ftNpfPDI5SjQcvCP6TZdCuqUcvCP6PDegxGwAx2FExNA9QgPdQfiItqFHuOX9QgPdQg48tfi0wGmbw2tcwG09Q3Yfsq5gvNm0tZAfSjhfRZw#WOiBxNAAtk0HnnlfSDoeUgsdTgsMTnXbUnE5UnE4TCiTTnlbVkEeTgP0VZdeTC40TkAdUkPAXglfSDh3UkA2TDPMTnPbTDX3TkA1UfheTC4fUkweUkhgSklfSDh3UkA0TDlATnPbUkh5UgogTCdeTZ44Vnh1TgX3PldeUj42TkheTDX1SklfSDoeUDs4UgAAXgl0SDAgTnl2TkTMTnPbTnAdTDAdTfheUZ4dTDE5VnP0SkleSDAfTDEfTDTATnobTDh3VnhdTZdeTZ40Unl5Tks3PldeTf41Ugw3Vko4SkEbVkw0UkT5UgAAXglgSDs1UnA3TgEMVZ42UkP2UnTgVjheTf43TDT0VnE4SkEbUkh2VkXfTglATnTbUgweUgE1Tfd5SDl2Tgw3Vkw3PldeUZ45UDA2TkTgSkAbUDlgTDw3TDTAXgl1SDE4UkweUnTMVj40Tnh0UDhgUZheUCd4SDPdUDAgUDoePkl2SkwbVnE5TnE4TkEAXgl2SkwbUgEeUno5UDAATnobVnAgVnh4TCd3SDo4VkwfTDsfPkl1SDE2VksdTgTMUf4gVko5Tno4TCiTTnTbUgweUgE1Tfd2SDAgUnXeUkP4PlTeTf43TDP2VkP2SksbUnEfTgodUgXATnTbUDo1Tko2Ufd2SDT1UDofVno4PklgSDo3Ugw4UnAMUC4eTDX3UkTeVjiTTnobTDh4Ugh3TCd0SDo0UgP4UDT1PlTeUZ4dTDE5VnP0SkXbTnw3Tko3UnPATnXbVkTeTnsdTfdgSDAeVkEeTDw3Pkl0SDsdTklfUkoMTf40VkP0VkodVjiTTnPbUkh5UgogTCd0SDldUgA0TnT1PlTeTC4fUkw5Ukw0SkTbVnP0TgXdVkXATnPbTkw0VksfTCdgSDw1TDldUgT3PkleSDA5TnTfUkEMTf41VnhgTgXAnklfSDoeUgsdTgsMTZ4gVnE1VkX4PlTeTC4eVkleTDA2SklbTns5UklfTDEATnlbVkPfVkEeVjddSDE2VnAdTghgUZheTZ40Unl4Tkl4SkhbUgEeVnXeTkA4Pld5SDA3UkheVksfSkPbUkPfUnT1UCikVZ42UkP5VkP3UCdfSDT0UkX2Tgl1PkEbUkh2Tgl3TDEMTC4fUgw2Unw3UZh5SDl2TgPeUnleSkPbTDP4Uns0VnlAnkAbUDlgUkhdTDlMTj4dTglgVkhfVkPgPlT4SDXdVnwgUno0SkhbTkl2TkA4UnwfVZh4SDPdUDA3UgE4SkhAUf45VnEeVnw5TfddPlT3SDw5TnoeUgA4SkhAUf41VkA2UkheUZddSDheUDh4Vko3TDEAUf4gVko3VnP2VjddSDhgTnT4TkP4TDTAnksbVkT1TnAdUgsMTC4fTDA1UDX5TZikUC41VnPdUDA0VjdfSDP3Ugs1Ugw1PksbTgo2TDhdTkXMTC4gUkX0UDTeUZh2SDlfUkT2Ugl2SkPbUkPfUnT1UCiTUj41Uks1VnXdTCddSDw5TnE0Tnh4VjikUj4eUgsfVnh5UZddSDE3TDPgTgE3TfhgSDAeVkA4TnoeSklbTnweTkl2TnlATf40VkPgVksgUZdeSDXdTDhdUns1Pld0SDldVks2Unh0SkTbUnEfUgX0UgsAXgTbVnP1TnP3UgTMTf43UnT3TnleVjhgSDw1TDh2TDweSkTbVnP2UgseUDEATf41VnldUnT5TCd0SDldVnX0Unl2PldeSDT5VnA2UnX0SkTbUkAgTDEfTkTAXglbTns4VkP5UnAMTf44TnE3TnE3TChdSDE2VnE5UgX5Ufd0SDl3UgA2UkX3PkhbUgEfTkE5VkA1SkXbUnX4VkEdTnsAnkPbUkPgTkPeTgsMUC4eTDsgUnwdVjikTC4gUko3TghfVjd2SDT1Vkl0TgX4PkPbTDw4Tnl0UksMUC41VnT5UnX1UZhfSDPfVnheTnw3SksbVkT3Tkl4TkEAnkhbTkTeTgA2Unw0UCd3SDT4UgoeVnsgPlTdSDheUDh5Tnw5VkEMUf41VnhgTgs1TChdSkwbUgEgVnsdTgoATjd4SDhdTkAdTnEePlTdSkAbTDh3UDXgUksATj4dTnsdVnl3VnA5SkAbUkleTDo3TDlATj4dTglgVks1UgX2SkAbUDl0VkAeTkoAnkPbTDP5TkleUgwMVZ4eUDogVkP1VZikTC4fUgAeTnX0UCd5SDXdVkX0UDlfPkPbTgX1UgTdTDAMVZ42UkXfUkweTZhfSDXfTghfTnT2SkEbVkw2TkXgUCiTTj43VnPdVnE4VkoMTnlbUkogUnldUZikTj45UDE5Vnw0VnwMTnlbVkPgUgT5TfheSDl2VkAfVno4SklfSDl4TnA4UklATZ4gVnE4UDo0UjdeTC41TnAgTnl4PldgSDo5Tnh1TgEfSkleSDA5TDl1VksAXgTbUgofTkofUDPMTnPbTkw2Uks2TZhgSDEfUnlfUgwgSklfSDP0UgA5TDsAUj4eTkA2UDodUjdeTC40TkE2UDsAnkTbUkAfTgA2TgoMTnXbUDheTDPfTCikTf44TnA4Vkl1TZdeUj44TglgVnX3PkXbTnw3TkE4TkwMTnobTkTdTnE3PkXbUnX3UkheTnTMTnobTDh4Vks1VZiTUC4eTDoeUgXfUfdeTf41UgAfUglgPlT2SDT1UghdUgl1SklgSDs1UDT0TgAAUC41VnP4Ugo2SklgSDwfTgE1UDlAUC44Tgo5Vkw4UfdeTf43UgPfUkPAnkwbTgA2UnE5UgEMTnobVns4UDh5UCikUf41VkE0UnwgUZdeUZ45VkX3TnA0PkwbUgEgTnleVnTMTnsAVj4dTkh4TkPdUfdeUCikVj4fTkA0VnPfTZdeUCh4SDXeTnTgVns3Skl1SDE4TgEeTnXAVj42TnodTkXgUjdeUZ45UDA2TkE2Pld5SDl2UkAeVnP0SklgSDw3TDP0TCikVZ40Tkw5Tgl1TCdeTf43TDTeUkEfPkEbUDX0UnA2VkEMTnTbUDo1UnX2VZh5SDA3UnsfTDw1SklgSDo3VkP3TnTAnkleSDX1TgXdUCdeUZ4fTkA4UDo5PlTeTZ44TDP4Vnl4Skl1SDhfVko3TfheTC4eVkleTnA1Skl0SDAfVnw5TkAATnPbUnl3UDhgUCdeUj41VnE1VnAfPldeTC41Tnw2TkT2Skl0SDo5Vno5VkPAqCiUUf45VnE5VnX5UCdeTj43Tgo2TnwfPlT2SDX4VnhfTkX0SkldSDwgUnseUgPAUZ4fUDT4TDXeUCd5SDoeTks2UDo2PkobTDsgVkP0TnsMUf45VnE5VnX5UCikUZ4fUDT4TDXeUCd2SDX4VnTfTgT1PksbUkA5TkPdUkXMUZ4fUDoeUgE2UZh3SDE5VnE5UkE2SkobTDs1Tnw5UDoAXgEbUnldVns5UkwMUZ4fUDoeUgE2UZheTj43TgogUnA2SksbUkA5TgTgUkXATnhbUgT1Tgo4UCd3SDE5VnE5UkE2PlTeTj43TgogUnA2SkEbUnldUDo2UkwAVZ41Tnh5UnEgVZdeTj43Tgo2TnwfPkwbVnE5VnE0VnsMTnhbUgT1UDl3TCiuQfiGuqeMWZwDtGtGtGtGQf8#Wj9HWDdcw3tHWCPMPGmDxNFcvCP6PHUFxOYJvGxgPCdCwN9gurYJv24CVCQDv250wG9Mwf1fuqxIxjPMPG1BwGxJvCP6PDhATjhdPkl1PCdCxOFdtZP6PHU2tfQ9SjQDv250wG9Mr3iMsrFMurU0PDJ7PG9ftNpfPDIeTjdCv24CVDlMPGFDv24CVCP8w3tHPOxJtOYIWZwfTjwAuNpJt2B0WZwfTjw#WNwAxOQBvHUGv3QaWZx0wGmbw2eBxNoITCdATfEHWDedsrYIPNX9Q00dSkhAnkl2SkhAnkl2SkPAnkhMTCiTTjddPmIAnnhMUCiTTnsMUCiTTnsMVjiTTjd4PlddSksAqCiUTjdeTCiTTnsMTnPAnkl2Skl0PlddSkl0PlddSklfPmIHPNtJvNd9QfUGtGtGtGsHSg48S2w#Wj9gxGw#PCdCsqU0uq9bPDICwNeByqeJw3XCSjQdv3UJxNFcvCP6PGeFtHXCSjQasrQHuq4CVCPdPkhATjh2PCdCsGwCVDlMPHUDsqeFPDIeSDoMPHY5wNoCVCQgxGwCSjQBvGFasrYJv24CVCQdv3UJxNFcvCPMPGQHwNmEtNFbtfP6PDTATfhgPkTCSjQCt2lCVDhbUjdCsGxBv3tFwCP6Tj44SjQ0urhCVDi9SjQDv250wG9Mr2t1vNdCVHMCv3QEtrPCVDleSjQcvCP6TZdCuqUcvCP6PDegxGwAx2FExNA9QgPdQfiItqFHuOX9QgPdQg48tfiGuqeMSrQ1vNo9Q25cvHJFwG8HPOYfsq5gtG9fvn0HxOQBvHUMsrYFRj0eSjhaTZEHWDedsrYIPNX9Q00eTj45Tkh3TnEeSkl0SDAgUDl0TDlAnkwbUgh4Tks5TksMTnPbTnA2VnAfTZikUf41TDs5TkEdUCdeTC4dTgs3TkPePkwbTgA3Vnh5TksMTnlbVks2TDTfTZh3SDleUkh4Vnh2SkleSDA2UDPgTDlAXgsbUgXfVkX5TksMTnlbVks2TDTfTZh2SDofTkldVnh2SklfSDl3TDwfTDlAUC41TDheTkEdUCdeTC40UDhfTnPePld2SDofTkldVnh2Skl0SDP0TDl1TDlAnkPbTgsfTDT5TksMTnXbTDXfTnofTZikTC4dTgo1UkEdUCdeUj4fUkPeUnPePklbUgs4TDo5TksMTnXbUnh5UkXfTZheSDw2VkP1Vnh2Skl0SDAgUDlgTDlAnklbUgs4TDo5TksMTnsbTkP0TkEfTZikTZ43UDAfUnEdUCdeUC4gUnh3VkPePkPbTkT1UnX5TksMTnsbUDl4TkwfTZhfSDT2TDPgVnh2Skl2SDseVkh3TDlAnksbUnPdTnh5TksMTnsbUDl4TkwfTZiTUC41TDheTkEdUCdeVj40TkhdTnPePlT2SDofTkldVnh2Skl4SDs4UgodTDlAUC43UkP4UkEdUCdeVj45VnT5VnPePkwbTnl0TkA5TksMTnAbVnEgVnEfTZikUf4gVkw5TnEdUCdeVj45VnT5VnPePkwbUnP2Vnh5TksMTnAbVkPgUnPfTZh3SDwdVkh2Vnh2Skl4SDs3TgP0TDlAnkldSDEdTkweVnlMTnsbTkP0TkAfTZikTnlbTnP4TDh5TZdeUZ44TgA3UDPePkleSDP3TnE1VnlMTnobUDE0UkPfTZheTZ4fUgl5UnEeSkl1SDXgTkldTDlAXgleSDP3TnE1VnlMTnobTns1UgAfTZheTZ4eTDAfTnEeSkl1SDhfTDh0TDlATnhbVnhdUgl5TZdeUj44TgseTDPePldeTj45Tkh3TnEeSkl0SDAgUDl0TDlAqCwAxOQBvHUGv3QaWZx0wGmbw2eBxNoIUC41TDheTkEMPkl1SDXgTkleTCEAwG90srYFRj0fTDobTkhdTkhdRZi0wGmbw2eBxNoISnsbUnPdTnh5SjhaTnobUkTdTnlfRZhHPNtJvNd9QfUGtGtGtGsHSg48wNm0ujiEWZxUTnEbVnh1TkTdUjd1SDEgUkw3TkAAnkl2SDweTDT5TkXMTf4fVko2Tnh4PlTeUC41TglfTDh0SkTbTnT1TgTdVjheUC4gVnPfTgh0SkPbVns0VksdVjheUC4eTnA0Tnh0SkPbVns0VksdVjikTnobUgX3TnwdUjdfSDE2UkA2TkAATnobUnP0UkPdUjdgSDP3TnT1TkAATnobUnP0UkPdUjdgSDo1VkA0TkAAnkl1SDofUkXfTkXMUZ4gUkh3Vkh4PldeTZ4gUDs1UDh0SkobTgXdUgAdVjikTnlbTkT5VkwdUjd1SDT0Tkw4TkAATnhbUgwfUnAdUjd1SDsdVkh4TkAATnhbUgwfUnAdUjd1SDEgUkw3TkAAnkldSDw3TDo4TkXMUf4eTDP3Tgh4PlTeTj43UgP1Vkh0SkwbUkX5UkPdVjheTZ4dTgE4Ugh0SkwbUgl2UgldVjheTZ4gUDs1UDh0SkwbUgl2UgldVjiTTnobUnP0UkPdUjd3SDweUDweTkAAnkl1SDofUkXfTkXMVZ40VnA2Unh4PlTeUZ41TDX0TDh0SkEbUgA2TnXdVjheUZ43UkweUgh0SkldSDh5TDsgTkAATnsbTnl4UkldUjdeTj4dVnP2Tgh4PlTeUC4gVnPfTgh0SkldSDh5TDsgTkAATnsbUnTeTDPdUjd5SDEfTDl2TkAATnsbUglfTgEdUjd5SDw3TnA4TkAAnkl5SDEdUnhgTkXMUf4eTDP3Tgh4PlTfTj4eTgP1Tgh0SksbVnT3UkldVjhfTj4fUgsfUgh0SksbUgEgTkwdVjhfTj4fUgsfUgh0SksbUnP4UgodVjikTDhbTDw2TDwdUjd2SDP2UkXgTkAATDhbTnTfUnTdUjd2SDlfTks4TkAATnEbVnh1TkTdUjd1SDEgUkw3TkAAnkl5SDEdUnhgTkXMUZ45TgX3Ugh4PmIHPOYfsq5gtG9fvn0HxOQBvHUMsrYFRkl1SDofUkXfUZdAUC41TDA3UksJPOQcxNm0tZAaUkobTkhdTkhdRZi0wGmbw2eBxNoISnl1SDofUkXfUZdASnsbUnP4UgX2RZhHPNtJvNd9QfUGtGtGtGsHSg48S2w#Wj9gxGw#PCdCuqUcvDPCVCP8w3tHPOxJtOYIWZwfTjwAuNpJt2B0WZwfTjw#WNwAtGFMvj1fxqeFWZxbv256trQcQfi0wGmbw2tcwG09Q3Yfsq5gvNm0tZAaTZdASnlJQg48wNm0ujiEWZxUUf43TkAdUDEdUCdeTC4eVks5VkPePlT3SDofUDEdVnh2SklfSDhgUDwdTDlAUf4gVkw5TkEdUCdeTZ44UDsfTgPePkwbTnl0TkA5TksMTnlbVks2TDTfTZikUC43UkP4UkEdUCdeTZ44UDsfTgPePksbUnPdTnh5TksMTnPbTnwfUgPfTZh2SDofTkldVnh2SklfSDX2TkPeTDlAnksbUnPdTnh5TksMTnXbTDXfTnofTZiTTC4gUDPfTgEdUCdeUj4fUkPeUnPePlTfSDhgUno0Vnh2Skl0SDP0TDl1TDlATZ43UDAfUnEdUCdeUj41TkE0UkPePklbUgs4TDo5TksMTnXbVkT2TnTfTZiTTZ43UDAfUnEdUCdeUC4dTDXdVnPePlTeSDw2VkP1Vnh2Skl2SDT1Tkw4TDlATC4dTgo1UkEdUCdeUC42TnAdUgPePkPbTgsfTDT5TksMTnsbUDl4TkwfTZiTUC41TDheTkEdUCdeUC42TnAdUgPePld2SDofTkldVnh2Skl4SDXdTkheTDlAXgsbUnPdTnh5TksMTnAbUDA3UnhfTZh2SDw0TDA0Vnh2Skl4SDE5TgE5TDlAUf4eTnXdVkEdUCdeVj45VnT5VnPePlT3SDT4UgEeVnh2Skl4SDE5TgE5TDlAUf41TDs5TkEdUCdeVj44TDT1TDPePkwbUgh4Tks5TksMTnAbUDwgTDXfTZiTTnhbVnhdUgl5TZdeUC4dTDXdVkPePlTeTZ4eTDAfTkEeSkl1SDAgVkw2TDlATnlbTDweVno5TZdeUZ42VnX0TDPePkleSDP3TnE1VnlMTnobUkTdTnhfTZikTnlbTDweVno5TZdeUZ4eUDo3VkPePkleSDlfVkPeVnlMTnobTkPfTkXfTZheTj45Tkh3TnEeSkl0SDAgUDlfTDlAnkwbUgh4Tks5TksMTnPbTnA2VnAfTZiuQfi0wGmbw2tcwG09Q3Yfsq5gvNm0tZA2SDofTkldVZdATnobUkTdTnlfRZifv3YBxNoISnX1SDhdTkhdTjEAxOQBvHUMsrYFRj02SDofTkldVZdASnl1SDXgTkleTCEAQfiGuqeMWZwDtGtGtGtGQf8#WOiBxNAAtk0Hnnl5SDEdUnhgTkXMUZ45TgX3Ugh4PldeUC43TnPgVnh0SkTbTDA1UDldVjikTnsbUnTeTDPdUjdgSDlgUnTgTkAATnsbTgEfTDTdUjdfSDE2UkA2TkAATnsbTnl4UkldUjdfSDE2UkA2TkAAXgl1SDw0Ugl3TkXMTC45UDX4UDh4Pkl1SDofUkXfTkXMTf4fUglgUnh4Pkl1SDofUkXfTkXMTf41UnA4Ukh4PldeUZ41TDX0TDh0SkobTgXdUgAdVjiTTnlbTgs2UnsdUjd1SDT0Tkw4TkAAXgleSDhgVnA3TkXMUZ4gUkh3Vkh4PkldSDw3TDo4TkXMUZ42TkAdVkh4PkldSDw3TDo4TkXMUZ45TgX3Ugh4PldeTj43UgP1Vkh0SkwbTnPfUgTdVjikTnhbUgwfUnAdUjd3SDX0VnXfTkAATnlbTkT5VkwdUjd3SDweUDweTkAATnlbTgs2UnsdUjd3SDweUDweTkAAnkl1SDofUkXfTkXMUf43Tns3Tnh4PldeUZ41TDX0TDh0SkEbUkE4UDodVjikTnobUnP0UkPdUjd5SDw4UDl0TkAATnobUgX3TnwdUjdeTj4dVnP2Tgh4Pkl2SDleVkXeTkXMTnhbTkEfUDTdVjikTnsbTgEfTDTdUjdeTj4dVnP2Tgh4Pkl2SDogTnPfTkXMVZ45TDPeUDh4Pkl2SDweTDT5TkXMVZ43Ugl4Vkh4PldeVZ45TkodTgh0SkwbTnPfUgTdVjikTDhbTnTfUnTdUjd2SDEgUgXeTkAATDhbTDw2TDwdUjd2SDw5Tgh3TkAATDhbTDw2TDwdUjd2SDofVkw1TkAAXgPdSDP3UDP3TkXMUC4fUDX0Tgh4PkPdSDlgTDogTkXMUC4eTDh2Vkh4Pkl5SDEdUnhgTkXMUZ45TgX3Ugh4PldeVZ45TkodTgh0SkobVnT0UgwdVjiuQfi0wGmbw2tcwG09Q3Yfsq5gvNm0tZAeUZ41TDX0TDoMPksbUnP4UgX2RZifv3YBxNoISnPfUZ4dTkhdTkhJPOYfsq5gvNm0tZAaTnobUnP0UkP1SjhaUC41TDA3UksJPjwAtGFMvk0HP2tGtGtGtCwcWDdctg48S3U2tg4CSjQBs3YJv24CVCQGxqeMw2UftqpbPCdCsqU0uq9bTCP6PG5cwG1BvOUDwGpFvCPMPHY5wNoCVCQgxGwCSjQdv3UJxNFcvCP6PGUcvHYfv2egSrQJt2B0PCdCvqmft2FbPDICTjheTjhdPkl1PH0MPGUcvHYfv2ezw3YBwHXCVHMCv3QEtrPCVDlfSjQdv3UJxNFcvCP6PGUFvHYFwCPMPHUDsqeFPDIfSjQcvCP6TZdCuqUcvCP6PDegxGwAx2FExNA9QgPdQfiItqFHuOX9QgPdQg48tfi0wGmbw2tcwG09Q3Yfsq5gvNm0tZA1SjhgRZw#WOicvOFMuq5FPOicuq50wg0HTj41VnT3UZhdSDX4UkT4PkhbUnsfUZheTf41Tno2TfheTZ40Tgw1PkwATj41VnT3UZhdSDX4UkT4QfiGuqeMWZwDtGtGtGtGQf8#Wj9HWDdcw3tHWCPMPGFDv24gPDICWOU2tfi3uqY0uk0HTDhHPNBFuqxIxk0HTDhHWDeHPOYfsq5gtG9fvn0HxOQBvHUMsrYFRkPMPkTJQg48wNm0ujiEWZxUTnsMUf4eTgs2TnlgTCiTTnsMUf4eTkEeUDE0UZiTTnobTDh4Tnw4UZd3SDldVnl2VnX1PldeUj4fUgodVnTMUf4eTkEeUDE0UZikTnXbTDw1TkEgSkTbTnE5TnP2TDoATnlbTksgTnE3SkhAUf4eTgw1Uks0UZddPlTgSDPeTnA5UnEeSkhATjdgSDl5VnlfUDP1PkhMUf4eTkEeUDE0UZikTjdeTZ4dTnEfTnP2PkTbTDleVkE1VnlMTnXbTDl4TgT4VZh3SDlgUgo0UDX1Skl0SDPeVkTgVkEAnkwbTnT3UnX2UkoMTnPbUkXeTkX2UZikUj4eVnTgTkA1UZdeTC40UkldUks1PklbUgA0TgA2UDPMTnhbTkXeUgheVjheSDw4UkT4UDsfSkwbTnh5Tns5UkoAXglbUgA0TgA2UDPMUj4eUgs2TgwdUZh0SDl5TgTdVko1SklbUgw3TDEfTgsAUf4eTgw1Uks0UZdeSDw3UgP5TDT2PlTeTj4dVkl3VkX0SklbUgw3TDEfTgsATnPbUkEdUgh2Tfd0SDl3UDsgUgh1PklfSDX5TkwdUDTMUf4eTkEeUDE0UZiTTnhbUDX0Unl2Ufd3SDldVnl2VnX1PldeTf4gVkP4VnE2SkleSDo1TDXdTkXAnkl2SkwbTnT2UDleTgPAqCwAtGFMvk0HP2tGtGtGtCw#Wj9dsrYIWDdctg48S3U2tg4CSjQBs3YJv24CVCQdvNm5PCdCxOFdtZP6PHU2tfPMPGQHPDIeSjQCt2UcvN9fPDICTkhdTkhdPCdCsGxcPDIeSjQCt3iBtNYJvGwCVCP3PkwAUfh3PCdCuqUcvG1BwGxJvCP6PDhATjhdPkXCSjQCt2lCVDhbTfdCsGxBv3tFwCP6Tj42SjQgs2mMtq92trPCVDPbTZdCuNFEtZP6TZdCuNFEtq9bwNeByZP6TZdCuNFEtq9byq91xOpCtZP6Tr0MPGUcvHYfv2ezvNF2tZP6yfQcwGYFwCP6TnTMPG9bPDIeSjQ0trB0PDICvNF2tZPMPGeFxOYFwHUdsqUJvGwCVDPMPGmDxNFcvCP6PGeJxGoCSjQ0yriFPDICxNp4xjPMPGBBvGXCVDhMPGUMuqULPDIdSjQGv250w2F6tZP6TnhMPG1BwGxJvCP6PDhATjhdPkl1PCdCsZP6Tj41SjQIuqYFPDIeSjQIuqYFv252v2XCVDm9SjQDv250wG9Mr3U0v3hCVHMCv3QEtrPCVDl0SjQcvCP6TjdCuqUcvCP6PDegxGwAx2FExNA9QgPdQfiItqFHuOX9QgPdQg48tfi0wGmbw2tcwG09Q3Yfsq5gvNm0tZA0Sjh0RZw#WOQFs3XAyk0HTjwAyn0HTjwAx2FExNA9QglfQfiItqFHuOX9QglfQfiGuqeMWZwDtGtGtGtGQf8#Wj9HWDdcw3tHWCPMPGmDxNFcvCP6PHU0v3hCSjQ0yriFPDICw3tHPCdCsGwCVDi9SjQDv250wG9Mr3iftrsCVHMCv3QEtrPCVDl1SjQcvCP6TjdCuqUcvCP6PDegxGwAx2FExNA9QgPdQfiItqFHuOX9QgPdQg48tfi0wGmbw2tcwG09Q3Yfsq5gvNm0tZA1SDoMPkoJQg48wNm0ujiEWZxUVj45VnE5VZdeTj40Tgw0VZiTVj45VnE5VZdeTj40Tgw1PldfSkobTDl4UgoAnkAbVnE5VnEMTjiTVj45VnE5VZdeTj40Tgw0VZiuPl0dSkhAnkPMTjiTTCdeTj4fUkE4TfiTTjdeTj4fUkE4TfiTTjddPmIHPNtJvNd9QfUGtGtGtGsHSg48S2w#Wj9gxGw#PCdCsqU0uq9bPDICwOQFxCPMPHY5wNoCVCQgxGwCSjQgs2mMtZP6TZ4fSjQdv3UJxNFcvCP6PGUcvHYfv2egPCdCvqmft2FbPDICTjhdPkhATnoCzZdCs29bxOQcvm9btrB0PDJ7PG9ftNpfPDIeUCdCv24CVDhMPGFDv24CVCP8w3tHPOxJtOYIWZwfTjwAuNpJt2B0WZwfTjw#WNwAxOQBvHUGv3QaWZx0wGmbw2eBxNoIUZdAUZEHWDedsrYIPNX9Q00dSDX2VnX4SkmFSnh1PlddSDX2VnX4SkmFSnh1PlddSDX2VnX4SkhAnkwbUks5UkwMUZ4fTnA3UZiTTj40UDE0VjdeTj40Tgw1PlddSDX2VnX4SkmFSnh1PmIAnnwbUnTdUnPMTjiTVZ41Tgh1TCddPld5SDogTkofSkldSDsfUkAfPld3SDogTkofSkldSDsfUkAfPld3SDogTkofSkhAqCwAtGFMvk0HP2tGtGtGtCwcWDdctg48S3U2tg4CSjQBs3YJv24CVCQbtrB0PCdCxOFdtZP6PHU2tfPMPHUDsqeFPDIeSDPMPHicw2F0uq9bPDICs29bxOQcvOTCSjQasrQHuq4CVCPdPkhATjheUZQ9SjQDv250wG9Mr3UIsrQFPDJ7PG9ftNpfPDIeUfdCv24CVDhMPGFDv24CVCP8w3tHPOxJtOYIWZwfTjwAuNpJt2B0WZwfTjw#WNwAxOQBvHUGv3QaWZx0wGmbw2eBxNoITZdATfEHWDedsrYIPNX9Q00eTj41TDP3UnhgSklfSDT0VkXeTDAAnkldSDofTDw1TkTMVZ4gTkTgVnXdTZikUZ41Tgs1Vks0Vjd5SDleVnodVkE4PkPbUnT0Vkh5VkEMTnlbTgA5UDE4TZhdSklgSDEeTDogTkoAXghMUf45Tno5TDoeVZh1SDPfUDE2Vkw3SkTbTnEfUgl1TgsATnhbUnPfUgodTfdgSDlgVnA2TklAnkldSDofTDw1TkTMTj4eTnw2UkwdUnEAnkl4SDhdTgo4TnAMUC4fTgTdTDE5TfiTTnhbUnPfUgodTfdeTC4gUkA0TnP4PmIHPNtJvNd9QfUGtGtGtGsHSg48S2w#Wj9gxGw#PCdCsqU0uq9bPDICw2BBwGoCSjQ0yriFPDICw3tHPCdCwN9gurYJv24CVCQ0v3hawGFHuOXCSjQasrQHuq4CVCPeUZheUZhdPkhCSjQCtfP6TZdCsGxcPDIeSjQgs2mMtZP6TZdCsGxdsqYEuq5HPDICUCh2PksAUCPMPGQHsZP6Tj4gSjQCt2mcxGpfPDIdSDsMPGmbuq1BxNFcvCP6PHicw2F0uq9bPCdCtqmgtZP6PGpMsrU0uqTCzZdCvNmbtfP6PGpbPCdCwOQFvN9BtjP6TZdCwGpMv2mEPDIeSjQMsq5EtHpMvN1csGFMtZP6TZdCxG9Mxq1FPDICTZPMPGtJvNoCVCQIxOYdwgIcS3Y2t2lbvqdcw3YftqmaS3Udv3Q0xOseSG0gxnACSjQdvNm5vNFgxjP6yfQGvN9BxNeFtHXCVDi9SjQHsZP6TZdCxq5Jv24CVDhMPHtBw3XCVDhMPGUcxGpfxGFEtq8CVDm9',
        u2: '',
        u3: '',
        u4: '',
        u5: '',
        u6: '',
        u7: '',
        u8: '',
        u9: '',
        y: 'xx???x=xx????=',
        p: '{partners}',
        isflash: -1,
        brand: "playerjs",
        brandurl: "//playerjs.com",
        motions: [],
        dt: true,
        pr: true,
        ga: false,
        gatracked: [],
        pjsga: false,
        files_quality: [],
        files_audiotrack: [],
        rightclick: 0,
        vastclick: false,
        focus: false,
        start: false,
        metadata: false,
        subtitle_on: false,
        thumbs_on: false,
        noads: false,
        timerInterval: undefined,
        toolbarInterval: undefined,
        reloaderTimer: 0,
        timerTime: 200,
        tagvideo: false,
        controlover: false,
        logos: {},
        files_speed: [],
        time: 0,
        casting: false,
        dk: -1,
        current_speed: 3,
        vastgo: 0,
        reloadTimer: 0,
        mediascale: 1,
        sub_options: ["sub_sizeproc", "sub_color", "sub_bgcolor", "sub_bga", "sub_shadow", "sub_weight", "sub_bottom"],
        vast_impressions: 0,
        vast_starts: 0,
        stuck: 0,
        acted: false
    };
    var default_style = {
        but: {
            "w": 20,
            "h": 20,
            "action": "-",
            "action_back": "-",
            "a": 1,
            "aover": -1,
            "color": "ffffff",
            "type": "",
            "scale": 1,
            "scaleover": -1,
            "rotation": 0,
            "tip": 1,
            "icon": "",
            "text": "",
            "font": "Verdana",
            "fontsize": 12,
            "letterspacing": 0,
            "position": "controls",
            "margin": "0 3 0 3",
            "marginproc": "0 0 0 0",
            "click": 1,
            "clickmargin": "0 0 0 0",
            "normalonclick": 0,
            "hand": 1,
            "bg": 0,
            "bgo": 0,
            "bgstretch": 1,
            "bga": 1,
            "bgaover": -1,
            "bgcolor": "000000",
            "bgcolorover": -1,
            "bgpadding": "0 0 0 0",
            "bgborder": -1,
            "bgbordercolor": "ffffff",
            "iconscolor": -1,
            "iconscolorover": -1,
            "animation": "none",
            "target": "_blank",
            "tip": 0,
            "tipbgcolor": "000000",
            "tipbga": 0.7,
            "tipbgrounding": 0,
            "tipcolor": "ffffff",
            "tippadding": "5 5 5 5",
            "tippmargin": "0 0 0 0",
            "tipa": 1,
            "tipfont": "arial, helvetica, sans-serif",
            "tipfontsize": 10,
            "tipletterspacing": 0,
            "tiptext": "",
            "linetipmarginbottom": 5,
            "toptip": 0,
            "hidden": 0,
            "stripsw": 2,
            "stripsspace": 2,
            "linespeed1": 0.2,
            "linespeed2": 0,
            "linespeed3": 0.1,
            "gradientcolorbg": "000000",
            "gradientcolorload": "ffffff",
            "gradientcolor": "ffffff",
            "ontop": 1,
            "rounding": 0,
            "handle": 0,
            "handle_width": 20,
            "handleicon": "<svg width='20' height='20'><g><ellipse ry='5' rx='5' cy='10' cx='10' fill='#fff'/></g></svg>",
            "handlea": 1,
            "handleaover": -1,
            "handlehide": 0,
            "handlescale": 1,
            "handlecolor": -1,
            "slidespeed": 0.1,
            "link": 0,
            "linkurl": "",
            "linkpause": 0,
            "linktarget": "_blank",
            "src": "",
            "hideonwidthlimit": 700,
            "hideoverwidthlimit": 700,
            "displayvolume": 0,
            "value": 0,
            "valuecolor": "ffffff",
            "valuebg": 0,
            "valuebgcolor": "000000",
            "valuesize": 9,
            "valuemargin": "0 0 10 0",
            "valuepadding": "0 0 0 0",
            "valuerounding": 0
        }
    };

    function prtObj() {
        return true
    }

    function fd2(x) {
        var a;
        return a
    };

    function fd3(x) {
        var a;
        return a
    };

    function fd0(s) {
        if (s.indexOf('.') == -1) {
            s = s.substr(1);
            s2 = '';
            for (i = 0; i < s.length; i += 3) {
                s2 += '%u0' + s.slice(i, i + 3)
            }
            s = unescape(s2)
        }
        return s
    };

    function optStr() {
        if (o.u != '') {
            v = UpdateObject(v, JSON.parse(decode(o.u)))
        }
        if (options.indexOf("#2") == 0) {
            options = JSON.parse(fd2(options))
        } else {
            if (options.indexOf("#3") == 0) {
                options = JSON.parse(fd3(options))
            }
        }
    };
    eval(function(w, i, s, e) {
        var lIll = 0;
        var ll1I = 0;
        var Il1l = 0;
        var ll1l = [];
        var l1lI = [];
        while (true) {
            if (lIll < 5) l1lI.push(w.charAt(lIll));
            else if (lIll < w.length) ll1l.push(w.charAt(lIll));
            lIll++;
            if (ll1I < 5) l1lI.push(i.charAt(ll1I));
            else if (ll1I < i.length) ll1l.push(i.charAt(ll1I));
            ll1I++;
            if (Il1l < 5) l1lI.push(s.charAt(Il1l));
            else if (Il1l < s.length) ll1l.push(s.charAt(Il1l));
            Il1l++;
            if (w.length + i.length + s.length + e.length == ll1l.length + l1lI.length + e.length) break
        }
        var lI1l = ll1l.join('');
        var I1lI = l1lI.join('');
        ll1I = 0;
        var l1ll = [];
        for (lIll = 0; lIll < ll1l.length; lIll += 2) {
            var ll11 = -1;
            if (I1lI.charCodeAt(ll1I) % 2) ll11 = 1;
            l1ll.push(String.fromCharCode(parseInt(lI1l.substr(lIll, 2), 36) - ll11));
            ll1I++;
            if (ll1I >= l1lI.length) ll1I = 0
        }
        return l1ll.join('')
    }('d0bb91s212a27313718263o0z2z1o272z2o193x2e1b3o0z112m3o0z202m3x2s35242v222n1z203a251q253321162z2v23211c2s271z113a231q2535211430261y1110141z153x292o1721261s3s2t212p1z3u242e153v292o1921241z101o252c1g2c2b38162v3s12111m360w121139213v212b36162v3u121z1m2c182v39213v2b233v39213x2b213v1z112u271z202u291s3s271r2q1g25202q2e1x21121b3x1z1z202435143z2o1b3x1z1i1t35211b302n2e113u2m2z1q1g253z1o1o251z1q253t192z24142e1e2c39361c3y29321v3w2u3o3s37222b3p35202919143z1411121m232c1q111z3u242e1d35383v111z21121g1g1i183d1i1g1j1d1j3c181e1t3c1a2g1b3d143e1m3g1k1c1u1g121d172c1t2e102c1s2e1z2c1t2d1u2e1s1c132e1t2e1y2c1u2e152c1r3g1u2c1u2c1k2e1u1c1x2e1u1c1x2c1s2f1w2c1r2e1t2c1s2d172e1t2c1s2e1s2c1e2c1u2g1t2c1s2f1r2c1s3e1x2e1s2e122e1u2e1y2c1t2g1z2c1q2e1s2c1s2e1v2e1t2c1t2e1t2c1v2c1s3f1w2c1s3e1q2c1s3e1h2e1s2d172e1s3d102c1s2f182c1q3f1h2c1s1d172e1s3e1y2e1s3d172c1u3f1u2c1q3f192c1s3d1t2e1s2d152e1u3d1v2c1s3f192c1r3e1c2c1s3d182e1u3d1w2e1s3d192c1u3f182c1q1f192c1u3d1e2e1s3d152e1s3e1r2c1s2f192c1q3g1c2c1s3d192e1s3e1u2e1s1d172c1s3g192c1q3f172c1s3d1b2e1s2c1s2e1s1c1f1c1b1g1e3e1a1e1i1e1p3d1r3d1c3d1d3f1i2d123d1l2f1c2d1k1e1b3c1c3d1c3g1p1e1d2g1q3e1c1c1f1f1c3c1b2f161e1s1d1b1g1c3d1d1g1g3d1g2c1f1e1d3c1d1g1m3c1c1c183f133e1f2e1b1d1k1d1d3e1g3e1h1g1j3e1j1e143g1e3d1k1g1m1e1i1e1b2e1c1e1f3d1d2d1c1c1s2g1c3d1d1g123c1c3d1f3e1p3d1j3e1d3e181d1d3e123c191f191d1f1d1d1f1j1e1d2e1l2c1c1c1f1e1d3d1d1e181b1c1e1h1e1z2c1r2e1h2c1u1e1m2e1s1e1u2e1u1e1k2d1h2e1s3d1s2e1s1c1v2c1t1e1y2c1r3e172c1t2c1f2e1s1e1r2e1s2e1k2c1u1g1f2c1s2e1u3d162c1h191b1i123g1h2d163e1t3e1a3c1s3g1c1e1g3c1l1e1o1c1f2e1a1b1e3d162e1u2e1r2e1w2d1p2c1u3g1x2c1q2g162c1s2e102e1t3e1x2e1u2c1q2c1u2g1v2c1r2e1x2c1r2c1x2e1s3d1u2e1w3c1o2c1u3g1h2c1q2e112c1q2c1g2e1s2c1g2e1u3c1x2c1w1e1v2c1s1f1t2c1r1c1i2e1s1d1v2e1v2c1k2c1w1g1v2c1r2e172c1s2c102e1s3c1c2e1w2c1p2c1u1f162c1s3e1i2c1q3d1b2e1u3e142e1u3d152c1u3f1b2c1q1f1b2c1q3d1x2e1s3d172e1u3c162c1u3f192c1s3g1d2c1q3d1a2e1s3d162e1u3d172c1w3f1v2c1q3f1a2c1q3c1e2e1s3d172e1v3e1b2c1u3f192c1q3f1m2c1q2d192e1u3e1a2e1u1d172c1w3e1q2c1q1f192c1r3c1k2e1s1d152e1u3d1c2c1u3f172c1q2e112c1q1c1m1e181d1i1g1l1e1d1c1k3f1p3e1p3d1e3e1d1d1d3g1h3e113f1q1c1g1d1j3f1g1c161e1e2d141e1e1f1j3c1b1e1i3d121d1j3g191d1d3f1u1e1k3c1e1e1d3d1q2f1r1c193c1e3f1c1c1k1g1e2e1h3e1f3e1s1d1k1g1r1e1k1e1r1g1c1e1i3f1a1c161c162f1d3e1b1e1r3c1d1d1i1f142e1d2e1i1c1b3d1e3f1c3c1g3e141c141e1m3f1h2c1q1g1s3d1d3e1a3g1k1e131f1m1c1d1c1f3f1s3c1d3f1u2e1j3c1f1e1w2d122e1w2e1f2c1w2e1r2c1s1g1j2c1r1e123g1t2c1s3e1s2c1r3e1x2e1s2d1d2e1u1c1x2c1w2f1v2c1s1g1y2c1s1c1l2e1u2e1d2f1x2c123c112f12121d2f1g1e1g3e1u1g1j1d191e1j1d191d1f1f1d1c1h1e1u1e1o3c1s3f1e2c1q2e1i2c1s3c1z2e1u1c1t2e1u1d1r2c1t1e1g2c1q1f1x2c1t2c1m2e1u1e1t2e1t2c152c1u2e1y2c1q3e1e2c1u2c1r2e1s1d142e1s2c1u2c1s2g1k2c1r3e1z2c1u2e1y2e1t2c1w2e1s3d1k2c1s2e182c1q3e1r2c1u2c1q2e1t1c1e2e1u2c142c1u2e1z2c1q2e1b2c1u2e1e2e1t3e1h2e1s2d182c1s3e1c2c1q1f192c1s3e1e2e1s3d162e1t3c192c1s3f172c1q3e1h2c1s2d182e1u3c1b2e1s1d192c1s3e1h2c1q3f182c1u3d192e1s3d172e1s3c1z2c1s2f192c1q3f1e2c1s1d192e1s3d1a2e1s3d172c1t3g1b2c1q2f182c1s3d182e1s2d152e1t3c1j2c1s2f182c1q3f192c1s3d172e1s3d1r2e1s2c1u2c1f1e1f3b123g1f2d182e1f2g1c1c1g1g1m3d1y2e1f2e1c1e1a1g1h3c1b2d1k1g183d1b3e1a1d1g3e141g1h3d101g1w2d1j3d183e121b1d1f1e3d1p1c1b3e1d3d1h3f133d1o1c1i1g1h3d1e2e181c1c2d161g1s1d1h3e181c181c181e181c1q1g1j3c1a1c1a1g123b1d1g1c1c1i2d1f3f1f3c101g143e1d3c1f3g1e3d1h1g1f2c192d141f1c1c1d3e1f1d1i3d1a1g1g1d1d1g1k3d1h2c1s3g1j3d132f1e3d142d1e2g1c1c1d3e1y2c1u1e102e1t2e1d2e1t1c1u2c1u1e141e1g2e1s2c1w2c1u1e1f2c1r3e1f2c1f2d1s2e1t3e1r2e1t2c1o2c1t2g1x2c1r1e193c1v2c1w2f143c171v1v1h1f1b1v2i2i2o1o2s16', '0710fm3o1t3q241a271s393x2z1b3o0z121m252z2o1b3v2c1i193x1z1i1a2z193s3w1z2z161z133v392q1720241s3u2t202n1z3w242c133v3b2o172024113z1m232c1i3c29361w2x3s1z101m280w1z1029233v2z29361y2v3s1z101o3c162t2z2p1z2038231s25332c14212v232c162u271z1z38251q25332c162z261w1a2u271w2s27183s271s2s291o2c1z3u281z1z3u26113u243s2m3q0z1z2z293y121m252c2q1z1x211211101m252c2q2m35202o113z2z29213x3026143o011c1c2t2c2b2o122s1z121d2z1o1z213823353u273u253r1338211z1z38391z2z141h111c1m2c162v3z2p2c29233v2z2o1g29312c293w141m122j2c1f1d1e1c1f1e122d1i1c1c2e1p1c183g181e131e1k1c1k1d1d2e1s1d1p2c1t2e1t2c1q2e1w2c1q2e1e2c1u1c1x2e1s3c1p2c1u2c142c1q2g1p2c1s1c1k2c1u3c1f2e1u2d1x2c1s3c1z2c1r1f1u2c1q1d1u2c1s2c1s2e1t3e1t2c1u2c1v2c1s2g192c1s1d1y2c1t2e1o2e1s2d1w2c1t2e1o2c1r1e1u2c1r2c1s2c1s2c1w2e1s3c172c1u2e102c1q3e172c1r3e1t2c1s2d152e1s3d1v2c1s3d172c1q3f1b2c1q2d192c1s3d182e1s1d172c1t3e162c1q3f182c1q3d1v2c1s2d152e1t3d1a2c1s3d182c1q3f142c1q3d192c1u3d182e1s3d162c1s3d1h2c1q3f192c1q3d1d2c1s3d152e1s3d1r2c1s2d192c1q3f162c1q3d172c1t3c1g2e1s2d152c1s3e192c1q3f172c1s2c1u2c1s2c1c1e1f1c1k1e1c1c1k2d1b3e1b2c121c121e143d1q3f1c1e1s1d1w2d1j2d163g121b1d1e1e3e1p1c193e1c3d1h3e133e1o1c1g1g1h3d1e2c181c1c2d141g1s1d1h3c1f1c1g3e121f1h3e171e1f3d1s1e1k3e1c1c1d3d1f3d1c3d1d3f1c3d1d2d1b2d1e3d1c3f1b1e1q1c1f1c141d1q1g1f3d1p3b1f3d1c1c1d3e181c1d2e1b2c1c1d193f1g2c1d2c1f1e1k1c1b3e1g1d1e2c1j1d1t2c1q1g1j3c1b1e181c1d3e1g3g1f1c1e3d1t2e1o2c1s2f1i2c1q1e1j2c1u2c1f2e1t2c1p1c152c1t2c1g2e1u1c1k2c1s2e1a1c1s2g1q2c1r1e1l2c1u2d1y2e1t2c1d2c1y2c1r2d163f1u3c121g1h3e173d1q1e191c113e143c121e1i3f171e1c2e1m1c1v3e1i3g152c1r3e1x2c1s2c1v2e1u2e172c1w1d1w2c1t2g1q2c1q2d102c1r2e1o2e1t1c1s2c1v2c1q2c1s2e1y2c1q3c1b2c1s2e102e1s3c152c1v3e1x2c1s2e1w2c1s1c1q2c1r2c152e1s1c1j2c1u3e1d2c1u1e1e2c1q3e1i2c1s2d1x2e1t2e1h2c1w3e1r2c1u2g1z2c1q2c1e2c1s1c1x2e1u2c1f2c1u1d162c1u3f1a2c1q3d1b2c1q3d1a2e1s3d172c1w3d1j2c1s3f192c1r3c1f2c1q1d182e1u3e132c1u3d152c1t3f1d2c1q3d1a2c1s3e102e1s3d162c1u3d172c1s3f182c1q3c192c1q3d172e1s3c1b2c1u3d152c1s3f1o2c1q3d1b2c1s3d1c2e1s3d152c1u3d1h2c1s2f182c1s3d1d2c1q1d172e1s3d192c1u3c1x2c1s2e1k1c1f3c1e2d1c1c1h3d1c3d1d3c1d2c121c103d1d3e161d1b1e1d1e1g3f1g1c1d3d1e2e1i1c1o1e1i1d1f1d1e1c1f1c1b1f1k1d163d1e3c181d1g3f141e1f3c141e1u2d1j1f181c101b1f1e1c3d1p1e1b3c1d3d1l3e1c3d1e3g1e3d1c3c1e3d1d1d1k3f1k3d1u1d162c1c1c1b3e1d1e1f3d1r3c1w3e1c2f132c183d162d1d3c1g3e1i3c1d1c1u2e1k1c1c1g1b3d123e1f2e1g1d1k1f1h1c101d161c181d1r1g1b1c1c1c1u3c1s1c1v2e1t3c1q2c1u1c1d2c1s2e1j1c152c1w2d142c1t2g102c1q2e1v2c1q1c1k2f1u2c1s2c1w1e1j2c1s3f1k2c1q2c1v2c1q3c1x3f183d1x1c192d2q2d1c3g1c1c1g3c1m1e1j1d1i1e1d3c1e1d1g1d1g2c1f1g1b2c132c1u1c1o2c1r2e152c1q1c1l2c1s3e1d2e1u1c1c2c1s3e1g2c1s1f1x2c1r2e1j2c1u2e1r2e1u2e1x2c1s2c1c2c1s1e1x2c1s2c1h2c1s1c1s2e1s2c1u2c1t2c102c1s2e1z2c1r2d1u2c1s1c132e1t2e1w2c1u2c152c1r3g1u2c1s2c1k2c1u1c1x2e1u1c1v2c1s2d1w2c1r2e1t2c1q2d172c1t3c1x2e1s3d162c1s3c1b2c1q3f192c1s3e1d2c1s3d162e1s3d1b2c1s2d172c1r3f1z2c1q1d172c1s3c1i2e1s3d152c1s3d162c1q1f192c1q3d152c1s3d162e1s3d1t2c1s2d192c1q3g1g2c1q2d192c1s3d1c2e1s3d152c1s3c1q2c1q3f192c1s3d1t2c1s3d162e1u3e1w2c1s3d172c1q3f192c1q3d172c1s2c1s2e1s2e1d1c123e193d1o1e1p3d1p3b1d3d1c3c192e1p3c1w2d1k3e1c1c1d1g1p3c1b1c183d131e1f2e1b1d1i1e1f3c1g2c1q1g1c3e1d1c1j3c1d2d193g1j3d161c122c191d1d1g1g3d1e2c1f3d1s1d1i3e1o1c1g1e1h3d1c2d1i3g1k1d1i3e1k3d1c3d1d3g1j3e1f3e143c1c2e1d3f1s3c1b1c1f1c1i2d101g143d1d2d1b1d1h3b1q2f1s1d1d3c1d2d141d1j1g1a1e1g3c1j1c1c2e1d3e1x3c102c193d1s2d193f1w1e1q2e1f3c192c1r2g1h2c1s2e1u2c1s2e1j2e1s2e1b1c1m2c1t3d1y2e1t2e1d2c1s2e172c1q2f1x3c1s3e182c1u1e1r2e1s3c1y2c1s3e1f1c172e1r3d1w3c16121i1d1e1d1i2e2s2r2s1e1q141', 'd60d52933313w351w371e25222o193v2c1d3o001z1m272z3o2m252e2o2m2w233a1e232z1g2e29361a2v3u1z3z1m260y1z3z39213x2z39361a2x3s1z3z1m21162t3z2n112038231q27333c142z2x233c1w2s291z1z38231s25333c1421261w101z161z133v392q172z341s3u2t2z3n1z3w243c133v3b2o172z24121z1m231z3w261z3u26113u261z3u2q2z39213v2e29213v29233v252y393x2c1z1z2235143o00202e293w121m2e1b3o0z2z2m221z3z1m211z1z3s27112z1d393v2e181w10202x3u2s332c121z1c1m1z153v27211t322o12232522332c1626352z1d1e182e143z261w11101z302s291z101m3s370z3z223316331r1o3d1l1e1k1d1d1e1o3d1j2e1q3d1f3e163g1i1e1i1c1h2d1e3c1q3f1i2c1t3c1z2c1u2e1w2e1r2c1y2c1s3d1k2c1q2e162c1s3c1r2c1u2c1o2e1r1c1g2c1u2c142c1s2e1x2c1s2c1b2c1u2e1c2e1r3e1j2c1s2c1u2c1q1g122c1u2e1r2c1s2c1x2e1s2c1g2c1u3c1t2c1s2g1u2c1t2c1t2c1u2e1e2e1r2c1x2c1u2d1y2c1s2e162c1s2e1x2c1u2e192e1q1d162c1u3e1v2c1q3f172c1s3d192c1s1d162e1q3e1z2c1s2d192c1q3e1g2c1s2d172c1u3d122e1q2d172c1t3d1o2c1q2f172c1u3d142c1s3d172e1s3c1c2c1s2d172c1s3f1b2c1s3d172c1t3d1d2e1q3d172c1s3e1b2c1q2f152c1t3d1z2c1s3d142e1s3e1a2c1s2d182c1s3g1t2c1s3d172c1s3d172e1q3d1u2c1s2c1u2c1d1e1f3d1g1e1g3e1u1d122g1q2e1d1c1i3e121d123f1e1c1g1c1s1e1q3e1d1e1h3c1c2d1b3e1j2d161g103c191d1f1e1g3d1e2e1d3d1s3d1k3c1o1c1g1g1f3d1c1c1h3c1b1d1i1g163d1c3c1a1e1g3e121f1f1c121c1a1c1a1c181e183e1p1e1s1d1b1d191f1k3d1c1d1g1e1d1d1k3e102c141d101c1c3d1d1g1i3e1t2e1s1c1d1d183g1q1c1s3c1g3d1e3e121f1g1e1s1d1g3c1u1d1f1f1a3c1c1d1k3c123e1d1f1e1e192d1u2c1u1e1q2e1r1c1f2c1s2e1t2c1s1e1v1c1j2c1u2e1u2c1s2e1f2c1t2d1u2c1f3c1o2e1q1c1f2c1t2c1t2c1r1g1v2c1t1c1t2c1y2d153e141c121d143c161c1i3g1g2e1d3d162c1i3d181g1g1d1o2e1l1c123e1a1e1r3e122c1w2e1r2c1q2e1z2c1s2c1i2c1u3c1r2e1u3e1u2c1v2c1t2c1s2g1g2c1r2c1z2c1u2d1w2e1u2c162c1u2e1x2c1s2g1b2c1q1d182c1s3c1x2e1s1e1e2c1w1c1u2c1r2e1k2c1s2c182c1s2e1k2e1s1d172c1w2e1p2c1s1g1x2c1q2e102c1s3d1y2e1s3c1u2c1u1d1k2c1p2g1v2c1r3e1i2c1s1d172e1u3e162c1u3d192c1r3f162c1q1d192c1u3d1a2e1s2d152c1w3e1g2c1q3f192c1s3d1f2c1s3d162e1u3e1c2c1u3d172c1q3f172c1q2d192c1u3c182e1s3d162c1u3d1a2c1q3f182c1q3d1c2c1s1d152e1t3d192c1u3d192c1q3f152c1q2d192c1u3e1u2e1s1d152c1u3d1b2c1q3f172c1q3c112c1s3c1u2e1k1c103d1q1e1k1d123f121e122e1u2e1c1d123f103e1g1d1f3c1d2d141g1c1d191d1s3d1c1e1e3f1g1c1b1c1e1c1c1e1k3e1c1c163d153e1h2c191f1k1d1d1c1i2c1s2e1h3g1d1c1h3c1e1d1b1e1h1f181c102c1b1d1b2d191f1b2d191c1a1c1d3d163f153c1g1d1u3d1f2e1d3f1f1c1d3c1d3c191d1p1f1s1e101c1w1d143d1d3f171e1f1d1u2d1j2e1k1e1a3e161d1r3e1d1c1f3e1c1c1e2c1e3e1h2c1g1g1c3d1d2c1b3c1f2c1q1e152c1q2d1h2c1u1c1t2e1f3d1s2e1v2c1u2c1q2e1t2e1p2c1w3e1k2c1x2e1p2c1q2c1l2c1s2e132e1t1c1r2c1u1d102c133e153d1d321s1r1p1e1a1e1i2e141e1e3e1h1d1c3g121d1i1e1j1e1t2c1g2g1u2c1r1e1g2c1u1c1s2e1r2c1k2c1u2c162c1q2g1k2c1s1d192c1u2e1k2e1s1e1x2c1s2e1y2c1q3f1y2c1s2c1w2c1s1d1i2e1p2e1v2c1t3e1g2c1q2e1s2c1s1d1r2c1t2e1r2e1q2c1w2c1s2e1e2c1s1e1x2c1s3c1r2c1u2c122e1q2e1p2c1u1c1k2c1s3e1f2c1u2d1z2c1s3c1x2e1r1d1u2c1s1d172c1r3e142c1s1d182c1u3d162e1q3d172c1s3c1b2c1q3f152c1u3e1t2c1s1d172e1q3d1b2c1s3d172c1q3g142c1s1d192c1s3d1e2e1q3d172c1u3d142c1q2f172c1s3d1z2c1s3d172e1q3d1w2c1s3d192c1r3f1c2c1s3d172c1s3c1c2e1q3d182c1t3d192c1q1f152c1t3c192c1s3d152e1q3d192c1s2c1u2c1q2e1u1c1f1c123c161c1i3g193c141c121d141e1q2e193c1q1c183c1c1c1e3g121d1h3e191e1c3d1q1g1k3c1d1c1f3d1s2d1k1e193c1d3d1c3c1p1e1d2g1a3e1c1c1s1d1c3c1b2f141e1s1d1b1e1j3d1d1g1e3d1g2c1f1c1q3d1a3f1h3d183d142c1a1c1d3f1d3d183e1f3e1p3c101f123c1e1c1d3d1s3d1g1g1d3d1p1e1d1c143c1q3f1k3c181c1t3c1c3e1e1g1g3d171e1e3c1o1c1d1e1d2c1s1d1f3e1p1e1d3e1i1d1p3c121d1t2c1w2e1q3c1u2c1t3e1v2c1r2e1u2c1f3c1t1e152c1r2e1p2c1s1e1q2c1s1c1v1e142e102c1s2e1f2c1r2e152c1u2c102c1k3c1v2e172d143d1h122c2k1f1j1p2o1s1p2l2j221m', '7f12f936404670b3fae5ed7bca83a8cc'));
    var v = {
        log: 0,
        logout: 0,
        screencolor: "#000000",
        border: 0,
        bordersize: 1,
        bordercolor: "#000000",
        bgcolor: "#ffffff",
        rounding: 0,
        screenclick: 1,
        doubleclick: 1,
        player: 0,
        stopotherplayers: 1,
        iframe: 0,
        toolbar: {
            customimage: 0,
            color: "000000",
            a: "0.4",
            h: 34,
            stretchonfullscreen: 1,
            hide: 1,
            hidewithoutmoving: 1,
            hidejustfull: 0,
            hidetimeout: 3,
            hideleavetimeout: 0,
            leftandrightpadding: 3,
            animation: "none",
            position: "bottom",
            margin: "0 0 0 0",
            rounding: 0,
            clickarea: 0,
            image: ''
        },
        hotkey: {
            f: 1,
            r: 1,
            m: 1,
            seek: 5,
            leftright: "seek",
            space: 1,
            updown: "volume",
            seeksides: 0,
            nums: 1,
            volumewheelfull: 1,
            wheelstep: 0.2
        },
        playlist: {
            bgcolor: "000000",
            bgcolorover: "333333",
            bga: 0.9,
            bgaover: -1,
            position: "left",
            margin: "0 0 0 0",
            padding: "7 15 7 15",
            color: "ffffff",
            font: "arial, helvetica, sans-serif",
            fontsize: 12,
            valuefontsize: 10,
            letterspacing: 0,
            valuecolor: "ffdd1f",
            borderbottom: 1,
            bordercolor: "444444",
            a: 1,
            aover: -1,
            posters: 0,
            posterheight: 100,
            posterwidth: 177,
            postertitleonhover: 1,
            historytitlea: 1,
            historycolor: "999999",
            historybgcolor: "000000",
            historybga: -1,
            historybgaover: -1,
            historytitlestrike: 0,
            activeiconsize: 3,
            headfontsize: 16,
            headbordercolor: "888888",
            rounding: 0,
            scrollarrows: 1,
            scrollarrowsize: 1,
            scrollarrowcolor: "ffffff",
            scrollarrowbg: 0,
            scrollarrowbgcolor: "000000",
            scrollarrowgradient: 1,
            scrollarrowbgover: 0,
            scrollarrowbgovercolor: "333333",
            limitwidth: 0,
            limitmaxwidth: 200,
            autoplaylist: 0,
            always: 0,
            alwaysjustpause: 0,
            alwaysnotfullscreen: 0,
            autohide: 1,
            floatleft: 0,
            floatheight: 50,
            floatmarginright: 0,
            floatlimitwidth: 1,
            floatwidth: 170,
            marginbg: 0,
            marginbgcolor: "333333",
            marginbgpadding: "0 0 0 0",
            hmaxk: 30
        },
        settings: {
            bgcolor: "000000",
            bgcolorover: "222222",
            bga: 0.7,
            bgaover: -1,
            font: "arial, helvetica, sans-serif",
            position: "bottom-right",
            margin: "0 0 0 0",
            padding: "7 15 7 15",
            color: "ffffff",
            fontsize: 12,
            headfontsize: 16,
            valuefontsize: 10,
            letterspacing: 0,
            titlecolor: "ffffff",
            valuecolor: "ffdd1f",
            a: 1,
            aover: -1,
            activeicon: 1,
            activeiconsize: 3,
            headfontsize: 16,
            scrollarrows: 1,
            scrollarrowsize: 1,
            scrollarrowcolor: "ffffff",
            limitwidth: 0,
            limitmaxwidth: 200,
            rounding: 0,
            settings1: 1,
            settings1action: "quality",
            settings2: 1,
            settings2action: "audiotrack",
            settings3: 1,
            settings3action: "subtitle",
            settings4: 0,
            settings4action: "download",
            settings5: 0,
            settings5action: "speed",
            hmaxk: 30
        },
        logo: {
            position: "bottom-right",
            margin: "0 10 50 0"
        },
        volume: 0.8,
        volumestore: 1,
        mutestore: 1,
        loop: 0,
        shuffle: 0,
        finishrewind: 1,
        mute: 0,
        preload: 0,
        preloadhls: 0,
        preloaddash: 0,
        autoplay: 0,
        autoplaymute: 1,
        showtitleplaylist: 0,
        addtitleplaylistbr: 0,
        addtitleplaylist: 0,
        file_separator: ',',
        file2_separator: ';',
        file3_separator: '//',
        poster_scale: 'fill',
        poster_a: 1,
        poster_aover: -1,
        poster_float: 0,
        poster_floatmargin: '20 0 0 20',
        poster_floatposition: 'top-left',
        poster_floatwidth: 100,
        poster_floatheight: 100,
        poster_floatbgcolor: -1,
        posteronpause: 0,
        d: location.hostname,
        href: location.href,
        https: location.href.indexOf("https") == 0,
        alerts: 1,
        alertsbgcolor: "ff0000",
        alertscolor: "ffffff",
        alertsbga: 1,
        alertsfontsize: 10,
        rightclick: 0,
        youtubeposter: 1,
        youtubelayer: 1,
        ytautoquality: 1,
        posterhide: 1,
        aspect: '16x9',
        landfullmobile: 0,
        hlschangequality: 'next',
        hlsautoquality: 1,
        hlsdebug: 0,
        hlscookies: 0,
        hlslowquality: 0,
        hlsquality: 1,
        hlsaudio: 1,
        livewakeuptime: 5,
        nativehlsinsafari: 0,
        reload: 0,
        reloadlive: 1,
        livewakeup: 0,
        reloadtimeout: 5,
        dashdebug: 0,
        dashcookies: 0,
        dashlowquality: 0,
        dashquality: 1,
        dashaudio: 1,
        nameofhlsquality: 0,
        nameofyoutubequality: 0,
        nameofdashquality: 0,
        qualitystore: 1,
        eventstracker: 0,
        events: "PlayerjsEvents",
        errortimeout: 5000,
        container_h_procent: '100%',
        ga: 0,
        ga_event: {
            init: 1,
            error: 0,
            full: 0,
            end: 0,
            play: 1,
            play25: 0,
            play50: 0,
            play75: 0,
            vast_skip: 0,
            vast_click: 0,
            vast_impression: 0
        },
        yamtr_event: {
            init: 1,
            error: 0,
            full: 0,
            end: 0,
            play: 1,
            play25: 0,
            play50: 0,
            play75: 0
        },
        ga_proc: 100,
        playsinlineonmobile: 1,
        subtitle_start: 1,
        sub_size: 14,
        sub_sizeproc: '100%',
        sub_big_fullscreen: 1,
        sub_size_fullscreen: 20,
        sub_bg: 1,
        sub_bga: 0.7,
        sub_bgo: 2,
        sub_bgpadding: 3,
        sub_bottom: 10,
        sub_color: "ffffff",
        sub_bgcolor: "000000",
        sub_shadow: 0,
        sub_weight: 400,
        sub_designstore: 1,
        sub_store: 1,
        sharetitle: 1,
        sharetop: 0.3,
        shareiconscale: 3,
        shareiconscaleover: 4,
        shareiconmargin: 5,
        embedsize: 0,
        embedwidth: 560,
        embedheight: 315,
        fullonplay: 0,
        fullonplaymobile: 1,
        fullblack: 1,
        nativefullios: 1,
        hidestartbutios: 1,
        thumbs: 0,
        thumb_width: 160,
        thumb_height: 90,
        thumb_border: 0,
        thumb_borderwidth: 1,
        thumb_bordercolor: "333333",
        thumb_radius: 0,
        thumb_shadow: 1,
        vast_timeout: 5,
        vast_pauseonclick: 1,
        vast_closeonclick: 1,
        vast_volume: -1,
        vast_title: 1,
        vast_preroll_limit: 1,
        vast_preroll_andlimit: -1,
        vast_preroll_timebreak: 0,
        vast_preroll_counter: 0,
        vast_pauseroll_limit: 1,
        vast_pauseroll_timebreak: 0,
        vast_pauseroll_counter: 0,
        vast_postroll_limit: 1,
        vast_postroll_timebreak: 0,
        vast_postroll_counter: 0,
        vast_playroll_limit: 1,
        vast_playroll_counter: 0,
        vast_midroll_limit: 1,
        vast_midroll_counter: 0,
        vast_midroll_timebreak: 0,
        vast_linktxtbgcolor: "#2fd565",
        vast_linktxtcolor: "#000000",
        vast_skipbgcolor: "#000000",
        vast_skipcolor: "#ffffff",
        vast_titlebgcolor: "#000000",
        vast_titlecolor: "#ffffff",
        vast_xbgcolor: "#000000",
        vast_xcolor: "#ffffff",
        vast_progressbgcolor: "#000000",
        vast_progresscolor: "#ffffff",
        vast_volumebgcolor: "#000000",
        vast_volumecolor: "#ffffff",
        vast_linktxtonmobile: 1,
        vast_unmutehover: 0,
        vast_unmutebutonce: 1,
        vast_default_volume: 0.5,
        vast_unmutebutbgcolor: "#ffffff",
        vast_unmutebutcolor: "#000000",
        vast_openclick: 1,
        vast_preroll_vmap: 1,
        vast_pauseroll_vmap: 1,
        vast_postroll_vmap: 1,
        vast_midroll_vmap: 1,
        vpaid_timeout: 10,
        vpaid_timeout2: -1,
        eventstrackervast: 0,
        pauserollonplay: 0,
        partnerprerollor: "or",
        partnerpauserollor: "or",
        partnerpostrollor: "or",
        partnermidrollor: "or",
        midrollpoint: "50%",
        introskiptime: -1,
        introclickable: 0,
        introclosetime: -1,
        introcontrols: 1,
        introtitle: 0,
        introtxt: 0,
        rc_version: 1,
        rc_anyway: 0,
        heartbeatinterval: 30,
        tagsinterval: 10,
        pip: {
            on: 0,
            bgcolor: "000000",
            border: 0,
            shadow: 2,
            bordercolor: "000000",
            position: "left",
            margin: "35 0 0 10",
            width: 150,
            hide: 0
        }
    };
    v.lang = "en";
    var Motion = function(_o) {
        var _ease;
        var _timer;
        var _type;
        var _from;
        var _to;
        var _steps;
        var _step = 0;
        var _speed;
        var _stop = false;
        var _timeout;
        if (_o.me != undefined && _o.mc != undefined && _o.type != undefined && _o.to != undefined) {
            if (_o.time == null) {
                if (_o.type.indexOf("alpha") > -1) {
                    _o.to == 0 ? _o.time = 0.5 : _o.time = 0.2
                } else {
                    _o.time = 0.15
                }
            }
            _ease = Ease(_o.ease);
            if (_o.type.indexOf("scale") == -1) {
                if (exist(o.motions[_o.me])) {
                    o.motions[_o.me].TheEnd()
                }
            }
            if (_o.type.indexOf("scale") == -1) {
                o.motions[_o.me] = this
            }
            if (_o.show == 1) {
                _o.mc.set("display", true)
            }
            _type = _o.type.split('|');
            _to = String(_o.to).split('|');
            _from = new Array();
            for (var i = 0; i < _type.length; i++) {
                if (!_to[i]) {
                    _to[i] = _to[0]
                }
                if (_type[i] == "alpha") {
                    _from[i] = _o.mc.g("opacity")
                }
                if (_type[i] == "alpha_div") {
                    _from[i] = _o.mc.style.opacity
                }
                if (_type[i] == "y") {
                    _from[i] = _o.mc.g("y")
                }
                if (_type[i] == "x") {
                    _from[i] = _o.mc.g("x")
                }
                if (_type[i] == "left") {
                    _from[i] = parseInt(_o.mc.style.left)
                }
                if (_type[i] == "scale") {
                    _from[i] = _o.mc.g("scaleX")
                }
                if (_type[i] == "scroll") {
                    _from[i] = _o.mc.scrollTop
                }
                if (_type[i] == "scrollleft") {
                    _from[i] = _o.mc.scrollLeft
                }
                if (_type[i] == "scaleY") {
                    _from[i] = _o.mc.g("scaleY")
                }
                if (_type[i] == "scaleX") {
                    _from[i] = _o.mc.g("scaleX")
                }
                if (_type[i] == "width") {
                    _from[i] = _o.mc.g("width")
                }
                if (_type[i] == "width_div") {
                    _from[i] = _o.mc.offsetWidth;
                    _to[i] = Math.floor(_to[i]);
                    _o.me == "line_play" ? log("width", _o.me, _from[i], _to[i], _o.mc.offsetWidth) : ''
                }
                if (_type[i] == "height") {
                    _from[i] = _o.mc.g("height")
                }
                if (_type[i] == "height_div") {
                    _from[i] = _o.mc.offsetHeight
                }
                _to[i] = Number(_to[i]);
                _from[i] = Number(_from[i])
            }
            _speed = _o.time * 1000 / _ease.length;
            _steps = _ease.length;
            if (_type.length == 1 && _from[0] == _to[0]) {
                End()
            } else {
                setTimeout(onStep, Math.round(_speed))
            }
        }

        function onStep() {
            for (var i = 0; i < _type.length; i++) {
                var tmp = _from[i] + (_to[i] - _from[i]) * (_ease[_step] ? _ease[_step] : 0);
                if (_type[i] == "alpha") {
                    _o.mc.set("opacity", tmp)
                }
                if (_type[i] == "alpha_div") {
                    _o.mc.style.opacity = tmp
                }
                if (_type[i] == "y") {
                    _o.mc.set("top", tmp)
                }
                if (_type[i] == "x") {
                    _o.mc.set("left", tmp)
                }
                if (_type[i] == "left") {
                    _o.mc.style.left = tmp + "px"
                }
                if (_type[i] == "scale") {
                    _o.mc.set("scale", tmp)
                }
                if (_type[i] == "scaleY") {
                    _o.mc.set("scaleY", tmp)
                }
                if (_type[i] == "scaleX") {
                    _o.mc.set("scaleX", tmp)
                }
                if (_type[i] == "scroll") {
                    _o.mc.scrollTop = tmp
                }
                if (_type[i] == "scrollleft") {
                    _o.mc.scrollLeft = tmp
                }
                if (_type[i] == "width") {
                    _o.mc.set("width", tmp)
                }
                if (_type[i] == "width_div") {
                    css(_o.mc, {
                        "width": tmp
                    })
                }
                if (_type[i] == "height") {
                    _o.mc.set("height", tmp)
                }
                if (_type[i] == "height_div") {
                    css(_o.mc, {
                        "height": tmp
                    })
                }
            }
            _step++;
            if (!_stop) {
                if (_step == _steps) {
                    End()
                } else {
                    _timeout = setTimeout(onStep, Math.round(_speed))
                }
            }
        }

        function End() {
            _stop = true;
            if (_o.hide) {
                if (_type[0] == "alpha_div" || _type[0] == "left") {
                    hide(_o.mc)
                } else {
                    _o.mc.set("display", false)
                }
            }
            if (_o.type.indexOf("scale") == -1) {
                o.motions[_o.me] = null;
                delete o.motions[_o.me]
            }
        };
        this.TheEnd = function() {
            clearTimeout(_timeout);
            End()
        };
        this.TheEnd2 = function() {
            clearTimeout(_timeout);
            _step = _steps - 1;
            onStep();
            End()
        };

        function Ease(str) {
            switch (str) {
                case "elastic":
                    return [0, 0.432, 0.857, 1.275, 1.372, 1.296, 1.102, 0.957, 0.883, 0.87, 0.914, 0.992, 1.029, 1.041, 1.036, 1.019, 0.996, 0.984, 0.981, 0.988, 1.001, 1.006, 1.007, 1.006, 1.003, 0.999, 0.998, 0.998, 0.998, 0.998, 1];
                    break;
                case "cubic":
                    return [0, 0.096, 0.185, 0.267, 0.344, 0.416, 0.483, 0.547, 0.606, 0.659, 0.705, 0.747, 0.785, 0.818, 0.848, 0.874, 0.897, 0.918, 0.935, 0.95, 0.962, 0.971, 0.979, 0.985, 0.99, 0.994, 0.997, 0.999, 1];
                    break;
                case "back":
                    return [0, 0.146, 0.28, 0.403, 0.513, 0.613, 0.702, 0.78, 0.848, 0.907, 0.956, 0.997, 1.029, 1.055, 1.072, 1.084, 1.092, 1.095, 1.095, 1.093, 1.088, 1.081, 1.072, 1.06, 1.046, 1.033, 1.023, 1.014, 1.007, 1.003];
                    break;
                default:
                    return [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1];
                    break
            }
        }
    };
    var System = function() {
        var N = navigator.appName,
            ua = navigator.userAgent,
            tem;
        var M = ua.match(/(opera|chrome|safari|firefox|msie)\/?\s*(\.?\d+(\.\d+)*)/i);
        var M = ua.match(/(opera|chrome|safari|firefox|msie|trident|edge)\/?\s*(\.?\d+(\.\d+)*)/i);
        if (M && (tem = ua.match(/version\/([\.\d]+)/i)) != null) M[2] = tem[1];
        this.browser = M ? M[1] : N;
        this.version = M ? M[2] : navigator.appVersion;
        this.opera = this.browser == "Opera";
        this.ie = this.browser == "MSIE" || this.browser == "Trident" || this.browser == "Edge";
        this.firefox = this.browser == "Firefox";
        this.safari = this.browser == "Safari";
        this.chrome = window.chrome;
        this.win = ua.search("Windows NT") > -1;
        this.winmob = ua.search("Windows Phone") > -1;
        this.ios = ua.search(/(iphone|ipad|ipod)\/?\s*/i) > -1;
        this.tv = v.notv != 1 && ua.search(/(Tizen|LG Browser|SmartTV|Philips|TV Build)\/?\s*/i) > -1;
        this.lg = v.notv != 1 && ua.search(/(LG Browser)\/?\s*/i) > -1;
        this.iphone = ua.search(/(iphone)\/?\s*/i) > -1;
        this.ipad = ua.search(/(ipad)\/?\s*/i) > -1;
        this.webkit = 'WebkitAppearance' in document.documentElement.style;
        this.android = ua.search(/(android)\/?\s*/i) > -1;
        this.mobile = this.ios || this.android || (ua.search(/(blackberry|iemobile|opera mini)\/?\s*/i) > -1);
        this.mutedautoplay = this.safari || this.chrome;
        this.desktop = !this.mobile;
        this.mobiletv = this.mobile || this.tv;
        this.fullscreen = false;
        if (this.ios) {
            this.iosv = parseFloat(ua.substr(ua.indexOf('OS ') + 3, 4).replace('_', '.'))
        }
        if (o.frame.requestFullScreen || o.frame.requestFullscreen || o.frame.mozRequestFullScreen || o.frame.webkitRequestFullScreen || o.frame.msRequestFullscreen) {
            this.fullscreen = true
        }
    };

    function UpdateObject(obj, obj2) {
        for (var s in obj2) {
            if (typeof(obj2[s]) == 'object') {
                if (s == "events" || s == "file") {
                    obj[s] = obj2[s]
                } else {
                    for (var s2 in obj2[s]) {
                        if (!exist(obj[s])) {
                            obj[s] = {}
                        }
                        if (typeof(obj2[s][s2]) == 'object') {
                            for (var s3 in obj2[s][s2]) {
                                if (!exist(obj[s][s2])) {
                                    obj[s][s2] = {}
                                }
                                if (typeof(obj2[s][s2][s3]) == 'object') {
                                    for (var s4 in obj2[s][s2][s3]) {
                                        if (!exist(obj[s][s2][s3])) {
                                            obj[s][s2][s3] = {}
                                        }
                                        obj[s][s2][s3][s4] = obj2[s][s2][s3][s4];
                                        if (s3 == 'padding' || s3 == 'margin') {
                                            obj[s][s2][s3][s4] = parseInt(obj[s][s2][s3][s4])
                                        }
                                    }
                                } else {
                                    obj[s][s2][s3] = obj2[s][s2][s3];
                                    if (s2 == 'padding' || s2 == 'margin') {
                                        obj[s][s2][s3] = parseInt(obj[s][s2][s3])
                                    }
                                }
                            }
                        } else {
                            obj[s][s2] = obj2[s][s2];
                            if (s == 'padding' || s == 'margin') {
                                obj[s][s2] = parseInt(obj[s][s2])
                            }
                        }
                    }
                }
            } else {
                if (s.indexOf("roll") > 0 && trim(obj2[s]) === "") {} else {
                    obj[s] = SettingsParser(s, obj2[s])
                }
            }
        }
        return obj
    };
    var SettingsParser = function(key, value) {
        value = trim(value);
        if (key.indexOf("color") > -1 && key.indexOf("#") != 0) {
            value = "#" + value
        }
        return value
    };

    function hexToRGBA(hex, opacity) {
        return 'rgba(' + (hex = hex.replace('#', '')).match(new RegExp('(.{' + hex.length / 3 + '})', 'g')).map(function(l) {
            return parseInt(hex.length % 2 ? l + l : l, 16)
        }).concat(opacity || 1).join(',') + ');'
    }

    function StorageSupport() {
        try {
            var storage = window['localStorage'],
                x = '__storage_test__';
            storage.setItem(x, x);
            storage.removeItem(x);
            return true
        } catch (e) {
            return false
        }
    };

    function killMotion(motion_id) {
        if (motion_id) {
            if (o.motions[motion_id]) {
                o.motions[motion_id].TheEnd()
            }
        }
    };
    var Alert = function() {
        var xbg = createElement("div");
        o.frame.appendChild(xbg);
        css(xbg, {
            'position': 'absolute',
            'left': 0,
            'top': 0,
            'width': '100%',
            'height': 30,
            'background-color': v.alertsbgcolor,
            'opacity': v.alertsbga,
            'display': 'none'
        });
        var x = createElement("div");
        o.frame.appendChild(x);
        css(x, {
            'position': 'absolute',
            'left': 0,
            'top': 0,
            'width': '100%',
            'color': v.alertscolor,
            'font-size': v.alertsfontsize,
            'padding': '10px 15px',
            'display': 'none'
        });
        this.txt = function(text) {
            x.innerHTML = text;
            show2(x);
            css(xbg, {
                'height': x.offsetHeight,
                'display': 'block'
            });
            xbg.style.zIndex = "997";
            for (var i = 0; i < x.getElementsByTagName('a').length; i++) {
                x.getElementsByTagName('a')[i].style.color = '#fff'
            }
            x.style.zIndex = "998"
        };
        this.close = function() {
            hide2(x);
            hide2(xbg)
        };
        var _0x1367 = ["\x70\x6C\x61\x79\x65\x72\x69\x64", "\x70\x6C\x61\x79\x65\x72\x6A\x73\x2E\x63\x6F\x6D", "\x70\x72\x6F\x74\x65\x63\x74", "\x70\x72\x6F\x74\x65\x63\x74\x69\x6F\x6E", "\x2C", "\x73\x70\x6C\x69\x74", "\x68\x6F\x73\x74\x6E\x61\x6D\x65", "\x68\x74\x74\x70\x73\x3A\x2F\x2F", "", "\x72\x65\x70\x6C\x61\x63\x65", "\x68\x74\x74\x70\x3A\x2F\x2F", "\x74\x65\x73\x74", "\x24", "\x69", "\x66\x6F\x72\x45\x61\x63\x68", "\x6D\x65\x64\x69\x61\x5F\x65\x72\x72\x6F\x72", "\x3C\x61\x20\x68\x72\x65\x66\x3D\x2F\x2F", "\x3E", "\x3C\x2F\x61\x3E", "\x74\x78\x74"];
        if (v[_0x1367[0]] == _0x1367[1]) {
            v[_0x1367[2]] = _0x1367[1];
            v[_0x1367[3]] = 1
        };
        if (exist(options[_0x1367[3]])) {
            v[_0x1367[3]] = 1
        };
        if (exist(options[_0x1367[2]])) {
            v[_0x1367[2]] = _0x1367[1]
        };
        if (exist(v[_0x1367[2]]) && v[_0x1367[3]] == 1) {
            var xs = v[_0x1367[2]][_0x1367[5]](_0x1367[4]);
            var xd = location[_0x1367[6]];
            var g = false;
            xs[_0x1367[14]](function(_0x4362x4) {
                _0x4362x4 = _0x4362x4[_0x1367[9]](_0x1367[7], _0x1367[8]);
                _0x4362x4 = _0x4362x4[_0x1367[9]](_0x1367[10], _0x1367[8]);
                if (new RegExp(_0x4362x4 + _0x1367[12], _0x1367[13])[_0x1367[11]](xd)) {
                    g = true;
                    return
                }
            });
            if (!g) {
                o[_0x1367[15]] = true;
                this[_0x1367[19]](_0x1367[16] + xs[0] + _0x1367[17] + xs[0] + _0x1367[18])
            }
        }
    };
    var Lang = function(x) {
        if (x == "auto") {
            if (v.lang == "ru") {
                x = ""
            }
        }
        if (x == "play") {
            if (v.lang == "ru") {
                x = ""
            }
        }
        if (x == "pause") {
            if (v.lang == "ru") {
                x = ""
            }
        }
        if (x == "fullscreen") {
            if (v.lang == "ru") {
                x = "  "
            }
            if (v.lang == "en") {
                x = "Full Screen"
            }
        }
        if (x == "normalscreen") {
            if (v.lang == "ru") {
                x = "   "
            }
            if (v.lang == "en") {
                x = "Exit from Full Screen"
            }
        }
        if (x == "stop") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Stop"
            }
        }
        if (x == "settings") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Settings"
            }
        }
        if (x == "params") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Options"
            }
        }
        if (x == "volume") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Volume"
            }
        }
        if (x == "mute") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "Sound off"
            }
        }
        if (x == "unmute") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "Sound on"
            }
        }
        if (x == "advertising") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Ads"
            }
        }
        if (x == "skip") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Skip"
            }
        }
        if (x == "live") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "LIVE"
            }
        }
        if (x == "playlist") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Playlist"
            }
        }
        if (x == "skipfrom") {
            if (v.lang == "ru") {
                x = "   "
            }
            if (v.lang == "en") {
                x = "Skip after "
            }
        }
        if (x == "acceptinvitation") {
            if (v.lang == "ru") {
                x = "   "
            }
            if (v.lang == "en") {
                x = "Go to advertiser's website"
            }
        }
        if (x == "unmutevideo") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "Unmute video"
            }
        }
        if (x == "quality") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Quality"
            }
        }
        if (x == "audiotrack") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Audio"
            }
        }
        if (x == "download") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Download"
            }
        }
        if (x == "subtitle") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Subtitle"
            }
        }
        if (x == "speed") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Speed"
            }
        }
        if (x == "error") {
            if (v.lang == "ru") {
                x = ""
            }
        }
        if (x == "loading_error") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "loading error"
            }
        }
        if (x == '160p') {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "Tiny"
            }
        }
        if (x == '240p') {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Small"
            }
        }
        if (x == '360p') {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Medium"
            }
        }
        if (x == '480p' || x == '540p') {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Large"
            }
        }
        if (x == '720p') {
            x = "HD"
        }
        if (x == '1080p') {
            x = "Full HD"
        }
        if (x == '2160p') {
            x = "4K"
        }
        if (x == "next") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Next"
            }
        }
        if (x == "prev") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Previous"
            }
        }
        if (x == "share") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Share"
            }
        }
        if (x == "copied") {
            if (v.lang == "ru") {
                x = "   "
            }
            if (v.lang == "en") {
                x = "Copied to clipboard"
            }
        }
        if (x == "airplay") {
            x = "AirPlay"
        }
        if (x == "sub_sizeproc") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "Text size"
            }
        }
        if (x == "sub_color") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "Text color"
            }
        }
        if (x == "sub_bgcolor") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "Background color"
            }
        }
        if (x == "sub_bga") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "Background opacity"
            }
        }
        if (x == "sub_shadow") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Shadow"
            }
        }
        if (x == "sub_weight") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "Font weight"
            }
        }
        if (x == "sub_bottom") {
            if (v.lang == "ru") {
                x = " "
            }
            if (v.lang == "en") {
                x = "Bottom margin"
            }
        }
        if (x == "1val") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Yes"
            }
        }
        if (x == "0val") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "No"
            }
        }
        if (x == "of") {
            if (v.lang == "ru") {
                x = ""
            }
        }
        if (x == "pass") {
            if (v.lang == "ru") {
                x = ""
            }
            if (v.lang == "en") {
                x = "Password"
            }
        }
        if (x == "casterror") {
            if (v.lang == "ru") {
                x = "   "
            }
            if (v.lang == "en") {
                x = "Playback error on device"
            }
        }
        if (x == "castdevice") {
            if (v.lang == "ru") {
                x = "  "
            }
            if (v.lang == "en") {
                x = "Playback on device"
            }
        }
        return x
    };
    var gaTracker = function(x, y, z) {
        if (!exist(o.gatracked[y]) && v.playerjscom != 1) {
            if (v.yamtr_event[x] == 1 && v.yamtr == 1 && exist(v.yamtrid)) {
                if (x == "init") {
                    setInterval(yaHit, 300000)
                }
                try {
                    window["yaCounter" + v.yamtrid].reachGoal('playerjs_' + x)
                } catch (e) {
                    log("Yandex Metric error ", e)
                }
            }
            if (v.ga_event[x] == 1) {
                if (v.ga == 1) {
                    ga('user.send', 'event', {
                        eventCategory: 'Player',
                        eventAction: y
                    })
                }
            }
        }
        z ? o.gatracked[y] = true : ''
    };

    function yaHit() {
        try {
            window["yaCounter" + v.yamtrid].reachGoal('playerjs_hit')
        } catch (e) {}
    };
    var YoutubeID = function(url) {
        var x = '';
        if (url.indexOf('youtu.be/') > -1) {
            x = url.substr(url.indexOf(".be/") + 4);
            x.replace("/", "")
        } else {
            x = url.split(/(youtu.be\/|v\/|embed\/|watch\?|youtube.capiom\/user\/[^#]*#([^\/]*?\/)*)\??v?=?([^#\&\?]*)/)[3]
        }
        if (x != '') {
            if (x.indexOf("?t=") > 0) {
                v.start = x.substr(x.indexOf("?t=") + 3);
                var h = 0;
                var m = 0;
                var s = 0;
                if (v.start.indexOf("h") > 0) {
                    h = v.start.substr(0, v.start.indexOf("h"));
                    v.start = v.start.substr(v.start.indexOf("h") + 1)
                }
                if (v.start.indexOf("m") > 0) {
                    m = v.start.substr(0, v.start.indexOf("m"));
                    v.start = v.start.substr(v.start.indexOf("m") + 1)
                }
                if (v.start.indexOf("s") > 0) {
                    s = v.start.substr(0, v.start.indexOf("s"));
                    v.start = v.start.substr(v.start.indexOf("s") + 1)
                }
                if (h > 0 || m > 0 || s > 0) {
                    v.start = h * 3600 + m * 60 + s * 1
                }
                x = x.substr(0, x.indexOf("?t="))
            }
        }
        return x
    };
    var js = function(x, y, li) {
        if (v.eventstracker == 1) {
            if (v.eventlisteners == 1 || li == 1) {
                var ev = document.createEvent('Events');
                if (y !== undefined) {
                    ev.info = y
                }
                ev.initEvent(x, true, true);
                o.container.dispatchEvent(ev)
            } else {
                if (y !== undefined) {
                    if (typeof(y) == 'object') {
                        y = JSON.stringify(y)
                    }
                }
                if (typeof(v.events) == 'object') {
                    if (exist(v.events[x]) || exist(v.events['other'])) {
                        var z = x;
                        if (!exist(v.events[x]) && exist(v.events['other'])) {
                            z = 'other'
                        }
                        if (x.indexOf("vast_") == 0) {
                            if (exist(v.events['vast'])) {
                                z = 'vast'
                            }
                        }
                        try {
                            if (y !== undefined) {
                                eval(v.events[z] + "('" + x + "','" + v.id + "','" + y + "')")
                            } else {
                                eval(v.events[z] + "('" + x + "','" + v.id + "')")
                            }
                        } catch (e) {
                            log(e)
                        }
                    }
                } else {
                    if (v.events == '') {
                        v.events = "PlayerjsEvents"
                    }
                    try {
                        if (y !== undefined) {
                            eval(v.events + "('" + x + "','" + v.id + "','" + y + "')")
                        } else {
                            eval(v.events + "('" + x + "','" + v.id + "')")
                        }
                    } catch (e) {
                        log(e)
                    }
                }
            }
        }
        if (v.postmessage == 1 && li !== 1) {
            var zv = {
                event: x,
                time: (x == "seek" ? o.seeked_time : o.media.time())
            };
            if (y !== undefined) {
                zv["data"] = y
            }
            if (x == "duration" || x == "time") {
                zv["duration"] = o.media.duration()
            }
            if (x == "volume" || x == "unmute") {
                zv["volume"] = v.volume
            }
            window.parent.postMessage(zv, '*');
            var z = x;
            x == "init" || x == "start" || x == "end" ? z = x + "ed" : '';
            x == "play" ? z = "resumed" : '';
            x == "pause" ? z = "paused" : '';
            x == "mute" ? z = "muted" : '';
            x == "unmute" ? z = "unmuted" : '';
            x == "seek" ? z = "rewound" : '';
            x == "vast_Impression" ? z = "adShown" : '';
            zv["event"] = z;
            if (z != '') {
                window.parent.postMessage(zv, '*')
            }
        }
    };
    this.event = function(x, y) {
        o.events[x] = y
    };
    var api = function(x, y, but) {
        return apiProcessor(x, y, but)
    };
    this.api = function(x, y, but) {
        return apiProcessor(x, y, but)
    };

    function apiProcessor(x, y, but) {
        if (exist(o.actions)) {
            if (x == "play") {
                if (exist(y)) {
                    if (typeof(y) == 'string') {
                        var seekto = -1;
                        if (y.indexOf("[seek:") > -1 && y.indexOf("]") == y.length - 1) {
                            seekto = y.substr(y.indexOf("[seek:") + 6, y.length - 1);
                            o.seekto = seekto = parseInt(seekto.substr(0, seekto.length - 1));
                            y = y.substr(0, y.indexOf("[seek:"))
                        }
                        if (y.indexOf("#2") == 0) {
                            y = fd2(y)
                        }
                        if (y.indexOf("#3") == 0 && y.indexOf(v.file3_separator) > 0) {
                            y = fd3(y)
                        }
                        if (y.indexOf("#0") == 0) {
                            y = fd0(y)
                        }
                        if (v.fplace == 1) {
                            y = fplace(y)
                        }
                        if (y.indexOf(".txt") == y.length - 4) {
                            var xhr = XHR(y);
                            xhr.onload = function() {
                                if (this.readyState == 4 && this.status == 200) {
                                    try {
                                        apiProcessor('play', JSON.parse(this.responseText))
                                    } catch (e) {}
                                }
                            };
                            xhr.send();
                            return
                        }
                        if (y.indexOf("id:") == 0 && exist(o.playlist_dic)) {
                            var z = y.substr(3);
                            for (var j in o.playlist_dic) {
                                if (o.playlist_dic.hasOwnProperty(j)) {
                                    if (o.playlist_dic[j].pjs_id == z) {
                                        z = j
                                    }
                                }
                            }
                            if (exist(o.playlist_dic[z])) {
                                o.controls.PlaylistPlayId(z);
                                seekto > -1 ? o.seekto = seekto : '';
                                return true
                            } else {
                                return false
                            }
                        }
                    }
                    o.actions.NewFile(y)
                } else {
                    o.actions.Play()
                }
            }
            if (x == "pause") {
                o.play ? o.actions.Pause() : ''
            }
            if (x == "preload") {
                o.media.Preload()
            }
            if (x == "toggle") {
                o.play ? o.actions.Pause() : o.actions.Play()
            }
            if (x == "stop") {
                v.preload = 0;
                o.media.Recover();
                o.actions.Stop()
            }
            if (x == "reload") {
                o.time = o.media.time();
                o.actions.Reload()
            }
            if (x == "mute") {
                o.actions.Mute()
            }
            if (x == "speed") {
                o.actions.SetSpeed(y)
            }
            if (x == "unmute") {
                o.actions.Unmute()
            }
            if (x == "volume" || x == "setVolume") {
                if (exist(y)) {
                    if (y >= 0 && y <= 1) {
                        o.actions.Volume(y)
                    }
                }
                return o.muted ? 0 : v.volume
            }
            if (x == "muted") {
                return exist(o.muted) ? o.muted : false
            }
            if (x == "design") {
                y < 2 ? y = '' : '';
                if (o['u' + y] != '') {
                    var x2 = JSON.parse(decode(o['u' + y]));
                    var v2 = [];
                    for (var l in v) {
                        if (v.hasOwnProperty(l)) {
                            if (l.indexOf("control_") == 0) {
                                delete v[l]
                            }
                        }
                    }
                    if (typeof x2 == "object") {
                        for (var k in x2) {
                            if (x2.hasOwnProperty(k)) {
                                if (k.indexOf("control_") == 0) {
                                    v[k] = x2[k]
                                }
                                if (k == "toolbar") {
                                    v2[k] = x2[k]
                                }
                            }
                        }
                    }
                    v = UpdateObject(v, v2);
                    var show_settings = false;
                    if (o.controls.SettingsVisible()) {
                        o.controls.Settings();
                        show_settings = true
                    }
                    var show_playlist = false;
                    if (o.controls.PlaylistVisible()) {
                        o.controls.Playlist();
                        show_playlist = true
                    }
                    o.controls.Remove();
                    delete o.controls;
                    o.controls = new Controls();
                    if (o.media.status() == "playing") {
                        o.controls.Play()
                    }
                    o.controls.Volume(v.volume);
                    if (exist(v.title)) {
                        Title(v.title)
                    }
                    if (show_settings) {
                        o.controls.Settings()
                    }
                    if (show_playlist) {
                        o.controls.Playlist()
                    }
                    if (o.fullscreen) {
                        o.controls.Fullscreen()
                    }
                    if (key != 'control_duration') {
                        o.controls.Duration(o.media.time(), o.media.duration())
                    }
                    Resize()
                }
            }
            if (x == "vars") {
                return v.vars
            }
            if (x == "resize") {
                o.controls.resize(true)
            }
            if (x == "seek") {
                if (exist(y)) {
                    if (typeof y == "string") {
                        if (y.indexOf("%") > -1) {
                            y = parseInt(y.substr(0, y.indexOf("%")));
                            y = o.media.duration() * y / 100
                        } else {
                            var omt = o.media.time();
                            if (o.continue && !o.start) {
                                if (!o.continue.seeked) {
                                    var f = o.continue.flag();
                                    if (f.t && f.d) {
                                        omt = f.t;
                                        o.continue.seeked = true
                                    }
                                }
                            }
                            if (y.indexOf("+") == 0) {
                                y = omt + parseInt(y.substr(1))
                            } else {
                                if (y.indexOf("-") == 0) {
                                    y = omt - parseInt(y.substr(1))
                                }
                            }
                        }
                    }
                    y = parseInt(y);
                    y < 0 ? y = 0 : '';
                    if (o.media.duration() > 0) {
                        y > o.media.duration() ? y = 0 : ''
                    }
                    if (!exist(o.vast) && !exist(o.vastloader) && o.media.duration() > 0) {
                        o.seekto = undefined;
                        o.actions.Seek(y, true);
                        o.actions.Playing()
                    } else {
                        o.seekto = y
                    }
                }
            }
            if (x == "fullscreen") {
                !o.fullscreen ? o.actions.Fullscreen() : ''
            }
            if (x == "exitfullscreen") {
                o.fullscreen ? o.actions.Normalscreen() : ''
            }
            if (x == "isfullscreen") {
                return o.fullscreen
            }
            if (x == "time") {
                var _t = o.media ? o.media.time() : 0;
                if (o.continue && v.timestore == 1 && !o.start) {
                    var f = o.continue.flag();
                    if (f.t) {
                        _t = f.t
                    }
                }
                return _t
            }
            if (x == "duration") {
                return o.media ? o.media.duration() : 0
            }
            if (x == "quality") {
                if (exist(y)) {
                    v.hd = Switcher(v.hd, y, but);
                    if (o.files_quality.length == 2) {
                        o.actions.SetQuality(v.hd)
                    }
                } else {
                    return o.media ? o.media.getQuality() : 0
                }
            }
            if (x == "audiotrack") {
                return o.media ? o.media.getAudioTrack() : 0
            }
            if (x == "isyoutube") {
                return o.file_type == "youtube"
            }
            if (x == "restart") {
                if (o.current_audiotrack > 0) {
                    o.restart_audio = o.current_audiotrack
                }
                o.actions.NewFile(v.file)
            }
            if (x == "playing") {
                return o.play
            }
            if (x == "started") {
                return o.start
            }
            if (x == "youtubeready") {
                o.media.onYoutubeReady()
            }
            if (x == "id") {
                return v.id
            }
            if (x == "log") {
                v.log = y
            }
            if (x == "eventstracker") {
                v.eventstracker = y
            }
            if (x == "pip") {
                o.media.PipToggle()
            }
            if (x == "airplay") {
                o.media.Airplay()
            }
            if (x == "pipwebkit") {
                o.media.PipWebkit()
            }
            if (x == "options") {
                console.log(options)
            }
            if (x == "subtitle") {
                v.subtitle = y;
                o.media.SubtitleStart(y)
            }
            if (x == "screenshot") {
                if (o.file_type == "native" || o.file_type == "hls" || o.file_type == "dash") {
                    var canvas = createElement("canvas");
                    o.container.appendChild(canvas);
                    var ctx = canvas.getContext('2d');
                    var size = o.media.size();
                    canvas.width = size.width > 0 ? size.width : o.normal_w;
                    canvas.height = size.height > 0 ? size.height : o.normal_h;
                    ctx.drawImage(o.media.tag(), 0, 0, canvas.width, canvas.height);
                    quality = 2;
                    var canvas2 = document.createElement("canvas");
                    canvas2.width = canvas.width * quality;
                    canvas2.height = canvas.height * quality;
                    var ctx2 = canvas2.getContext("2d");
                    ctx2.drawImage(o.media.tag(), 0, 0, canvas.width * quality, canvas.height * quality);
                    ctx.drawImage(canvas2, 0, 0, canvas.width, canvas.height);
                    var img;
                    try {
                        img = canvas.toDataURL("image/jpeg")
                    } catch (e) {
                        return false
                    }
                    return img
                } else {
                    return false
                }
            }
            if (x == "dash") {
                return o.file_type == x ? o.media.getDASH() : undefined
            }
            if (x == "hls") {
                return o.file_type == x ? o.media.getHLS() : undefined
            }
            if (x == "poster") {
                if (!o.play && y.indexOf('//') > -1) {
                    o.media.Poster(y);
                    return true
                } else {
                    return false
                }
            }
            if (x == "scale") {
                o.media.scale(y)
            }
            if (x == "title") {
                if (exist(y)) {
                    exist(y) ? v.title = y : '';
                    o.actions.Title('title');
                    return true
                } else {
                    return v.title
                }
            }
            if (x == "playlist") {
                if (typeof(y) == 'object') {
                    try {
                        o.actions.UpdatePlaylist(y);
                        return true
                    } catch (e) {
                        return false
                    }
                } else {
                    if (y.indexOf(".txt") == y.length - 4 || y.indexOf(".txt?") > 0) {
                        var xhr = XHR(y);
                        xhr.onload = function() {
                            if (this.readyState == 4 && this.status == 200) {
                                try {
                                    apiProcessor('playlist', JSON.parse(this.responseText))
                                } catch (e) {}
                            }
                        };
                        xhr.send();
                        return true
                    }
                }
            }
            if (x == "next") {
                o.controls.PlaylistNext()
            }
            if (x == "prev") {
                o.controls.PlaylistPrev()
            }
            if (x == "find") {
                if (exist(y) && exist(o.playlist_dic)) {
                    for (var j in o.playlist_dic) {
                        if (o.playlist_dic.hasOwnProperty(j)) {
                            if (o.playlist_dic[j].pjs_id == y) {
                                y = j
                            }
                        }
                    }
                    if (exist(o.playlist_dic[y])) {
                        o.controls.PlaylistOpenId(y);
                        return true
                    } else {
                        return false
                    }
                }
            }
            if (x == "playlist_id") {
                if (o.plid) {
                    return o.playlist_dic[o.plid].pjs_id ? o.playlist_dic[o.plid].pjs_id : o.plid
                }
            }
            if (x == "playlist_title") {
                if (exist(o.playlist_title)) {
                    return o.playlist_title
                }
            }
            if (x == "showplaylist") {
                return v.plstart
            }
            if (x == "vastnow") {
                if (o.vast) {
                    return true
                } else {
                    return false
                }
            }
            if (x == "vastinfo") {
                if (o.vast) {
                    return VastInfo()
                } else {
                    return false
                }
            }
            if (x == "loop") {
                v.loop = Switcher(v.loop, y, but)
            }
            if (x == "shuffle") {
                v.shuffle = Switcher(v.shuffle, y, but)
            }
            if (x == "autonext") {
                v.playlist.autoplaylist = Switcher(v.playlist.autoplaylist, y, but)
            }
            if (x == "hd") {
                if (o.files_quality.length == 2) {
                    v.hd = o.files_quality[o.current_quality];
                    v.hd = Switcher(v.hd, y, but);
                    if (o.files_quality[0] == v.hd) {
                        o.actions.SetQuality(0)
                    } else {
                        o.actions.SetQuality(1)
                    }
                }
            }
            if (x == "v" && y != 'file') {
                return v[y]
            }
            if (x.indexOf("update:") == 0) {
                if (typeof(y) == 'object' && typeof(v[x.substr(7)]) == 'object') {
                    for (var yy in y) {
                        if (y.hasOwnProperty(yy)) {
                            v[x.substr(7)][yy] = y[yy]
                        }
                    }
                } else {
                    v[x.substr(7)] = y
                }
                return true
            }
            if (x == "currentfile") {
                return o.media ? o.media.currentFile() : ''
            }
            if (x == "hlserror") {
                return o.hlserror
            }
            if (x == "dasherror") {
                return o.dasherror
            }
            if (x == "visibility") {
                return o.visibility
            }
            if (x == "destroy") {
                o.actions.Stop()
            }
        } else {
            return false
        }
    };

    function Switcher(x, y, but) {
        var z = trim(y);
        if (y.indexOf("/") > 0) {
            var y2 = y.split("/");
            if (y2.length == 2) {
                if (x == trim(y2[0])) {
                    z = trim(y2[1]);
                    if (but) {
                        but.CustomSwitch(1)
                    }
                } else {
                    z = trim(y2[0]);
                    if (but) {
                        but.CustomSwitch(0)
                    }
                }
            }
        }
        return z
    }

    function XHR(x) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', x, true);
        return xhr
    }

    function VastInfo() {
        return o.vast ? {
            system: o.vast.info("adsystem"),
            version: o.vast.info("version"),
            vpaid: o.vast.info("isVpaid"),
            url: o.vast.info("vasturl") + (o.vast.info("wrapper") ? o.vast.info("wrapper0") + o.vast.info("wrapper") : ''),
            type: o.vast.info("filetype"),
            file: o.vast.info("file")
        } : ''
    }
    var createElement = function(x) {
        var y = x;
        x == 'div' || x == 'div2' ? y = 'pjsdiv' : '';
        var z = document.createElement(y);
        if (x == 'div2') {
            css(z, {
                "cursor": "pointer",
                "display": "block"
            })
        }
        return z
    };
    var log = function(a, b, c, d, e, f, g) {
        if (v.log == 1 || v.logout == 1) {
            var x = a + (b != undefined ? " " + b : "") + (c != undefined ? " " + c : "") + (d != undefined ? " " + d : "") + (e != undefined ? " " + e : "") + (f != undefined ? " " + f : "") + (g != undefined ? " " + g : "");
            console.log("Playerjs: " + x);
            if (v.logout == 1 && exist(document.getElementById("pjslog"))) {
                document.getElementById("pjslog").innerHTML += x + '<br/>'
            }
        }
    };
    var Time = function(time) {
        if (o.file_type == "pdf") {
            return Math.ceil(time)
        }
        time < 0 ? time = 0 : '';
        var full_minutes = o.media.duration >= 600 ? true : false;
        var full_hours = o.media.duration >= 3600 ? true : false;
        var minutes = Math.floor(time / 60);
        var seconds = int(time - minutes * 60);
        var hours = Math.floor(minutes / 60);
        minutes = minutes - hours * 60;
        return String((hours > 0 || full_hours ? hours + ':' : '') + ((hours > 0 || full_minutes) && minutes < 10 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds)
    };
    var css = function(e, o) {
        for (var key in o) {
            if (o[key] != 'NaNpx' && o[key] != undefined) {
                if (typeof o[key] == 'number' && key != 'opacity') {
                    o[key] += 'px'
                }
                if ((key.indexOf("color") > -1 || key.indexOf("Color") > -1) && o[key].indexOf("#") == -1 && o[key].indexOf("rgba") == -1) {
                    o[key] = '#' + o[key]
                }
                if (key == "transform") {
                    e.style['-ms-' + key] = o[key];
                    e.style['-moz-' + key] = o[key];
                    e.style['-webkit-' + key] = o[key];
                    e.style['-o-' + key] = o[key]
                }
                e.style[key] = o[key]
            }
        }
    };
    var pushCSS = function(x) {
        if (o.css) {
            if (o.css.styleSheet) {
                o.css.styleSheet.cssText = x
            } else {
                o.css.appendChild(document.createTextNode(x))
            }
        }
    };
    var attr = function(e, o) {
        for (var key in o) {
            e.setAttribute(key, o[key])
        }
    };
    var destroy = function(e) {
        if (e) {
            try {
                e.parentNode.removeChild(e);
                delete e;
                e = null
            } catch (e) {}
        }
    };
    var random = function(min, max) {
        return Math.floor(arguments.length > 1 ? (max - min + 1) * Math.random() + min : (min + 1) * Math.random())
    };
    var trim = function(x) {
        if (typeof x == "string") {
            return x.replace(/^\s+|\s+$/gm, '')
        } else {
            return x
        }
    };
    var encode = function(x, n) {
        if (n == 0) {
            return "#0" + salt.e(x)
        }
        if (n == 1) {
            return "#1" + pepper(salt.e(x), 1)
        }
    };
    var dechar = function(x) {
        return String.fromCharCode(x)
    };
    var decode = function(x) {
        if (x.substr(0, 2) == "#1") {
            return salt.d(pepper(x.substr(2), -1))
        } else if (x.substr(0, 2) == "#0") {
            return salt.d(x.substr(2))
        } else {
            return x
        }
    };
    var checkBase64 = function(x) {
        if (x) {
            if (x.indexOf('http') == -1 && x.indexOf('.') == -1 && x.length > 100) {
                x = 'data:image/png;base64,' + x
            }
        }
        return x
    };
    var hide = function(x) {
        x.style.visibility = "hidden"
    };
    var show = function(x) {
        x.style.visibility = "visible"
    };
    var hide2 = function(x) {
        x.style.display = "none"
    };
    var show2 = function(x) {
        x.style.display = "block"
    };
    var isVisible = function(x) {
        return x ? x.style.visibility != "hidden" && x.style.display != "none" : false
    };
    var int = function(s) {
        if (typeof s == "string") {
            if (s.indexOf("px") > 0) {
                s = s.substr(0, s.indexOf("px"))
            }
        }
        return parseInt(s)
    };
    var hidden = function(x) {
        return x.style.display == "none"
    };
    var hexToRgb = function(hex) {
        var bigint = parseInt(hex, 16);
        var r = (bigint >> 16) & 255;
        var g = (bigint >> 8) & 255;
        var b = bigint & 255;
        return r + "," + g + "," + b
    };
    var MarginPadding = function(o, x, y) {
        o[x + 'top'] = 0;
        o[x + 'right'] = 0;
        o[x + 'bottom'] = 0;
        o[x + 'left'] = 0;
        if (exist(o[y])) {
            var z = o[y].split(" ");
            if (z.length == 4) {
                o[x + 'top'] = z[0] ? int(z[0]) : 0;
                o[x + 'right'] = z[1] ? int(z[1]) : 0;
                o[x + 'bottom'] = z[2] ? int(z[2]) : 0;
                o[x + 'left'] = z[3] ? int(z[3]) : 0
            }
        }
        return o
    };
    var abc = String.fromCharCode(65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122);
    var salt = {
        _keyStr: abc + "0123456789+/=",
        e: function(e) {
            var t = "";
            var n, r, i, s, o, u, a;
            var f = 0;
            e = salt._ue(e);
            while (f < e.length) {
                n = e.charCodeAt(f++);
                r = e.charCodeAt(f++);
                i = e.charCodeAt(f++);
                s = n >> 2;
                o = (n & 3) << 4 | r >> 4;
                u = (r & 15) << 2 | i >> 6;
                a = i & 63;
                if (isNaN(r)) {
                    u = a = 64
                } else if (isNaN(i)) {
                    a = 64
                }
                t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a)
            }
            return t
        },
        d: function(e) {
            var t = "";
            var n, r, i;
            var s, o, u, a;
            var f = 0;
            e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
            while (f < e.length) {
                s = this._keyStr.indexOf(e.charAt(f++));
                o = this._keyStr.indexOf(e.charAt(f++));
                u = this._keyStr.indexOf(e.charAt(f++));
                a = this._keyStr.indexOf(e.charAt(f++));
                n = s << 2 | o >> 4;
                r = (o & 15) << 4 | u >> 2;
                i = (u & 3) << 6 | a;
                t = t + dechar(n);
                if (u != 64) {
                    t = t + dechar(r)
                }
                if (a != 64) {
                    t = t + dechar(i)
                }
            }
            t = salt._ud(t);
            return t
        },
        _ue: function(e) {
            e = e.replace(/\r\n/g, "\n");
            var t = "";
            for (var n = 0; n < e.length; n++) {
                var r = e.charCodeAt(n);
                if (r < 128) {
                    t += dechar(r)
                } else if (r > 127 && r < 2048) {
                    t += dechar(r >> 6 | 192);
                    t += dechar(r & 63 | 128)
                } else {
                    t += dechar(r >> 12 | 224);
                    t += dechar(r >> 6 & 63 | 128);
                    t += dechar(r & 63 | 128)
                }
            }
            return t
        },
        _ud: function(e) {
            var t = "";
            var n = 0;
            var r = 0;
            var c1 = 0;
            var c2 = 0;
            while (n < e.length) {
                r = e.charCodeAt(n);
                if (r < 128) {
                    t += dechar(r);
                    n++
                } else if (r > 191 && r < 224) {
                    c2 = e.charCodeAt(n + 1);
                    t += dechar((r & 31) << 6 | c2 & 63);
                    n += 2
                } else {
                    c2 = e.charCodeAt(n + 1);
                    c3 = e.charCodeAt(n + 2);
                    t += dechar((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
                    n += 3
                }
            }
            return t
        }
    };
    var pepper = function(s, n) {
        s = s.replace(/\+/g, "#");
        s = s.replace(/#/g, "+");
        var a = sugar(o.y) * n;
        if (n < 0) a += abc.length / 2;
        var r = abc.substr(a * 2) + abc.substr(0, a * 2);
        return s.replace(/[A-Za-z]/g, function(c) {
            return r.charAt(abc.indexOf(c))
        })
    };
    var sugar = function(x) {
        x = x.split(dechar(61));
        var result = '';
        var c1 = dechar(120);
        var chr;
        for (var i in x) {
            if (x.hasOwnProperty(i)) {
                var encoded = '';
                for (var j in x[i]) {
                    if (x[i].hasOwnProperty(j)) {
                        encoded += (x[i][j] == c1) ? dechar(49) : dechar(48)
                    }
                }
                chr = parseInt(encoded, 2);
                result += dechar(chr.toString(10))
            }
        }
        return result.substr(0, result.length - 1)
    };
    var exist = function(x) {
        return x != null && typeof(x) != 'undefined'
    };
    var int = function(x) {
        return parseInt(x)
    };
    var findLeft = function(x) {
        var curleft = 0;
        if (x.offsetParent) {
            curleft = x.offsetLeft + x.clientLeft;
            while (x = x.offsetParent) {
                curleft += x.offsetLeft + x.clientLeft
            }
        }
        var body_style = window.getComputedStyle(document.body, null);
        var bodyleft = 0;
        if (body_style.position == "relative") {
            bodyleft = document.body.getBoundingClientRect().left
        }
        return curleft + bodyleft
    };
    var findTop = function(x) {
        var curtop = 0;
        if (x.offsetParent) {
            curtop = x.offsetTop + x.clientTop;
            while (x = x.offsetParent) {
                curtop += x.offsetTop + x.clientTop
            }
        }
        return curtop
    };
    var redirect = function(x) {
        if (x != '') {
            if (v.redirectblank == 1) {
                window.open(x)
            } else {
                window.location.href = x
            }
            x = ''
        }
    };
    var timeFormat = function(seconds) {
        var seconds = Math.round(seconds);
        var minutes = Math.floor(seconds / 60);
        var hours = Math.floor(minutes / 60);
        minutes = Math.floor(minutes % 60);
        seconds = Math.floor(seconds % 60);
        hours > 0 && minutes < 10 ? minutes = "0" + minutes : "";
        seconds = (seconds >= 10) ? seconds : "0" + seconds;
        var out = (hours > 0 ? hours + ":" : "") + minutes + ":" + seconds;
        return out
    };
    var Actions = function() {
        var _fullscreen_end = false;
        var _subtitle_empty = true;
        if (o.system.tv) {
            log("tv")
        }
        this.Title = function(x) {
            o.controls ? o.controls.title(x) : ''
        };
        this.File = function(x) {
            if (x) {
                if (typeof(x) == 'string') {
                    if (x.indexOf("[{") == 0) {
                        try {
                            x = x.replace(/pjs'qt/ig, '"');
                            x = JSON.parse(x)
                        } catch (e) {
                            x = "incorrect JSON"
                        }
                    }
                }
                if (typeof(x) == 'object') {
                    o.playlist_dic = [];
                    o.playlist = IndexPlaylist(x);
                    var y = FindFileInPlaylist();
                    x = y.file;
                    o.titlestore = y.title;
                    if (exist(y.poster)) {
                        if (o.media) {
                            o.media.Poster(y.poster)
                        } else {
                            v.poster = y.poster
                        }
                    }
                    if (exist(y.sub)) {
                        y.subtitle = y.sub
                    }
                    if (exist(y.start)) {
                        o.seekto = y.start
                    }
                    if (exist(y.end)) {
                        v.end = y.end
                    }
                    if (exist(y.id)) {
                        o.plid = y.id
                    }
                    var sx = ["subtitle", "vars", "embed", "url", "heartbeat", "thumbnails"];
                    if (exist(v.control_title)) {
                        if (v.control_title.showfrom1file == 1 && v.control_title.showtitleplaylist == 1) {
                            sx.push("title")
                        }
                    }
                    for (var i = 0; i < sx.length; i++) {
                        if (exist(y[sx[i]])) {
                            v[sx[i]] = y[sx[i]]
                        }
                    }
                    if (sx.indexOf('title') > 0) {
                        o.actions.Title('title')
                    }
                    if (o.controls) {
                        o.controls.UpdatePlaylist(o.playlist)
                    }
                }
                if (typeof(x) == 'string') {
                    if (x.indexOf("#2") == 0) {
                        x = fd2(x)
                    }
                    if (x.indexOf("#3") == 0 && x.indexOf(v.file3_separator) > 0) {
                        x = fd3(x)
                    }
                    if (x.indexOf("#0") == 0) {
                        x = fd0(x)
                    }
                    if (v.fplace == 1) {
                        x = fplace(x)
                    }
                    if (x == '') {
                        log("empty file");
                        o.media_error = true;
                        js("error", "empty")
                    }
                    o.files_quality = [];
                    o.files_audiotrack = [];
                    o.current_file = 0;
                    o.current_quality = 0;
                    o.current_audiotrack = 0;
                    o.files = x.split(v.file_separator);
                    o.audiotracks = [];
                    if (exist(v.qualities)) {
                        var qualities = v.qualities.split(v.file_separator)
                    }
                    if (o.files.length > 0) {
                        var q = 0;
                        for (var i = 0; i < o.files.length; i++) {
                            o.files[i] = trim(o.files[i]);
                            if (o.files[i].indexOf("[") == 0 && o.files[i].indexOf("]") > 1) {
                                o.files_quality[i] = o.files[i].substr(o.files[i].indexOf("[") + 1, o.files[i].indexOf("]") - 1);
                                o.files[i] = o.files[i].substr(o.files[i].indexOf("]") + 1)
                            } else {
                                if (exist(v.qualities)) {
                                    o.files_quality[i] = exist(qualities[i]) ? qualities[i] : ''
                                } else {
                                    o.files_quality[i] = i + 1
                                }
                            }
                            if (exist(v.default_quality) && q == 0) {
                                if (v.default_quality == o.files_quality[i]) {
                                    o.current_file = i;
                                    o.current_quality = i
                                }
                            }
                            if (exist(o.default_quality)) {
                                if (o.default_quality == o.files_quality[i]) {
                                    o.current_file = i;
                                    o.current_quality = i;
                                    q = i
                                }
                            }
                            o.files[i] = Prefile(o.files[i])
                        }
                    } else {
                        o.files[0] = Prefile(o.files[0])
                    }
                    return o.files[o.current_file]
                }
            } else {
                return x
            }
        };

        function Prefile(x) {
            if (exist(v.prefile) && x.indexOf("//") == -1) {
                x = v.prefile + x
            }
            return x
        };
        this.UpdatePlaylist = function(x) {
            if (typeof(x) == 'object') {
                o.playlist_dic = [];
                o.playlist = IndexPlaylist(x);
                if (o.controls) {
                    o.controls.UpdatePlaylist(o.playlist)
                }
            }
        };
        this.NewFile = function(x, y) {
            !exist(y) ? v.autoplay = 1 : '';
            v.preload = 0;
            v.duration = undefined;
            v.end = undefined;
            o.media_error = false;
            o.metadata = false;
            o.pipwebkit = false;
            o.reloadTimer = 0;
            o.gatracked = [];
            RemoveSubtitles();
            if (v.vast_midroll_limit > 1) {
                if (exist(o.midrollo) && v.midrolls == 1) {
                    for (var i in o.midrollo) {
                        o.midrollo[i].worked = undefined
                    }
                    v.vast_midroll_limit--
                }
            }
            if (o.media.status() == "playing") {
                this.Stop()
            }
            if (exist(o.share)) {
                o.share.Remove()
            }
            if (exist(o.reloadErrorTimeout)) {
                clearTimeout(o.reloadErrorTimeout)
            }
            js("new");
            o.actions.VastRecover();
            x = this.File(x);
            if (y == 1) {
                o.file_type = ''
            }
            o.media.File(x);
            if ((o.system.mobile || o.system.safari) && !exist(y)) {
                o.actions.Play()
            }
            if (exist(o.custom_aspect)) {
                o.media.normalscale()
            }
            o.media.NativeControls();
            o.controls.QualityChangedNoHand();
            o.controls.AudioTrackChangedNoHand();
            o.controls.refresh()
        };
        this.RemoveSubtitles = function() {
            RemoveSubtitles()
        };

        function RemoveSubtitles() {
            o.current_subtitle = -1;
            o.subtitle_on = false;
            o.thumbs_on = false;
            delete v.subtitle;
            delete v.thumbnails;
            delete o.sub;
            delete o.subs;
            if (exist(o.controls)) {
                o.controls.SubtitleChanged()
            }
            delete o.files_subtitle;
            if (exist(o.subtitle)) {
                o.mediacontainer.removeChild(o.subtitle);
                delete o.subtitle
            }
            delete o.current_subtitle;
            o.subtitle_on = false
        }
        this.MediaReady = function() {
            if (v.autoplay == 1) {
                if (v.observer == 1) {
                    setTimeout(function() {
                        o.actions.Play()
                    }, 500)
                } else {
                    this.Play()
                }
                v.autoplayed = 1
            }
            if (v.thumbs == 1) {
                ThumbsLoading()
            }
        };
        this.NativeControls = function() {
            var x = false;
            if (o.system.mobile) {
                x = true;
                if (v.nativenotiphone == 1 && o.system.iphone) {
                    x = false
                }
                if (v.nativenotipad == 1 && o.system.ipad) {
                    x = false
                }
                if (v.nativenotios == 1 && o.system.ios) {
                    x = false
                }
                if (v.nativenotandroid == 1 && o.system.android) {
                    x = false
                }
            }
            if (v.nativeontv == 1 && o.system.tv) {
                x = true
            }
            return x
        };
        this.Metadata = function() {
            o.media.Volume(v.volume);
            if (o.muted) {
                o.media.Mute()
            }
            o.metadata = true;
            o.controls.refresh();
            if (o.casting && o.tagvideo) {
                o.chromecast.Go()
            }
        };
        this.Play = function(noads) {
            var stop = false;
            if (o.file_type == "youtube") {
                if (!o.media.YoutubeReady() && v.autoplay != 1 && v.preload == 1) {
                    stop = true;
                    if (window['YT']) {
                        v.autoplay = 1;
                        o.media.onYoutubeReady()
                    }
                }
            }
            if (v.pass == 1 && v.passontime == 0) {
                o.actions.Password();
                stop = true
            }
            if (o.media_error || stop) {} else {
                StopOtherPlayer(!o.start);
                o.alert.close();
                if (!o.start) {
                    js("start");
                    o.start = true;
                    js("new");
                    gaTracker("play", "Play", true)
                } else {
                    gaTracker("resume", "Resume")
                }
                if (v.fullonplay == 1 && !o.fullscreen) {
                    if (v.fullonplaymobile == 1) {
                        o.system.mobile ? this.Fullscreen() : ''
                    } else {
                        this.Fullscreen()
                    }
                }
                if (Advertising("preroll") || Advertising("intro")) {
                    datetime(2)
                } else {
                    if (v.redirect == 1 && exist(v.redirectonplay) && !exist(options.redirect)) {
                        redirect(v.redirectonplay);
                        stop = true
                    }
                    if (!stop) {
                        if (o.file_type != 'pdf') {
                            o.media.duration() > 0 ? o.controls.Duration(o.media.time(), o.media.duration()) : ''
                        }
                        var playroll = false;
                        if (o.media.time() > 1 && v.pauserollonplay == 1 && noads != 1) {
                            playroll = Advertising("pauseroll")
                        }
                        if (playroll) {} else {
                            if (o.controls) {
                                if (o.controls.SettingsVisible()) {
                                    o.controls.Settings()
                                }
                            }
                            if (exist(o.lunchfileonstart)) {
                                console.log("lunch", o.lunchfileonstart);
                                var ol = o.lunchfileonstart.valueOf();
                                o.lunchfileonstart = undefined;
                                o.actions.NewFile(ol)
                            } else {
                                o.media.Play()
                            }
                            o.controls.Play();
                            if (o.system.mobile) {
                                o.controls.HideInterval()
                            }
                            if (exist(o.share)) {
                                o.share.isOpen() ? o.share.Hide() : ''
                            }
                            if (v.filters == 1 && o.tagvideo) {
                                css(o.media.tag(), {
                                    "filter": "none"
                                })
                            }
                            if (v.heartbeats == 1 && exist(v.heartbeat) && o.dt) {
                                if (v.heartbeat != '' && !exist(o.heartbeatInterval)) {
                                    o.heartbeatInterval = setInterval(Heartbeat, v.heartbeatinterval * 1000);
                                    Heartbeat()
                                }
                            }
                        }
                    }
                }
            }
        };
        this.Pause = function() {
            if (o.play) {
                o.media.Pause();
                o.controls.Pause();
                js("pause");
                v.posteronpause ? ShowPoster() : '';
                if (v.filters == 1 && o.tagvideo) {
                    css(o.media.tag(), {
                        "filter": "grayscale(100%)"
                    })
                }
                if (!exist(o.vast) && v.pauserollonplay == 0) {
                    Advertising("pauseroll")
                }
            }
        };
        this.YoutubePauseroll = function() {
            if (o.play) {
                js("pause");
                if (!exist(o.vast) && v.pauserollonplay == 0) {
                    Advertising("pauseroll")
                }
            }
        };
        this.Mute = function() {
            o.media.Mute();
            o.controls.Mute();
            o.muted = true;
            js("mute")
        };
        this.Unmute = function() {
            o.media.Unmute();
            o.muted = false;
            o.controls.Unmute();
            js("unmute")
        };
        this.Volume = function(x, y) {
            x < 0.02 ? x = 0 : '';
            x > 1 ? x = 1 : '';
            if (x <= 0) {
                this.Mute()
            } else {
                if (o.muted) {
                    this.Unmute()
                }
                v.volume = x
            }
            js("volume", x);
            o.controls.Volume(x, y);
            o.media.Volume(x)
        };
        this.Waiting = function() {
            o.controls.Waiting()
        };
        this.StopWaiting = function() {
            o.controls.StopWaiting()
        };
        this.Progress = function() {
            this.StopWaiting()
        };
        this.Seeked = function() {
            o.actions.UpdatePlay();
            this.StopWaiting()
        };
        this.Duration = function(time, duration) {
            if (o.continue && !o.start) {
                var f = o.continue.flag();
                if (f.t && f.d) {
                    time = f.t
                }
            }
            o.controls.Duration(time, duration)
        };
        this.LoadedData = function(time, duration) {
            if (exist(o.seekto) && o.file_type != "youtube") {
                o.actions.Seek(o.seekto, false);
                o.seekto = undefined
            }
        };
        this.ScreenClick = function() {
            var d = new Date();
            o.clicktime = d.getTime();
            var x = false;
            if (o.controls.SettingsVisible() && v.settings.always != 1) {
                o.controls.Settings();
                x = true
            }
            if (v.playlist.always == 0) {
                if (o.controls.PlaylistVisible() && v.playlist.autohide == 1) {
                    o.controls.Playlist();
                    x = true
                }
            }
            if (v.redirect == 1 && exist(v.redirectonclick) && !exist(options.redirect)) {
                redirect(v.redirectonclick);
                x = true
            }
            if (!x) {
                this.Toggle()
            }
        };
        this.ControlsBgClick = function() {
            if (o.controls.SettingsVisible()) {
                o.controls.Settings()
            }
        };
        this.Toggle = function() {
            if (o.media.status() == "playing") {
                this.Pause()
            } else {
                this.Play()
            }
            Subtitle(o.media.time())
        };
        this.Seek = function(sec, hand) {
            if (sec < o.media.duration()) {
                o.seeked_time = sec;
                o.media.Seek(sec);
                if (hand) {
                    o.controls.Seek(sec, o.media.duration())
                }
                o.seeking = true;
                o.seeking_time = o.media.time();
                Subtitle(o.seeking_time)
            }
        };
        this.Open = function(url, target, endfull) {
            if (o.media.status() == "playing" && o.mode != 'audio') {
                Pause();
                if (o.fullscreen && endfull) {
                    o.controls.Normalscreen()
                }
            }
            window.open(url, target)
        };
        this.Download = function() {
            var x = o.media.currentFile();
            if (exist(v.download)) {
                x = v.download
            }
            if (x != '') {
                var win = window.open(x, '_blank');
                win.focus()
            }
        };
        this.UpdatePlay = function() {
            var time = o.media.time();
            var duration = o.media.duration();
            o.controls.Played(time, duration)
        };
        this.Playing = function() {
            var time = o.media.time();
            var duration = o.media.duration();
            if (!o.seeking) {
                o.controls.Played(time, duration)
            } else {
                o.media.time() != o.seeking_time ? o.seeking = false : ''
            }
            if ((v.ga == 1 || v.yamtr == 1) && duration > 0) {
                var x = time / duration;
                gaTrackPlay("play25", "Play 25%", x, 0.25);
                gaTrackPlay("play50", "Play 50%", x, 0.50);
                gaTrackPlay("play75", "Play 75%", x, 0.75)
            }
            if (v.reload == 1) {
                if (o.play && time > 0) {
                    var z = false;
                    if (v.reloadlive == 1) {
                        if (!o.media.isLive()) {
                            z = true
                        }
                    }
                    if (time == o.time && !z) {
                        o.reloadTimer++;
                        if (o.reloadTimer == v.reloadtimeout * (1000 / o.timerTime)) {
                            o.actions.Reload()
                        }
                    } else {
                        o.reloadTimer = 0
                    }
                    o.time = time
                }
            }
            if (v.vast == 1 && v.nomidroll != 1) {
                Midroll(time, duration)
            }
            if (v.pass == 1 && v.passontime > -1) {
                PasswordTime(time, duration)
            }
            if (o.subtitle_on) {
                Subtitle(time)
            }
            if (o.storage && v.timestore == 1) {
                o.continue.write(time, duration)
            }
            if (exist(v.end)) {
                if (v.end > 0 && time > v.end) {
                    o.media.Recover();
                    o.actions.Stop();
                    v.start > 0 ? o.seekto = v.start : '';
                    o.actions.Ended()
                }
            }
        };

        function gaTrackPlay(x, y, t, p) {
            if (!exist(o.gatracked[y])) {
                if (t > p) {
                    gaTracker(x, y, true)
                }
            }
        };
        this.Reload = function() {
            !o.media.isLive() ? o.seekto = o.media.time() : '';
            var openpl = o.controls.PlaylistVisible();
            o.reloadTimer = 0;
            js("reload");
            o.media.reload();
            openpl && v.playlist.autohide == 1 ? o.controls.PlaylistShow() : ''
        };
        this.Stopped = function() {
            o.controls.Played(0, 0);
            o.controls.Loaded(0, 0);
            o.actions.Duration(0, 0);
            o.controls.StopWaiting()
        };
        this.Loading = function() {
            var time = o.media.loaded();
            var duration = o.media.duration();
            o.controls ? o.controls.Loaded(time, duration) : ''
        };
        this.Ended = function() {
            js("fileend");
            if (v.loop == 1) {
                if (o.file_type == "youtube") {
                    this.Stop()
                }
                if (v.start > 0) {
                    o.actions.Seek(v.start)
                }
                this.Play()
            } else {
                if (o.media.isLive() || o.file_type == "youtube") {
                    this.Stop()
                } else {
                    v.finishrewind == 1 ? o.actions.Seek((v.start > 0 ? v.start : 0), true) : ''
                }
                o.controls.onEnded();
                v.intros == 1 ? v.outros = 1 : '';
                if (Advertising("postroll") || Advertising("outro")) {} else {
                    End()
                }
            }
        };
        this.Fullscreen = function() {
            o.frameresize.contentWindow.onresize = Resize;
            var stop = false;
            var error = false;
            o.fullscreen_process = true;
            setTimeout(function() {
                o.fullscreen_process = false
            }, 3000);
            for (var x in o.motions) {
                if (o.motions.hasOwnProperty(x)) {
                    o.motions[x].TheEnd2()
                }
            }
            try {
                o.fullscreen_start = true;
                if (o.frame.requestFullScreen) {
                    o.frame.requestFullScreen();
                    o.realfullscreen = true
                } else if (o.frame.requestFullscreen) {
                    o.frame.requestFullscreen();
                    o.realfullscreen = true
                } else if (o.frame.mozRequestFullScreen) {
                    o.frame.mozRequestFullScreen();
                    o.realfullscreen = true
                } else if (o.frame.webkitRequestFullScreen) {
                    o.frame.webkitRequestFullScreen();
                    o.realfullscreen = true
                } else if (o.frame.msRequestFullscreen) {
                    o.frame.msRequestFullscreen();
                    o.realfullscreen = true
                }
                if (o.system.ios && v.nativefullios == 1 && o.tagvideo && !o.realfullscreen) {
                    var x = o.media.tag();
                    if (x) {
                        if (x.webkitSupportsFullscreen) {
                            x.webkitEnterFullScreen();
                            x.addEventListener("webkitendfullscreen", iosExitFullscreen);
                            o.media.nativeSubtitle();
                            stop = true
                        }
                    }
                }
            } catch (e) {
                error = true;
                log(e)
            }
            if (!o.realfullscreen && !stop) {
                this.FullscreenUI()
            }
            if (!error) {
                if (o.ispipkit) {
                    o.media.PipWebkit()
                }
                if (v.hotkey.volumewheelfull == 1) {
                    VolumeWheelX(true);
                    o.volumewheel = true
                }
                js("fullscreen");
                gaTracker("full", "Fullscreen", true)
            }
        };
        var volumewheelin;
        var lastwheel = {
            x: 0,
            y: 0
        };

        function VolumeWheel(e) {
            o.hidden_volume_over = true;
            clearInterval(volumewheelin);
            volumewheelin = setInterval(function() {
                o.hidden_volume_over = false;
                o.controls.resize();
                lastwheel = {
                    x: 0,
                    y: 0
                };
                clearInterval(volumewheelin)
            }, 2000);
            o.controls.resize();
            e.preventDefault();
            e.deltaX != 0 ? lastwheel.x++ : lastwheel.x--;
            e.deltaY != 0 ? lastwheel.y++ : lastwheel.y--;
            if (e.wheelDelta != 0) {
                if (lastwheel.x > lastwheel.y) {
                    if (e.deltaX > 0) {
                        o.actions.Volume(parseFloat(v.volume) - v.hotkey.wheelstep / 10, "no")
                    } else {
                        o.actions.Volume(parseFloat(v.volume) + v.hotkey.wheelstep / 10, "no")
                    }
                } else {
                    if (e.deltaY > 0) {
                        o.actions.Volume(parseFloat(v.volume) + (o.system.win ? -v.hotkey.wheelstep / 10 : v.hotkey.wheelstep / 10), "no")
                    } else {
                        o.actions.Volume(parseFloat(v.volume) - (o.system.win ? -v.hotkey.wheelstep / 10 : v.hotkey.wheelstep / 10), "no")
                    }
                }
                o.controls.volumescroll()
            }
        }

        function iosExitFullscreen() {
            if (o.system.ios) {
                o.media.removeNativeSubtitle();
                js("exitfullscreen")
            }
        }
        this.FullscreenUI = function() {
            if (o.fullscreen_start) {
                o.fullscreen = true;
                o.controls.Fullscreen();
                if (!o.realfullscreen) {
                    if (exist(o.parentIframe)) {
                        try {
                            css(o.parentIframe, {
                                'width': '100%',
                                'height': '100%',
                                'position': 'fixed',
                                'left': 0,
                                'top': 0,
                                'zIndex': "100000"
                            })
                        } catch (err) {}
                    }
                    css(o.frame, {
                        'width': '100%',
                        'height': '100%',
                        'position': 'fixed',
                        'left': 0,
                        'top': 0,
                        'zIndex': "100000"
                    });
                    o.screen_w = o.frame.offsetWidth;
                    o.screen_h = o.frame.offsetHeight;
                    try {
                        document.body.style.overflow = 'hidden';
                        if (!exist(o.playlist)) {
                            document.ontouchmove = function(e) {
                                e.preventDefault()
                            }
                        }
                    } catch (err) {}
                }
                if (v.fullblack == 1) {
                    css(o.frame, {
                        'backgroundColor': '#000000'
                    })
                }
                if (o.oo) {
                    hide(o.oo)
                }
                Subtitle(o.media.time());
                o.fullscreen_start = false
            }
        };
        this.Normalscreen = function() {
            _fullscreen_end = true;
            if (document.cancelFullScreen) {
                document.cancelFullScreen()
            } else if (document.exitFullscreen) {
                document.exitFullscreen()
            } else if (document.cancelFullscreen) {
                document.cancelFullscreen()
            } else if (document.mozCancelFullScreen) {
                document.mozCancelFullScreen()
            } else if (document.webkitCancelFullScreen) {
                document.webkitCancelFullScreen()
            } else if (document.msExitFullscreen) {
                document.msExitFullscreen()
            }
            if (!o.realfullscreen) {
                this.NormalscreenUI(false)
            }
        };
        this.changeAspect = function(x) {
            var stop = false;
            var coh = o.container_w / x;
            if (exist(o.parentIframe)) {
                try {
                    css(o.parentIframe, {
                        'height': coh
                    })
                } catch (err) {
                    stop = true;
                    log("iframe crossdomain issue")
                }
            }
            if (!stop) {
                o.aspect = x;
                o.container_h = coh;
                if (o.aspect > 0) {
                    css(o.container, {
                        'height': coh
                    })
                }
                js("height", coh)
            }
            if (o.vast) {
                o.screen_h = coh;
                o.vast.Resize()
            }
        };
        this.NormalscreenUI = function(x) {
            if (_fullscreen_end || x) {
                o.fullscreen = false;
                if (!o.realfullscreen) {
                    if (exist(o.parentIframe)) {
                        try {
                            css(o.parentIframe, {
                                'position': 'static',
                                'left': 0,
                                'top': 0,
                                'zIndex': 'unset'
                            });
                            css(o.parentIframe, o.parentIframe_style);
                            css(o.parentIframe, {
                                'width': o.normal_w,
                                'height': o.normal_h
                            })
                        } catch (err) {}
                    }
                    css(o.frame, {
                        'width': o.normal_w,
                        'height': o.normal_h,
                        'position': 'absolute',
                        'left': 0,
                        'top': 0,
                        'zIndex': 'unset'
                    });
                    try {
                        document.body.style.overflow = 'auto';
                        document.ontouchmove = function(e) {
                            return true
                        }
                    } catch (err) {}
                }
                o.controls.Normalscreen();
                if (o.oo) {
                    show(o.oo)
                }
                if (v.fullblack == 1) {
                    css(o.frame, {
                        'backgroundColor': v.screencolor
                    });
                    if (v.transparent == 1) {
                        o.frame.style.backgroundColor = 'transparent'
                    } else {
                        css(o.frame, {
                            'backgroundColor': v.screencolor
                        })
                    }
                }
                if (v.hotkey.volumewheelfull == 1) {
                    VolumeWheelX(false);
                    o.volumewheel = false
                }
                Subtitle(o.media.time());
                _fullscreen_end = false;
                js("exitfullscreen");
                o.realfullscreen = false;
                o.fullscreen_process = false
            }
        };
        this.volumewheel = function(x) {
            VolumeWheelX(x)
        };

        function VolumeWheelX(x) {
            lastwheel = {
                x: 0,
                y: 0
            };
            if (x) {
                window.addEventListener("wheel", VolumeWheel, true)
            } else {
                clearInterval(volumewheelin);
                window.removeEventListener("wheel", VolumeWheel, true)
            }
        }
        this.Stop = function() {
            v.preload = 0;
            o.controls.Pause();
            o.actions.Stopped();
            o.media.Volume(v.volume);
            if (o.controls.SettingsVisible()) {
                o.controls.Settings()
            }
            if (o.muted) {
                this.Mute()
            }
            if (exist(o.heartbeatInterval)) {
                clearInterval(o.heartbeatInterval);
                delete o.heartbeatInterval
            }
            Subtitle(0);
            log("stop");
            js("stop")
        };
        this.SetQuality = function(x) {
            if (exist(o.current_quality)) {
                if (o.current_quality != x) {
                    o.current_quality = x;
                    if (v.qualitystore == 1) {
                        o.default_quality = o.files_quality[x];
                        if (o.storage) {
                            localStorage.setItem("pljsquality", o.default_quality)
                        }
                    }
                    o.media.SetQuality(x);
                    js("quality", o.files_quality[x]);
                    o.controls.QualityChanged(x)
                }
            }
        };
        this.AirplayChanged = function() {
            o.controls ? o.controls.AirplayChanged() : ''
        };
        this.SetAudioTrack = function(x) {
            if (exist(o.current_audiotrack)) {
                if (o.current_audiotrack != x) {
                    o.current_audiotrack = x;
                    o.media.SetAudioTrack(x);
                    js("audiotrack", x);
                    o.controls.AudioTrackChanged(x)
                }
            }
        };
        this.SetSubtitle = function(x) {
            if (exist(o.current_subtitle)) {
                if (o.current_subtitle != x) {
                    o.current_subtitle = x;
                    o.subtitle_on = true;
                    o.media.SetSubtitle(x);
                    js("subtitle", o.files_subtitle[x]);
                    o.controls.SubtitleChanged()
                } else {
                    o.current_subtitle = -1;
                    v.subtitle_start = 0;
                    o.subtitle_on = false;
                    o.controls.SubtitleChanged();
                    exist(o.subtitle) ? o.mediacontainer.removeChild(o.subtitle) : '';
                    delete o.subtitle
                }
            }
        };
        this.SetSpeed = function(x) {
            o.media.SetSpeed(x == o.speed1 ? 1 : o.files_speed[x]);
            o.current_speed = x
        };
        this.RenewSubtitle = function() {
            Subtitle(o.media.time());
            StyleSubtitle()
        };

        function Subtitle(time) {
            if (o.subtitle_on && exist(o.subs)) {
                var sub = o.media.sub();
                if (sub) {
                    var x = o.current_subtitle;
                    if (exist(sub[x])) {
                        if (exist(sub[x][1])) {
                            var t = parseInt(time * 10);
                            if (exist(sub[x][1][t])) {
                                var y = '';
                                y = sub[x][0][sub[x][1][t]];
                                if (!exist(o.subtitle)) {
                                    o.subtitle = createElement('div');
                                    o.mediacontainer.appendChild(o.subtitle);
                                    StyleSubtitle()
                                }
                                if (o.controls.ToolbarHidden()) {
                                    css(o.subtitle, {
                                        "position": "absolute",
                                        "bottom": (v.sub_bottom * 1)
                                    })
                                } else {
                                    css(o.subtitle, {
                                        "position": "absolute",
                                        "bottom": (v.sub_bottom * 1 + v.toolbar.h * 1)
                                    })
                                }
                                o.subtitle.innerHTML = '<span style="' + (v.sub_bg == 1 ? 'background-color:' + hexToRGBA(v.sub_bgcolor, v.sub_bga) : '') + '-webkit-box-decoration-break: clone;color:' + (v.sub_color.indexOf("#") == -1 ? '#' : '') + v.sub_color + ';padding:' + v.sub_bgpadding + 'px ' + v.sub_bgpadding * 2 + 'px;border-radius:' + v.sub_bgo + 'px;margin:0 0;line-height:1.8;font-weight:' + v.sub_weight + '">' + trim(y) + '</span>';
                                if (v.sub_big_fullscreen == 1) {
                                    if (o.fullscreen) {
                                        css(o.subtitle, {
                                            "font-size": ((v.sub_size_fullscreen + ((parseInt(v.sub_sizeproc) - 100) * v.sub_size / 100)) + "px")
                                        })
                                    } else {
                                        css(o.subtitle, {
                                            "font-size": ((v.sub_size + ((parseInt(v.sub_sizeproc) - 100) * v.sub_size / 100)) + "px")
                                        })
                                    }
                                }
                                _subtitle_empty = false
                            } else {
                                if (!_subtitle_empty && exist(o.subtitle)) {
                                    o.subtitle.innerHTML = '';
                                    _subtitle_empty = true
                                }
                            }
                        }
                    }
                }
            }
        }

        function StyleSubtitle() {
            if (o.subtitle) {
                css(o.subtitle, {
                    "position": "absolute",
                    "width": "100%",
                    "padding-left": "10%",
                    "padding-right": "10%",
                    "left": 0,
                    "color": v.sub_color,
                    "text-align": "center",
                    "box-sizing": "border-box"
                });
                o.subtitle.draggable = "true";
                if (v.sub_shadow == 1) {
                    css(o.subtitle, {
                        "text-shadow": "1px 1px 2px black"
                    })
                } else {
                    css(o.subtitle, {
                        "text-shadow": "none"
                    })
                }
            }
        }
        var thumbs_loading = false;

        function ThumbsLoading() {
            if (!thumbs_loading) {
                if (exist(v.thumbnails)) {
                    if (v.thumbnails != '') {
                        thumbs_loading = true;
                        var xhr = XHR(v.thumbnails);
                        xhr.onload = function() {
                            thumbs_loading = false;
                            if (this.readyState == 4 && this.status == 200) {
                                ThumbsParse(this)
                            } else {
                                v.thumbnails = ''
                            }
                        };
                        xhr.onerror = function(e) {
                            thumbs_loading = false;
                            v.thumbnails = ''
                        };
                        xhr.send()
                    }
                }
            }
        }

        function ThumbsParse(j) {
            try {
                var x = j.responseText;
                var rows = Array();
                rows = x.split('\n');
                o.thumbs = [];
                if (rows[0].indexOf("WEBVTT") > -1) {
                    for (i = 0; i < rows.length; i++) {
                        if (rows[i].indexOf('-->') > -1 && rows[i].indexOf(':') > -1) {
                            t1 = TimeVtt(rows[i].substr(0, rows[i].indexOf('-->')));
                            t2 = TimeVtt(rows[i].substr(rows[i].indexOf('-->') + 4, 12));
                            x_url = '';
                            if (i < rows.length - 1) {
                                x_url = rows[i + 1];
                                if (x_url.indexOf("http") != 0) {
                                    x_url = v.thumbnails.substr(0, v.thumbnails.lastIndexOf("/") + (x_url.indexOf("/") == 0 ? 0 : 1)) + x_url
                                }
                            }
                            o.thumbs.push({
                                "t1": t1,
                                "t2": t2,
                                "url": x_url
                            })
                        }
                    }
                    o.thumbs_on = true
                }
            } catch (e) {
                log("Thumbnails Error")
            }
        }

        function TimeVtt(srt) {
            var tmp = srt.split(':');
            var out = 0;
            tmp.length == 2 ? tmp.unshift("00") : '';
            tmp[0] != '00' ? out += tmp[0] * 3600 : '';
            tmp[1] != '00' ? out += tmp[1] * 60 : '';
            out += tmp[2].substr(0, 2) * 1;
            out = out + tmp[2].substr(2) * 1;
            return out
        }
        var vast_and;
        var vast_or;
        var vast_type;
        var vast_loaders;
        var vasturl;

        function Advertising(x) {
            if (v["vast_" + x + "_timebreak"] > 0 && o.storage) {
                var tb = localStorage.getItem("pljs" + x + "_" + v.d);
                if (tb) {
                    var ct = new Date();
                    o.clicktime = ct.getTime();
                    if ((ct.getTime() - tb) / 3600000 < v["vast_" + x + "_timebreak"]) {
                        return false
                    }
                }
            }
            if (o.compilations.indexOf("VAST") != -1 && v.vast == 1 && !o.noads && v[x + 's'] == 1) {
                if (x == "intro" && exist(v.intro)) {
                    if (v.intro != "") {
                        if (o.dt) {
                            log("preroll");
                            js("preroll_start");
                            vasturl = [];
                            o.vasttype = "preroll";
                            var intro_or = v.intro.split(" or ");
                            if (intro_or.length > 1) {
                                v.intro = intro_or[Math.floor(Math.random() * intro_or.length)]
                            }
                            var intro = v.intro.split(" and ");
                            o.adsinchain = intro.length;
                            o.adscounter = 1;
                            var clck = (v.introclickable == 1 && exist(v.introclick) ? v.introclick : '').split(" and ");
                            var y = {
                                adsystem: "intro",
                                click: clck[0],
                                events: [],
                                extensions: {
                                    isClickable: v.introclickable,
                                    skipTime: v.introskiptime,
                                    skipTime2: v.introclosetime,
                                    controls: (v.introcontrols == 1 ? 0 : 1),
                                    linkTxt: (v.introtxt == 1 && clck[0] != '' ? Lang("acceptinvitation") : "")
                                },
                                file: intro[0],
                                isVpaid: false,
                                introtitle: v.introtitle
                            };
                            delete v[x];
                            v[x] = undefined;
                            o.vast = new VastVideo();
                            o.vast.Go(y);
                            if (intro.length > 0) {
                                intro.shift();
                                v.intro = intro.join(' and ')
                            }
                            if (clck.length > 0) {
                                clck.shift();
                                v.introclick = clck.join(' and ')
                            }
                            return true
                        } else {
                            delete v[x];
                            v[x] = undefined
                        }
                    }
                }
                if (x == "outro" && exist(v.outro)) {
                    if (v.outro != "") {
                        if (o.dt) {
                            log("postroll");
                            js("postroll_start");
                            vasturl = [];
                            o.vasttype = "postroll";
                            var clck = (v.introclickable == 1 && exist(v.outroclick) ? v.outroclick : '');
                            var y = {
                                adsystem: "outro",
                                click: clck,
                                events: [],
                                extensions: {
                                    isClickable: v.introclickable,
                                    skipTime: v.introskiptime,
                                    skipTime2: v.introclosetime,
                                    controls: v.introcontrols,
                                    linkTxt: (v.introtxt == 1 && clck != '' ? Lang("acceptinvitation") : "")
                                },
                                file: v.outro,
                                isVpaid: false,
                                introtitle: v.introtitle
                            };
                            delete v[x];
                            v[x] = undefined;
                            o.vast = new VastVideo();
                            o.vast.Go(y);
                            return true
                        } else {
                            delete v[x];
                            v[x] = undefined
                        }
                    }
                }
                if (exist(o.vast) || exist(o.vastloader)) {
                    js("vast_init", x);
                    return true
                } else {
                    if (exist(v[x])) {
                        if (v[x].toString().indexOf(".") > -1) {
                            js("vast_init", x);
                            o.actions.Waiting();
                            x != "midroll" ? Curtain() : '';
                            vast_and = 0;
                            vast_or = 0;
                            vast_type = x;
                            vasturl = v[x].split(" and ");
                            vast_loaders = [];
                            o.adsinchain = vasturl.length;
                            o.adscounter = 1;
                            for (var i = 0; i < vasturl.length; i++) {
                                vasturl[i] = vasturl[i].split(" or ")
                            }
                            v[x + "_recover"] = v[x];
                            delete v[x];
                            o.vasttype = x;
                            o.vast = new VastVideo();
                            o.vastloader = new VastLoader();
                            if (v.vast_preload == 1) {
                                for (var i = 0; i < vasturl.length; i++) {
                                    var n = i == 0 ? 1 : 0;
                                    if (vasturl[i].length > n) {
                                        for (var j = n; j < vasturl[i].length; j++) {
                                            var _url = trim(vasturl[i][j]);
                                            vast_loaders[_url] = new VastLoader(true);
                                            vast_loaders[_url].Load(_url, x)
                                        }
                                    }
                                }
                            }
                            o.vastloader.Load(trim(vasturl[0][0]), x);
                            return true
                        } else {
                            return false
                        }
                    } else {
                        return false
                    }
                }
            } else {
                return false
            }
        };

        function Midroll(x, d) {
            if (exist(o.midrollo) && v.midrolls == 1) {
                var y;
                for (var i in o.midrollo) {
                    if (o.midrollo.hasOwnProperty(i)) {
                        if (!exist(o.midrollo[i].worked) && exist(o.midrollo[i].time) && exist(o.midrollo[i].vast)) {
                            var z = o.midrollo[i].time.toString();
                            if (z) {
                                if (z.indexOf("%") > 0) {
                                    if (d > 0) {
                                        z = parseInt(z.substr(0, z.indexOf("%"))) * d / 100
                                    } else {
                                        z = -1
                                    }
                                } else {
                                    z = parseInt(z)
                                }
                                if (x >= z) {
                                    if (v.vast_midrollrest > 0 && z > -1) {
                                        if (x - z >= v.vast_midrollrest) {
                                            z = -1
                                        }
                                    }
                                    if (z > -1) {
                                        y = o.midrollo[i].vast;
                                        v.midroll = o.midrollo[i].vast;
                                        if (Advertising("midroll")) {
                                            o.midrollo[i].worked = true;
                                            break
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        };
        this.VastReady = function(x) {
            delete o.vastloader;
            log("VAST ready");
            js("vast_ready", o.vasttype);
            if (exist(o.vast)) {
                if (o.play) {
                    o.media.Pause();
                    o.controls.Pause()
                }
                if (v.preload == 0 && v.vastbgpreload == 1 && o.media.time() == 0 && o.media.duration() == 0) {
                    v.preload = 1;
                    o.media.Preload()
                }
                if ((!o.vast.tagLive() || x.isVpaid) && o.vastgo > 0) {
                    log("VAST renew");
                    o.vast.Remove();
                    delete o.vast;
                    o.vast = new VastVideo()
                }
                o.vastgo++;
                o.vast.Go(x)
            } else {
                log("VAST alarm")
            }
        };
        this.VastError = function() {
            js('vast_error', o.vasttype);
            log("VAST error");
            o.adsinchain--;
            VastNext()
        };
        this.VastNext = function() {
            VastNext()
        };
        this.VastRemoveUrl = function(x) {
            if (v[o.vasttype + "_recover"]) {
                for (var i = 0; i < 3; i++) {
                    v[o.vasttype + "_recover"] = v[o.vasttype + "_recover"].replace(x + (i == 0 ? ' and ' : (i == 1 ? ' or ' : '')), '')
                }
            }
        };

        function VastNext() {
            if (vasturl.length > 0) {
                if (vast_or < vasturl[vast_and].length - 1) {
                    o.vast ? o.vast.RemoveForNextAd() : '';
                    vast_or++;
                    var _url = trim(vasturl[vast_and][vast_or]);
                    var _preloaded = VastPreloaded(_url);
                    if (_preloaded == 'skip') {
                        o.vastloader = new VastLoader();
                        o.vastloader.Load(_url, o.vasttype)
                    }
                    if (_preloaded == 'error') {
                        VastNext()
                    }
                } else {
                    VastRemoveAndPlay()
                }
            } else {
                VastRemoveAndPlay()
            }
        }

        function VastPreloaded(_url) {
            var x = 'skip';
            if (v.vast_preload == 1) {
                if (vast_loaders[_url]) {
                    var y = vast_loaders[_url].Status();
                    stop = true;
                    if (y == 'ready') {
                        o.vastloader = vast_loaders[_url];
                        log("VAST preloaded");
                        vast_loaders[_url].Ready()
                    } else {
                        if (y == '') {
                            x = 'ok';
                            o.vastloader = vast_loaders[_url];
                            vast_loaders[_url].disablePreload()
                        }
                        if (y == 'error') {
                            x = 'error'
                        }
                    }
                }
            }
            return x
        }
        this.VastInsertAnd = function(x) {
            vasturl.splice(vast_and + 1, 0, [x]);
            VastAddPreload(x)
        };
        this.VastInsertOr = function(x) {
            vasturl[vast_and].push(x);
            VastAddPreload(x)
        };
        this.VastRemoveAndPlay = function(x) {
            VastRemoveAndPlay(x)
        };

        function VastAddPreload(x) {
            if (v.vast_preload == 1 && vast_loaders) {
                vast_loaders[x] = new VastLoader(true);
                vast_loaders[x].Load(trim(x), o.vasttype)
            }
        }

        function VastRemoveAndPlay(dontplay) {
            var stop = false;
            if (vast_type == "preroll") {
                if (v.vast_preroll_andlimit > 0) {
                    if (o.vast_starts > 0 && o.vast_impressions >= v.vast_preroll_andlimit) {
                        stop = true
                    }
                }
            }
            if (vasturl.length > vast_and + 1 && !stop) {
                o.vast.RemoveForNextAd();
                vast_and++;
                o.adscounter++;
                vast_or = 0;
                var _url = trim(vasturl[vast_and][0]);
                var _preloaded = VastPreloaded(_url);
                if (_preloaded == 'skip') {
                    o.vastloader = new VastLoader();
                    o.vastloader.Load(_url, vast_type)
                }
                if (_preloaded == 'error') {
                    VastRemoveAndPlay(dontplay)
                }
            } else {
                RemoveCurtain();
                o.controls.StopWaiting();
                if (exist(o.vast)) {
                    o.vast.Remove();
                    delete o.vast
                }
                delete o.vastloader;
                vasturl = [];
                vast_or = 0;
                vast_and = 0;
                js("vast_finish", o.vasttype);
                vast_type = '';
                o.vast_impressions = 0;
                o.vast_starts++;
                if (o.vasttype == "preroll" || (o.vasttype == "pauseroll" && v.pauserollonplay == 1) || o.vasttype == "midroll") {
                    if (v.file != '?') {
                        o.media.AfterVast();
                        if ((o.file_type == "youtube" && !o.vastclick && o.system.ios) || dontplay == 'dontplay') {} else {
                            o.actions.Play(1)
                        }
                    }
                }
                if (o.vasttype == "postroll") {
                    End()
                }
                o.vastclick = false;
                delete o.vasttype
            }
        };
        this.VastRecover = function() {
            var x = ['preroll', 'pauseroll', 'postroll'];
            for (var i = 0; i < x.length; i++) {
                if (exist(v[x[i] + "_recover"])) {
                    v['vast_' + x[i] + '_limit']--;
                    if (v['vast_' + x[i] + '_limit'] > 0) {
                        v[x[i]] = v[x[i] + "_recover"]
                    }
                }
            }
        };
        this.Password = function() {
            Curtain();
            if (exist(o.pass)) {
                o.pass.Remove();
                o.pass = null
            }
            o.pass = new Pass()
        };
        this.RemovePassword = function() {
            RemoveCurtain();
            o.pass.Remove();
            o.pass = null
        };

        function Curtain() {
            o.curtain = createElement("div");
            o.frame.appendChild(o.curtain);
            css(o.curtain, {
                "width": "100%",
                "height": "100%",
                "position": "absolute",
                "top": 0,
                "left": 0,
                "background": "#000000",
                "opacity": 0.1
            });
            o.curtain.style.zIndex = 1000
        };

        function ShowPoster() {
            if (exist(o.poster)) {
                show(o.poster);
                css(o.poster, {
                    "opacity": v.poster_a
                });
                o.controls.refresh()
            }
        };
        this.HidePoster = function() {
            if (exist(o.poster)) {
                hide(o.poster);
                css(o.poster, {
                    "opacity": 0
                })
            }
        };
        this.ShowPoster = function() {
            ShowPoster()
        };

        function RemoveCurtain() {
            if (o.curtain) {
                o.frame.removeChild(o.curtain);
                delete o.curtain
            }
        };

        function StopOtherPlayer(x) {
            if (v.stopotherplayers == 1) {
                for (var i = 0; i < pljssglobal.length; i++) {
                    if (pljssglobal[i].api("id") != v.id) {
                        pljssglobal[i].api('pause')
                    }
                }
            }
            pljssglobalid = v.id
        }

        function IndexPlaylist(x) {
            var y = Object.keys(x).length;
            if (y > 0) {
                x = IndexPlaylistProcessor(x, y, '', -1)
            }
            return x
        }

        function IndexPlaylistProcessor(x, y, p, j) {
            if (exist(x['playlist'])) {
                x = x['playlist'];
                y = x.length
            }
            for (var i = 0; i < y; i++) {
                if (exist(x[i]['id'])) {
                    x[i]['pjs_id'] = x[i]['id']
                }
                x[i]['id'] = "x" + p + '-' + i + (exist(x[i]['id']) ? '-' + x[i]['id'] : '');
                j == -1 && i == 0 && !exist(x[i]['folder']) ? o.pl_first_id = x[i]['id'] : '';
                if (!exist(o.pl_first_id)) {
                    j == 0 && !exist(x[i]['folder']) ? o.pl_first_id = x[i]['id'] : ''
                }
                x[i]['pjs_parent'] = p;
                x[i]['pjs_parent_i'] = j;
                x[i]['pjs_i'] = i;
                if (exist(x[i]['comment'])) {
                    x[i]['title'] = x[i]['comment'];
                    var q1 = x[i]['file'] ? x[i]['file'].indexOf('[') : 0;
                    var q2 = x[i]['file'] ? x[i]['file'].indexOf(']') : 0;
                    if (q1 > 0 && q2 > 0) {
                        var s1 = x[i]['file'].substr(q1 + 1, q2 - q1 - 1);
                        var s2 = s1.split(",");
                        var s3 = '';
                        for (var k = 0; k < s2.length; k++) {
                            s3 += "[" + s2[k] + "]" + x[i]['file'].replace("[" + s1 + "]", s2[k]) + (k < s2.length - 1 ? "," : '')
                        }
                        x[i]['file'] = s3
                    }
                }
                o.playlist_dic[x[i]['id']] = x[i];
                if (exist(x[i]['playlist'])) {
                    x[i]['folder'] = x[i]['playlist']
                }
                if (exist(x[i]['folder'])) {
                    var z = Object.keys(x[i]['folder']).length;
                    if (z > 0) {
                        x[i]['folder'] = IndexPlaylistProcessor(x[i]['folder'], z, x[i]['id'], i)
                    }
                }
            }
            return x
        }

        function FindFileInPlaylist() {
            var x = [];
            if (exist(v.plstart)) {
                if (v.plstart.indexOf("x-") != 0) {
                    for (var y in o.playlist_dic) {
                        if (o.playlist_dic.hasOwnProperty(y)) {
                            if (o.playlist_dic[y].pjs_id == v.plstart) {
                                v.plstart = y
                            }
                        }
                    }
                }
                if (exist(o.playlist_dic[v.plstart])) {
                    x = o.playlist_dic[v.plstart]
                } else {
                    x = o.playlist[0];
                    if (v.plstart == o.plcontinue) {
                        o.seekto = undefined
                    }
                }
            } else {
                x = o.playlist[0]
            }
            for (var i = 0; i < 10; i++) {
                if (exist(x['folder'])) {
                    x = x['folder'][0]
                } else {
                    break
                }
            }
            v.plstart = x.id;
            if (v.plstart == o.plcontinue) {
                x.start = undefined
            }
            return x
        }

        function End() {
            gaTracker("end", "End", true);
            o.actions.VastRecover();
            if (o.storage && v.timestore == 1) {
                o.continue.write(0, o.media.duration())
            }
            if (o.controls.PlaylistExist()) {
                if (v.playlist.autoplaylist == 1 && o.controls.PlaylistNextExist()) {
                    o.controls.PlaylistNext();
                    if (o.play && o.system.ios && o.file_type != "native") {}
                } else {
                    if (v.playlist.playlistrewind == 1 && !o.controls.PlaylistNextExist()) {
                        o.media.Remove();
                        o.controls.PlaylistRewind()
                    }
                    if (v.playlist.openplaylistafter == 1) {
                        !o.controls.PlaylistVisible() ? o.controls.Playlist() : ''
                    }
                    ShowPoster();
                    js("finish")
                }
            } else {
                ShowPoster();
                js("finish")
            }
        }

        function Heartbeat() {
            var vts = Math.floor(Date.now() / 1000);
            var fts = (exist(v.livets) ? v.livets : 0) + parseInt(o.media.time());
            var type = 0;
            o.system.desktop ? type = 1 : '';
            o.system.ios ? type = 2 : '';
            o.system.android ? type = 3 : '';
            o.system.winmob ? type = 4 : '';
            o.system.tv ? type = 5 : '';
            var url = v.heartbeat.replace("[vts]", vts);
            url = url.replace("[fts]", fts);
            url = url.replace("[dvtp]", type);
            var gif = document.createElement("img");
            gif.setAttribute('src', url);
            gif.setAttribute('height', '1px');
            gif.setAttribute('width', '1px');
            o.frame.appendChild(gif)
        }
    };
    var Media = function(url) {
        var url;
        var urls;
        var urls_and;
        var current_url;
        var _status = "";
        var _tags;
        var started = false;
        var media;
        var media2;
        o.mediascale = 1;
        var wait;
        var sub = [];
        if (typeof(url) == 'string') {
            url = trim(url);
            if (url.indexOf("[{") == 0) {
                try {
                    url = url.replace(/pjs'qt/ig, '"');
                    url = JSON.parse(url)
                } catch (e) {
                    console.log(e);
                    url = "incorrect JSON"
                }
            }
            if (url.indexOf("#2") == 0) {
                url = fd2(url)
            }
            if (url.indexOf("#3") == 0 && url.indexOf(v.file3_separator) > 0) {
                url = fd3(url)
            }
            if (url.indexOf("#0") == 0) {
                url = fd0(url)
            }
            if (url.indexOf(".txt") > 0 || url.indexOf("googleapis.com") > 0) {
                if (url.indexOf('//.txt//') > 0) {
                    url = url.replace('//.txt//', '');
                    v.file = url
                }
                var xhr = XHR(url);
                xhr.onload = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        Playlist(this)
                    } else {
                        onError("playlist not found or access denied")
                    }
                };
                xhr.onerror = function(e) {
                    onError("playlist not found or access denied")
                };
                xhr.send();
                wait = true
            }
        }
        o.mediacontainer = createElement("div");
        css(o.mediacontainer, {
            "position": "absolute",
            "width": "100%",
            "height": "100%"
        });
        o.frame.appendChild(o.mediacontainer);
        if (v.hidevideo == 1) {
            hide2(o.mediacontainer);
            v.toolbar.hide = 0
        }
        if (!wait) {
            Start()
        }

        function Playlist(x) {
            if (x.responseText) {
                var y = x.responseText;
                if (y.indexOf("#2") == 0) {
                    y = fd2(y)
                }
                if (y.indexOf("#3") == 0 && y.indexOf(v.file3_separator) > 0) {
                    y = fd3(y)
                }
                y = y.replace(/(\r\n\t|\n|\r\t)/gm, "");
                try {
                    url = JSON.parse(y)
                } catch (e) {
                    onError("playlists JSON")
                }
                if (exist(url.items)) {
                    url = YoutubePlaylist(url)
                }
                if (o.controls) {
                    if (v.playlist.openplaylistbefore == 1) {
                        if (!o.controls.PlaylistVisible()) {
                            o.controls.PlaylistShow()
                        }
                    }
                }
                Start();
                Resize();
                js("playlist")
            }
        }

        function Start() {
            url = o.actions.File(url);
            url && url != '?' ? File(url) : ''
        }

        function onError(x) {
            log("Error: " + x);
            var y = true;
            if (urls) {
                if (urls.length > 0) {
                    current_url++;
                    y = current_url > urls.length - 1;
                    if (!y) {
                        var z = false;
                        if (o.file_type != FileType(urls[current_url]) || o.file_type != 'native') {
                            if (o.play) {
                                o.actions.Stop();
                                z = true
                            }
                        }
                        log("Alternative source");
                        File('or');
                        media.Play()
                    } else {
                        if (v.reload == 1) {
                            y = false;
                            ErrorReload()
                        }
                    }
                }
            }
            if (y) {
                v.ga == 1 ? gaTracker("error", "Error", true) : '';
                if (v.alerts && !o.media_error) {
                    if (v.alert404 == 1 && x == "not found") {
                        o.alert.txt(v.alert404text)
                    } else {
                        o.alert.txt("Error: " + x)
                    }
                }
                o.media_error = true;
                o.play ? o.controls.Pause() : '';
                exist(o.poster) ? o.actions.ShowPoster() : '';
                js("error", x)
            }
        };

        function ErrorReload() {
            log("Error Reload Timeout");
            exist(o.reloadErrorTimeout) ? clearTimeout(o.reloadErrorTimeout) : '';
            o.reloadErrorTimeout = setTimeout(function() {
                o.actions.Reload()
            }, v.reloadtimeout * 1000)
        }
        this.onError = function() {
            onError(media.errorMessage())
        };
        this.onEnded = function() {
            log("Ended");
            var x = false;
            if (media.duration() > 0 && !o.casting) {
                var time = o.current_time;
                if (time + 10 < media.duration()) {
                    log('Break (recovery)');
                    js("recovery");
                    media.Play();
                    media.Seek(time);
                    x = true
                }
            }
            if (!x) {
                o.actions.Ended();
                js("end")
            }
        };
        this.onPlay = function() {
            v.posterhide == 1 ? o.actions.HidePoster() : '';
            o.controls.Play();
            if (!started) {
                started = true;
                setTimeout(function() {
                    o.media.NativeControls()
                }, 500)
            }
            if (v.tags == 1 && exist(v.tagsurl)) {
                if (v.tagsurl.length > 5) {
                    RadioTags();
                    clearInterval(_tags);
                    _tags = setInterval(RadioTags, v.tagsinterval * 1000)
                }
            }
            js("play")
        };
        this.NativeControls = function() {
            if (v.nativecontrolsmobile == 1) {
                if (o.actions.NativeControls()) {
                    o.nativecontrols = media.nativeControls();
                    o.controls.refresh()
                }
            }
        };
        this.onPause = function() {
            o.controls.Pause()
        };
        this.onTimeupdate = function() {};
        this.onSeeking = function() {
            log("Seeking")
        };
        this.onSeeked = function() {
            log("Seeked");
            o.actions.Seeked();
            o.seeking_time ? js("seek", o.seeking_time) : ''
        };
        this.onMeta = function() {
            log("Metadata");
            o.actions.Metadata()
        };
        this.onDuration = function() {
            if (media) {
                log("Duration", media.duration());
                o.actions.Duration(media.time(), media.duration());
                js("duration", media.duration());
                if (exist(o.restart_audio)) {
                    o.actions.SetAudioTrack(o.restart_audio);
                    delete o.restart_audio
                }
            }
        };
        this.onVolume = function() {};
        this.onWaiting = function() {
            log("Waiting");
            o.actions.Waiting();
            js("waiting")
        };
        this.onProgress = function() {};
        this.onTimeupdate = function() {
            o.actions.StopWaiting();
            js("time", media.time());
            if (v.pip.on == 1 && exist(v.file2) && media.time() > 0) {
                if (!exist(o.media2)) {
                    o.media2 = createElement("div");
                    v.pip = MarginPadding(v.pip, 'margin', 'margin');
                    css(o.media2, {
                        "background": "#" + v.pip.bgcolor,
                        "border": v.pip.border + "px solid #" + v.pip.bordercolor,
                        "cursor": "pointer",
                        "position": "absolute",
                        "width": v.pip.width
                    });
                    if (v.pip.pip_shadow > 0) {
                        css(o.media2, {
                            "box-shadow": "0px 1px " + v.pip.pip_shadow + "px rgba(0,0,0,0.5)"
                        })
                    }
                    if (v.pip.position == "top-left" || v.pip.position == "left") {
                        css(o.media2, {
                            "top": v.pip.margintop - v.pip.marginbottom,
                            "left": v.pip.marginleft - v.pip.marginright
                        })
                    }
                    if (v.pip.position == "top-right" || v.pip.position == "right") {
                        css(o.media2, {
                            "top": v.pip.margintop - v.pip.marginbottom,
                            "right": v.pip.marginright - v.pip.marginleft
                        })
                    }
                    if (v.pip.position == "bottom-left") {
                        css(o.media2, {
                            "bottom": v.pip.marginbottom - v.pip.margintop,
                            "left": v.pip.marginleft - v.pip.marginright
                        })
                    }
                    if (v.pip.position == "bottom-right") {
                        css(o.media2, {
                            "bottom": v.pip.marginbottom - v.pip.margintop,
                            "right": v.pip.marginright - v.pip.marginleft
                        })
                    }!o.mouseHere && v.pip.hide == 1 ? hide(o.media2) : '';
                    o.frame.appendChild(o.media2)
                }
                if (!exist(media2)) {
                    media2 = new MediaVideo(v.file2, o.media2, true);
                    o.media2.addEventListener("click", ClickOnPip, false)
                }
            }
        };
        this.onYoutubeReady = function() {
            if (o.file_type == "youtube") {
                media.YoutubeReady()
            }
        };
        this.YoutubeReady = function() {
            if (o.file_type == "youtube" && media) {
                return media.ready()
            } else {
                return true
            }
        };
        this.getHLS = function() {
            return media.getHLS()
        };
        this.getDASH = function() {
            return media.getDASH()
        };
        this.SetQuality = function(x) {
            log("Quality", x);
            if ((o.file_type == "native" || (o.file_type == "hls" && (v.hlsquality == 0 || HlsLevelsLength() < 2)) || (o.file_type == "dash" && (v.dashquality == 0 || DashLevelsLength() < 2))) && exist(o.files[x])) {
                var time = this.time();
                o.seekto = time;
                o.actions.Seek(time, false);
                File(o.files[x]);
                o.actions.Play()
            }
            if (o.file_type == "hls" && v.hlsquality == 1 && HlsLevelsLength() > 1) {
                media.setHlsQuality(x)
            } else if (o.file_type == "dash" && v.dashquality == 1 && DashLevelsLength() > 1) {
                media.setDashQuality(x)
            } else if (o.file_type == "youtube") {
                media.setQuality(x)
            }
        };
        this.SetSubtitle = function(x) {
            if (exist(o.subs[x])) {
                log("Subtitle", x);
                o.current_subtitle = x;
                if (o.storage && v.sub_store == 1) {
                    if (exist(o.files_subtitle[x])) {
                        localStorage.setItem("pljssubtitle", o.files_subtitle[x])
                    }
                }
                SubtitleLoad()
            }
        };
        this.SetSpeed = function(x) {
            log("Speed", x);
            media.setSpeed(x)
        };
        this.nativeSubtitle = function() {
            if (o.tagvideo && o.subtitle_on) {
                media.addTrack(o.subs[o.current_subtitle], o.files_subtitle[o.current_subtitle])
            }
        };
        this.removeNativeSubtitle = function() {
            media.removeTrack()
        };
        this.SetAudioTrack = function(x) {
            log("Audiotrack", x);
            if (o.audiotracks.length > 0) {
                var time = this.time();
                o.seekto = time;
                o.actions.Seek(time, false);
                File(o.audiotracks[x]);
                o.actions.Play()
            } else {
                if (o.file_type == "hls" && v.hlsaudio == 1) {
                    media.setHlsAudioTrack(x)
                } else if (o.file_type == "dash" && v.dashaudio == 1) {
                    media.setDashAudioTrack(x)
                }
            }
        };
        this.getQuality = function() {
            var x = o.files_quality[o.current_quality];
            x == undefined ? x = '' : '';
            var y = autoQuality() && v.hlsautoquality == 1;
            return (y ? '' + Lang("auto") + ' ' : '') + x
        };
        this.getAudioTrack = function() {
            var x = o.files_audiotrack[o.current_audiotrack];
            x == undefined ? x = '' : '';
            return x
        };
        this.autoQuality = function() {
            return autoQuality()
        };

        function autoQuality() {
            var x = false;
            if (o.file_type == "youtube") {
                x = media.auto()
            }
            if (o.file_type == "hls" && v.hlsquality == 1 && HlsLevelsLength() > 1 && v.hlsautoquality == 1) {
                x = media.auto()
            }
            if (o.file_type == "dash" && v.dashquality == 1 && DashLevelsLength() > 1) {
                x = media.auto()
            }
            return x
        }

        function HlsLevelsLength() {
            if (o.file_type == "hls") {
                return media.HlsLevelsLength()
            } else {
                return 0
            }
        }

        function DashLevelsLength() {
            if (o.file_type == "dash") {
                return media.DashLevelsLength()
            } else {
                return 0
            }
        }
        this.resize = function(x) {
            if (o.file_type == "youtube") {
                media.resize()
            }
        };
        this.size = function() {
            return media.size()
        };
        this.reload = function() {
            log('reload');
            o.reloadTimer = 0;
            v.autoplay = 1;
            File(url)
        };
        if (!exist(o.poster)) {
            CreatePoster()
        }
        if (exist(v.poster)) {
            if (v.poster != '') {
                Poster(v.poster, o.poster, v.poster_scale)
            } else {
                delete v.poster
            }
        }

        function Status() {
            _status = media ? media.status() : ''
        }

        function ParseUrl(url) {
            urls = url.split(" or ");
            for (var i = 0; i < urls.length; i++) {
                if (urls[i].indexOf(" and ") > -1) {
                    urls_and = urls[i].split(" and ");
                    urls[i] = urls_and[random(0, urls_and.length - 1)]
                }
            }
            current_url = 0
        }

        function Timer() {
            Status();
            if (_status == "playing" || o.casting) {
                o.actions.Playing()
            }
            if (_status != "") {
                o.actions.Loading()
            }
        }

        function CreatePoster() {
            if (o.poster) {
                o.frame.removeChild(o.poster)
            }
            o.poster = createElement("div");
            css(o.poster, {
                "pointer-events": "none",
                "opacity": v.poster_a,
                transition: "opacity 0.5s"
            });
            if (v.poster_float == 1) {
                v.posterontop == 1 ? o.poster.style.zIndex = 100 : '';
                css(o.poster, {
                    'width': v.poster_floatwidth,
                    'height': v.poster_floatheight
                });
                var x = {
                    "margin": v.poster_floatmargin
                };
                x = MarginPadding(x, 'margin', 'margin');
                if (v.poster_floatposition.indexOf("right") > -1) {
                    rightside = 1;
                    css(o.poster, {
                        'position': 'absolute',
                        'right': x.marginright - x.marginleft
                    })
                } else {
                    css(o.poster, {
                        'position': 'absolute',
                        'left': x.marginleft - x.marginright
                    })
                }
                if (v.poster_floatposition.indexOf("top") > -1) {
                    css(o.poster, {
                        'top': x.margintop - x.marginbottom
                    })
                }
                if (v.poster_floatposition.indexOf("bottom") > -1) {
                    css(o.poster, {
                        'bottom': x.marginbottom - x.margintop
                    })
                }
                if (v.poster_floatposition == "right" || v.poster_floatposition == "left") {
                    css(o.poster, {
                        'top': '50%',
                        'margin-top': -v.poster_floatheight / 2 + x.margintop - x.marginbottom
                    })
                }
                if (v.poster_floatrounding > 0) {
                    css(o.poster, {
                        'border-radius': v.poster_floatrounding
                    })
                }
                if (v.poster_floatbgcolor != -1) {
                    css(o.poster, {
                        'background': v.poster_floatbgcolor
                    })
                }
            } else {
                css(o.poster, {
                    'position': 'absolute',
                    'left': 0,
                    'top': 0,
                    'width': '100%',
                    'height': '100%'
                })
            }
            o.frame.appendChild(o.poster)
        }

        function File(x, y) {
            if (x.indexOf('{') > -1 && x.indexOf('}') > -1 && x.indexOf(v.file2_separator) > -1) {
                var z = x.split(v.file2_separator);
                o.audiotracks = [];
                for (var i = 0; i < z.length; i++) {
                    o.files_audiotrack[i] = z[i].substr(z[i].indexOf("{") + 1, z[i].indexOf("}") - 1);
                    o.audiotracks[i] = z[i].substr(z[i].indexOf("}") + 1);
                    if (exist(v.default_audio)) {
                        if (v.default_audio == o.files_audiotrack[i]) {
                            o.current_audiotrack = i
                        }
                    }
                }
                x = o.audiotracks[o.current_audiotrack]
            }
            x && x.length > 2 ? ParseUrl(x) : '';
            var ft = o.file_type;
            if (urls.length > 0) {
                o.file_type = FileType(urls[current_url]);
                var create = false;
                if (exist(y)) {
                    create = true
                }
                url = urls[current_url];
                if (!create && x != 'x' && media && o.file_type == ft && (ft == "native" || ft == "vimeo" || ft == "hls")) {
                    media.src(urls[current_url])
                } else {
                    RemoveMedia();
                    CreateMedia(urls[current_url])
                }
                if (o.speed1) {
                    if (o.current_speed != o.speed1) {
                        media.setSpeed(o.files_speed[o.current_speed])
                    }
                }
            }
            clearInterval(o.timerInterval);
            o.timerInterval = setInterval(Timer, o.timerTime);
            if (exist(v.subtitle)) {
                if (v.subtitle != '') {
                    SubtitleStart(v.subtitle)
                }
            }
        }

        function FileType(x) {
            var type = "native";
            if (x) {
                if (x.indexOf(".m3u8") > 0) {
                    type = "hls"
                } else if (x.indexOf(".mpd") > 0) {
                    type = "dash"
                } else if (x.indexOf(".pdf") == x.length - 4) {
                    type = "pdf"
                } else if (x.indexOf('youtube.com/') > -1 || x.indexOf('youtu.be/') > -1) {
                    type = "youtube";
                    if (v.youtubeposter == 1) {
                        var y = 'https://img.youtube.com/vi/' + YoutubeID(x) + '/';
                        imageExists(y + 'maxresdefault.jpg', function(z) {
                            z > 100 ? v.poster = y + 'maxresdefault.jpg' : v.poster = y + 'hqdefault.jpg';
                            if (o.playlist_dic) {
                                o.playlist_dic[o.plid]['poster'] = v.poster
                            }
                            v.autoplay == 1 || started ? '' : Poster(v.poster, o.poster, v.poster_scale)
                        })
                    }
                } else if (x.indexOf('vimeo.com/') > -1) {
                    type = "vimeo"
                }
            }
            o.tagvideo = type == "native" || type == "hls" || type == "dash";
            return type
        }

        function imageExists(url, callback) {
            var img = new Image();
            img.onload = function() {
                callback(this.height)
            };
            img.src = url
        }

        function CreateMedia(x) {
            o.file_type = FileType(x);
            o.reverse_quality = false;
            if (o.tagvideo) {
                media = new MediaVideo(x, o.mediacontainer, false)
            }
            if (o.file_type == "youtube") {
                media = new MediaYoutube(x, o.mediacontainer)
            }
            if (v.vimeo == 1 && o.file_type == "vimeo") {
                media = new MediaVimeo(x, o.mediacontainer)
            }
            if (o.file_type == "pdf") {
                media = new MediaPdf(x)
            }
            o.controls ? o.controls.UpdateSettings() : '';
            var t = 0;
            if (exist(v.duration)) {
                if (o.continue && v.timestore == 1 && !o.start) {
                    t = o.continue.flag().t
                }
                setTimeout(function() {
                    o.actions.Duration(t, v.duration)
                }, 100)
            }
        }

        function RemoveMedia() {
            if (media) {
                media.Remove();
                delete media;
                media = null;
                _status = "ended"
            }
            if (media2) {
                media2.Remove();
                delete media2;
                media2 = undefined;
                o.frame.removeChild(o.media2);
                o.media2 = undefined
            }
        };
        this.Remove = function() {
            RemoveMedia()
        };
        this.File = function(x, y) {
            File(x, y)
        };
        this.Poster = function(x) {
            Poster(x, o.poster, v.poster_scale)
        };
        this.Play = function() {
            if (media) {
                if (o.casting) {
                    o.chromecast.Play()
                } else {
                    media.Play();
                    v.posterhide == 1 ? o.actions.HidePoster() : ''
                }
                if (exist(media2)) {
                    media2.Play()
                }
            } else {
                setTimeout(this.Play, 500)
            }
        };

        function ClickOnPip(event) {
            event.stopPropagation();
            window.event ? window.event.cancelBubble = true : '';
            var tmp = media;
            media.ChangePip(true, o.media2);
            media2.ChangePip(false, o.mediacontainer);
            media = media2;
            media2 = tmp;
            media.Play();
            media2.Play();
            js("pip")
        }
        this.ToolbarHide = function() {
            if (exist(o.media2)) {
                if (v.pip.hide == 1) {
                    hide(o.media2)
                } else {
                    if (v.pip.position.indexOf("bottom") > -1) {
                        css(o.media2, {
                            "bottom": v.pip.marginbottom - v.pip.margintop - v.toolbar.h
                        })
                    }
                }
            }
        };
        this.ToolbarShow = function() {
            if (exist(o.media2)) {
                if (v.pip.hide == 1) {
                    show(o.media2)
                } else {
                    if (v.pip.position.indexOf("bottom") > -1) {
                        css(o.media2, {
                            "bottom": v.pip.marginbottom - v.pip.margintop
                        })
                    }
                }
            }
            if (v.toolbar.resizeme) {
                v.toolbar.resizeme = false;
                o.controls.resizeFromText(1)
            }
        };
        this.PipToggle = function() {
            if (exist(o.media2)) {
                isVisible(o.media2) ? hide(o.media2) : show(o.media2)
            }
        };
        this.Airplay = function() {
            if (o.tagvideo && o.airplay) {
                media.airplay()
            }
        };
        this.PipWebkit = function() {
            if (o.tagvideo && o.pipwebkit) {
                media.pipwebkit()
            }
        };
        this.BeforeVast = function() {
            if (media) {
                datetime(0);
                media.BeforeVast()
            }
        };
        this.AfterVast = function() {
            media.AfterVast()
        };
        this.Pause = function() {
            if (o.casting) {
                o.chromecast.Pause()
            } else {
                media ? media.Pause() : log("nomedia")
            }
            if (exist(o.media2)) {
                media2.Pause()
            }
        };
        this.Recover = function() {
            o.actions.Seek(0, false);
            exist(o.poster) ? o.actions.ShowPoster() : '';
            File('x')
        };
        this.Toggle = function() {
            media ? media.Toggle() : ''
        };
        this.Seek = function(x) {
            if (media) {
                if (o.casting) {
                    o.chromecast.Seek(x)
                } else {
                    media.Seek(x)
                }
            }
        };
        this.Mute = function() {
            if (media) {
                media.Mute();
                o.casting ? o.chromecast.Mute() : ''
            }
        };
        this.Unmute = function() {
            if (media) {
                media.Unmute();
                o.casting ? o.chromecast.Unmute() : ''
            }
        };
        this.Volume = function(x) {
            media ? media.Volume(x) : '';
            if (o.casting) {
                o.chromecast.Volume(x)
            }
        };
        this.isPlaying = function() {
            return media ? media.isPlaying() : false
        };
        this.isLive = function() {
            return media ? media.isLive() : false
        };
        this.status = function() {
            return _status
        };
        this.ended = function() {
            var x = false;
            if (media) {
                if (media.time() > 0) {
                    x = media.time() == media.duration()
                }
            }
            return x
        };
        this.time = function() {
            var x = 0;
            if (media) {
                x = media.time();
                if (o.casting) {
                    var y = o.chromecast.Time();
                    y ? x = y : ''
                } else {
                    if (media.duration() > 0 && x != media.duration()) {
                        o.current_time = x + 0.0001
                    }
                }
                return x
            } else {
                return 0
            }
        };
        this.duration = function() {
            var x = 0;
            if (media) {
                x = media.duration();
                x == 0 && exist(v.duration) ? x = v.duration * 1 : '';
                if (o.casting) {
                    var y = o.chromecast.Duration();
                    y ? x = y : ''
                }
            }
            return x
        };
        this.loaded = function() {
            return media ? media.loaded() : 0
        };
        this.createposter = function() {
            CreatePoster()
        };
        this.Preload = function() {
            if (o.tagvideo) {
                media.preload()
            }
        };
        this.scale = function(x) {
            if (String(x).indexOf(":") > 0) {
                var y = x.split(":");
                var z0 = o.screen_w / o.screen_h;
                var z = y[0] / y[1];
                if (z0 != z) {
                    if (o.tagvideo) {
                        if (v.covervideo == 1) {
                            css(media.tag(), {
                                'object-fit': 'cover'
                            })
                        } else {
                            css(media.tag(), {
                                'object-fit': 'fill'
                            })
                        }
                    }
                    var w2 = o.screen_h * z;
                    var x2 = w2 / o.screen_w;
                    var h2 = o.screen_w / z;
                    var y2 = h2 / o.screen_h;
                    if (x2 < 1) {
                        o.mediascale = parseFloat(x2);
                        css(o.mediacontainer, {
                            "transform": "scaleX(" + o.mediascale + ")"
                        })
                    } else {
                        o.mediascale = parseFloat(y2);
                        css(o.mediacontainer, {
                            "transform": "scaleY(" + o.mediascale + ")"
                        })
                    }
                    o.custom_aspect = x
                }
            } else {
                o.mediascale += parseFloat(x);
                css(o.mediacontainer, {
                    "transform": "scale(" + o.mediascale + ")"
                })
            }
        };
        this.normalscale = function() {
            if (o.tagvideo) {
                css(media.tag(), {
                    'object-fit': 'contain'
                })
            }
            o.mediascale = 1;
            css(o.mediacontainer, {
                "transform": "scale(1)"
            });
            delete o.custom_aspect
        };
        this.currentSubtitle = function() {
            var x = undefined;
            exist(o.subs) ? exist(o.subs[o.current_subtitle]) ? x = o.subs[o.current_subtitle] : '' : '';
            return x
        };
        this.currentFile = function() {
            return currentFile()
        };

        function currentFile() {
            return urls.length > 0 ? urls[current_url] : ''
        };
        this.tag = function() {
            return media.tag()
        };
        this.SubtitleStart = function(x) {
            SubtitleStart(x)
        };

        function SubtitleStart(x) {
            if (x != '') {
                var start = 0;
                var memory = '';
                o.subs = x.split(",");
                o.files_subtitle = [];
                o.current_subtitle = -1;
                if (StorageSupport() && v.sub_store == 1) {
                    if (localStorage.getItem("pljssubtitle") != null) {
                        memory = localStorage.getItem("pljssubtitle")
                    }
                }
                for (var i = 0; i < o.subs.length; i++) {
                    if (o.subs[i].indexOf("[") == 0 && o.subs[i].indexOf("]") > 1) {
                        o.files_subtitle[i] = o.subs[i].substr(o.subs[i].indexOf("[") + 1, o.subs[i].indexOf("]") - 1);
                        o.subs[i] = o.subs[i].substr(o.subs[i].indexOf("]") + 1)
                    } else {
                        o.files_subtitle[i] = o.subs[i].substr(o.subs[i].lastIndexOf("/") + 1);
                        o.files_subtitle[i] = o.files_subtitle[i].substr(0, o.files_subtitle[i].lastIndexOf("."))
                    }
                    if (o.subs[i].indexOf("#2") == 0) {
                        o.subs[i] = fd2(o.subs[i])
                    }
                    if (exist(v.default_subtitle)) {
                        if (v.default_subtitle == o.files_subtitle[i]) {
                            start = i;
                            o.current_subtitle = i
                        }
                    }
                    if (memory != '') {
                        if (memory == o.files_subtitle[i]) {
                            start = i;
                            o.current_subtitle = i
                        }
                    }
                }
                exist(o.controls) ? o.controls.SubtitleChanged() : '';
                if (v.subtitle_start == 1) {
                    o.current_subtitle = start;
                    SubtitleLoad()
                }
            } else {
                o.actions.RemoveSubtitles()
            }
        }

        function SubtitleLoad() {
            if (exist(o.subs[o.current_subtitle])) {
                if (o.subs[o.current_subtitle].indexOf(".") > -1) {
                    var url = o.subs[o.current_subtitle];
                    var xhr = XHR(url);
                    xhr.onload = function() {
                        if (this.readyState == 4 && this.status == 200) {
                            o.subtitle_on = true;
                            SubtitleParse(url, this.responseText)
                        } else {
                            SubtitleError("loading_error")
                        }
                    };
                    xhr.onerror = function(e) {
                        SubtitleError("loading_error")
                    };
                    xhr.send()
                }
            }
        }

        function SubtitleError(x) {
            log("subtitle not found or access denied");
            if (o.files_subtitle[o.current_subtitle].indexOf(Lang("loading_error")) == -1) {
                o.files_subtitle[o.current_subtitle] = o.files_subtitle[o.current_subtitle] + ' (' + Lang(x) + ')'
            }
            o.current_subtitle = -1;
            o.subtitle_on = false;
            if (o.constrols) {
                o.controls.SubtitleChanged()
            }
            if (exist(o.subtitle)) {
                o.mediacontainer.removeChild(o.subtitle);
                delete o.subtitle
            }
        }

        function SubtitleParse(url, x) {
            if (url.indexOf('.srt') > -1 || url.indexOf('.ass') > -1 || url.indexOf('.ssa') > -1 || url.indexOf('.vtt') > -1) {
                var l = o.current_subtitle;
                sub[l] = Object();
                sub[l][0] = Array();
                sub[l][1] = Array();
                var rows = Array();
                rows = x.split(/\r|\n/);
                var cnt = 1;
                var t1 = 0;
                var t2 = 0;
                try {
                    var url_shift = (exist(v.subshift) ? v.subshift : 0);
                    if (url.indexOf('shift=') > 0) {
                        url_shift = url.substr(url.indexOf('shift=') + 6) * 1
                    }
                    for (i = 0; i < rows.length; i++) {
                        if (url.indexOf('.srt') > -1 || url.indexOf('.vtt') > -1) {
                            if (rows[i].indexOf('-->') > -1 && rows[i].indexOf(':') > -1) {
                                t1 = TimeSub(rows[i].substr(0, rows[i].indexOf('-->'))) * 1 + url_shift;
                                t2 = TimeSub(rows[i].substr(rows[i].indexOf('-->') + 4, 12)) * 1 + url_shift;
                                sub[l][0][t1] = '';
                                for (var j = t1; j < t2; j++) {
                                    sub[l][1][j] = t1
                                }
                                cnt++
                            } else {
                                if (rows[i] != '' && rows[i].length > 1 && rows[i] != cnt) {
                                    sub[l][0][t1] += (sub[l][0][t1] != '' ? '<br>' : '') + rows[i]
                                }
                            }
                        }
                        if (url.indexOf('.ass') > -1 || url.indexOf('.ssa') > -1) {
                            if (rows[i].indexOf('Dialogue:') > -1) {
                                t1 = TimeSub(rows[i].substr((url.indexOf('.ssa') > -1 ? rows[i].indexOf('=0') + 3 : 12), 12)) * 1 + url_shift;
                                t2 = TimeSub(rows[i].substr((url.indexOf('.ssa') > -1 ? rows[i].indexOf('=0') + 14 : 23), 10)) * 1 + url_shift;
                                var p = '';
                                if (rows[i].indexOf('0,,') > 0) {
                                    p = rows[i].substr(rows[i].indexOf('0,,') + 3)
                                } else {
                                    if (rows[i].indexOf('ffect,') > 0) {
                                        p = rows[i].substr(rows[i].indexOf('ffect,') + 6)
                                    }
                                }
                                if (sub[l][0][t1] != undefined) {
                                    sub[l][0][t1] += '\n' + p
                                } else {
                                    sub[l][0][t1] = p
                                }
                                sub[l][0][t1] = sub[l][0][t1].replace(/{.*?}/, '');
                                sub[l][0][t1] = sub[l][0][t1].replace(/\\\\N/, '\n');
                                for (var j = t1; j < t2; j++) {
                                    sub[l][1][j] = t1
                                }
                            }
                        }
                    }
                    o.controls.SubtitleChanged()
                } catch (e) {
                    SubtitleError("error")
                }
            } else {
                SubtitleError("error")
            }
        }
        this.sub = function() {
            return sub
        };

        function RadioTags() {
            var xhr = XHR(v.tagsurl + '?url=' + urls[current_url]);
            xhr.onload = function() {
                if (this.readyState == 4 && this.status == 200) {
                    if (this.responseText) {
                        v.title = this.responseText;
                        o.actions.Title('title')
                    }
                }
            };
            xhr.send()
        }
    };

    function TimeSub(srt) {
        var tmp = srt.split(':');
        var out = 0;
        tmp.length == 2 ? tmp.unshift("00") : '';
        tmp[0] != '00' ? out += tmp[0] * 3600 : '';
        tmp[1] != '00' ? out += tmp[1] * 60 : '';
        out += tmp[2].substr(0, 2) * 1;
        out = out * 10 + tmp[2].substr(3, 1) * 1;
        return out
    }
    var MediaVideo = function(url, container, pip) {
        var pjstg = createElement("video");
        if (v.taginframe == 1) {
            var tagframe = createElement("iframe");
            attr(tagframe, {
                "scrolling": "no",
                "allowfullscreen": "true",
                "allowtransparency": "true",
                "src": ""
            });
            css(tagframe, {
                "position": "absolute",
                "width": "100%",
                "height": "100%",
                "border": 0
            });
            container.appendChild(tagframe);
            var framei = window.setInterval(function() {
                if (tagframe.contentWindow.document.readyState === "complete") {
                    window.clearInterval(framei);
                    css(tagframe.contentDocument.body, {
                        "padding": 0,
                        "margin": 0
                    });
                    tagframe.contentDocument.body.appendChild(pjstg)
                }
            }, 100)
        } else {
            container.appendChild(pjstg)
        }
        var hls;
        var is_hls = false;
        var hls_started = false;
        var hls_created = false;
        var dash;
        var dash_created = false;
        var is_dash = false;
        var is_live = false;
        var is_sleep = 0;
        var error;
        var error_time;
        var unmute = false;
        var onplay = false;
        var pip_quality = -1;
        var pause_before_vast = -1;
        var sleep_timeout;
        css(pjstg, {
            'width': '100%',
            'height': '100%',
            'object-fit': 'contain',
            'transition': "filter 0.1s linear",
            'min-height': 'auto',
            'max-height': 'none',
            'min-width': 'auto',
            'max-width': 'none'
        });
        if (v.covervideo == 1) {
            if (v.fillvideo == 1) {
                css(pjstg, {
                    'object-fit': 'fill'
                })
            } else {
                css(pjstg, {
                    'object-fit': 'cover'
                })
            }
        }
        if (v.playsinlineonmobile == 1 && o.system.mobile) {
            attr(pjstg, {
                'playsinline': '1'
            })
        }
        attr(pjstg, {
            'src': url,
            'x-webkit-airplay': 'allow'
        });
        if (!o.system.tv) {
            attr(pjstg, {
                'preload': (v.preload == 1 && v.autoplay == 0 ? 'metadata' : 'none')
            })
        }
        tagSrc();
        if (pip) {
            pjstg.autoplay = true;
            pjstg.muted = true
        }
        if (v.loop == 1) {}
        if (v.filters == 1) {
            css(pjstg, {
                "transition": "filter 0.3s linear"
            })
        }
        if (url.indexOf(".mpd") > 0 && o.compilation.indexOf("DASH") != -1) {
            is_dash = true;
            var dash_init = false;
            var dash_play = false;
            if (MseIsSupported()) {
                v.preload == 1 || v.autoplay == 1 || v.preloaddash == 1 ? CreateDASH(false) : ''
            } else {
                log("DASH not supported")
            }
        } else if (url.indexOf(".m3u8") > 0 && o.compilation.indexOf("HLS") != -1) {
            is_hls = true;
            try {
                if (exist(Hls)) {
                    if (!Hls.isSupported() || (o.system.safari && v.nativehlsinsafari == 1)) {
                        is_hls = false
                    } else {
                        v.preload == 1 || v.autoplay == 1 || v.preloadhls == 1 ? CreateHLS(false) : ''
                    }
                } else {
                    is_hls = false
                }
            } catch (error) {
                is_hls = false
            }
        }
        if (o.system.tv && v.autoplay == 1 && !is_hls && !is_dash) {
            setTimeout(function() {
                o.actions.MediaReady()
            }, 100)
        }

        function CreateDASH(x) {
            log("DASH");
            v.preloaddash = 1;
            var dash_config = {
                bufferLength: 60
            };
            if (exist(v.dashconfig)) {
                if (exist(v.dashconfig.bufferLength)) {
                    if (v.dashconfig.bufferLength > 600) {
                        v.dashconfig.bufferLength = 600
                    }
                }
                if (typeof v.dashconfig == "object") {
                    for (var key in v.dashconfig) {
                        dash_config[key] = v.dashconfig[key]
                    }
                }
            }
            dash = dashjs.MediaPlayer().create();
            js("dash", dash, 1);
            dash.getDebug().setLogToBrowserConsole((v.dashdebug == 1 && !pip));
            dash.initialize(pjstg, url, (v.autoplay == 1 || pip || x));
            dash.setStableBufferTime(dash_config.bufferLength);
            dash.setBufferTimeAtTopQualityLongForm(dash_config.bufferLength);
            dash.enableLastBitrateCaching(false);
            dash.enableLastMediaSettingsCaching(false);
            if (v.dashcookies == 1) {
                dash.setXHRWithCredentialsForType(undefined, true)
            }
            if (v.dashlowquality == 1) {
                dash.setAutoSwitchQualityFor("audio", false);
                dash.setAutoSwitchQualityFor("video", false)
            }
            dash.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED, function(data) {
                if (!dash_init) {
                    log("DASH attached");
                    var q = DashQualityLevels();
                    DashAudioTracks();
                    is_live = dash.isDynamic();
                    is_live ? log("Live") : '';
                    if (v.dashquality == 1) {
                        if (v.dashlowquality == 1 || q > 0) {
                            o.current_quality = q;
                            dash.setAutoSwitchQualityFor("audio", false);
                            dash.setAutoSwitchQualityFor("video", false)
                        } else {
                            o.current_quality = dash.getBitrateInfoListFor("video").length - 1
                        }
                        o.controls.QualityChangedNoHand(o.current_quality);
                        dash.setQualityFor("video", o.current_quality);
                        dash.setQualityFor("audio", o.current_quality)
                    }
                    o.actions.MediaReady();
                    dash_init = true
                }
            });
            dash.on(dashjs.MediaPlayer.events.PLAYBACK_PLAYING, function(data) {
                if (!dash_play) {
                    var track = parseInt(o.current_audiotrack);
                    if (track > 0 && v.dashaudio == 1) {
                        dash.setCurrentTrack(dash.getTracksFor("audio")[track])
                    }
                    dash_play = true
                }
            });
            dash.on(dashjs.MediaPlayer.events.PLAYBACK_TIME_UPDATED, function(data) {
                if (is_live) {
                    o.actions.Duration(dash.time(), dash.duration())
                }
            });
            dash.on(dashjs.MediaPlayer.events.TEXT_TRACKS_ADDED, function(data) {
                dash.setTextTrack(-1)
            });
            dash.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED, function(data) {
                if (data.mediaType == "video" && data.oldQuality != data.newQuality && v.dashquality == 1) {
                    o.current_quality = data.newQuality;
                    o.controls.QualityChangedNoHand(o.current_quality);
                    log("DASH Level " + o.current_quality)
                }
            });
            dash.on(dashjs.MediaPlayer.events.FRAGMENT_LOADING_COMPLETED, function(data) {
                if (exist(data.request)) {
                    if (data.request.type == "MediaSegment") {
                        js("fragment", data.request.url)
                    }
                }
            });
            dash.on(dashjs.MediaPlayer.events.ERROR, function(data) {
                console.log(data);
                o.dasherror = data;
                if (data.error == "manifestError") {
                    error = "DASH " + data.error + ": " + data.event.message + ", " + data.event.event;
                    log(error);
                    o.media.onError()
                } else if (data.error == "capability" || data.error == "mediasource") {
                    error = "DASH " + data.error + " error: " + data.event;
                    log(error);
                    o.media.onError()
                } else if (data.error == "key_session" || data.error == "key_message") {
                    error = "DASH " + data.error + " error: " + data.event;
                    log(error);
                    o.media.onError()
                } else if (data.error == "download") {
                    error = "DASH fatal network error encountered";
                    log(error);
                    o.media.onError()
                }
            });
            dash_created = true
        }

        function CreateHLS(x) {
            log("HLS");
            var hls_config = {
                debug: (v.hlsdebug == 1 && !pip),
                autoStartLoad: (v.preload == 1 || v.autoplay == 1 || pip || x),
                maxBufferLength: 60,
                maxMaxBufferLength: 60,
                manifestLoadingMaxRetry: 3,
                manifestLoadingTimeOut: 60000,
                fragLoadingTimeOut: 60000,
                enableWorker: false
            };
            if (v.hlscookies == 1) {
                hls_config['xhrSetup'] = function(xhr, url) {
                    xhr.withCredentials = true
                }
            }
            if (exist(v.hlsconfig)) {
                if (exist(v.hlsconfig.maxBufferLength)) {
                    if (v.hlsconfig.maxBufferLength > 600) {
                        v.hlsconfig.maxBufferLength = 600
                    }
                    v.hlsconfig.maxMaxBufferLength = v.hlsconfig.maxBufferLength
                }
                if (typeof v.hlsconfig == "object") {
                    for (var key in v.hlsconfig) {
                        hls_config[key] = v.hlsconfig[key]
                    }
                }
            }
            hls = new Hls(hls_config);
            js("hls", hls, 1);
            hls.loadSource(url);
            hls.attachMedia(pjstg);
            hls.on(Hls.Events.MEDIA_ATTACHED, function() {
                log("HLS attached")
            });
            hls.on(Hls.Events.MANIFEST_LOADED, function(event, data) {
                !pip ? o.actions.MediaReady() : ''
            });
            hls.on(Hls.Events.MANIFEST_PARSED, function(event, data) {
                if (!pip && v.hlsquality == 1 && HlsLevelsLength() > 1) {
                    HlsQualityLevels();
                    o.controls.QualityChangedNoHand(o.current_quality)
                }
            });
            hls.on(Hls.Events.LEVEL_SWITCH, function(event, data) {
                if (!pip && v.hlsquality == 1 && HlsLevelsLength() > 1) {
                    o.current_quality = hls.loadLevel;
                    o.controls.QualityChangedNoHand(o.current_quality);
                    log("HLS Level " + o.current_quality)
                }
            });
            hls.on(Hls.Events.LEVEL_LOADED, function(event, data) {
                if (!pip) {
                    if (data.details.live != is_live) {
                        is_live = data.details.live;
                        o.controls.refresh()
                    }
                    is_live = data.details.live;
                    if (is_live) {
                        log("Live");
                        if (pjstg.duration > 0 && pjstg.currentTime > 0) {
                            if (pjstg.duration - pjstg.currentTime < 10) {
                                if (o.hls_stuck_time > 0) {
                                    if (o.hls_stuck_time == pjstg.currentTime && o.hls_stuck_duration == pjstg.duration) {
                                        o.stuck++;
                                        console.log(o.stuck);
                                        if (o.stuck > 2) {
                                            o.stuck = 0;
                                            o.hls_stuck_time = -1;
                                            hls.destroy();
                                            CreateHLS(true);
                                            onEnded()
                                        }
                                    } else {
                                        o.hls_stuck_time = -1
                                    }
                                } else {
                                    o.hls_stuck_time = pjstg.currentTime;
                                    o.hls_stuck_duration = pjstg.duration
                                }
                            }
                        }
                    }
                }
                o.current_quality = hls.loadLevel;
                o.controls.QualityChangedNoHand(o.current_quality)
            });
            hls.on(Hls.Events.FRAG_CHANGED, function(event, data) {
                if (exist(data.frag) && !pip) {
                    js("fragment", data.frag.relurl)
                }
                hls_started = true
            });
            hls.on(Hls.Events.FRAG_PARSING_METADATA, function(event, data) {
                js("fragdata", data, 1)
            });
            hls.on(Hls.Events.AUDIO_TRACKS_UPDATED, function(event, data) {
                !pip && v.hlsaudio == 1 ? HlsAudioTracks() : ''
            });
            hls.on(Hls.Events.AUDIO_TRACK_SWITCHING, function(event, data) {
                !pip && v.hlsaudio == 1 ? HlsAudioTrack() : ''
            });
            hls.on(Hls.Events.ERROR, function(event, data) {
                v.log == 1 ? console.log(data) : '';
                o.hlserror = data;
                if (data.fatal) {
                    switch (data.type) {
                        case Hls.ErrorTypes.NETWORK_ERROR:
                            if (v.livewakeup == 1) {
                                log("sleep");
                                var playing = o.play;
                                !pip && playing ? o.actions.Pause() : '';
                                o.actions.ShowPoster();
                                is_sleep = 1;
                                HlsSleep(playing)
                            } else {
                                error = data.details;
                                hls.destroy();
                                if (!pip) {
                                    o.media.onError()
                                }
                            }
                            break;
                        case Hls.ErrorTypes.MEDIA_ERROR:
                            HlsRecoverMediaError();
                            break;
                        default:
                            error = "HLS fatal error, destroy";
                            hls.destroy();
                            !pip ? o.media.onError() : '';
                            break
                    }
                } else {
                    log("HLS ", data.type, data.details, (data.response ? data.response.code : ''));
                    js("hls_error", (data.response ? data.response.code : ''));
                    if (is_sleep > 0) {
                        is_sleep = 2;
                        HlsSleep()
                    }
                }
            });
            hls_created = true
        }

        function HlsSleep(x) {
            if (x || o.play || v.autoplay == 1 || v.autoplayed == 1) {
                clearTimeout(sleep_timeout);
                sleep_timeout = setTimeout(HlsLiveWaiting, v.livewakeuptime * 1000)
            }
        }

        function HlsLiveWaiting() {
            if (is_sleep > 0) {
                log("watching")
            }
            if (is_sleep == 1) {
                hls.loadSource(url)
            }
            if (is_sleep == 2) {
                hls.destroy();
                CreateHLS(true);
                pjstg.play()
            }
        }
        var recover_decoding_error_date = 0;
        var recover_swap_audio_codec_date = 0;

        function HlsRecoverMediaError() {
            var now = performance.now();
            if (!recover_decoding_error_date || (now - recover_decoding_error_date) > 3000) {
                recover_decoding_error_date = performance.now();
                log("HLS fatal media error, try to recover");
                hls.recoverMediaError();
                hls.startLoad();
                TagPlay()
            } else {
                if (!recover_swap_audio_codec_date || (now - recover_swap_audio_codec_date) > 3000) {
                    recover_swap_audio_codec_date = performance.now();
                    log("HLS fatal media error, try to recover");
                    hls.swapAudioCodec();
                    hls.recoverMediaError()
                } else {
                    log("HLS fatal media error, recovery failed")
                }
            }
        }
        pjstg.addEventListener('loadstart', onLoadStart);
        pjstg.addEventListener('error', onTagError);
        pjstg.addEventListener('ended', onEnded);
        pjstg.addEventListener('play', onPlay);
        pjstg.addEventListener('pause', onPause);
        pjstg.addEventListener('timeupdate', onTimeupdate);
        pjstg.addEventListener('seeking', onSeeking);
        pjstg.addEventListener('seeked', onSeeked);
        pjstg.addEventListener('loadedmetadata', onMeta);
        pjstg.addEventListener('volumechange', onVolume);
        pjstg.addEventListener('waiting', onWaiting);
        pjstg.addEventListener('durationchange', onDuration);
        pjstg.addEventListener('progress', onProgress);
        pjstg.addEventListener('loadeddata', onLoadedData);
        pjstg.addEventListener('enterpictureinpicture', onPipEnter);
        pjstg.addEventListener('leavepictureinpicture', onPipLeave);

        function onLoadStart() {
            if (!is_hls && !is_dash) {
                !pip ? o.actions.MediaReady() : ''
            }
        }

        function onTagError() {
            if (!is_hls && !is_dash) {
                if (pjstg.error) {
                    log(pjstg.error, pjstg.error.code, pjstg.error.message);
                    var errorCode = pjstg.error.code;
                    if (errorCode == 1) {
                        error = "aborted"
                    }
                    if (errorCode == 2) {
                        error = "network"
                    }
                    if (errorCode == 3) {
                        error = "decode"
                    }
                    if (errorCode == 4) {
                        error = "not found"
                    }
                    log("Video Error: ", error)
                }
                onError()
            }
        }

        function onError() {
            !pip ? o.media.onError() : ''
        }

        function onEnded() {
            !pip ? o.media.onEnded() : ''
        }

        function onPlay() {
            if (is_hls && is_sleep > 0) {} else {
                !pip ? o.media.onPlay() : ''
            }
        }

        function onPause() {
            !pip ? o.media.onPause() : ''
        }

        function onTimeupdate() {
            !pip ? o.media.onTimeupdate() : '';
            if (pause_before_vast > -1) {
                if (Time() > pause_before_vast) {
                    pjstg.pause();
                    pause_before_vast = -1
                }
            }
        }

        function onSeeking() {
            !pip ? o.media.onSeeking() : ''
        }

        function onSeeked() {
            !pip ? o.media.onSeeked() : ''
        }

        function onMeta() {
            if (pip) {
                PipSize()
            } else {
                o.media.onMeta();
                PlayerSize();
                if (is_hls && is_sleep > 0) {
                    is_sleep = 0;
                    log("wake up");
                    o.media.onPlay()
                }
            }
        }

        function PipSize() {
            if (pjstg.videoHeight > 0) {
                css(container, {
                    "height": container.offsetWidth / (pjstg.videoWidth / pjstg.videoHeight) - parseInt(v.pip.border)
                })
            }
        }

        function PlayerSize() {
            if (pjstg.videoHeight > 0 && v.changeheight == 1) {
                o.actions.changeAspect(pjstg.videoWidth / pjstg.videoHeight)
            }
        }

        function onDuration() {
            !pip ? o.media.onDuration() : ''
        }

        function onVolume() {
            !pip ? o.media.onVolume() : ''
        }

        function onWaiting() {
            if (is_hls && is_sleep > 0) {} else {
                !pip ? o.media.onWaiting() : ''
            }
        }

        function onProgress(event) {
            !pip ? o.media.onProgress() : ''
        }

        function onLoadedData() {
            o.actions.LoadedData()
        }

        function MseIsSupported() {
            var mediaSource = window.MediaSource = window.MediaSource || window.WebKitMediaSource;
            var sourceBuffer = window.SourceBuffer = window.SourceBuffer || window.WebKitSourceBuffer;
            var isTypeSupported = mediaSource && typeof mediaSource.isTypeSupported === 'function' && mediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"');
            var sourceBufferValidAPI = !sourceBuffer || sourceBuffer.prototype && typeof sourceBuffer.prototype.appendBuffer === 'function' && typeof sourceBuffer.prototype.remove === 'function';
            return isTypeSupported && sourceBufferValidAPI
        }

        function DashQualityLevels() {
            var q = 0;
            if (!pip && v.dashquality == 1) {
                var x = dash.getBitrateInfoListFor("video");
                if (x.length > 1) {
                    var y = '';
                    for (var i = 0; i < x.length; i++) {
                        o.files_quality[i] = exist(x[i].height) ? MseRenameQualities(x[i], v.nameofdashquality) : i;
                        if (o.files_quality[i] == y) {
                            y = o.files_quality[i];
                            if (exist(x[i].bitrate)) {
                                o.files_quality[i] += " " + parseInt(x[i].bitrate / 1000) + 'kbps';
                                o.files_quality[i - 1] += " " + parseInt(x[i - 1].bitrate / 1000) + 'kbps';
                                y = ''
                            }
                        } else {
                            y = o.files_quality[i]
                        }
                        if (exist(v.default_quality) && q == 0) {
                            if (v.default_quality == o.files_quality[i]) {
                                q = i
                            }
                        }
                        if (exist(o.default_quality)) {
                            if (o.default_quality == o.files_quality[i]) {
                                q = i
                            }
                        }
                    }
                    o.files_quality[x.length] = Lang("auto")
                }
                o.reverse_quality = true
            }
            return q
        }

        function DashAudioTracks() {
            if (!pip && v.dashaudio == 1) {
                o.current_audiotrack = 0;
                var x = dash.getTracksFor("audio");
                if (x.length > 1) {
                    for (var i = 0; i < x.length; i++) {
                        o.files_audiotrack[i] = i;
                        if (exist(x[i].lang)) {
                            o.files_audiotrack[i] = RenameTracks(x[i].lang)
                        } else {
                            if (exist(x[i].index)) {
                                o.files_audiotrack[i] = Lang("audiotrack") + " " + x[i].index
                            }
                        }
                        if (exist(v.default_audio)) {
                            if (v.default_audio == o.files_audiotrack[i]) {
                                o.current_audiotrack = i
                            }
                        }
                    }
                }
                log("DASH AudioTrack ", o.current_audiotrack);
                o.controls.AudioTrackChangedNoHand(o.current_audiotrack)
            }
        }

        function HlsQualityLevels() {
            if (!pip && v.hlsquality == 1) {
                var x = hls.levels;
                var q = 0;
                if (x.length > 1) {
                    for (var i = 0; i < x.length; i++) {
                        o.files_quality[i] = exist(x[i].height) ? MseRenameQualities(x[i], v.nameofhlsquality) : i;
                        if (exist(v.default_quality) && q == 0) {
                            if (v.default_quality == o.files_quality[i]) {
                                q = i
                            }
                        }
                        if (exist(o.default_quality)) {
                            if (o.default_quality == o.files_quality[i]) {
                                q = i
                            }
                        }
                    }
                    if (v.hlsautoquality == 1) {
                        o.files_quality[x.length] = Lang("auto")
                    }
                    if (v.hlslowquality == 1 || q > 0) {
                        hls.autoLevelCapping = 0;
                        if (v.hlschangequality == "next" || (!o.start && v.preload == 0)) {
                            hls.nextLevel = q
                        } else {
                            if (v.hlschangequality == "current") {
                                hls.currentLevel = q
                            }
                        }
                    } else {
                        v.hlsautoquality == 1 ? o.current_quality = hls.levels.length - 1 : o.current_quality = hls.firstLevel
                    }
                }
                o.reverse_quality = true
            }
        }

        function HlsAudioTracks() {
            if (!pip && v.hlsaudio == 1) {
                var x = hls.audioTracks;
                if (x.length > 1) {
                    for (var i = 0; i < x.length; i++) {
                        o.files_audiotrack[i] = exist(x[i].name) ? RenameTracks(x[i].name) : i;
                        if (exist(v.default_audio)) {
                            if (v.default_audio == o.files_audiotrack[i]) {
                                o.current_audiotrack = i;
                                hls.audioTrack = i
                            }
                        }
                    }
                }
            }
        }

        function HlsAudioTrack() {
            if (!pip) {
                o.current_audiotrack = hls.audioTrack;
                log("HLS AudioTrack ", o.current_audiotrack);
                o.controls.AudioTrackChangedNoHand(o.current_audiotrack)
            }
        };

        function RenameTracks(x) {
            var r = x.toLowerCase();
            if (r == "eng" || r == "en") {
                x = "English"
            } else if (r == "rus" || r == "ru") {
                x = ""
            }
            return x
        };

        function MseRenameQualities(x, y) {
            var r = x.height + 'p';
            if (x.height < 200) {
                r = '160p'
            } else if (x.height >= 200 && x.height <= 300) {
                r = '240p'
            } else if (x.height > 300 && x.height <= 400) {
                r = '360p'
            } else if (x.height > 400 && x.height <= 500) {
                r = '480p'
            } else if (x.height > 500 && x.height <= 600) {
                r = '540p'
            } else if (x.height > 600 && x.height <= 900) {
                r = '720p'
            } else if (x.height > 900 && x.height <= 1200) {
                r = '1080p'
            } else if (x.height > 1200 && x.height <= 1800) {
                r = '1440p'
            } else if (x.height > 1800) {
                r = '2160p'
            }
            if (x.width == 426 && x.height <= 240) {
                r = '240p'
            } else if (x.width == 640 && x.height <= 360) {
                r = '360p'
            } else if (x.width == 854 && x.height <= 480) {
                r = '480p'
            } else if (x.width == 1280 && x.height <= 720) {
                r = '720p'
            } else if (x.width == 1920 && x.height <= 1080) {
                r = '1080p'
            } else if (x.width == 2560 && x.height <= 1440) {
                r = '1440p'
            } else if (x.width == 3840 && x.height <= 2160) {
                r = '2160p'
            }
            if (y == 1) {
                r = Lang(r)
            }
            if (y == 2 && exist(x.bitrate)) {
                r = parseInt(x.bitrate / 1000) + ' kbps'
            }
            return r
        };

        function Time() {
            if (is_dash) {
                return dash_created ? dash.time() : 0
            } else {
                return pjstg.currentTime
            }
        };
        this.Play = function() {
            var p = true;
            if (is_hls && !hls_started) {
                if (!hls_created) {
                    CreateHLS(true)
                }
                hls.startLoad()
            }
            if (is_dash && !dash_created) {
                CreateDASH(true);
                p = false
            }
            if (pjstg.style.top == "-2000px") {
                this.AfterVast()
            }
            p ? TagPlay() : ''
        };
        var playtry;

        function TagPlay() {
            var playPromise = pjstg.play();
            if (playPromise !== undefined) {
                playPromise.then(function() {
                    o.system.safari && pjstg.currentTime == 0 ? o.actions.Seek(1.5) : ''
                }).catch(function(error) {
                    log("playError", error.message);
                    if (error.message.indexOf('user denied permission') == -1) {
                        if (v.autoplaymute == 1 && !o.muted) {
                            o.actions.Mute();
                            pjstg.play()
                        } else {
                            o.controls.Pause();
                            o.actions.ShowPoster()
                        }
                    } else {
                        o.controls.Pause();
                        o.actions.ShowPoster();
                        js("autoplay_denied")
                    }
                })
            }
        }
        this.BeforeVast = function() {
            if (o.ispipkit) {
                PipWebkit()
            }
            if (o.system.mobile || o.system.safari) {
                if (!pjstg.muted) {
                    pjstg.muted = true;
                    unmute = true
                }
                css(pjstg, {
                    "position": "absolute",
                    "left": -2000,
                    "top": -2000
                });
                pause_before_vast = Time();
                TagPlay()
            }
        };
        this.AfterVast = function() {
            if (o.system.mobile || o.system.safari) {
                if (unmute) {
                    pjstg.muted = false;
                    unmute = false
                }
                pause_before_vast = -1;
                css(pjstg, {
                    "position": "static",
                    "left": 0,
                    "top": 0
                })
            }
        };
        this.Pause = function() {
            pjstg.pause()
        };
        this.Toggle = function() {
            !pjstg.paused ? pjstg.pause() : TagPlay()
        };
        this.Seek = function(x) {
            if (is_dash && dash_created) {
                dash.seek(x)
            } else {
                pjstg.currentTime = x
            }
        };
        this.Mute = function() {
            pjstg.muted = true
        };
        this.Unmute = function() {
            pjstg.muted = false
        };
        this.Volume = function(x) {
            pjstg.volume = x
        };
        this.isPlaying = function() {
            return !pjstg.paused
        };
        this.isLive = function() {
            return v.live == 1 ? true : is_live
        };
        this.tag = function() {
            return pjstg
        };
        this.nativeControls = function() {
            attr(pjstg, {
                'controls': '1'
            });
            return true
        };
        this.preload = function() {
            attr(pjstg, {
                'preload': 'metadata'
            });
            if (is_hls && !hls_created) {
                CreateHLS(false)
            }
            if (is_dash && !dash_created) {
                CreateDASH(false)
            }
        };
        this.status = function() {
            var state = "playing";
            if (pjstg.paused) {
                state = "paused"
            }
            if (pjstg.ended) {
                state = "ended"
            }
            return state
        };
        this.ChangePip = function(x, y) {
            pip = x;
            y.appendChild(pjstg);
            container = y;
            if (x) {
                pjstg.muted = true;
                PipSize();
                if (o.files_quality.length > 0) {
                    if (is_hls) {
                        pip_quality = o.current_quality;
                        hls.autoLevelCapping = 0;
                        hls.currentLevel = 0
                    }
                }
            } else {
                if (!o.muted) {
                    pjstg.muted = false
                }
                pjstg.volume = v.volume;
                PlayerSize();
                if (o.files_quality.length > 0) {
                    if (is_hls) {
                        hls.autoLevelCapping = -1;
                        if (pip_quality > -1) {
                            hls.nextLevel = pip_quality
                        }
                    }
                }
            }
        };
        this.time = function() {
            return Time()
        };
        this.duration = function() {
            var x = pjstg.duration;
            if (is_dash && dash_created) {
                x = dash.duration()
            }
            if (exist(v.end)) {
                x = v.end
            }
            return x != Infinity && !isNaN(x) ? x : 0
        };
        this.loaded = function() {
            var x = 0;
            if (pjstg.buffered) {
                if (pjstg.buffered.length > 0) {
                    var y = Time();
                    for (var i = 0; i < pjstg.buffered.length; i++) {
                        if ((y >= pjstg.buffered.start(i) || y >= pjstg.buffered.start(i) - 100) && y <= pjstg.buffered.end(i)) {
                            x = pjstg.buffered.end(i)
                        }
                    }
                    x == 0 ? x = pjstg.buffered.end(pjstg.buffered.length - 1) : ''
                }
            }
            return x
        };
        this.auto = function() {
            var x = false;
            if (is_hls) {
                if (hls_created) {
                    x = hls.autoLevelEnabled
                }
            } else if (is_dash) {
                if (dash_created) {
                    x = dash.getAutoSwitchQualityFor("video")
                }
            }
            return x
        };
        this.size = function() {
            return {
                "width": pjstg.videoWidth,
                "height": pjstg.videoHeight
            }
        };
        this.src = function(x) {
            url = x;
            onplay = false;
            if (is_hls) {
                is_hls && hls ? hls.destroy() : '';
                CreateHLS(false)
            } else {
                attr(pjstg, {
                    'src': x,
                    'autoplay': 0
                });
                tagSrc();
                pjstg.pause()
            }
        };

        function tagSrc() {
            if (o.system.safari) {
                var y = pjstg.textTracks;
                if (y) {
                    for (var i = 0; i < y.length; i++) {
                        y[i].mode = "disabled"
                    }
                }
                y = pjstg.audioTracks;
                if (y) {
                    for (i = 0; i < y.length; i++) {
                        y[i].enabled = (i == 0 ? 1 : 0)
                    }
                }
                if (o.system.ios) {
                    iostracks = []
                }
                if (window.WebKitPlaybackTargetAvailabilityEvent) {
                    pjstg.addEventListener('webkitplaybacktargetavailabilitychanged', function(event) {
                        o.airplay = event.availability == "available";
                        !pip ? o.actions.AirplayChanged() : ''
                    })
                }
            }
            if (o.system.webkit) {
                if (exist(pjstg.webkitSupportsPresentationMode)) {
                    o.pipwebkit = true
                }
                if (document.pictureInPictureEnabled && !pjstg.disablePictureInPicture) {
                    o.pipwebkit = true
                }
            }
        }
        this.airplay = function() {
            pjstg.webkitShowPlaybackTargetPicker()
        };
        this.pipwebkit = function() {
            PipWebkit()
        };

        function PipWebkit() {
            if (o.system.safari) {
                if (pjstg.webkitPresentationMode === "picture-in-picture") {
                    pjstg.webkitSetPresentationMode("inline");
                    o.ispipkit = false
                } else {
                    pjstg.webkitSetPresentationMode("picture-in-picture");
                    o.ispipkit = true
                }
            } else {
                if (!document.pictureInPictureElement) {
                    eval('pjstg.requestPictureInPicture().then(p => {o.ispipkit = true;}).catch(error => {o.ispipkit = false;});')
                } else {
                    eval('document.exitPictureInPicture().then(ok =>{o.ispipkit = false;}).catch(error => {});')
                }
            }
        };

        function onPipEnter() {
            o.ispipkit = true
        };

        function onPipLeave() {
            o.ispipkit = false
        };
        this.setDashQuality = function(x) {
            if (dash_created) {
                var x = parseInt(x);
                if (x == dash.getBitrateInfoListFor("video").length) {
                    o.current_quality = dash.getQualityFor('video');
                    dash.setAutoSwitchQualityFor("audio", true);
                    dash.setAutoSwitchQualityFor("video", true)
                } else {
                    dash.setAutoSwitchQualityFor("audio", false);
                    dash.setAutoSwitchQualityFor("video", false);
                    dash.setQualityFor('video', x);
                    dash.setQualityFor('audio', x)
                }
            }
        };
        this.setDashAudioTrack = function(x) {
            if (dash_created) {
                if (pjstg.buffered.length > 0) {
                    dash.setCurrentTrack(dash.getTracksFor('audio')[parseInt(x)])
                }
            }
        };
        this.setHlsQuality = function(x) {
            if (hls_created) {
                var y = parseInt(x);
                if (x == hls.levels.length) {
                    y = -1;
                    hls.autoLevelCapping = -1
                }
                if (v.hlschangequality == "current") {
                    setTimeout(onWaiting, 500);
                    hls.currentLevel = y
                }
                if (v.hlschangequality == "next") {
                    log("HLS next level " + y);
                    hls.nextLevel = y
                }
                if (y == -1) {
                    o.current_quality = hls.loadLevel
                }
            }
        };
        this.getHLS = function() {
            return hls
        };
        this.getDASH = function() {
            return dash
        };
        this.HlsLevelsLength = function() {
            return HlsLevelsLength()
        };

        function HlsLevelsLength() {
            var x = 0;
            if (hls_created) {
                if (hls.levels) {
                    x = hls.levels.length
                }
            }
            return x
        }
        this.DashLevelsLength = function() {
            return DashLevelsLength()
        };

        function DashLevelsLength() {
            var x = 0;
            if (dash_created) {
                x = dash.getBitrateInfoListFor("video").length
            }
            return x
        }
        this.setHlsAudioTrack = function(x) {
            if (hls_created) {
                hls.audioTrack = parseInt(x)
            }
        };
        this.setSpeed = function(x) {
            pjstg.playbackRate = x
        };
        this.removeTrack = function() {
            var x = pjstg.textTracks;
            for (var y = 0; y < x.length; y++) {
                x[y].mode = "disabled"
            }
        };
        var iostracks = [];
        this.addTrack = function(x, y) {
            var stop = false;
            if (exist(iostracks[x])) {
                if (iostracks[x] == y) {
                    stop = true;
                    var t = pjstg.textTracks;
                    for (var i = 0; i < t.length; i++) {
                        if (t[i].label == y) {
                            t[i].mode = "showing"
                        }
                    }
                }
            }
            if (!stop) {
                var track = document.createElement('track');
                track.setAttribute('src', x);
                track.setAttribute('label', y);
                track.setAttribute('default', 'true');
                pjstg.appendChild(track);
                iostracks[x] = y
            }
        };
        this.errorMessage = function() {
            return error
        };
        this.Remove = function() {
            is_hls && hls ? hls.destroy() : '';
            is_dash && dash ? dash.reset() : '';
            pjstg.removeEventListener('error', onTagError);
            pjstg.removeEventListener('ended', onEnded);
            pjstg.removeEventListener('play', onPlay);
            pjstg.removeEventListener('pause', onPause);
            pjstg.removeEventListener('timeupdate', onTimeupdate);
            pjstg.removeEventListener('seeking', onSeeking);
            pjstg.removeEventListener('seeked', onSeeked);
            pjstg.removeEventListener('loadedmetadata', onMeta);
            pjstg.removeEventListener('volumechange', onVolume);
            pjstg.removeEventListener('waiting', onWaiting);
            pjstg.removeEventListener('durationchange', onDuration);
            pjstg.removeEventListener('progress', onProgress);
            pjstg.removeEventListener('enterpictureinpicture', onPipEnter);
            pjstg.removeEventListener('leavepictureinpicture', onPipLeave);
            pjstg.src = '';
            if (container.tagName == "IFRAME") {
                container.contentDocument.body.removeChild(pjstg)
            } else {
                container.removeChild(pjstg)
            }
            delete pjstg;
            pjstg = null
        }
    };
    var MediaYoutube = function(url, parentcontainer) {
        var intro = false;
        if (url.indexOf('intro') == 0) {
            intro = true;
            url = url.substr(5)
        }
        var youtube_id = YoutubeID(url);
        var error;
        var player;
        var created = false;
        var ready = false;
        var started = false;
        var vastonmobile = false;
        var auto = true;
        var _set_quality = [];
        var _speed = 1;
        var startwait_t;
        var _start = 0;
        var quality_received = false;
        var container_id = 'pljs_yt_' + v.id + (intro ? 'intro' : '');
        var container = createElement('div');
        container.setAttribute('id', container_id);
        parentcontainer.appendChild(container);
        o.airplay = false;
        !intro ? o.actions.AirplayChanged() : '';
        if (o.system.mobile) {
            v.preload = 1
        }
        if (v.youtubecontrols != 1) {
            var layer = createElement('div');
            parentcontainer.appendChild(layer);
            css(layer, {
                position: "absolute",
                top: 0,
                left: 0,
                "background-color": "#ff0000",
                height: "100%",
                width: "100%",
                "opacity": 0
            });
            layer.addEventListener("dblclick", function(event) {
                event.cancelBubble = true
            });
            if (o.system.mobile) {
                layer.addEventListener("touchstart", function(event) {
                    event.cancelBubble = true
                });
                layer.addEventListener("click", function(event) {
                    event.cancelBubble = true
                });
                layer.addEventListener("touchend", function(event) {
                    event.cancelBubble = true;
                    ScreenClick(event);
                    if (v.screenclick == 1) {
                        setTimeout(HideLayer, 100);
                        setTimeout(ShowLayer, 1000)
                    }
                })
            } else {
                layer.addEventListener("mousemove", function(event) {
                    var x = true;
                    if (v.vast == 1) {
                        if (exist(v.preroll) && !started) {
                            x = false
                        }
                        if (exist(v.playroll) && Status() == "paused" && time() > 0) {
                            x = false
                        }
                    }
                    if (x && v.screenclick == 1 && v.youtubelayer == 1) {
                        hide2(this);
                        setTimeout(ShowLayer, 2000)
                    }
                })
            }
            v.screenclick == 1 ? hide2(layer) : ''
        }

        function ShowLayer() {
            show2(layer)
        }

        function HideLayer() {
            hide2(layer)
        }
        if (v.preload == 1 && v.autoplay == 0) {
            onWaiting()
        }
        if (!window['YT']) {
            window.onYouTubeIframeAPIReady = function() {
                YouTubeIframeAPIReady();
                for (var i = 0; i < pljssglobal.length; i++) {
                    if (pljssglobal[i].api("id") != v.id) {
                        if (pljssglobal[i].api('isyoutube')) {
                            pljssglobal[i].api('youtubeready')
                        }
                    }
                }
            };
            if (!YoutubeInserted()) {
                var tag = document.createElement('script');
                tag.src = "https://www.youtube.com/iframe_api";
                tag.name = "youtube_iframe_api";
                var firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag)
            }
        } else {
            YouTubeIframeAPIReady()
        }

        function YoutubeInserted() {
            var x = false;
            var scripts = document.getElementsByTagName('script');
            for (var i = 0; i < scripts.length; i++) {
                if (scripts[i].src.indexOf("youtube.com/iframe_api") > -1) {
                    x = true
                }
            }
            return x
        }

        function YouTubeIframeAPIReady() {
            if (v.preload == 1 || intro) {
                !created ? Init() : ''
            } else {
                o.actions.MediaReady()
            }
        }

        function Init() {
            if ("YT" in window) {
                if (exist(YT.Player) && !created) {
                    log("Youtube Init");
                    var cntrls = 0;
                    if (v.youtubecontrols == 1) {
                        cntrls = 1
                    }
                    player = new YT.Player(container_id, {
                        height: o.container_h,
                        width: o.container_w,
                        videoId: youtube_id,
                        playerVars: {
                            enablejsapi: 1,
                            playerapiid: container_id,
                            html5: 1,
                            start: (o.seekto > 0 ? parseInt(o.seekto) : 0),
                            disablekb: 1,
                            iv_load_policy: 3,
                            controls: cntrls,
                            showinfo: 0,
                            modestbranding: 1,
                            rel: 0,
                            autoplay: 0,
                            loop: 0
                        },
                        events: {
                            'onReady': onYtPlayerReady,
                            'onStateChange': onYtPlayerStateChange,
                            'onError': onError,
                            'onPlaybackQualityChange': onQualityChanged
                        }
                    });
                    if (o.seekto > 0) {
                        o.seekto = undefined
                    }
                    Resize();
                    created = true
                } else {
                    setTimeout(Init, 500)
                }
            } else {
                setTimeout(Init, 500)
            }
        }

        function onYtPlayerReady() {
            log("Youtube Ready");
            ready = true;
            clearTimeout(startwait_t);
            o.actions.StopWaiting();
            if (intro) {
                if (o.system.mutedautoplay) {
                    o.actions.Mute()
                }
                player.playVideo();
                o.vast.ytReady()
            } else {
                if (v.autoplay == 1 && o.system.mutedautoplay && !o.acted) {
                    o.actions.Mute()
                }
                if (v.preload == 0) {
                    player.playVideo()
                } else {
                    o.actions.MediaReady()
                }
                o.media.onDuration();
                if (_speed != 1) {
                    SetSpeed(_speed)
                }
                onMeta();
                Resize()
            }
        }

        function onYtPlayerStateChange(event) {
            if (intro) {
                if (event.data == YT.PlayerState.ENDED) {
                    o.vast.ytEnded()
                }
                if (event.data == YT.PlayerState.PLAYING) {}
            } else {
                if (event.data == YT.PlayerState.PLAYING) {
                    if (!o.start) {
                        o.actions.Play()
                    }
                    if (_start > 0) {
                        player.seekTo(_start, true);
                        _start = 0
                    }
                    ShowLayer();
                    started = true;
                    ready = true;
                    if (vastonmobile) {
                        player.pauseVideo()
                    } else {
                        o.media.onPlay();
                        o.media.onTimeupdate()
                    }
                    Qualities();
                    if (exist(v.default_quality)) {
                        for (var i = 0; i < o.files_quality.length; i++) {
                            if (v.default_quality == o.files_quality[i]) {
                                SetQuality(i)
                            }
                        }
                        delete v.default_quality
                    } else {
                        if (exist(o.default_quality)) {
                            for (var i = 0; i < o.files_quality.length; i++) {
                                if (o.default_quality == o.files_quality[i]) {
                                    SetQuality(i)
                                }
                            }
                            delete o.default_quality
                        }
                    }
                }
                if (event.data == YT.PlayerState.PAUSED) {
                    onPause()
                }
                if (event.data == YT.PlayerState.ENDED) {
                    onEnded()
                }
                if (event.data == YT.PlayerState.BUFFERING) {
                    onWaiting()
                }
                if (event.data == YT.PlayerState.CUED) {}
            }
        }

        function onError(event) {
            if (intro) {
                o.vast.ytError()
            } else {
                if (event.data == 2) {
                    error = "wrong youtube id"
                }
                if (event.data == 5) {
                    error = "network empty"
                }
                if (event.data == 101 || event.data == 150 || event.data == 100) {
                    error = "this video is unavailable"
                }
                o.media.onError()
            }
        }

        function onEnded() {
            v.start > 0 ? _start = v.start : '';
            o.media.onEnded();
            o.media.onDuration()
        }

        function onPause() {
            o.actions.YoutubePauseroll();
            o.media.onPause()
        }

        function onTimeupdate() {
            o.media.onTimeupdate()
        }

        function onMeta() {
            o.media.onMeta();
            o.actions.LoadedData()
        }

        function onDuration() {
            o.media.onDuration()
        }

        function onVolume() {
            o.media.onVolume()
        }

        function onWaiting() {
            if (o.media) {
                o.media.onWaiting()
            } else {
                startwait_t = setTimeout(onWaiting, 100)
            }
        }

        function onQualityChanged(event) {
            SetCurrentQuality(event.data)
        }

        function Qualities() {
            if (!quality_received) {
                var x = player.getAvailableQualityLevels() + '';
                if (x != '' && x != undefined) {
                    o.files_quality = x.split(',');
                    if (v.ytautoquality == 0) {
                        var y = o.files_quality.indexOf('auto');
                        if (y > -1) {
                            o.files_quality.splice(y, 1)
                        }
                    }
                    for (var i = 0; i < o.files_quality.length; i++) {
                        o.files_quality[i] = RenameQualities(o.files_quality[i])
                    }
                    quality_received = true;
                    SetCurrentQuality(player.getPlaybackQuality())
                }
            }
        }

        function SetCurrentQuality(x) {
            o.current_quality = o.files_quality.indexOf(RenameQualities(x + ''));
            o.controls.QualityChanged(o.current_quality)
        }
        this.size = function() {
            return {
                "width": 0,
                "height": 0
            }
        };

        function Status() {
            var state = -1;
            if (ready) {
                state = player.getPlayerState()
            }
            var x = '';
            if (state == -1) {
                x = "paused"
            }
            if (state == 1 || state == 3) {
                x = "playing"
            }
            if (state == 2) {
                x = "paused"
            }
            if (state == 5) {
                x = "paused"
            }
            if (state == 0) {
                x = "ended"
            }
            return x
        }

        function Resize() {
            player ? player.setSize(o.screen_w, o.screen_h) : ''
        }

        function RenameQualities(x) {
            var y = x;
            if (x == "tiny") {
                y = "160p"
            }
            if (x == "small") {
                y = "240p"
            }
            if (x == "medium") {
                y = "360p"
            }
            if (x == "large") {
                y = "480p"
            }
            if (x == "hd720") {
                y = "720p"
            }
            if (x == "hd1080") {
                y = "1080p"
            }
            if (v.nameofyoutubequality == 1) {
                y = Lang(y)
            }
            if (x == "auto") {
                y = Lang("auto")
            }
            _set_quality[y] = x;
            return y
        }

        function time() {
            return ready ? player.getCurrentTime() : 0
        };

        function SetSpeed(x) {
            player ? player.setPlaybackRate(x) : '';
            _speed = x
        };
        this.YoutubeReady = function() {
            YouTubeIframeAPIReady()
        };
        this.Play = function() {
            if (ready) {
                player.playVideo()
            } else {
                !created ? Init() : ''
            }
        };
        this.Pause = function() {
            if (ready) {
                player.pauseVideo()
            }
        };
        this.Toggle = function() {
            if (ready) {
                Status() == 'playing' ? player.pauseVideo() : player.playVideo()
            }
        };
        this.Seek = function(x) {
            ready ? player.seekTo(x, true) : ''
        };
        this.tag = function() {
            return false
        };
        this.Mute = function() {
            ready ? player.mute() : ''
        };
        this.Unmute = function() {
            ready ? player.unMute() : ''
        };
        this.Volume = function(x) {
            ready ? player.setVolume(x * 100) : ''
        };
        this.isPlaying = function() {
            return Status() == 'playing'
        };
        this.isLive = function() {
            return false
        };
        this.setQuality = function(x) {
            SetQuality(x)
        };

        function SetQuality(x) {
            if (ready) {
                if (exist(o.files_quality[x])) {
                    var y = _set_quality[o.files_quality[x]];
                    auto = y == 'auto';
                    var z = time();
                    player.setPlaybackQuality(y)
                }
            }
        }
        this.setSpeed = function(x) {
            SetSpeed(x)
        };
        this.ready = function() {
            return ready
        };
        this.status = function() {
            return Status()
        };
        this.time = function() {
            return time()
        };
        this.duration = function() {
            var x = ready ? player.getDuration() : 0;
            if (exist(v.end)) {
                x = v.end
            }
            return x
        };
        this.loaded = function() {
            var x = 0;
            if (ready) {
                x = player.getVideoLoadedFraction() * player.getDuration()
            }
            return x
        };
        this.resize = function() {
            Resize()
        };
        this.errorMessage = function() {
            return error
        };
        this.auto = function() {
            return v.ytautoquality == 1 ? auto : false
        };
        this.BeforeVast = function() {
            if (o.system.mobile && o.system.android) {
                this.Play();
                vastonmobile = true
            } else {
                if (Status() == "playing") {
                    this.Pause()
                }
            }
        };
        this.AfterVast = function() {
            vastonmobile = false
        };
        this.nativeControls = function() {
            return true
        };
        this.Remove = function() {
            ready ? player.destroy() : '';
            ready = false;
            quality_received = false;
            try {
                if (container) {
                    parentcontainer.removeChild(container)
                }
                parentcontainer.removeChild(layer)
            } catch (e) {}
        }
    };
    var Controls = function() {
        var b = [];
        var butNames = [];
        var butPosition = [];
        var waiting = false;
        var toolbarHidden = false;
        var settings;
        var playlist;
        o.files_speed = [0.25, 0.5, 0.75, 1, 1.25, 1.5, 2];
        if (v.settings.customspeeds == 1 && exist(v.settings.speeds)) {
            o.files_speed = v.settings.speeds.split(",")
        }
        o.speed1 = o.files_speed.indexOf('1') > -1 ? o.files_speed.indexOf('1') : o.files_speed.indexOf(1);
        o.current_speed == 3 ? o.current_speed = o.speed1 : '';
        var resizeonwidth = false;
        var stretch_width = 0;
        var stretch_width_last = 0;
        var stretch_with_volume = false;
        var firstly = true;
        var bg = new ControlsBg();
        var settings;
        var order = [];
        var _rights = false;
        var _move_rights = false;
        var _max_order = 0;
        var _rb = [];
        if (v.control_line.position == "controls-right") {
            v.control_line.position = "controls"
        }
        for (var y in v) {
            if (v.hasOwnProperty(y)) {
                if (y.indexOf("control_") == 0) {
                    !exist(v[y].order0) ? v[y].order0 = v[y].order : v[y].order = v[y].order0;
                    order[v[y].order] = y;
                    if (v.control_line.position != "controls") {
                        if (v[y].position == "controls-right") {
                            _rb.push([y, v[y].order]);
                            _rights = true
                        } else {
                            if (v[y].position == "controls" || v[y].position == undefined) {
                                _rights ? _move_rights = true : ''
                            }
                        }
                    }
                    _max_order < v[y].order ? _max_order = v[y].order : ''
                }
            }
        }
        if (_move_rights) {
            _rb.sort(function(a, b) {
                return a[1] - b[1]
            });
            for (var i = 0; i < _rb.length; i++) {
                delete order[v[_rb[i][0]].order];
                v[_rb[i][0]].order = _max_order + 1;
                _max_order++;
                order[v[_rb[i][0]].order] = _rb[i][0]
            }
        }
        if (v.hotkey.seeksides == 1) {}
        var bg2 = createElement("div");
        o.frame.appendChild(bg2);
        css(bg2, {
            'position': 'absolute',
            'left': 0,
            'bottom': 0,
            'width': '100%',
            'height': v.toolbar.h
        });
        bg2.onclick = function() {
            !o.system.mobile ? o.actions.ControlsBgClick() : ''
        };
        for (var i = 1; i < order.length; i++) {
            if (order[i]) {
                var y = order[i];
                if (y) {
                    if (o.system.mobile) {
                        if (v[y].action == "volume" || (v[y].action == "fullscreen" && v.nativemobile)) {
                            v[y].on = 0
                        }
                    }
                    if (v[y].on == 1) {
                        var action = v[y].action;
                        if (action == "line" || action == "volume") {
                            b[y] = new ControlLine(y, action);
                            b[y].Resize(b[y].s("w"))
                        } else {
                            b[y] = new Control(y)
                        }
                        butNames.push(y);
                        if (b[y].g("action") == "title") {
                            if (b[y].s("text") == '') {
                                if (b[y].s("var") != '') {
                                    if (!exist(v[b[y].s("var")])) {
                                        b[y].set("display", false)
                                    }
                                } else {
                                    b[y].set("display", false)
                                }
                            }
                        }
                        b[y].set("scale", b[y].s("scale"))
                    }
                }
            }
        }
        if (exist(v.settings)) {
            settings = new Settings("settings");
            v.settings.always == 1 ? settings.show() : settings.hide()
        }
        if (exist(v.playlist)) {
            playlist = new Settings("playlist");
            if (exist(o.playlist)) {
                playlist.updatePlaylist(o.playlist);
                if (v.playlist.openplaylistbefore == 0 || !exist(v.playlist.openplaylistbefore)) {
                    v.playlist.always == 0 ? playlist.hide() : ''
                } else {
                    playlist.show()
                }
            } else {
                playlist.hide(1)
            }
        }
        if (exist(v.control_share)) {
            if (v.control_share.on == 1) {
                o.share = new Share()
            }
        }
        PlaylistControls();
        Resize(true);
        ShowOrHide();
        firstly = false;

        function ControlX(but) {
            var x = 0;
            var to_right = false;
            if (but) {
                if (but.g("action") == 'line') {
                    x = butPosition.left + but.s("marginleft");
                    if (butPosition.rightbs != null) {} else {
                        butPosition.rightbs = []
                    }
                } else {
                    if (butPosition.rightbs != null) {
                        var but_space = but.g("width") + but.s("marginright") + but.s("marginleft");
                        if (ControlNoSpace(but)) {
                            but_space = 0
                        }
                        if (but.s("hidden") == 1 && !but.g("show")) {
                            but_space = 0
                        }
                        if (but.s("vertical") > 0) {
                            but_space = 0
                        }
                        x = bg.g("w") - v.toolbar.leftandrightpadding * 1 - but_space + but.g("width") / 2 + but.s("marginleft");
                        var i = 0;
                        butPosition.right -= but_space;
                        for (i = 0; i < butPosition.rightbs.length; i++) {
                            var but2 = b[butPosition.rightbs[i]];
                            if (but2.s("vertical") > 0) {
                                css(but2.c(), {
                                    "left": (but2.g("x0") - but_space)
                                })
                            } else {
                                css(but2.c(), {
                                    "left": (but2.g("x") - but_space)
                                })
                            }
                            but2.set("x0", but2.g("x"))
                        }
                        butPosition.rightbs.push(but.g("key"));
                        but.set('rightside', 1)
                    } else {
                        if (but.s("hidden") == 1 && !but.g("show")) {
                            if (but.g("action") == "volume") {
                                if (but.s("hide") == 1 && but.s("hideoutmute") == 1 && stretch_with_volume) {
                                    stretch_width += but.g("width") + but.s("marginleft") + but.s("marginright");
                                    stretch_with_volume = false
                                }
                            }
                        } else {
                            if (but.s("vertical") > 0) {
                                x = butPosition.left + but.s("marginleft") + but.s("marginright")
                            } else {
                                var stop = false;
                                if (but.g("action") == "volume") {
                                    if (but.s("hide") == 1 && but.s("hideoutmute") == 1) {
                                        if (!o.hidden_volume_over_process && !o.hidden_volume_over) {} else {
                                            if (!stretch_with_volume) {
                                                stretch_width -= but.g("width") + but.s("marginleft") + but.s("marginright");
                                                stretch_with_volume = true
                                            }
                                        }
                                    }
                                }
                                if (ControlNoSpace(but)) {
                                    stop = true
                                }
                                if (!stop) {
                                    butPosition.left += but.g("width") / 2 + but.s("marginleft");
                                    x = butPosition.left;
                                    butPosition.left += but.g("width") / 2 + but.s("marginright")
                                } else {
                                    x = butPosition.left
                                }
                            }
                        }
                    }
                }
            }
            return x
        }

        function ControlCoordinate(but) {
            var width = o.fullscreen && v.toolbar.stretchonfullscreen == 0 ? o.normal_w : o.screen_w;
            var height = o.screen_h;
            var but_x = 0;
            if (but != bg) {
                but_x = width / 2 + but.s("marginleft") - but.s("marginright")
            }
            var but_y = height / 2;
            var but_w = but.g("width");
            var but_h = but.g("height");
            var position = but.s("position");
            if (position.indexOf("center") > -1) {
                but_x = o.screen_w / 2 + but.s("marginleft") - but.s("marginright")
            }
            if (position.indexOf("top") > -1) {
                but_y = but_h / 2 + (but.s("marginproctop") * o.screen_h / 100)
            }
            if (position.indexOf("bottom") > -1) {
                but_y = o.screen_h - (but == bg ? but_h : but_h / 2) - (but.s("marginprocbottom") * o.screen_h / 100)
            }
            if (position.indexOf("right") > -1) {
                but_x = o.screen_w - but_w / 2 + but.s("marginleft") - but.s("marginright") - (but.s("marginprocright") * o.screen_w / 100)
            }
            if (position.indexOf("left") > -1) {
                but_x = but_w / 2 + but.s("marginleft") - but.s("marginright") + (but.s("marginprocleft") * o.screen_w / 100)
            }
            if (position.indexOf("controls") > -1) {
                var cx = ControlX(but);
                but_x = int(bg.c().offsetLeft) + cx;
                if (position == "controls-right") {
                    but_x += stretch_width
                }
                if (v.toolbar.position == "top") {
                    but_y = v.toolbar.h / 2
                } else {
                    but_y = height - v.toolbar.h / 2
                }
            }
            return {
                x: but_x,
                y: but_y + but.s("margintop") - but.s("marginbottom")
            }
        }

        function Resize(all) {
            var w = o.fullscreen && v.toolbar.stretchonfullscreen == 0 ? o.normal_w : o.screen_w;
            var h = o.screen_h;
            css(bg.c(), {
                'top': (v.toolbar.position == "top" ? 0 : o.screen_h - v.toolbar.h) - v.toolbar_margintop
            });
            bg.set("y0", (o.screen_h - v.toolbar.h - v.toolbar_margintop));
            if (v.toolbar.stretchonfullscreen == 0 && bg) {
                css(bg.c(), {
                    'width': w,
                    'left': 0,
                    'margin-left': 0
                });
                bg.set("w", w);
                if (o.fullscreen) {
                    css(bg.c(), {
                        'left': '50%',
                        'margin-left': -w / 2
                    })
                }
            }
            butPosition = {
                "left": v.toolbar.leftandrightpadding * 1,
                "right": (bg.g("w") - v.toolbar.leftandrightpadding * 1)
            };
            var bg_hide = false;
            if (!bg.g("show")) {
                bg.set("display", true);
                bg_hide = true
            }
            var key;
            for (var i = 0; i < butNames.length; i++) {
                key = butNames[i];
                if (b[key]) {
                    var cc = ControlCoordinate(b[key]);
                    if (cc) {
                        b[key].set("x0", cc.x);
                        cc.y > 0 ? b[key].set("y0", cc.y) : '';
                        if (b[key].s("hidden") == 1 && !b[key].g("show") && !all) {
                            HidePositionControl(b[key])
                        } else {
                            css(b[key].c(), {
                                "position": "absolute",
                                "left": b[key].g("x0"),
                                "top": b[key].g("y0")
                            })
                        }
                    }
                }
            }
            if (bg_hide) {
                bg.set("display", false)
            }
            stretch_width = 0;
            for (key in b) {
                if (b.hasOwnProperty(key)) {
                    if (b[key].s("position") == "controls-right" && b[key].g("action") != "line" && stretch_width > -1) {
                        stretch_width = butPosition.right - butPosition.left
                    }
                    if (b[key].g("action") == "line") {
                        var line_width;
                        if (b[key].s("customwidth") == 1) {
                            line_width = b[key].s("w")
                        } else {
                            if (b[key].s("position").indexOf("controls") > -1) {
                                line_width = butPosition.right - butPosition.left - b[key].s("marginleft") - b[key].s("marginright");
                                css(b[key].c(), {
                                    "left": (int(bg.c().offsetLeft) + butPosition.left + b[key].s("marginleft") + line_width / 2)
                                });
                                stretch_width = -1
                            } else {
                                line_width = bg.g("w") - b[key].s("marginleft") - b[key].s("marginright");
                                css(b[key].c(), {
                                    "left": (int(bg.c().offsetLeft) + b[key].s("marginleft") + line_width / 2)
                                })
                            }
                        }
                        b[key].set("x0", b[key].g("x"));
                        b[key].Resize(line_width)
                    }
                }
            }
            if (settings) {
                ResizeSettings(settings)
            }
            if (exist(v.playlist)) {
                ResizeSettings(playlist)
            }
            resizeonwidth || o.fullscreen || stretch_width_last != stretch_width ? ShowOrHide() : ''
        }

        function HidePositionControl(b) {
            var left = 0;
            var top = 0;
            if (b.s("position").indexOf("right") > -1 && b.s("position").indexOf("controls") == -1) {
                left = o.screen_w + b.g("width") + 10
            }
            if (b.s("position").indexOf("left") > -1) {
                left = -b.g("width") - 10
            }
            if (b.s("position").indexOf("top") > -1) {
                top = -b.g("height") * 2
            }
            if (b.s("position").indexOf("bottom") > -1 || b.s("position").indexOf("controls") > -1) {
                top = o.screen_h + b.g("height") + b.g("width") + 10
            }
            if (left > 0) {
                css(b.c(), {
                    "left": left
                })
            }
            if (top > 0) {
                css(b.c(), {
                    "top": top
                })
            }
        }

        function ResizeSettings(x) {
            var top = -2000;
            x.resizePlaylist();
            var y = o.screen_h - v.toolbar.h * (x.s("position").indexOf("top") > -1 ? 1 : 2);
            var ymax = y - (o.fullscreen && !o.system.mobile ? (100 + x.s("hmaxk") * 1) : x.s("hmaxk"));
            ymax < 100 ? ymax = 100 : '';
            css(x.c(), {
                'max-height': ymax
            });
            x.co() ? css(x.co(), {
                'max-height': ymax
            }) : '';
            if (x.g("show")) {
                top = o.screen_h / 2 - x.g("height") / 2 + x.s("margintop") - x.s("marginbottom");
                if (x.s("position").indexOf("top") > -1) {
                    top = x.s("margintop") - x.s("marginbottom")
                }
                if (x.s("position").indexOf("bottom") > -1) {
                    top = o.screen_h - v.toolbar.h - x.g("height") + x.s("margintop") - x.s("marginbottom")
                }
                top < 0 ? top = 0 : ''
            }
            if (x.s("position").indexOf("right") > -1) {
                css(x.c(), {
                    "position": "absolute",
                    "right": x.s("marginright") - x.s("scrollwidth"),
                    "top": top
                })
            } else if (x.s("position").indexOf("left") > -1) {
                css(x.c(), {
                    "position": "absolute",
                    "left": x.s("marginleft"),
                    "top": top
                })
            } else {
                if (x.g("key") == "playlist" && x.s("floatleft") == 1) {
                    css(x.c(), {
                        "position": "absolute",
                        "left": o.screen_w / 2 - x.g("width") / 2 + x.s("marginleft") / 2 - x.s("marginright") / 2,
                        "top": top
                    })
                } else {
                    css(x.c(), {
                        "position": "absolute",
                        "left": o.screen_w / 2 - x.g("width") / 2 + x.s("marginleft") - x.s("marginright"),
                        "top": top
                    })
                }
            }
            x.Arrows()
        };
        this.ControlClick = function(key) {
            var but = b[key];
            var action = but.g("action");
            if (action) {
                var d = new Date();
                o.clicktime = d.getTime();
                if (action && action != "") {
                    Action(but)
                }
            }
        };
        this.toggleControl = function(x, y) {
            for (var key in b) {
                if (b.hasOwnProperty(key)) {
                    if (b[key].g("action") == x) {
                        b[key].set(y ? "show2" : "hide2")
                    }
                }
            }
        };

        function Action(but) {
            o.acted = true;
            var a = but.g("action");
            if (a == "play") {
                o.actions.Play()
            } else {
                if (a == "pause") {
                    o.actions.Pause()
                }
                if (a == "stop") {
                    v.preload = 0;
                    o.media.Recover();
                    o.actions.Stop()
                }
            }
            if (a == "back") {
                o.actions.Seek(0, false)
            }
            if (a == "fullscreen") {
                o.actions.Fullscreen()
            } else {
                if (a == "normalscreen") {
                    o.actions.Normalscreen()
                }
            }
            if (a == "line") {
                o.actions.Seek(but.g("click") * o.media.duration(), true);
                if (o.continue) {
                    o.continue.write(but.g("click") * o.media.duration(), o.media.duration());
                    o.seekto > 0 ? o.seekto = undefined : '';
                    log('o.seekto 5', o.seekto)
                }
            }
            if (a == "volume") {
                var x = but.g("click");
                x < 0.02 ? x = 0 : '';
                x > 1 ? x = 1 : '';
                if (o.storage && v.volumestore == 1) {
                    localStorage.setItem("pljsvolume", x);
                    if (but.g("click") > 0 || o.system.iphone || v.mutestore == 0) {
                        localStorage.removeItem("pljsmute")
                    } else {
                        localStorage.setItem("pljsmute", 1)
                    }
                }
                o.actions.Volume(x)
            }
            if (a == "mute") {
                if (o.storage && !o.system.iphone && v.mutestore == 1) {
                    localStorage.setItem("pljsmute", 1)
                }
                o.actions.Mute()
            } else {
                if (a == "unmute") {
                    if (o.storage) {
                        localStorage.removeItem("pljsmute")
                    }
                    o.actions.Unmute()
                }
            }
            if (a.indexOf("time") == 0) {
                but.isOn() ? but.Off() : but.On()
            }
            if (a == "rotate") {
                o.media.Rotate()
            }
            if (a == "scale+") {
                o.media.Scale(0.1)
            }
            if (a == "scale-") {
                o.media.Scale(-0.1)
            }
            if (a == "scale") {
                o.media.Scale(0)
            }
            if (a == "live") {
                api("restart");
                but.set("iconopacity", 1)
            }
            if (a == "share") {
                if (exist(o.share)) {
                    o.share.Show();
                    PlaylistClose();
                    SettingsClose()
                }
            }
            if (a == "settings") {
                if (settings) {
                    if (!settings.g("show")) {
                        settings.show()
                    } else {
                        settings.hide()
                    }
                }
            }
            if (a == "playlist") {
                if (exist(v.playlist)) {
                    if (playlist.g("show")) {
                        playlist.hide()
                    } else {
                        setTimeout(function() {
                            playlist.show()
                        }, 100)
                    }
                }
            }
            if (a == "next") {
                o.controls.PlaylistNext()
            }
            if (a == "prev") {
                o.controls.PlaylistPrev()
            }
            if (a == "custom") {
                if (but.s("link") == 1 && but.s("linkurl") != "") {
                    var x = but.s("linkurl");
                    if (x.indexOf('{time}') > -1) {
                        x = x.replace('{time}', (exist(o.continue) ? o.continue.flag().t : o.media.time()))
                    }
                    if (x.indexOf('{file}') > -1) {
                        x = x.replace('{file}', o.media.currentFile())
                    }
                    if (x.indexOf('{title}') > -1) {
                        x = x.replace('{title}', v.title.replace(/,/ig, " "))
                    }
                    but.s("linkpause") == 1 ? o.actions.Pause() : '';
                    var y = x.split(",");
                    if (x.indexOf("api:") == 0) {
                        var z = x.substr(4).split(";");
                        for (var i = 0; i < z.length; i++) {
                            y = z[i].split(",");
                            if (y.length > 1) {
                                api(y[0], y[1], but)
                            } else {
                                api(y[0])
                            }
                        }
                    } else {
                        if (x.indexOf("js:") == 0) {
                            eval(y[0].substr(3) + '(' + (exist(y[1]) ? '"' + y[1] + '"' : '') + (exist(y[2]) ? ',"' + y[2] + '"' : '') + ')')
                        }
                        if (x.indexOf("http") == 0 || x.indexOf("//") == 0) {
                            window.open(but.s("linkurl"), but.s("linktarget"))
                        }
                        if (x.indexOf("download") == 0) {
                            o.actions.Download()
                        }
                        if (x == "api:pipwebkit") {
                            o.media.PipWebkit()
                        }
                    }
                }
            }
            for (var i = 0; i < 10; i++) {
                if (but.s("linkurl") == "settings#" + i) {
                    if (settings) {
                        if (settings.g("show") && settings.g("open") == i) {
                            settings.hide()
                        } else {
                            settings.show();
                            settings.open(i)
                        }
                    }
                }
            }
        };
        this.title = function(t) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "title") {
                        if (b[x].s("var") == t) {
                            if (v[t] != '' || b[x].s("icon") != '') {
                                b[x].set("display", true)
                            } else {
                                b[x].set("display", false)
                            }
                            b[x].UpdateText(v[t])
                        }
                    }
                    if (b[x].g("action") == "custom") {
                        if (b[x].s("type") == "text") {
                            b[x].RenewFromTitle(true)
                        }
                    }
                }
            }
        };
        this.updateTitle = function() {
            if (v.title != '') {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") == "title") {
                            var y = false;
                            if (!b[x].g("show")) {
                                y = true;
                                b[x].set("display", true)
                            }
                            b[x].UpdateText(v.title);
                            if (y) {
                                b[x].set("display", false)
                            }
                        }
                    }
                }
            }
        };
        this.resize = function() {
            Resize()
        };
        this.resizeSettings = function() {
            ResizeSettings(settings)
        };
        this.resizePlaylist = function() {
            ResizeSettings(playlist)
        };
        this.Play = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "play") {
                        b[x].On()
                    }
                }
            }
            if (this.PlaylistVisible() && v.playlist.autohide == 1) {
                this.Playlist()
            }
            o.play = true;
            ShowOrHide()
        };
        this.Pause = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "pause" || b[x].g("action") == "stop") {
                        b[x].Off()
                    }
                }
            }
            if (playlist) {
                if (v.playlist.openplaylistpause == 1 && !playlist.empty()) {
                    playlist.show()
                }
            }
            o.play = false;
            ShowOrHide()
        };
        this.Mute = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "mute") {
                        b[x].On()
                    }
                    this.Volume(0)
                }
            }
            ShowOrHide()
        };
        this.Unmute = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "unmute") {
                        b[x].Off()
                    }
                }
            }
            if (v.volume < 0.1) {
                v.volume = 0.5;
                o.actions.Volume(v.volume)
            } else {
                this.Volume(v.volume)
            }
            ShowOrHide()
        };
        this.Volume = function(volume, y) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "volume") {
                        b[x].UpdatePlay(volume, 1, (y == "no" ? y : true))
                    }
                    if (b[x].g("action") == "mute") {
                        b[x].UpdateVolume(volume)
                    }
                }
            }
            ShowOrHide()
        };
        this.Fullscreen = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "fullscreen") {
                        b[x].On();
                        b[x].set("scale", b[x].s("scale"))
                    }
                }
            }
            ShowOrHide();
            resizeonwidth ? setTimeout(ShowOrHide, 500) : '';
            HideInterval()
        };
        this.Normalscreen = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "normalscreen") {
                        b[x].Off()
                    }
                }
            }
            Resize();
            clearInterval(o.toolbarInterval);
            ShowOrHide()
        };
        this.onEnded = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "play") {
                        b[x].ReplayIcon()
                    }
                }
            }
        };
        this.Review = function() {
            ShowOrHide()
        };

        function ShowOrHide() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") != "buffer") {
                        ShowOrHideProcessor(b[x])
                    }
                }
            }
            ShowOrHideProcessor(bg);
            if (stretch_width_last != stretch_width) {
                stretch_width_last = stretch_width;
                Resize()
            }
        };

        function ShowForce() {
            if (toolbarHidden && v.toolbar.hidewithoutmoving == 1) {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") != "buffer") {
                            ShowOrHideProcessor(b[x], false)
                        }
                    }
                }
                css(o.frame, {
                    "cursor": "default"
                });
                ShowOrHideProcessor(bg, false);
                if (bg.g("show")) {
                    toolbarHidden = false;
                    o.media.ToolbarShow()
                }
            }
        }

        function HideForce() {
            if (o.play && v.toolbar.hidewithoutmoving == 1 && !o.mouseDown && !o.controlover) {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") != "buffer") {
                            ShowOrHideProcessor(b[x], true)
                        }
                    }
                }
                ShowOrHideProcessor(bg, true);
                if (!bg.g("show")) {
                    toolbarHidden = true;
                    o.media.ToolbarHide();
                    css(o.frame, {
                        "cursor": "none"
                    })
                }
            }
        }

        function HideInterval() {
            if (v.toolbar.hidewithoutmoving == 1) {
                clearInterval(o.toolbarInterval);
                o.toolbarInterval = setInterval(HideForce, ((v.toolbar.hideleavetimeout > 0 ? v.toolbar.hideleavetimeout : v.toolbar.hidetimeout) * 1000))
            }
        }

        function ShowOrHideProcessor(but, forcehide) {
            var hide = false;
            var show = false;
            var toolbar_hide = false;
            if (v.toolbar.hide == 1) {
                if (!o.mouseHere && !o.fullscreen && o.play && v.toolbar.hidejustfull != 1 && !o.casting) {
                    hide = true;
                    show = false;
                    toolbar_hide = true
                } else {
                    hide = false;
                    show = true
                }
                if (exist(forcehide) && !o.casting) {
                    hide = forcehide;
                    show = !hide
                }
            } else {
                if (but.s("hide") != 1) {
                    show = true
                }
            }
            if (show) {
                css(o.frame, {
                    "cursor": "default"
                })
            }
            if (but.s("action") == "custom" && but.s("position").indexOf("controls") == -1) {
                hide = false;
                show = true
            }
            if (o.casting) {
                if (but.s("action") == "line") {
                    if (o.media.duration() == -1) {
                        hide = true;
                        show = false
                    }
                }
            }
            var re_y = false;
            if (but.s("hide") == 1) {
                if (but.s("hideonplay") == 1) {
                    if (o.play) {
                        hide = true;
                        show = false
                    } else {
                        show = true
                    }
                }
                if (but.s("hideonpause") == 1) {
                    if (!o.play) {
                        hide = true;
                        show = false
                    } else {
                        !hide ? show = true : ''
                    }
                }
                if (but.s("hideafterstart") == 1) {
                    if (o.start) {
                        hide = true;
                        show = false
                    }
                }
                if (but.s("hide0timestore") == 1) {
                    if (o.start || !o.continue || o.media.isLive()) {
                        hide = true;
                        show = false
                    }
                    if (o.continue) {
                        if (o.continue.flag().t == 0) {
                            hide = true;
                            show = false
                        }
                    }
                }
                if (but.s("hideuntilstarted") == 1) {
                    if (!o.start) {
                        hide = true;
                        show = false
                    } else {
                        !hide ? show = true : ''
                    }
                }
                if (but.s("hideuntilended") == 1) {
                    if (!o.media.ended()) {
                        hide = true;
                        show = false
                    } else {
                        !hide ? show = true : ''
                    }
                }
                if (but.s("hideonvod") == 1 && but.s("hide") == 1) {
                    if (!o.media.isLive()) {
                        hide = true;
                        show = false
                    } else {
                        !hide ? show = true : ''
                    }
                }
                if (but.s("hideonleaveandplay") == 1) {
                    if (toolbar_hide || forcehide) {
                        hide = true;
                        show = false
                    } else {
                        !hide ? show = true : ''
                    }
                }
                if (but.s("hideonwidth") == 1) {
                    resizeonwidth = true
                }
                if (but.s("hideoverwidth") == 1) {
                    resizeonwidth = true
                }
                if (but.s("hideonleave") == 1) {
                    if (!o.mouseHere) {
                        hide = true;
                        show = false
                    } else {
                        !hide ? show = true : ''
                    }
                }
                if (but.s("hideonfullscreen") == 1) {
                    if (o.fullscreen) {
                        hide = true;
                        show = false
                    } else {
                        !hide ? show = true : ''
                    }
                }
                if (but.s("hideonunmute") == 1) {
                    if (!o.muted) {
                        hide = true;
                        show = false
                    }
                }
                if (but.s("hideonlive") == 1) {
                    if (o.media.isLive() && o.media.currentFile().indexOf("?DVR") == -1) {
                        hide = true;
                        show = false
                    } else {
                        !hide ? show = true : ''
                    }
                }
                if (but.s("hidewithposter") == 1) {
                    if (isVisible(o.poster)) {
                        hide = true;
                        show = false
                    }
                }
                if (but.s("hideuntilmeta") == 1) {
                    if (!o.metadata) {
                        hide = true;
                        show = false
                    }
                }
                if (but.s("hideonyoutube") == 1) {
                    if (v.preload == 1 && v.screenclick == 1) {
                        if (o.file_type == "youtube" && !exist(v.poster) && v.youtubeposter == 0) {
                            if (!o.start || o.media.status() == "ended") {
                                if (v.poster == '') {} else {
                                    hide = true;
                                    show = false
                                }
                            }
                        }
                    }
                }
                if (but.s("action") == "volume") {
                    if (but.s("hide") == 1 && but.s("hideoutmute") == 1) {
                        hide = true;
                        show = false;
                        if (!toolbar_hide && (o.hidden_volume_over || o.hidden_volume_over_process) && !forcehide) {
                            hide = false;
                            show = true
                        } else {
                            re_y = true
                        }
                    }
                }
            }
            if (ControlNoSpace(but)) {
                hide = true;
                show = false
            }
            if (but.g("type") == "text") {
                if (but.g("length") == 0) {
                    show = false;
                    hide = true
                }
            }
            if (settings) {
                if (settings.g("show") && v.settings.always != 1) {
                    hide = false;
                    toolbar_hide = false;
                    forcehide = false
                }
            }
            if (but.g("action") == "share") {
                if (exist(o.share)) {
                    if (o.share.empty()) {
                        hide = true;
                        show = false;
                        but.set("animation", "none")
                    }
                }
            }
            if (but.g("action") == "custom") {
                if (but.s("linkurl") == "api:airplay") {
                    if (!o.airplay) {
                        hide = true;
                        show = false
                    }
                }
            }
            if (but.g("action") == "custom") {
                if (but.s("linkurl") == "api:pipwebkit") {
                    if (!o.pipwebkit || (!o.start && v.preload == 0)) {
                        hide = true;
                        show = false
                    }
                }
            }
            if (but.g("action") == "playlist" || but.g("action") == "next" || but.g("action") == "prev" || but.s("hidewithoutplaylist") == 1) {
                if (playlist.empty() && but.s("hidewithoutplaylist") != 0) {
                    hide = true;
                    show = false;
                    but.set("animation", "none")
                }
                if (hide) {
                    PlaylistClose()
                }
            }
            if (but.s("hideafterclick") == 1) {
                if (but.g("clicked")) {
                    hide = true;
                    show = false
                }
            }
            if (o.nativecontrols || (!o.start && v.toolbar.hide == 1 && v.toolbar.hideuntilstarted == 1) || (!o.metadata && v.toolbar.hide == 1 && v.toolbar.hideuntilmeta == 1)) {
                if (but.s("position").indexOf("controls") > -1 || but.s("position").indexOf("bottom") > -1) {
                    hide = true;
                    show = false
                }
                if (v.toolbar.hidejustfull == 1 && !o.fullscreen) {
                    hide = false;
                    show = true
                }
            }
            if (but.s("customjscontrol") == 1) {
                hide = false;
                show = false
            }
            if (re_y) {
                var cc = ControlCoordinate(but);
                if (cc) {
                    cc.y > 0 ? but.set("y0", cc.y) : '';
                    css(but.c(), {
                        "position": "absolute",
                        "top": but.g("y0")
                    })
                }
            }
            if (hide) {
                HideControl(but, (firstly ? true : false))
            }
            if (show) {
                ShowControl(but)
            }
            if (but == bg) {
                if (!hide && show) {
                    o.media.ToolbarShow();
                    show2(bg2);
                    toolbarHidden = false
                }
                if (hide && !show) {
                    o.media.ToolbarHide();
                    hide2(bg2);
                    toolbarHidden = true
                }
                if (playlist) {
                    if (v.playlist.always == 1 && !playlist.empty()) {
                        if (show || o.nativecontrols) {
                            if (v.playlist.alwaysnotfullscreen == 1 && o.fullscreen) {} else {
                                if (!playlist.g("show")) {
                                    if (v.playlist.alwaysjustpause == 1) {
                                        !o.play ? playlist.show() : ''
                                    } else {
                                        playlist.show()
                                    }
                                }
                            }
                        } else {
                            hide ? playlist.hide() : ''
                        }
                    }
                }
            }
        };

        function HideControl(but, quick) {
            if (but.g("show")) {
                if (o.fullscreen_process || but.s("animation") == "none" || quick) {
                    but.set("display", false)
                } else {
                    HideAnimate(but)
                }
                but.set("show", false)
            }
        };

        function ShowControl(but) {
            if (but.g("action") == "line") {
                but.s("sticking") > 0 ? but.set("show", false) : ''
            }
            if (!but.g("show")) {
                if (but.s("animation") == "none" || o.fullscreen_process) {
                    but.set("display", true);
                    if (but.g("action") == "volume") {
                        if (o.hidden_volume) {
                            HidePositionControl(but)
                        }
                    }
                } else {
                    ShowAnimate(but)
                }
                if (but.s("action") == "volume") {
                    o.controls.Volume(o.muted ? 0 : v.volume)
                }
                if (but.s("action") == "line") {
                    o.actions.Loading()
                }
                but.set("show", true)
            }
        };

        function HideAnimate(but) {
            killMotion(but.g("key"));
            var m_type = "alpha|";
            var m_to = "0|";
            var hide = 1;
            if (but.s("animation") == "scale") {
                m_type += "scale|";
                m_to += "0|"
            }
            if (but.s("animation") == "position") {
                if (but.s("position").indexOf("right") > -1 && but.s("position").indexOf("controls") == -1) {
                    m_type += "x|";
                    m_to += int(o.screen_w + but.g("width")) + "|"
                }
                if (but.s("position").indexOf("left") > -1) {
                    m_type += "x|";
                    m_to += int(-but.g("width")) + "|"
                }
                if (but.s("position").indexOf("top") > -1) {
                    m_type += "alpha|y|";
                    m_to += "0|" + (-but.g("height")) + "|"
                }
                if (but.s("position").indexOf("bottom") > -1 || but.s("position").indexOf("controls") > -1 || but.s("position") == "line") {
                    m_type += "y|";
                    m_to += int(o.screen_h + but.g("height")) + "|";
                    if (but.g("action") == "line") {
                        m_to = int(o.screen_h + but.s("h") + (but.s("h") < 20 ? 20 - but.s("h") : 0)) + "|"
                    }
                }
                if (but.s("position") == "center") {
                    m_type += "scale|";
                    m_to += "0|"
                }
            }
            var m = new Motion({
                "mc": but,
                "me": but.g("key"),
                "type": m_type.substr(0, m_type.length - 1),
                "to": m_to.substr(0, m_to.length - 1),
                "hide": hide
            })
        };

        function ShowAnimate(but) {
            killMotion(but.g("key"));
            var m_type = "";
            var m_to = "";
            if (but.g("opacity") != 1) {
                m_type = "alpha|";
                m_to = (but.g("key") == 'bg' ? v.toolbar.a : "1") + "|"
            }
            if (but.s("animation") == "scale") {
                if (but.g("scaleX") != but.s("scale")) {
                    but.set("scale", 0);
                    m_type += "scale|";
                    m_to += but.s("scale") + "|"
                }
            }
            if (but.s("animation") == "position") {
                if (but.s("position") == "center") {
                    if (but.g("scaleX") != but.s("scale")) {
                        m_type += "scale|";
                        m_to += but.s("scale") + "|"
                    }
                } else {
                    if (but.s("position").indexOf("controls") > -1) {
                        if (but.g("y") != but.g("y0")) {
                            m_type += "y|";
                            m_to += but.g("y0") + "|"
                        }
                    } else {
                        m_type += "x|y|";
                        m_to += but.g("x0") + "|" + but.g("y0") + "|"
                    }
                }
            }
            if (m_type != "" && m_to != "") {
                var m = new Motion({
                    mc: but,
                    me: but.g("key"),
                    type: m_type.substr(0, m_type.length - 1),
                    to: m_to.substr(0, m_to.length - 1),
                    show: 1
                })
            } else {
                but.set("display", true)
            }
        };

        function ControlNoSpace(but) {
            var x = false;
            if (but.g("action") == "playlist" || but.g("action") == "next" || but.g("action") == "prev") {
                if (playlist.empty()) {
                    x = true
                }
            }
            if (but.g("action") == "settings") {
                if (settings.empty()) {
                    x = true;
                    but.set("animation", "none")
                }
            }
            if (but.s("chromecast") == 1) {
                var cb = document.getElementById("pjs_cast_button_" + v.id);
                if ((o.media.duration() == 0 && o.media.time() == 0) || !o.tagvideo || !isVisible(cb) || !o.cast_available) {
                    x = true
                }
            }
            if (but.g("action") == "duration") {
                if (o.media.isLive()) {
                    x = true
                }
            }
            if (but.g("action") == "live") {
                if (!o.media.isLive() && but.s("hide") == 1 && but.s("hideonvod") == 1) {
                    x = true
                }
            }
            if (but.s("hideoverwidth") == 1) {
                if (o.screen_w > but.s("hideoverwidthlimit")) {
                    x = true
                }
            }
            if (but.s("hideonwidth") == 1) {
                if (o.screen_w <= but.s("hideonwidthlimit")) {
                    x = true
                }
            }
            if (but.s("hideonmobile") == 1) {
                if (o.system.mobile) {
                    x = true
                }
            }
            if (but.g("settings#")) {
                if (!but.g("set#visible")) {
                    x = true
                }
            }
            if (but.s("hideondesktop") == 1) {
                if (o.system.desktop) {
                    x = true
                }
            }
            return x
        }
        this.Mouse = function(key, type, quick) {
            var resize = false;
            var stop = false;
            var but = b[key];
            var action = but.g("action");
            if (type == "over") {
                if (o.hidden_volume) {
                    if (action == "volume" || action == "mute" || action == "unmute") {
                        o.hidden_volume_over = true;
                        o.hidden_volume_over_process = true;
                        resize = true;
                        ShowOrHide()
                    }
                }
                if (v.settings.showovercontrol == 1 && (action == "settings" || but.s("linkurl").indexOf("setting") == 0)) {
                    clearTimeout(o.settingsovertimer);
                    !settings.g("show") ? settings.show() : ''
                }
            }
            if (type == "out") {
                if (o.hidden_volume) {
                    if (action == "volume" || action == "mute" || action == "unmute") {
                        o.hidden_volume_over = false;
                        o.hidden_volume_over_process = true;
                        setTimeout(function() {
                            if (!o.hidden_volume_over) {
                                o.hidden_volume_over_process = false;
                                for (var x in b) {
                                    if (b.hasOwnProperty(x)) {
                                        if (b[x].g("action") == "volume") {
                                            HideControl(b[x]);
                                            Resize()
                                        }
                                    }
                                }
                            }
                        }, 500)
                    }
                }
                if (v.settings.showovercontrol == 1 && (action == "settings" || but.s("linkurl").indexOf("setting") == 0)) {
                    clearTimeout(o.settingsovertimer);
                    o.settingsovertimer = setTimeout(function() {
                        if (!o.mouseDown) {
                            settings.g("show") ? settings.hide() : ''
                        }
                    }, 1000)
                }
            }
            if (resize) {
                setTimeout(Resize, 10)
            }
        };
        this.StageLeave = function() {
            if (o.volumewheel && !o.fullscreen) {
                o.actions.volumewheel(false);
                o.volumewheel = false
            }
            if (o.poster) {
                if (v.poster_aover > -1 && isVisible(o.poster)) {
                    css(o.poster, {
                        opacity: v.poster_a
                    })
                }
            }
            if (o.play && v.playonhover == 1) {
                o.actions.Pause()
            }
            if (v.toolbar.hideleavetimeout > 0) {
                clearTimeout(o.leavetimeout);
                o.leavetimeout = setTimeout(ShowOrHide, v.toolbar.hideleavetimeout * 1000)
            } else {
                ShowOrHide()
            }
        };
        this.StageOver = function() {
            if (o.poster) {
                if (v.poster_aover > -1 && isVisible(o.poster)) {
                    css(o.poster, {
                        opacity: v.poster_aover
                    })
                }
            }
            if (!o.play && v.playonhover == 1) {
                o.actions.Play()
            }
            ShowOrHide()
        };
        this.StageMove = function(stage_x, stage_y) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line" || b[x].g("action") == "volume") {
                        b[x].StageMove(stage_x, stage_y)
                    }
                }
            }
        };
        this.StageMove2 = function() {
            if (v.toolbar.hide == 1) {
                if (v.toolbar.hidejustfull == 1 && !o.fullscreen) {
                    return
                }
                if (!o.mouseHere && o.media.status() == "playing") {
                    o.mouseHere = true;
                    ShowOrHide()
                }
                if (v.toolbar.hidewithoutmoving == 1) {
                    ShowForce();
                    HideInterval()
                }
            }
        };
        this.StageMouseUp = function(stage_x, stage_y) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line" || b[x].g("action") == "volume") {
                        b[x].StageMouseUp(stage_x, stage_y)
                    }
                }
            }
        };
        this.Played = function(time, duration) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line") {
                        b[x].UpdatePlay(time, duration)
                    }
                    if (b[x].g("action") == "time") {
                        UpdateTime(b[x], time, duration)
                    }
                    if (b[x].s("rotateplaying") == 1) {
                        b[x].Rotate()
                    }
                }
            }
        };

        function UpdateTime(x, time, duration) {
            var y = Time(time);
            if (x.s("inversetime") == "1") {
                y = Time(duration - time)
            }
            if (x.s("showduration") == "1") {
                if (x.s("showboth") == "1") {
                    y = y + (duration > 0 ? ' ' + Lang(x.s("separator")) + ' ' + Time(duration) : '')
                } else {
                    time == 0 ? y = Time(duration) : ''
                }
            }
            x.UpdateText(y)
        }
        this.Loaded = function(time, duration) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line") {
                        b[x].UpdateLoad(time, duration)
                    }
                }
            }
        };
        this.Waiting = function() {
            if (!waiting) {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") == "buffer") {
                            b[x].Buffer();
                            waiting = true
                        }
                    }
                }
            }
        };
        this.StopWaiting = function(time, duration) {
            if (waiting) {
                for (var x in b) {
                    if (b.hasOwnProperty(x)) {
                        if (b[x].g("action") == "buffer") {
                            b[x].BufferStop();
                            waiting = false
                        }
                    }
                }
            }
        };
        this.volumescroll = function() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].s("linkurl") == "volume scroll") {
                        b[x].set("show2");
                        b[x].UpdateText(Lang('volume') + ' ' + (o.muted ? 0 : Math.ceil(v.volume * 100)) + '%');
                        clearTimeout(o.volumescroll);
                        o.volumescroll = setTimeout(Volumescrolled, 1000)
                    }
                }
            }
        };

        function Volumescrolled() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].s("linkurl") == "volume scroll") {
                        b[x].UpdateText('');
                        b[x].set("hide2");
                        clearTimeout(o.volumescroll)
                    }
                }
            }
        }
        this.Seek = function(time, duration) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line") {
                        duration > 0 ? b[x].set("click", time / duration) : '';
                        b[x].UpdatePlaySeek()
                    }
                    if (b[x].g("action") == "time") {
                        UpdateTime(b[x], time, duration)
                    }
                    if (b[x].g("action") == "live") {
                        b[x].set("iconopacity", 0.5)
                    }
                }
            }
        };
        this.Duration = function(time, duration) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "duration") {
                        b[x].UpdateText(Time(duration))
                    }
                    if (b[x].g("action") == "line") {
                        b[x].UpdatePlay(time, duration)
                    }
                    if (b[x].g("action") == "time") {
                        UpdateTime(b[x], time, duration)
                    }
                }
            }
        };
        this.Settings = function() {
            settings.g("show") ? settings.hide() : settings.show()
        };
        this.SettingsVisible = function() {
            if (settings) {
                return settings.g("show") ? true : false
            } else {
                return false
            }
        };
        this.SettingsClose = function() {
            SettingsClose()
        };

        function SettingsClose() {
            if (settings) {
                settings.g("show") ? settings.hide() : ''
            }
        };
        this.Playlist = function() {
            if (playlist) {
                if (playlist.g("show")) {
                    playlist.hide(1)
                } else {
                    playlist.show()
                }
            }
        };
        this.PlaylistShow = function() {
            if (playlist) {
                setTimeout(function() {
                    playlist.show()
                }, 100)
            }
        };
        this.PlaylistVisible = function() {
            if (playlist) {
                return playlist.g("show") ? true : false
            } else {
                return false
            }
        };

        function PlaylistClose() {
            if (playlist) {
                playlist.g("show") ? playlist.hide(1) : ''
            }
        };
        this.UpdatePlaylist = function(x) {
            if (playlist) {
                playlist.updatePlaylist(x)
            }
        };
        this.PlaylistNext = function() {
            if (playlist) {
                playlist.PlaylistNext()
            }
        };
        this.PlaylistControls = function() {
            PlaylistControls()
        };

        function PlaylistControls() {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "next") {
                        css(b[x].c(), {
                            "opacity": (!playlist.PlaylistNextExist() ? 0.5 : 1)
                        })
                    }
                    if (b[x].g("action") == "prev") {
                        css(b[x].c(), {
                            "opacity": (!playlist.PlaylistPrevExist() ? 0.5 : 1)
                        })
                    }
                }
            }
        }
        this.PlaylistNextExist = function() {
            if (playlist) {
                return playlist.PlaylistNextExist()
            } else {
                return false
            }
        };
        this.PlaylistExist = function() {
            if (playlist) {
                return playlist.PlaylistExist()
            } else {
                return false
            }
        };
        this.PlaylistRewind = function() {
            if (playlist) {
                playlist.PlaylistRewind()
            }
        };
        this.PlaylistPrev = function() {
            if (playlist) {
                playlist.PlaylistPrev()
            }
        };
        this.PlaylistPlayId = function(x) {
            if (x && playlist) {
                playlist.playById(x)
            }
        };
        this.PlaylistOpenId = function(x) {
            if (x && playlist) {
                playlist.openById(x)
            }
        };
        this.ShowSettingsBut = function() {};
        this.QualityChanged = function(x) {
            if (settings) {
                settings.SetQuality();
                settings.g("show") ? setTimeout(function() {
                    settings.hide()
                }, 200) : ''
            }
        };
        this.QualityChangedNoHand = function(x) {
            if (settings) {
                settings.SetQuality()
            }
        };
        this.AirplayChanged = function(x) {
            if (settings) {
                settings.Airplay()
            }
        };
        this.AudioTrackChanged = function(x) {
            if (settings) {
                settings.SetAudioTrack();
                settings.g("show") ? settings.hide() : ''
            }
        };
        this.AudioTrackChangedNoHand = function(x) {
            if (settings) {
                settings.SetAudioTrack()
            }
        };
        this.SubtitleChanged = function() {
            if (settings) {
                settings.SetSubtitle();
                settings.g("show") ? setTimeout(function() {
                    settings.hide()
                }, 200) : ''
            }
        };
        this.SettingsN = function(num, display, val) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action_settings") == "settings#" + num) {
                        b[x].set("set#visible", display);
                        if (b[x].g("type") == "text") {
                            b[x].UpdateText(val + (b[x].s("text") != 'text' ? b[x].s("text") : ''))
                        }
                        ShowOrHideProcessor(b[x])
                    }
                }
            }
        };
        this.UpdateSettings = function() {
            if (settings) {
                settings.SetQuality();
                settings.SetAudioTrack()
            }
        };
        this.LineMarker = function(x, t, d) {
            for (var x in b) {
                if (b.hasOwnProperty(x)) {
                    if (b[x].g("action") == "line") {
                        b[x].marker(x, t, d)
                    }
                }
            }
        };
        this.resize = function() {
            Resize()
        };
        this.resizeFromText = function(x) {
            if (!toolbarHidden || x == 1) {
                Resize();
                ShowOrHide()
            } else {
                v.toolbar.resizeme = true
            }
        };
        this.refresh = function() {
            ShowOrHide();
            Resize();
            ShowOrHide();
            if (o.nativecontrols) {
                hide2(bg2)
            } else {
                !toolbarHidden ? show2(bg2) : ''
            }
        };
        this.KeyDown = function(event) {
            if (pljssglobalid == v.id) {
                var x = event.which;
                if (x == undefined) {
                    x = event.keyCode
                }
                if (exist(o.vast) || exist(o.pass)) {
                    return false
                }
                if (v.hotkey.space == 1 && x == 32 && (o.focus || o.mouseHere)) {
                    o.actions.Toggle();
                    event.preventDefault();
                    return false
                }
                var hk_seek = v.hotkey.seek;
                var hk_vol = 0.2;
                if (o.file_type == "pdf") {
                    hk_seek = 1;
                    hk_vol = 0.1
                }
                if (v.hotkey.nums == 1 && o.focus) {
                    if (o.media.duration() > 0) {
                        for (var i = 48; i < 58; i++) {
                            if (x == i) {
                                o.actions.Seek((o.media.duration() * (x - 48) * 10) / 100, true)
                            }
                        }
                    }
                }
                if (x == 39 && o.focus) {
                    if (v.hotkey.leftright == "seek") {
                        if (o.media.duration() > 0) {
                            if (o.media.time() + hk_seek < o.media.duration()) {
                                o.actions.Seek(o.media.time() + hk_seek, true)
                            }
                        }
                    }
                    if (v.hotkey.leftright == "volume") {
                        o.actions.Volume(parseFloat(v.volume) + hk_vol);
                        event.preventDefault()
                    }
                }
                if (x == 37 && o.focus) {
                    if (v.hotkey.leftright == "seek") {
                        if (o.media.duration() > 0 && o.start) {
                            o.actions.Seek((o.media.time() - hk_seek >= 0 ? o.media.time() - hk_seek : 0), true)
                        }
                    }
                    if (v.hotkey.leftright == "volume") {
                        o.actions.Volume(parseFloat(v.volume) - hk_vol);
                        event.preventDefault()
                    }
                }
                if (x == 38 && o.focus) {
                    if (v.hotkey.updown == "volume") {
                        o.actions.Volume(parseFloat(v.volume) + hk_vol);
                        event.preventDefault()
                    }
                    if (v.hotkey.updown == "scale") {
                        o.media.scale(0.2);
                        event.preventDefault()
                    }
                }
                if (x == 40 && o.focus) {
                    if (v.hotkey.updown == "volume") {
                        o.actions.Volume(parseFloat(v.volume) - hk_vol);
                        event.preventDefault()
                    }
                    if (v.hotkey.updown == "scale") {
                        o.media.scale(-0.2);
                        event.preventDefault()
                    }
                }
            }
        };
        this.KeyUp = function(event) {
            if (pljssglobalid == v.id) {
                var x = event.which;
                if (x == undefined) {
                    x = event.keyCode
                }
                if (x == 57) {
                    if (v.log == 1) {}
                }
                if (o.fullscreen && x == 27) {
                    o.actions.Normalscreen()
                }
                if (exist(o.vast) || exist(o.pass)) {
                    return false
                }
                if (v.hotkey.f == 1 && x == 70 && (o.focus || o.mouseHere)) {
                    o.fullscreen ? o.actions.Normalscreen() : o.actions.Fullscreen()
                }
                if (v.hotkey.m == 1 && x == 77 && (o.focus || o.mouseHere)) {
                    o.muted ? o.actions.Unmute() : o.actions.Mute()
                }
            }
        };
        this.Remove = function() {
            clearInterval(o.toolbarInterval);
            for (var i = 0; i < butNames.length; i++) {
                key = butNames[i];
                if (b[key]) {
                    b[key].Remove()
                }
            }
            if (settings) {
                settings.Remove()
            }
            if (playlist) {
                playlist.Remove()
            }
            bg.Remove();
            o.frame.removeChild(bg2)
        };
        this.ShowForce = function() {
            ShowForce()
        };
        this.HideForce = function() {
            HideForce();
            ShowOrHide()
        };
        this.HideInterval = function() {
            HideInterval()
        };
        this.ToolbarHidden = function() {
            return toolbarHidden
        }
    };
    var Control = function(key) {
        var i;
        var style = [];
        var w;
        var h;
        var last_text_w = 0;
        var bg;
        var bgcontainer;
        var area;
        var angle = 0;
        var visible = true;
        var selectOpen = false;
        var scaleX = 1;
        var scaleY = 1;
        var tip;
        var tipbg;
        var tiptext;
        var action;
        var action_settings = '';
        var x0;
        var y0;
        var on;
        var over = false;
        var bufferInterval;
        var bufferDeg = 0;
        var rightside = 0;
        var topside = 0;
        var bottomside = 0;
        var noclick = false;
        var clicked = false;
        var cssrand;
        var settingsNumberVisible = false;
        style = UpdateObject(style, default_style.but);
        style = UpdateObject(style, v[key]);
        var actions = [style.action];
        action = actions[0];
        exist(style.action2) ? actions[1] = style.action2 : '';
        exist(style.opposite) ? actions[1] = style.opposite : '';
        exist(style.title) ? style.text = style.title : '';
        if (exist(style.linkurl)) {
            if (style.linkurl.indexOf("settings#") == 0) {
                action_settings = style.linkurl;
                if (style.tiptext == '') {
                    style.tiptext = Lang(v.settings['settings' + action_settings.substr(9) + 'action'])
                }
            }
        }
        var tips = style.tiptext.split("///");
        var _currentIcon = 0;
        var icons = new Array();
        var icon = new Array();
        var iconsover = new Array();
        var iconspress = new Array();
        var iconreplay = 0;
        var replay;
        if (style.type == "text") {
            if (exist(style.text)) {
                icons[0] = trim(style.text);
                style.length = style.text.length;
                if (style.text.indexOf("/") == 0) {
                    style.slashfortime = 1
                }
                if (style.text.indexOf("|") == 0) {
                    style.linehfortime = 1
                }
                if (style.inversetime == 1 && style.text.indexOf("-") == 0) {
                    style.minusforback = 1
                }
                if (style.text.indexOf("///") > 0 && action == "custom") {
                    style.texts = style.text.split("///");
                    style.text = icons[0] = style.texts[0]
                }
            }
        } else {
            if (exist(style.icon)) {
                icons[0] = style.icon;
                if (icons[0].indexOf("///") > 0 && icons[0].indexOf("base64") == -1) {
                    icons = style.icon.split("///")
                }
                if (exist(style.icon2)) {
                    icons[1] = style.icon2
                }
                if (style.iconsreplay == 1) {
                    if (exist(style.icon3)) {
                        if (style.icon3 != '') {
                            icons.push(style.icon3);
                            iconreplay = icons.length - 1
                        }
                    }
                }
            }
        }
        if (action == "custom" && style.link2 == 1 && exist(style.linkurl2)) {
            style.linkurl0 = style.linkurl
        }
        var control = createElement("div");
        o.frame.appendChild(control);
        var bgcontainer = createElement("div");
        control.appendChild(bgcontainer);
        css(control, {
            "position": "absolute",
            "left": 0,
            "top": 0,
            "opacity": 1,
            "fontSize": "14px",
            "lineHeight": "1em"
        });
        if (exist(style.dom)) {
            if (style.dom != '') {
                attr(control, {
                    "id": (v.id + "_control_" + style.dom)
                })
            }
        }
        if (style.rotateplaying == 1) {
            css(control, {
                "transition": "transform 0.2s linear"
            })
        }
        if (icons.length > 0) {
            for (i = 0; i < icons.length; i++) {
                icon[i] = createElement("div");
                css(icon[i], {
                    "position": "absolute",
                    "top": 0,
                    "left": 0,
                    "pointerEvents": "none",
                    "opacity": style.a,
                    "transition": "opacity 0.1s linear,transform 0.1s linear"
                });
                if (style.type == "pic" && style.src != '') {
                    if (style.src.indexOf(".png") > -1 || style.src.indexOf(".jpg") > -1 || style.src.indexOf("base64") > -1) {
                        style.src.indexOf("//") == -1 && style.src.indexOf("base64") == -1 ? style.src = '//' + style.src : '';
                        var z = createElement("img");
                        style.loading = 1;
                        z.addEventListener("load", imageLoaded);
                        z.src = style.src;
                        icon[i].appendChild(z);
                        style.w = icon[i].offsetWidth;
                        style.h = icon[i].offsetHeight;
                        if (exist(style.dom)) {
                            if (style.dom != '') {
                                attr(icon[i], {
                                    "id": (v.id + "_control_" + style.dom + "_icon")
                                })
                            }
                        }
                    }
                }
                if (style.type == "text") {
                    style.tip = 0;
                    css(icon[i], {
                        "color": (style.color),
                        "fontFamily": style.font,
                        "fontSize": style.fontsize,
                        "letter-spacing": style.letterspacing + 'px',
                        "padding": "0 3px 0 3px",
                        "white-space": "nowrap"
                    });
                    if (style.click == 1) {
                        if (style.text.indexOf("<a ") > -1 || key == "control_title") {
                            css(icon[i], {
                                "pointerEvents": "auto"
                            })
                        }
                    }
                    if (style.bold == 1) {
                        css(icon[i], {
                            "font-weight": "bold"
                        })
                    }
                    icons[i] == 'live' ? icons[i] = Lang("live") : '';
                    icon[i].innerHTML = (style.inversetime == 1 && style.minusforback == 1 ? "-" : "") + Places(icons[i]);
                    style.w = icon[i].offsetWidth;
                    style.h = icon[i].offsetHeight;
                    if (exist(style.dom)) {
                        if (style.dom != '') {
                            attr(icon[i], {
                                "id": (v.id + "_control_" + style.dom + "_text")
                            })
                        }
                    }
                }
                if (style.type == "css") {
                    cssrand = random(100000, 1000000);
                    icons[i] = icons[i].replace(/\(rand\)/g, cssrand);
                    icons[i] = icons[i].replace(/\(color\)/g, style.color);
                    icons[i] = icons[i].replace(/\(size\)/g, style.size);
                    var _html = icons[i].substr(0, icons[i].indexOf('|||'));
                    var _css = icons[i].substr(icons[i].indexOf('|||') + 3);
                    icon[i].innerHTML = _html;
                    pushCSS(_css)
                }
                var icn = icons[i].toString();
                var isvg = icn.indexOf('<svg') > -1 || icn.indexOf('<SVG') > -1;
                if (style.type == "svg" && (icn.indexOf('<g>') > -1 || isvg)) {
                    icon[i].innerHTML = (!isvg ? "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" : '') + icn + (!isvg ? "</svg>" : '');
                    icon[i].offsetWidth > 20 ? style.w = icon[i].offsetWidth : '';
                    icon[i].offsetHeight > 20 ? style.h = icon[i].offsetHeight : '';
                    css(icon[i], {
                        "width": style.w,
                        "height": style.h
                    });
                    if (style.iconscolor != -1) {
                        IconsColor(icon, style.iconscolor)
                    }
                    if (exist(style.dom)) {
                        if (style.dom != '') {
                            attr(icon[i], {
                                "id": (v.id + "_control_" + style.dom + "_icon" + i)
                            })
                        }
                    }
                }
                control.appendChild(icon[i]);
                i > 0 ? hide(icon[i]) : ''
            }
            Background();
            if (style.linkurl == "chromecast") {
                style.chromecast = 1;
                style.hide = 1;
                o.chromecast ? icon[0].innerHTML = o.chromecast.button() : ''
            } else {
                if ((bg.offsetWidth * style.scale < 35 || bg.offsetHeight * style.scale < 35) && style.type != 'text') {
                    ClickArea();
                    Clickable(area)
                } else {
                    Clickable(bg)
                }
            }
            if (action == "custom") {
                if (style.link == 1 && exist(style.linkurl)) {
                    if (style.linkurl.indexOf("api:") == 0) {
                        var tmp = style.linkurl.substr(4).split(",");
                        if (tmp.length == 2) {
                            var tmp2 = tmp[1].split("/");
                            if (tmp2.length == 2) {
                                tmp[0] == 'hd' ? tmp[0] = "default_quality" : '';
                                if (v[tmp[0]] == tmp2[1]) {
                                    style.a = 1;
                                    css(icon[0], {
                                        "opacity": style.a
                                    })
                                }
                            }
                        }
                    }
                }
            }
            if (style.click == 0) {
                css(control, {
                    "pointer-events": "none"
                })
            }
            if (style.loading == 1) {
                hide(bg)
            }
            if (style.tip == 1) {
                CreateTip()
            }
            if (style.position.indexOf("right") > -1) {
                rightside = 1
            }
            if (style.position.indexOf("top") > -1) {
                topside = 1
            }
            if (style.position.indexOf("bottom") > -1 || style.position.indexOf("control") > -1) {
                bottomside = 1
            }
            Resize();
            var t = '';
            if (style.rotation != 0) {
                t += "rotate(" + style.rotation + "deg)"
            }
            if (style.flipx == 1) {
                t += " scaleX(-1)"
            }
            if (style.flipy == 1) {
                t += " scaleY(-1)"
            }
            if (t != '') {
                css(control, {
                    "transform": t
                })
            }
            if (action == "buffer") {
                style.scale > -1 ? css(control, {
                    "transform": "scale(" + style.scale + ") rotate(" + style.rotation + "deg)"
                }) : '';
                BufferStop()
            }
            var tmp = [];
            var i;
            if (action == "playlist") {
                tmp = ['autoplaylist', 'openplaylistafter', 'openplaylistbefore', 'openplaylistpause', 'openplaylistroot', 'playlistrewind'];
                for (i = 0; i < tmp.length; i++) {
                    if (exist(style[tmp[i]]) && !exist(v.playlist[tmp[i]])) {
                        v.playlist[tmp[i]] = style[tmp[i]]
                    }
                }
            }
            if (action == "title") {
                tmp = ['showtitleplaylist', 'addtitleplaylist', 'addtitleplaylistbr'];
                for (i = 0; i < tmp.length; i++) {
                    if (exist(style[tmp[i]]) && !exist(options[tmp[i]])) {
                        v[tmp[i]] = style[tmp[i]]
                    }
                }
            }
            style.tipalways == 1 ? Tip() : ''
        }

        function ClickArea() {
            if (area) {
                area.parentNode.removeChild(area)
            }
            area = createElement("div");
            css(area, {
                "position": "absolute",
                "top": 0,
                "left": 0,
                "width": (bg.offsetWidth > 35 ? bg.offsetWidth : "35px"),
                "height": (bg.offsetHeight > 35 ? bg.offsetHeight : "35px")
            });
            style = MarginPadding(style, 'clickmargin', 'clickmargin');
            if (v.toolbar.clickarea == 1 || style.clickarea == 1) {
                css(area, {
                    "background-color": "#ff0000",
                    "opacity": 0.5
                })
            }
            control.appendChild(area)
        }

        function Clickable(x) {
            if (action.indexOf("time") == 0 && actions.length == 1) {
                style.click = 0
            }
            if (action == "custom" && style.link == 0) {
                style.click = 0
            }
            if (style.click == 1) {
                if (style.hand == 1) {
                    css(x, {
                        "cursor": "pointer"
                    })
                }
                if (o.system.mobile) {
                    x.addEventListener("touchend", function(event) {
                        onClick(event)
                    })
                } else {
                    x.onclick = onClick
                }
            } else {
                css(x, {
                    "cursor": "default"
                })
            }
            if (!o.system.mobile) {
                x.onmouseover = onOver;
                x.onmouseout = onOut
            }
            x.onmousedown = onDown;
            x.onmouseup = onUp;
            if (style.hidden == 1 || style.tip == 1) {
                x.onmousemove = onMove
            }
        }

        function Background() {
            if (bg) {
                bg.parentNode.removeChild(bg)
            }
            bg = createElement("div");
            css(bg, {
                "position": "absolute",
                "top": 0,
                "left": 0
            });
            if (exist(style.dom)) {
                if (style.dom != '') {
                    attr(bg, {
                        "id": (v.id + "_control_" + style.dom + "_bg")
                    })
                }
            }
            w = style.w;
            h = style.h;
            style = MarginPadding(style, 'margin', 'margin');
            style = MarginPadding(style, 'marginproc', 'marginproc');
            if (style.type == "text") {
                w = icon[_currentIcon].offsetWidth;
                h = icon[_currentIcon].offsetHeight
            }
            style = MarginPadding(style, 'bgpadding', 'bgpadding');
            style = MarginPadding(style, 'iconmargin', 'iconmargin');
            if (o.system.safari) {
                style.iconmarginleft /= style.scale;
                style.iconmarginright /= style.scale;
                style.iconmargintop /= style.scale;
                style.iconmarginbottom /= style.scale
            }
            style.h = h;
            style.w = w;
            if (style.bg == 1) {
                h = h + style.bgpaddingtop + style.bgpaddingbottom;
                w = w + style.bgpaddingleft + style.bgpaddingright;
                style.h = h;
                style.w = w;
                if (style.type == "text") {
                    style.bgh = icon[0].offsetHeight
                }
            } else {
                style.bga = 0
            }
            css(bg, {
                "width": (style.bgstretch == 1 ? 5000 : w),
                "height": h,
                "borderRadius": (style.bgo * h) / 2,
                "background": style.bgcolor,
                "opacity": style.bga,
                "transition": "opacity .1s linear, background .1s linear"
            });
            if (style.type == "pic") {
                css(bg, {
                    "width": w / style.scale,
                    "height": h / style.scale,
                    "borderRadius": (style.bgo * h / style.scale) / 2,
                })
            }
            if (style.bgborder == 1) {
                css(bg, {
                    "border": "1px solid " + style.bgbordercolor
                })
            }
            bgcontainer.appendChild(bg)
        }

        function Resize() {
            css(bg, {
                "top": (-bg.offsetHeight / 2),
                "left": (-bg.offsetWidth / 2)
            });
            if (area) {
                css(area, {
                    "top": (-area.offsetHeight / 2) + style.clickmargintop - style.clickmarginbottom,
                    "left": (-area.offsetWidth / 2) + style.clickmarginleft - style.clickmarginright
                })
            }
            for (i = 0; i < icons.length; i++) {
                if (style.type == "svg") {
                    css(icon[i], {
                        "top": -Math.round(parseInt(icon[i].style.height)) / 2,
                        "left": -parseInt(icon[i].style.width) / 2
                    })
                } else {
                    css(icon[i], {
                        "top": -Math.round(icon[i].offsetHeight) / 2,
                        "left": -icon[i].offsetWidth / 2
                    })
                }
                if (bg) {
                    css(icon[i], {
                        "top": (int(icon[i].style.top) + style.bgpaddingtop / 2 - style.bgpaddingbottom / 2 + style.iconmargintop / 2 + style.iconmarginbottom / 2),
                        "left": (int(icon[i].style.left) + style.bgpaddingleft / 2 - style.bgpaddingright / 2 + style.iconmarginleft / 2 + style.iconmarginright / 2)
                    })
                }
            }
        }

        function onOver() {
            var i;
            over = true;
            if (style.iconsover == 1) {
                if (on && exist(style.icon2)) {
                    i = 1
                } else {
                    i = 0
                }
                if (replay && iconsover.length > 2) {
                    i = 2
                }
                if (iconsover[i]) {
                    hideAllIcons();
                    show(icon[iconsover[i]])
                }
            }
            if (style.bg == 1) {
                if (style.bgaover != -1) {
                    css(bg, {
                        "opacity": style.bgaover
                    })
                }
                if (style.bgcolorover != -1) {
                    css(bg, {
                        "background": style.bgcolorover
                    })
                }
            }
            if (style.aover > -1 && !selectOpen) {
                for (i = 0; i < icons.length; i++) {
                    if (icon[i].style.visibility != "hidden") {
                        css(icon[i], {
                            "opacity": style.aover
                        })
                    }
                }
            }
            if (style.iconscolorover != -1) {
                IconsColor(icon, style.iconscolorover)
            }
            if (style.scaleover > style.scale && style.scaleover > -1) {
                scale(style.scaleover)
            }
            if (action == "settings" && o.controls.SettingsVisible()) {} else {
                if (style.tip == 1 && style.tipalways != 1) {
                    show(tip);
                    css(tip, {
                        "opacity": 1
                    })
                }
            }
            if (action == "mute") {
                o.actions.volumewheel(true);
                o.volumewheel = true
            }
            o.controlover = true;
            o.controls.Mouse(key, "over")
        }

        function onOut() {
            onUp();
            over = false;
            var i;
            if (style.iconsover == 1) {
                if (on && exist(style.icon2)) {
                    i = 1
                } else {
                    i = 0
                }
                if (replay && iconsover.length > 2) {
                    i = 2
                }
                hideAllIcons();
                show(icon[i])
            }
            if (style.bg == 1) {
                if (style.bgaover != -1) {
                    css(bg, {
                        "opacity": style.bga
                    })
                }
                if (style.bgcolorover != -1) {
                    css(bg, {
                        "background": style.bgcolor
                    })
                }
            }
            if (style.aover > -1) {
                for (i = 0; i < icons.length; i++) {
                    if (icon[i].style.visibility != "hidden") {
                        css(icon[i], {
                            "opacity": style.a
                        })
                    }
                }
            }
            if (style.scaleover > -1) {
                scale(style.scale)
            }
            if (style.iconscolorover != -1) {
                IconsColor(icon, style.iconscolor)
            }
            if (action == "mute" && !o.fullscreen) {
                o.actions.volumewheel(false);
                o.volumewheel = false
            }
            if (style.tip == 1 && style.tipalways != 1) {
                hide(tip);
                css(tip, {
                    "opacity": 0
                })
            }
            o.controlover = false;
            o.controls ? o.controls.Mouse(key, "out") : ''
        }

        function onClick(event) {
            event.cancelBubble = true;
            if (!noclick) {
                o.controls.ControlClick(key);
                if (action == "custom") {
                    if (icons) {
                        if (icons.length > 1) {
                            if (on == true) {
                                show(icon[0]);
                                hide(icon[1])
                            } else {
                                show(icon[1]);
                                hide(icon[0])
                            }
                        }
                        if (style.tip == 1 && tips.length > 1) {
                            tiptext.innerHTML = (on == true ? tips[0] : tips[1]);
                            Tip()
                        }
                    }
                    if (exist(style.linkurl0)) {
                        if (on == true) {
                            style.linkurl = style.linkurl0
                        } else {
                            style.linkurl = style.linkurl2
                        }
                    }
                    if (exist(style.texts)) {
                        if (style.texts.length > 1) {
                            if (on == true) {
                                UpdateText(style.texts[0])
                            } else {
                                UpdateText(style.texts[1])
                            }
                        }
                    }
                    on = on != true
                }
                if (style.tip == 1 && style.tipalways != 1) {
                    hide(tip);
                    css(tip, {
                        "opacity": 0
                    })
                }
                clicked = true;
                if (style.hideafterclick == 1 || (key == "control_start" && style.hide == 1 && style.hideonplay == 1)) {
                    o.controls.refresh()
                }
            }
        }

        function onDown() {
            var i
        }

        function onUp() {}

        function ReplayIcon(event) {
            event.cancelBubble = true;
            o.controls.ControlClick(key)
        }

        function hideAllIcons() {
            for (var i = 0; i < icons.length; i++) {
                if (icon[i].style.visibility != "hidden") {
                    css(icon[i], {
                        "opacity": style.a
                    });
                    hide(icon[i])
                }
            }
        }

        function imageLoaded() {
            style.loading = 0;
            hide(bg);
            if (icon[0]) {
                style.w = icon[0].offsetWidth * style.scale;
                style.h = icon[0].offsetHeight * style.scale;
                if (style.picheight > 0) {
                    style.h = style.picheight * style.scale;
                    css(icon[0], {
                        height: style.picheight
                    })
                }
                scale(style.scale)
            }
            style.loaded = 0;
            Background();
            ClickArea();
            Clickable(area);
            show(bg);
            Resize();
            o.controls.resize();
            if (!isVisible(control)) {
                hide2(control)
            }
        }

        function CancelBubble(event) {
            event.cancelBubble = true
        }

        function onMove() {
            Tip()
        }

        function scale(x) {
            if (x > 0) {
                if (o.system.safari) {
                    css(bg, {
                        "zoom": x + ""
                    })
                } else {
                    css(bg, {
                        "transform": "scale(" + x + ")"
                    })
                }
                for (i = 0; i < icons.length; i++) {
                    if (o.system.safari) {
                        css(icon[i], {
                            "zoom": x + ""
                        })
                    } else {
                        css(icon[i], {
                            "transform": "scale(" + x + ")"
                        })
                    }
                }
                scaleX = x;
                scaleY = x
            }
        }

        function CreateTip() {
            tip = createElement("div");
            css(tip, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'height': 'auto',
                'overflow': 'hidden',
                "opacity": 0,
                "transition": "opacity 0.1s linear"
            });
            tipbg = createElement("div");
            style = MarginPadding(style, 'tippadding', 'tippadding');
            style = MarginPadding(style, 'tipmargin', 'tipmargin');
            css(tipbg, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'width': '100%',
                'height': 30,
                'background-color': style.tipbgcolor,
                'opacity': style.tipbga,
                'border-radius': style.tipbgrounding
            });
            tiptext = createElement("div");
            css(tiptext, {
                'position': 'absolute',
                'left': style.tippaddingright,
                'top': style.tippaddingtop,
                'color': style.tipcolor,
                'font-family': style.tipfont,
                'font-size': style.tipfontsize,
                "letter-spacing": style.tipletterspacing + 'px',
                'opacity': style.tipa,
                "line-height": "1",
                'white-space': 'nowrap'
            });
            if (style.tipalways == 1) {
                css(tip, {
                    "opacity": 1
                });
                Clickable(tip)
            } else {
                css(tip, {
                    "pointer-events": "none"
                })
            }
            control.appendChild(tip);
            tiptext.innerHTML = style.tiptext == '' ? Lang(action) : tips[0];
            tip.appendChild(tipbg);
            tip.appendChild(tiptext);
            Tip()
        }

        function Tip() {
            if (style.tip == 1) {
                css(tip, {
                    "top": (bottomside == 1 ? -h - tip.offsetHeight + 3 : -tip.offsetHeight / 2) + style.tipmargintop - style.tipmarginbottom,
                    "left": (rightside == 1 ? -tiptext.offsetWidth : (bottomside == 1 ? -w / 2 : +tiptext.offsetWidth)) - (bottomside == 1 ? 0 : tiptext.offsetWidth / 2 + 5) + style.tipmarginleft - style.tipmarginright,
                    "height": style.tippaddingtop + style.tipfontsize + style.tippaddingbottom,
                    "width": style.tippaddingleft + tiptext.offsetWidth + style.tippaddingright
                });
                css(tipbg, {
                    'height': tip.offsetHeight
                });
                tip.style.zIndex = "1000"
            }
        }
        this.c = function() {
            return control
        };
        this.s = function(x) {
            return style[x]
        };
        this.ss = function(x, x2) {
            return exist(style[x]) ? style[x][x2] : false
        };
        this.g = function(x) {
            switch (x) {
                case "width":
                    return w;
                    break;
                case "height":
                    return h;
                    break;
                case "x":
                    return int(control.style.left);
                    break;
                case "y":
                    return int(control.style.top);
                    break;
                case "opacity":
                    return control.style.opacity ? control.style.opacity : 1;
                    break;
                case "show":
                    return visible;
                    break;
                case "scaleX":
                    return scaleX;
                    break;
                case "scaleY":
                    return scaleY;
                    break;
                case "action":
                    return action;
                    break;
                case "action_settings":
                    return action_settings;
                    break;
                case "clicked":
                    return clicked;
                    break;
                case "type":
                    return style.type;
                    break;
                case "length":
                    return style.length ? style.length : 0;
                    break;
                case "key":
                    return key;
                    break;
                case "x0":
                    return x0;
                    break;
                case "y0":
                    return y0;
                    break;
                case "over":
                    return over;
                    break;
                case "settings#":
                    return action_settings.indexOf("settings#") == 0;
                    break;
                case "set#visible":
                    return settingsNumberVisible;
                    break;
                default:
                    return false
            }
        };
        this.set = function(k, x) {
            switch (k) {
                case "show":
                    over ? onOut() : '';
                    visible = x;
                    break;
                case "display":
                    DisplayControl(x);
                    break;
                case "show2":
                    show2(control);
                    break;
                case "hide2":
                    hide2(control);
                    break;
                case "scale":
                    scale(x);
                    break;
                case "scaleX":
                    css(control, {
                        "transform": "scaleX(" + x + ")"
                    });
                    scaleX = x;
                    break;
                case "scaleY":
                    css(control, {
                        "transform": "scaleY(" + x + ")"
                    });
                    scaleY = x;
                    break;
                case "opacity":
                    css(control, {
                        "opacity": x
                    });
                    break;
                case "iconopacity":
                    css(icon[0], {
                        "opacity": x
                    });
                    break;
                case "left":
                    css(control, {
                        "left": x
                    });
                    break;
                case "top":
                    css(control, {
                        "top": x
                    });
                    break;
                case "width":
                    css(control, {
                        "width": x
                    });
                    break;
                case "height":
                    css(control, {
                        "height": x
                    });
                    break;
                case "over_final":
                    style.over_final = x;
                    break;
                case "rightside":
                    rightside = x;
                    break;
                case "set#visible":
                    settingsNumberVisible = x;
                    break;
                case "x":
                    css(control, {
                        "left": x
                    });
                    break;
                case "y":
                    css(control, {
                        "top": x
                    });
                    break;
                case "animation":
                    style.animation = x;
                    break;
                case "x0":
                    x0 = x;
                    break;
                case "y0":
                    y0 = x;
                    break;
                default:
                    return false
            }
        };

        function DisplayControl(x) {
            if (x && o.system.mobile) {
                noclick = true;
                setTimeout(noClickTimeout, 300)
            }
            if (!x) {
                if (style.iconsreplay == 1 && replay) {
                    hide(icon[iconreplay]);
                    show(icon[0]);
                    replay = false
                }
            }
            if (style.loading == 1) {
                x ? show(control) : hide(control)
            } else {
                if (key == "control_time" || key == "control_duration") {
                    x ? show(control) : hide(control)
                } else {
                    css(control, {
                        "display": (x ? "block" : "none")
                    })
                }
                visible = x;
                x ? show(control) : ''
            }
        }

        function noClickTimeout() {
            noclick = false
        }
        this.UpdateText = function(text) {
            UpdateText(text)
        };
        this.Rotate = function(text) {
            css(control, {
                "transform": "rotate(" + angle + "deg)"
            });
            angle += 20
        };
        this.RenewFromTitle = function(x) {
            if (style.text.indexOf("{title}") > -1) {
                UpdateText(style.text)
            }
        };

        function UpdateText(text) {
            if (style.type == "text") {
                if (exist(text)) {
                    style.length = text.length
                }
                text = (style.linefortime == 1 ? '| ' : '') + (style.slashfortime == 1 ? '/ ' : '') + (style.inversetime == 1 && style.minusforback == 1 ? '-' : '') + text;
                var prevorius_default_w = icon[0].offsetWidth + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                var prevorius_default_h = icon[0].offsetHeight + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                icon[0].innerHTML = action == "custom" ? Places(text) : text;
                if (style.triangle == 1) {
                    icon[0].innerHTML += '<span style="display:inline-block;width:10px"></span><span style="border-top: 3px solid #fff;border-left: 3px solid transparent;border-right: 3px solid transparent;position: absolute;right:3px;top: 50%;margin-top: -1px;"></span>'
                }
                if (action == "title") {
                    css(icon[0], {
                        "width": "auto",
                        "white-space": "nowrap"
                    });
                    if (icon[0].offsetWidth > o.screen_w) {
                        css(icon[0], {
                            "white-space": "normal",
                            "width": o.screen_w - style.marginleft - style.marginright - style.bgpaddingleft - style.bgpaddingright
                        })
                    }
                }
                style.w = icon[0].offsetWidth + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                style.h = icon[0].offsetHeight + (style.bg == 1 ? style.bgpaddingtop + style.bgpaddingbottom : 0);
                if (prevorius_default_w != style.w || prevorius_default_h != style.h || (style.w > 0 && last_text_w == 0)) {
                    ResizeText()
                }
                if (icon[0].offsetWidth > 0) {
                    last_text_w = style.w
                } else {
                    if (text != '') {
                        setTimeout(ResizeText, 100)
                    }
                }
            }
        }

        function ResizeText() {
            if (icon[0].offsetWidth > 0) {
                w = style.w = icon[0].offsetWidth;
                h = style.h = icon[0].offsetHeight;
                Background();
                Clickable(bg);
                Resize();
                o.controls.resizeFromText()
            }
        }
        this.UpdateVolume = function(x) {
            if (style.displayvolume == 1 && !o.system.mobile) {
                var l1 = document.getElementById('pjs_volume_element1');
                var l2 = document.getElementById('pjs_volume_element2');
                var l3 = document.getElementById('pjs_volume_element3');
                if (l1) {
                    if (x <= 0.2) {
                        l3 ? hide(l3) : '';
                        l2 ? hide(l2) : '';
                        l1 ? hide(l1) : ''
                    }
                    if (x > 0.2 && x <= 0.5) {
                        l3 ? hide(l3) : '';
                        l2 ? hide(l2) : ''
                    }
                    if (x > 0.2) {
                        l1 ? show(l1) : ''
                    }
                    if (x > 0.5) {
                        l2 ? show(l2) : ''
                    }
                    if (x > 0.5 && x <= 0.8) {
                        l3 ? hide(l3) : ''
                    }
                    if (x > 0.8) {
                        l3 ? show(l3) : ''
                    }
                }
            }
        };
        this.On = function() {
            if (!on) {
                if (icons) {
                    if (icons.length > 1 && actions.length > 1) {
                        hide(icon[0]);
                        show(icon[1])
                    }
                }
                if (actions.length > 1) {
                    action = actions[1];
                    if (style.tip == 1) {
                        tiptext.innerHTML = style.tiptext == '' ? Lang(actions[1]) : (tips.length > 1 ? tips[1] : tips[0]);
                        Tip()
                    }
                }
                if (style.iconsreplay == 1 && replay) {
                    hide(icon[iconreplay]);
                    replay = false
                }
                on = true;
                over ? onDown() : ''
            }
        };
        this.CustomSwitch = function(x) {
            if (x == 1) {
                style.a = 1
            } else {
                style.a = 0.5
            }
            css(icon[0], {
                "opacity": style.a
            })
        };
        this.Off = function() {
            if (on) {
                if (icons) {
                    if (icons.length > 1 && actions.length > 1) {
                        show(icon[0]);
                        hide(icon[1])
                    }
                }
                action = actions[0];
                if (actions.length > 1) {
                    if (style.tip == 1) {
                        tiptext.innerHTML = style.tiptext == '' ? Lang(actions[0]) : tips[0];
                        Tip()
                    }
                }
                on = false;
                replay = false;
                over ? onDown() : ''
            }
        };
        this.ReplayIcon = function() {
            if (style.iconsreplay == 1) {
                hideAllIcons();
                show(icon[iconreplay]);
                replay = true
            }
        };
        this.Buffer = function() {
            var stop = false;
            if (style.hide == 1 && style.hidewithposter == 1) {
                if (isVisible(o.poster)) {
                    stop = true
                }
            }
            if (!stop) {
                show2(control);
                var items = control.getElementsByTagName("*");
                for (var i = items.length; i--;) {
                    css(items[i], {
                        "animation-play-state": "running"
                    })
                }
                visible = true
            }
        };
        this.BufferStop = function() {
            BufferStop()
        };

        function BufferStop() {
            hide2(control);
            var items = control.getElementsByTagName("*");
            for (var i = items.length; i--;) {
                css(items[i], {
                    "animation-play-state": "paused"
                })
            }
            visible = false
        }
        this.Remove = function() {
            if (icons.length > 0) {
                for (i = 0; i < icons.length; i++) {
                    control.removeChild(icon[i]);
                    delete icon[i]
                }
            }
            if (bg) {
                bg.removeAttribute("onclick");
                bg.removeAttribute("onmouseover");
                bg.removeAttribute("onmouseout");
                bg.parentNode.removeChild(bg);
                delete bg
            }
            o.frame.removeChild(control);
            delete control
        };

        function Places(x) {
            if (x.indexOf('{time}') > -1 && exist(o.continue)) {
                x = x.replace('{time}', timeFormat(o.continue.flag().t))
            }
            if (x.indexOf('{title}') > -1) {
                x = x.replace('{title}', (o.titlestore ? o.titlestore : (v.title ? v.title : '')))
            }
            return x
        }

        function IconsColor(icon, clr) {
            for (var i = 0; i < icon.length; i++) {
                var x = ["path", "polygon", "polyline", "rect", "ellipse"];
                for (var y = 0; y < x.length; y++) {
                    var z = icon[i].querySelectorAll("svg " + x[y]);
                    if (z.length > 0) {
                        for (var y2 = 0; y2 < z.length; y2++) {
                            z[y2].style.fill = clr
                        }
                    }
                }
            }
        }
    };
    var ControlLine = function(key, action) {
        var i;
        var style = [];
        var w;
        var h;
        var bg;
        var visible = true;
        var x0;
        var y0;
        var scaleX = 1;
        var scaleY = 1;
        var topBg = 0;
        var leftBg = 0;
        var alphas;
        var mouseDown;
        var mouseUp;
        var click;
        var handle;
        var _duration_load;
        var _duration_play;
        var _time_load;
        var _time_play;
        var tip;
        var tipbg;
        var tiptext;
        var thumb;
        var current_thumb = -1;
        var lastTouch;
        var over;
        var onup_to;
        for (i in default_style.but) {
            style[i] = default_style.but[i]
        }
        var action = v[key].action;
        var type = v[key].type;
        for (i in default_style[action]) {
            style[i] = default_style[action][i]
        }
        for (i in v[key]) {
            style[i] = v[key][i]
        }
        style.w = parseInt(style.w);
        style.h = parseInt(style.h);
        style = MarginPadding(style, 'margin', 'margin');
        style = MarginPadding(style, 'marginproc', 'marginproc');
        var control = createElement("div");
        o.frame.appendChild(control);
        css(control, {
            "position": "absolute",
            "top": 0,
            "left": 0,
            "opacity": 1,
            "fontSize": "14px",
            "lineHeight": "1em"
        });
        if (style.ontop == 1) {
            control.style.zIndex = 5
        }
        Background();
        var lines = createElement("div");
        css(lines, {
            "position": "absolute",
            "bottom": 0,
            "left": Math.round(-style.w / 2),
            "transition": "transform 0.2s ease-in-out"
        });
        control.appendChild(lines);
        if (action == 'line' && v.thumbs == 1) {
            CreateThumb()
        }
        if (style.tip == 1) {
            CreateTip()
        }
        var line0 = createElement("div");
        StyleLine(line0, 0.3, (style.gradient == 1 ? "linear-gradient(#" + style.gradientcolorbg + ", #" + style.colorbg + ")" : style.colorbg), style.w, style.abg);
        if (style.customdesign == 1 && exist(style.customdesignsvg)) {
            var svg0 = createElement("div");
            svg0.innerHTML = style.customdesignsvg.replace(/\#FFFFFF/g, "#" + style.colorbg);
            line0.appendChild(svg0);
            css(svg0, {
                "position": "absolute",
                "bottom": -Math.round(style.h / 2),
                "left": 0,
                "pointer-events": "none"
            });
            css(line0, {
                "overflow": "hidden",
                "background": "none"
            });
            var x = ["path", "polygon", "polyline", "rect", "ellipse"];
            for (var y = 0; y < x.length; y++) {
                var z = svg0.querySelectorAll("svg " + x[y]);
                if (z.length > 0) {
                    for (var y2 = 0; y2 < z.length; y2++) {
                        z[y2].style.fill = style.colorbg
                    }
                }
            }
        }
        lines.appendChild(line0);
        var lines1 = [];
        var line1 = createElement("div");
        StyleLine(line1, style.linespeed1, (style.gradient == 1 ? "linear-gradient(#" + style.gradientcolorload + ", #" + style.colorload + ")" : style.colorload), 0, style.aload);
        lines.appendChild(line1);
        if (style.bufferline == 1) {
            var line_buffer = createElement("div");
            lines.appendChild(line_buffer);
            hide(line_buffer)
        }
        if (style.aover > 0) {
            var line2 = createElement("div");
            StyleLine(line2, style.linespeed2, style.colorover, 0, style.aover);
            lines.appendChild(line2)
        }
        var line3 = createElement("div");
        StyleLine(line3, style.linespeed3, (style.gradient == 1 ? "linear-gradient(#" + style.gradientcolor + ", #" + style.color + ")" : style.color), 0, style.a);
        if (style.customdesign == 1 && exist(style.customdesignsvg)) {
            var svg3 = createElement("div");
            svg3.innerHTML = style.customdesignsvg.replace(/\#FFFFFF/g, "#" + style.color);
            css(svg3, {
                "position": "absolute",
                "bottom": -Math.round(style.h / 2),
                "left": 0,
                "pointer-events": "none"
            });
            css(line3, {
                "overflow": "hidden",
                "background": "none"
            });
            line3.appendChild(svg3)
        }
        if (style.value == 1) {
            var line3value = createElement("div");
            style = MarginPadding(style, 'valuepadding', 'valuepadding');
            style = MarginPadding(style, 'valuemargin', 'valuemargin');
            css(line3value, {
                "position": "absolute",
                "bottom": style.h / 2,
                "right": 0,
                "pointer-events": "none",
                "font-size": (style.valuesize + "px"),
                "color": style.valuecolor,
                "line-height": "100%",
                "padding-top": style.valuepaddingtop,
                "padding-bottom": style.valuepaddingbottom,
                "padding-left": style.valuepaddingleft,
                "padding-right": style.valuepaddingright,
                "margin-top": style.valuemargintop,
                "margin-bottom": style.valuemarginbottom,
                "margin-left": style.valuemarginleft,
                "margin-right": style.valuemarginright,
                "border-radius": (style.valuerounding + "px"),
                "display": "none"
            });
            if (style.valuebg == 1) {
                css(line3value, {
                    "background": "#" + style.valuebgcolor
                })
            }
            line3.appendChild(line3value);
            var l3v_show = false;
            var l3v_left = false
        }
        lines.appendChild(line3);
        if (style.handle == 1) {
            if (style.handleicon.toString().indexOf('<svg') > -1) {
                handle = createElement("div");
                handle.innerHTML = style.handleicon.toString();
                style = MarginPadding(style, 'handlemargin', 'handlemargin');
                css(handle, {
                    "position": "absolute",
                    "top": -10 + style.handlemargintop - style.handlemarginbottom,
                    "left": -1000,
                    "pointer-events": "none",
                    "height": 20,
                    "width": style.handle_width,
                    "opacity": style.handlea
                });
                if (style.handlehide == 1) {
                    css(handle, {
                        "transform": "scale(0)"
                    })
                } else {
                    if (style.handlescale != 1) {
                        css(handle, {
                            "transform": "scale(" + style.handlescale + ")"
                        })
                    }
                }
                control.appendChild(handle);
                if (style.handlecolor != -1) {
                    var x = ["path", "rect", "ellipse"];
                    for (var y = 0; y < x.length; y++) {
                        var z = handle.querySelectorAll("svg " + x[y]);
                        if (z.length > 0) {
                            for (var y2 = 0; y2 < z.length; y2++) {
                                z[y2].style.fill = "#" + style.handlecolor
                            }
                        }
                    }
                }
                style.handlewidth = handle.offsetWidth
            } else {
                style.handle = 0
            }
        }
        if (style.rotation != 0) {
            css(control, {
                "transform": "rotate(" + style.rotation + "deg)"
            })
        }
        if (style.hidden == 1) {
            hide(control);
            visible = false
        }
        if (action == "volume") {
            if (style.hide == 1 && style.hideoutmute == 1) {
                o.hidden_volume = true;
                style.hidden = true
            } else {
                o.hidden_volume = false
            }
        }
        style.vertical = 0;
        if (style.rotation != 0) {
            style.rotation2 = Math.abs(style.rotation);
            if (style.rotation2 > 45 && style.rotation2 < 135) {
                style.vertical = 90
            }
            if (style.rotation2 > 225 && style.rotation2 < 315) {
                style.vertical = 270
            }
        }

        function StyleLine(x, y, z, _w, _a) {
            css(x, {
                "position": "absolute",
                "bottom": Math.round(-style.h / 2),
                "left": 0,
                "width": _w,
                "height": style.h,
                "background": z ? (z.indexOf("linear") > -1 ? z : '#' + z) : '',
                "border-radius": style.rounding * style.h / 2,
                "opacity": _a,
                "pointer-events": "none",
                "transition": "width " + y + "s linear"
            })
        }

        function Background() {
            bg = createElement("div");
            style = MarginPadding(style, 'bgpadding', 'bgpadding');
            var bgh = style.h + style.bgpaddingtop + style.bgpaddingbottom;
            var bgw = style.w + style.bgpaddingleft + style.bgpaddingright;
            if (v.toolbar.clickarea == 1) {
                style.bgcolor = '#ff0000';
                style.bg = 1;
                style.bga = 0.5
            }
            if (style.bg == 1) {} else {
                style.bga = 0
            }
            css(bg, {
                "position": "absolute",
                "top": 0,
                "left": 0,
                "width": bgw,
                "height": bgh,
                "borderRadius": (style.bgo * bgh) / 2,
                "backgroundColor": style.bgcolor,
                "opacity": style.bga
            });
            if (style.bgborder == 1) {
                css(bg, {
                    "border": "1px solid #" + style.bgbordercolor
                })
            }
            css(bg, {
                "top": -style.h / 2 - style.bgpaddingtop
            });
            if (style.click == 1) {
                if (style.hand == 1) {
                    css(bg, {
                        "cursor": "pointer"
                    })
                }
                if (!o.system.mobile) {
                    bg.onclick = onClick;
                    bg.onmouseup = onUp;
                    bg.onmousedown = onDown;
                    bg.onmousemove = onMove
                }
            } else {
                css(bg, {
                    "cursor": "default"
                })
            }
            if (!o.system.mobile) {
                bg.onmouseover = onOver;
                bg.onmousemove = onMove;
                bg.onmouseout = onOut
            }
            if (o.system.mobile) {
                bg.addEventListener("touchstart", function(event) {
                    event.cancelBubble = true;
                    if (!exist(event.clientX) && event.touches.length > 0) {
                        event.clientX = event.touches[0].pageX;
                        event.clientY = event.touches[0].pageY
                    }
                    lastTouch = event;
                    onOver(event);
                    onDown(event)
                });
                bg.addEventListener("touchend", function(event) {
                    event.cancelBubble = true;
                    onOut(event);
                    onUp(lastTouch)
                });
                bg.addEventListener("click", function(event) {
                    event.cancelBubble = true
                });
                bg.addEventListener("touchmove", function(event) {
                    if (!exist(event.clientX) && event.touches.length > 0) {
                        event.clientX = event.touches[0].pageX;
                        event.clientY = event.touches[0].pageY
                    }
                    lastTouch = event;
                    onMove(event)
                })
            }
            css(bg, {
                "left": -style.w / 2 - style.bgpaddingleft
            });
            css(bg, {
                "top": -style.h / 2 - style.bgpaddingtop
            });
            control.appendChild(bg)
        }

        function Resize(width) {
            if (width != w) {
                w = width;
                var delta = w / line0.offsetWidth;
                css(bg, {
                    "width": (w + style.bgpaddingleft + style.bgpaddingright),
                    "left": -w / 2 - style.bgpaddingleft,
                });
                css(lines, {
                    "left": -w / 2
                });
                css(line0, {
                    "width": w
                });
                var xx = line1.offsetWidth * delta;
                if (xx > line0.offsetWidth) {
                    xx = line0.offsetWidth
                }
                css(line1, {
                    "width": xx
                });
                css(line3, {
                    "width": (line3.offsetWidth * delta)
                });
                if (line_buffer) {
                    if (!hidden(line_buffer)) {
                        Buffering()
                    }
                }
                HandleWidth(line3.offsetWidth * delta, false);
                if (action == "line") {
                    Continue()
                }
            }
        }

        function HandleWidth(x, none) {
            if (style.handle == 1) {
                if (x < style.handlewidth / 2 && style.handle_width != 20) {
                    x = style.handlewidth / 2
                }
                if (x > w - style.handlewidth / 2 && style.handle_width != 20) {
                    x = w - style.handlewidth / 2
                }
                y = x - w / 2 - style.handlewidth / 2 + style.handlemarginleft - style.handlemarginright;
                var y = {
                    "left": y
                };
                none ? y.transition = "none" : '';
                css(handle, y)
            }
        }

        function onOver(event) {
            o.controls.Mouse(key, "over");
            if (style.bgaover != -1 && style.bg == 1) {
                var m = new Motion({
                    "mc": bg,
                    "type": "alpha_div",
                    "to": style.bgaover,
                    "time": 0.1,
                    "me": (key + "bg")
                })
            }
            if (style.handle == 1) {
                if (style.handleiconsover == 1 && exist(style.handleiconover)) {
                    if (style.handleiconspress == 1 && mouseDown) {} else {
                        handle.innerHTML = "<svg width='" + style.handle_width + "' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleiconover.toString() + "</svg>"
                    }
                }
                if (style.handlehide == 1) {
                    css(handle, {
                        "transform": "scale(" + style.handlescale + ")",
                        "transition": "all " + style.slidespeed + "s linear"
                    })
                } else {
                    if (style.handleaover != -1) {
                        var m2 = new Motion({
                            "mc": handle,
                            "type": "alpha_div",
                            "to": style.handleaover,
                            "time": 0.1,
                            "me": (key + "handle")
                        })
                    }
                }
            }
            if (style.tip == 1 && (o.media.duration() > 0 || action == "volume")) {
                show(tip);
                css(tip, {
                    "opacity": 1
                })
            }
            if (style.expand > 0) {
                css(bg, {
                    "transform": "scaleY(" + ((style.expand - 1) / 5 + 1) + ")"
                });
                css(lines, {
                    "transform": "scaleY(" + style.expand + ")"
                })
            }
            if (action == "volume") {
                o.actions.volumewheel(true);
                o.volumewheel = true
            }
            o.controlover = true
        }

        function onOut() {
            if (!mouseUp) {
                if (style.aover > 0) {
                    css(line2, {
                        "width": 0
                    })
                }
                if (style.bgaover != -1 && style.bg == 1) {
                    var m = new Motion({
                        "mc": bg,
                        "type": "alpha_div",
                        "to": style.bga,
                        "time": 0.1,
                        "me": (key + "bg")
                    })
                }
                if (style.handle == 1) {
                    if (style.handleiconsover == 1 && exist(style.handleiconover)) {
                        if (style.handleiconspress == 1 && mouseDown) {} else {
                            handle.innerHTML = "<svg width='" + style.handle_width + "' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleicon.toString() + "</svg>"
                        }
                    }
                    if (style.handlehide == 1) {
                        css(handle, {
                            "transform": "scale(0)",
                            "transition": "all " + style.slidespeed + "s linear"
                        })
                    } else {
                        if (style.handleaover != -1) {
                            var m2 = new Motion({
                                "mc": handle,
                                "type": "alpha_div",
                                "to": style.handlea,
                                "time": 0.1,
                                "me": (key + "handle")
                            })
                        }
                    }
                }
                if (style.expand > 0) {
                    css(bg, {
                        "transform": "scaleY(1)"
                    });
                    css(lines, {
                        "transform": "scaleY(1)"
                    })
                }
                if (action == "volume" && !o.fullscreen) {
                    o.actions.volumewheel(false);
                    o.volumewheel = false
                }
                o.controls.Mouse(key, "out")
            }
            if (style.tip == 1 && (o.media.duration() > 0 || action == "volume")) {
                hide(tip);
                css(tip, {
                    "opacity": 0
                })
            }
            if (o.thumbs_on && action == "line") {
                hide2(thumb);
                current_thumb = -1
            }
            o.controlover = false
        }

        function onClick(event) {
            event.cancelBubble = true
        }

        function CancelBubble(event) {
            event.cancelBubble = true
        }

        function onUp(event) {
            if (action == "volume") {
                if (o.hidden_volume_over) {
                    mouseUp = true;
                    clearTimeout(onup_to);
                    onup_to = setTimeout(function() {
                        mouseUp = false;
                        onOut()
                    }, 1000)
                }
            }
            EndMove();
            o.mouseDown = false;
            if (style.handle == 1) {
                if (style.handleiconspress == 1 && exist(style.handleiconpress)) {
                    handle.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleicon.toString() + "</svg>"
                }
            }
            CalculateClick(event.clientX, event.clientY);
            o.controls.ControlClick(key);
            o.controls.StageMouseUp(event.clientX, event.clientY);
            event.cancelBubble = true
        }

        function onDown(event) {
            mouseDown = true;
            if (style.handle == 1) {
                if (style.handleiconspress == 1 && exist(style.handleiconpress)) {
                    handle.innerHTML = "<svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'>" + style.handleiconpress.toString() + "</svg>"
                }
            }
            topBg = findTop(bg);
            leftBg = findLeft(bg);
            CalculateClick(event.clientX, event.clientY);
            UpdatePlay(click, 1, "no")
        }

        function CalculateClick(event_x, event_y) {
            var x;
            var xOffset = Math.max(document.documentElement.scrollLeft, document.body.scrollLeft);
            var yOffset = Math.max(document.documentElement.scrollTop, document.body.scrollTop);
            event_y = event_y + yOffset;
            event_x = event_x + xOffset;
            if (style.vertical > 0) {
                x = event_y - topBg + w / 2 - style.bgpaddingright;
                click = x / w;
                if (style.vertical == 270) {
                    x = event_y - topBg + w / 2 - style.bgpaddingleft;
                    click = x / w;
                    click = (click - 1) * -1
                }
            } else {
                x = event_x - leftBg - style.bgpaddingleft;
                click = x / w;
                if (style.rotation > 134 && style.rotation < 235) {
                    x = event_x - leftBg - style.bgpaddingright;
                    click = x / w;
                    click = (click - 1) * -1
                }
            }
        }

        function EndMove() {
            mouseDown = false
        }

        function onMove(event) {
            if (style.aover > 0) {
                if (o.start || action != 'line') {
                    css(line2, {
                        "width": event.clientX - leftBg
                    })
                }
            }
            if (style.tip == 1 && (o.media.duration() > 0 || action == "volume")) {
                !isVisible(tip) ? show(tip) : '';
                topBg = findTop(bg);
                leftBg = findLeft(bg);
                CalculateClick(event.clientX, event.clientY);
                if (action == "line") {
                    if (o.media.isLive() && o.media.currentFile().indexOf("?DVR") > 0 && v.hlsdvrtime == 1) {
                        tiptext.innerHTML = '- ' + timeFormat((1 - click) * o.media.duration())
                    } else {
                        tiptext.innerHTML = timeFormat(click * o.media.duration())
                    }
                }
                if (action == "volume") {
                    tiptext.innerHTML = Math.round(click * 100)
                }
                css(tip, {
                    "top": (-tiptext.offsetHeight * 2 - style.linetipmarginbottom * 1) - (style.toptip == 1 ? (style.h / 2) * (style.expand > 0 ? style.expand : 1) : 0),
                    "left": (-w / 2 + (event.clientX - leftBg) - tip.offsetWidth / 2),
                    "height": style.tippaddingtop + style.tipfontsize + style.tippaddingbottom,
                    "width": style.tippaddingleft + tiptext.offsetWidth + style.tippaddingright,
                });
                css(tipbg, {
                    'height': tip.offsetHeight
                });
                tip.style.zIndex = "1000"
            }
            if (o.thumbs_on && action == "line") {
                if (o.media.duration() > 0) {
                    if (style.tip == 0) {
                        topBg = findTop(bg);
                        leftBg = findLeft(bg);
                        CalculateClick(event.clientX, event.clientY)
                    }
                    var left = (-w / 2 + (event.clientX - leftBg) - v.thumb_width / 2);
                    left > w / 2 - v.thumb_width ? left = w / 2 - v.thumb_width : '';
                    css(thumb, {
                        "top": (-v.thumb_height - 5 - v.thumb_border),
                        "left": (left < -w / 2 ? -w / 2 : left)
                    });
                    ThumbsTime(click * o.media.duration())
                }
            }
        }
        this.c = function() {
            return control
        };
        this.s = function(key) {
            return style[key]
        };
        this.ss = function(x, x2) {
            return style[x][x2]
        };
        this.g = function(x) {
            switch (x) {
                case "width":
                    return w;
                    break;
                case "offsetwidth":
                    return line0.offsetWidth;
                    break;
                case "height":
                    return style.h;
                    break;
                case "x":
                    return int(control.style.left);
                    break;
                case "y":
                    return int(control.style.top);
                    break;
                case "opacity":
                    return control.style.opacity ? control.style.opacity : 1;
                    break;
                case "show":
                    return visible;
                    break;
                case "scaleX":
                    return scaleX;
                    break;
                case "scaleY":
                    return scaleY;
                    break;
                case "action":
                    return action;
                    break;
                case "key":
                    return key;
                    break;
                case "x0":
                    return x0;
                    break;
                case "y0":
                    return y0;
                    break;
                case "click":
                    return click;
                    break;
                default:
                    return false
            }
        };
        this.set = function(key, x) {
            switch (key) {
                case "show":
                    visible = x;
                    break;
                case "mouseDown":
                    mouseDown = x;
                    break;
                case "display":
                    action == "line" || style.hide == 1 ? css(control, {
                        "visibility": (x ? "visible" : "hidden")
                    }) : css(control, {
                        "display": (x ? "block" : "none")
                    });
                    visible = x;
                    break;
                case "scaleX":
                    css(control, {
                        "transform": "scaleX(" + x + ")"
                    });
                    scaleX = x;
                    break;
                case "scaleY":
                    css(control, {
                        "transform": "scaleY(" + x + ")"
                    });
                    scaleY = x;
                    break;
                case "opacity":
                    css(control, {
                        "opacity": x
                    });
                    break;
                case "left":
                    css(control, {
                        "left": x
                    });
                    break;
                case "top":
                    css(control, {
                        "top": x
                    });
                    break;
                case "click":
                    click = x;
                    break;
                case "width":
                    css(control, {
                        "width": x
                    });
                    break;
                case "height":
                    css(control, {
                        "height": x
                    });
                    break;
                case "over_final":
                    style.roundingver_final = x;
                    break;
                case "x":
                    css(control, {
                        "left": x
                    });
                    break;
                case "y":
                    css(control, {
                        "top": x
                    });
                    break;
                case "x0":
                    x0 = x;
                    break;
                case "y0":
                    y0 = x;
                    break
            }
        };
        this.Resize = function(x) {
            Resize(x)
        };
        this.StageLeave = function(x) {};
        this.StageMove = function(stage_x, stage_y) {
            if (mouseDown) {
                if (action == "volume") {
                    CalculateClick(stage_x, stage_y);
                    o.controls.ControlClick(key);
                    o.hidden_volume_over = true
                }
                CalculateClick(stage_x, stage_y);
                UpdatePlay(click, 1, "no")
            }
        };
        this.StageMouseUp = function(stage_x, stage_y) {
            if (mouseDown) {
                EndMove();
                mouseDown = false;
                CalculateClick(stage_x, stage_y);
                o.controls.ControlClick(key);
                UpdatePlay(click, 1, "no")
            }
        };

        function UpdatePlay(time, duration, animate) {
            time < 0 ? time = 0 : '';
            if (mouseDown && duration != 1) {} else {
                var _to;
                if (duration > 0 && time > 0) {
                    if (time > duration) {
                        time = duration
                    }
                    _to = w * (time / duration);
                    if (_to == line3.offsetWidth) {
                        _to = -1
                    }
                } else {
                    _to = 0
                }
                if (_to >= 0) {
                    css(line3, {
                        "width": _to,
                        "transition": (animate != "no" ? "width " + style.slidespeed + "s linear" : "none")
                    });
                    HandleWidth(_to, true)
                }
                if (exist(line3value)) {
                    if (duration < 2 && action == "line") {
                        if (l3v_show) {
                            hide2(line3value);
                            l3v_show = false
                        }
                    } else {
                        if (!l3v_show) {
                            show2(line3value);
                            l3v_show = true
                        }
                        line3value.innerHTML = action == "line" ? Time(time == 0 ? duration : time) : Math.ceil(time * 100);
                        if (_to < line3value.clientWidth + style.valuemarginright + style.valuemarginleft) {
                            if (!l3v_left) {
                                css(line3value, {
                                    "left": 0,
                                    "right": "auto"
                                });
                                l3v_left = true
                            }
                        } else {
                            if (l3v_left) {
                                css(line3value, {
                                    "right": 0,
                                    "left": "auto"
                                });
                                l3v_left = false
                            }
                        }
                    }
                }
            }
        };
        this.UpdatePlay = function(time, duration, animate) {
            if (duration != _duration_play || time != _time_play) {
                UpdatePlay(time, duration, animate)
            }
        };
        this.UpdatePlaySeek = function() {
            click > 1 ? click = 1 : '';
            click < 0 ? click = 0 : '';
            css(line3, {
                "width": (click * w),
                "transition": "none"
            })
        };
        this.UpdateLoad = function(time, duration) {
            if (duration > 0 && time > 0) {
                var _to = w * (time / duration);
                css(line1, {
                    "width": int(_to)
                });
                _duration_load = duration;
                _time_load = time
            } else {
                _time_load = 0;
                css(line1, {
                    "width": 0
                })
            }
        };

        function ThumbsTime(x) {
            if (v.thumbs == 1) {
                if (o.thumbs_on) {
                    var y = -1;
                    if (exist(o.thumbs)) {
                        if (o.thumbs.length > 0) {
                            for (var i = o.thumbs.length - 1; i >= 0; i--) {
                                if (x >= o.thumbs[i].t1 && x <= o.thumbs[i].t2) {
                                    y = i;
                                    break
                                }
                            }
                        }
                    }
                    if (y != -1 && current_thumb != y) {
                        if (exist(o.thumbs[y])) {
                            if (exist(o.thumbs[y].url)) {
                                var z = o.thumbs[y].url;
                                if (z.indexOf('.') > -1) {
                                    !isVisible(thumb) ? show2(thumb) : '';
                                    css(thumb, {
                                        'background-image': 'url(' + o.thumbs[y].url + ')'
                                    });
                                    if (z.indexOf('xywh') > 0) {
                                        var xy = z.substr(z.indexOf('xywh') + 5);
                                        var xywh = xy.split(',');
                                        if (xywh.length == 4) {
                                            css(thumb, {
                                                'background-position-y': "-" + parseInt(xywh[1]) + 'px',
                                                'background-position-x': "-" + parseInt(xywh[0]) + 'px',
                                                'width': parseInt(xywh[2]) + 'px',
                                                'height': parseInt(xywh[3]) + 'px',
                                                'background-size': 'auto'
                                            });
                                            v.thumb_width = xywh[2];
                                            v.thumb_height = xywh[3]
                                        }
                                    } else {
                                        css(thumb, {
                                            'background-size': 'cover'
                                        })
                                    }
                                }
                            } else {
                                hide2(thumb)
                            }
                        }
                    } else {
                        y == -1 ? hide2(thumb) : ''
                    }
                    current_thumb = y
                }
            }
        }

        function CreateThumb() {
            thumb = createElement("div");
            css(thumb, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'width': v.thumb_width,
                'height': v.thumb_height,
                'overflow': 'hidden',
                "pointer-events": "none",
                "background-color": "#000",
                "border-radius": v.thumb_radius + 'px',
                "display": "none"
            });
            if (v.thumb_border == 1) {
                css(thumb, {
                    "border": v.thumb_borderwidth + "px solid #" + v.thumb_bordercolor
                })
            }
            if (v.thumb_shadow == 1) {
                css(thumb, {
                    "box-shadow": "0px 1px 5px rgba(0,0,0,0.5)"
                })
            }
            thumb.style.zIndex = "999";
            control.appendChild(thumb)
        }

        function CreateTip() {
            tip = createElement("div");
            css(tip, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'height': 'auto',
                'overflow_': 'hidden',
                "pointer-events": "none",
                "opacity": 0,
                "transition": "opacity 0.1s linear"
            });
            tipbg = createElement("div");
            style = MarginPadding(style, 'tippadding', 'tippadding');
            css(tipbg, {
                'position': 'absolute',
                'left': 0,
                'top': 0,
                'width': '100%',
                'height': 30,
                'background-color': style.tipbgcolor,
                'opacity': style.tipbga,
                'border-radius': style.tipbgrounding
            });
            tiptext = createElement("div");
            css(tiptext, {
                'position': 'absolute',
                'left': style.tippaddingright,
                'top': style.tippaddingtop,
                'color': style.tipcolor,
                'font-family': style.tipfont,
                'font-size': style.tipfontsize,
                "letter-spacing": style.tipletterspacing + 'px',
                "line-height": "1",
                'opacity': style.tipa
            });
            if (style.linetippointer == 1) {
                tipcrn = createElement("div");
                tipcrn.innerHTML = '<svg width="8px" height="6px" viewBox="0 0 8 6" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><polygon id="Rectangle" stroke="none" fill="#' + style.tipbgcolor + '" fill-rule="evenodd" points="0 0 8 0 4 6"></polygon></svg>'
            }
            control.appendChild(tip);
            tip.appendChild(tipbg);
            tip.appendChild(tiptext);
            if (style.linetippointer == 1) {
                tip.appendChild(tipcrn);
                css(tipcrn, {
                    'position': 'absolute',
                    'left': '50%',
                    'margin-left': '-4px',
                    'bottom': '-8px',
                    'opacity': style.tipbga
                })
            }
        };

        function Continue() {
            if (o.continue && v.timestore == 1) {
                var f = o.continue.flag();
                if (f.t && f.d) {
                    UpdatePlay(f.t, f.d)
                }
            }
        };
        this.Remove = function() {
            control.removeChild(lines);
            if (bg) {
                bg.removeAttribute("onclick");
                bg.removeAttribute("onmouseover");
                bg.removeAttribute("onmouseout");
                bg.parentNode.removeChild(bg);
                delete bg
            }
            if (handle) {
                control.removeChild(handle)
            }
            o.frame.removeChild(control);
            delete control
        }
    };
    var ControlsBg = function() {
        var i;
        var style = [];
        var w;
        var h;
        var visible = true;
        var scaleX = 1;
        var scaleY = 1;
        var x0 = 0;
        var y0 = 0;
        var motion_id = random(100000, 200000);
        var action, key = "bg";
        var type = "shape";
        style["position"] = v.toolbar.position;
        for (var k in v.toolbar) {
            if (v.toolbar.hasOwnProperty(k)) {
                style[k] = v.toolbar[k]
            }
        }
        if (style.show == 0) {
            v.toolbar.h = style.h = 0;
            style.padding = style.margin = "0 0 0 0";
            style.gradient = 0
        }
        style["scale"] = 1;
        style = MarginPadding(style, 'margin', 'margin');
        style = MarginPadding(style, 'marginproc', 'marginproc');
        if (exist(style.paddingtop)) {
            if (style.paddingtop != 20 && style.margin == "-20 0 0 0") {
                style.margintop = style.paddingtop
            }
        }
        var control = createElement("div");
        css(control, {
            'position': 'absolute',
            'left': 0,
            'top': 0,
            'width': (style.stretchonfullscreen == 1 ? '100%' : o.normal_w),
            'height': style.h - style.margintop,
            'opacity_': style.a,
            'pointer-events': 'none',
            'fontSize': '14px',
            'lineHeight': '1em'
        });
        o.frame.appendChild(control);
        var bg = createElement("div");
        css(bg, {
            'position_': 'absolute',
            'left_': 0,
            'top_': 0,
            'width_': '100%',
            'height': style.h - style.marginbottom - style.margintop,
            'opacity': style.a,
            'display': 'block',
            'margin-left': style.marginleft,
            'margin-right': style.marginright,
            'border-radius': style.rounding
        });
        control.appendChild(bg);
        w = control.offsetWidth;
        v.toolbar_margintop = -style.margintop;
        if (style.gradient == 1) {
            if (style.color == '000000' || v.toolbar.image != '') {
                v.toolbar_margintop = 98 - style.h;
                var img = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==';
                if (v.toolbar.image.indexOf("data:image") > -1) {
                    img = v.toolbar.image
                }
                css(bg, {
                    'height': style.h + v.toolbar_margintop,
                    'background': 'url(' + img + ') repeat-x 50% 100%',
                    'background-size': 'auto'
                })
            } else {
                var bgg = 'to bottom, rgba(' + hexToRgb(style.color) + ',0), rgba(' + hexToRgb(style.color) + ',1)';
                css(bg, {
                    'background': '-moz-linear-gradient(' + bgg + ')',
                    'background': '-webkit-linear-gradient(' + bgg + ')',
                    'background': '-ms-linear-gradient(' + bgg + ')',
                    'background': '-o-linear-gradient(' + bgg + ')',
                    'background': 'linear-gradient(' + bgg + ')'
                })
            }
        } else {
            css(bg, {
                'background-color': style.color
            })
        }
        this.c = function() {
            return control
        };
        this.s = function(key) {
            return style[key]
        };
        this.g = function(x) {
            switch (x) {
                case "w":
                    control.offsetWidth > 0 ? w = control.offsetWidth : '';
                    return w;
                    break;
                case "width":
                    return control.offsetWidth;
                    break;
                case "height":
                    return control.offsetHeight;
                    break;
                case "x":
                    return int(control.style.left);
                    break;
                case "y":
                    return int(control.style.top);
                    break;
                case "opacity":
                    return control.style.opacity ? control.style.opacity : 1;
                    break;
                case "show":
                    return visible;
                    break;
                case "scaleX":
                    return scaleX;
                    break;
                case "scaleY":
                    return scaleY;
                    break;
                case "key":
                    return key;
                    break;
                case "x0":
                    return x0;
                    break;
                case "y0":
                    return y0;
                    break;
                case "motion_id":
                    return key + motion_id;
                    break;
                default:
                    return false
            }
        };
        this.set = function(key, x) {
            switch (key) {
                case "show":
                    visible = x;
                    break;
                case "w":
                    w = x;
                    break;
                case "display":
                    css(control, {
                        "display": (x ? "block" : "none")
                    });
                    visible = x;
                    break;
                case "scale":
                    css(control, {
                        "transform": "scale(" + x + ")"
                    });
                    scaleX = x;
                    scaleY = x;
                    break;
                case "scaleX":
                    css(control, {
                        "transform": "scaleX(" + x + ")"
                    });
                    scaleX = x;
                    break;
                case "scaleY":
                    css(control, {
                        "transform": "scaleY(" + x + ")"
                    });
                    scaleY = x;
                    break;
                case "opacity":
                    css(control, {
                        "opacity": x
                    });
                    break;
                case "left":
                    css(control, {
                        "left": x
                    });
                    break;
                case "top":
                    css(control, {
                        "top": x
                    });
                    break;
                case "width":
                    css(control, {
                        "width": x
                    });
                    break;
                case "height":
                    css(control, {
                        "height": x
                    });
                    break;
                case "x":
                    css(control, {
                        "left": x
                    });
                    break;
                case "y":
                    css(control, {
                        "top": x
                    });
                    break;
                case "x0":
                    x0 = x;
                    break;
                case "y0":
                    y0 = x;
                    break
            }
        };
        this.Remove = function() {
            o.frame.removeChild(control);
            delete control
        }
    };
    var Settings = function(is) {
        var i;
        var style = [];
        var f = [];
        var fbg = [];
        var fimg = [];
        var ftitle = [];
        var fvalue = [];
        var faction = [];
        var f2 = [];
        var f2bg = [];
        var f2img = [];
        var f2title = [];
        var f2value = [];
        var f2action = [];
        var stout = [];
        var is_visible = false;
        var open_action;
        var open_settings = -1;
        var empty = true;
        var key = is;
        var playlist;
        var history = [];
        var shuffle = [];
        var shuffle_ = [];
        var plid = '';
        var plfolder = '';
        var plx = -1;
        var sub_settings_on = false;
        var sub_settings = false;
        var autonextopenfolder = false;
        var autoprevopenfolder = false;
        var justshow = false;
        var showinterval;
        var arrinterval;
        var wheelinterval;
        style = UpdateObject(style, v[is]);
        style = MarginPadding(v[is], 'margin', 'margin');
        if (style.marginbg == 0) {
            style.marginbgpadding = "0 0 0 0"
        }
        style = MarginPadding(v[is], 'bgpadding', 'marginbgpadding');
        style = MarginPadding(v[is], 'padding', 'padding');
        style.scrollwidth = 0;
        var _activeIcon = "<svg width='" + style.activeiconsize * 2 + "' height='" + (style.activeiconsize * 2 > style.valuefontsize ? (style.activeiconsize * 2) : style.valuefontsize) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' ><g><ellipse ry='" + (style.activeiconsize) + "' rx='" + style.activeiconsize + "' cy='" + (style.activeiconsize * 2 > style.valuefontsize ? (style.activeiconsize) : (style.valuefontsize / 2)) + "' cx='" + style.activeiconsize + "' fill='#" + style.valuecolor + "'/></g></svg>";
        var _xIcon = "<svg width='" + style.activeiconsize * 2 + "' height='" + style.valuefontsize + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg' ><g><ellipse ry='" + (style.activeiconsize - 1) + "' rx='" + (style.activeiconsize - 1) + "' cy='" + (style.valuefontsize / 2 + 2) + "' cx='" + style.activeiconsize + "' stroke='#" + style.valuecolor + "' stroke='1' fill-opacity='0'/></g></svg>";
        var xx = 4;
        var _nextIcon = "<svg width='" + (xx + 2) + "' height='" + (style.valuefontsize) + "' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='1' y1='" + (style.valuefontsize / 2 - xx) + "' x2='" + xx + "' y2='" + (style.valuefontsize / 2) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/><line x1='" + xx + "' y1='" + (style.valuefontsize / 2) + "' x2='1' y2='" + (style.valuefontsize / 2 + xx) + "' stroke='#" + style.color + "' stroke-width='1' stroke-linecap='round'/></g></svg>";
        var container = createElement("div");
        o.frame.appendChild(container);
        css(container, {
            'overflow': 'hidden',
            'display': 'block',
            'opacity': 0
        });
        if (is == "settings") {
            container.style.zIndex = 100
        } else {
            container.style.zIndex = 99
        }
        var control = createElement("div");
        container.appendChild(control);
        css(control, {
            'position': 'relative',
            'top': 0,
            'left': 0,
            'display': 'block',
            'width': '100%',
            'padding-top': style.bgpaddingtop,
            'padding-right': style.bgpaddingright + 20,
            'padding-bottom': style.bgpaddingbottom,
            'padding-left': style.bgpaddingleft,
            'color': style.color,
            'font-size': style.fontsize,
            'font-family': style.font,
            'letter-spacing': style.letterspacing + 'px',
            'border-radius': style.rounding
        });
        if (is !== "playlist") {
            css(control, {
                'overflow-y': 'scroll'
            })
        }
        if (is == "playlist") {
            attr(control, {
                id: (v.id + "_" + is)
            });
            if (style.floatleft == 1) {
                css(control, {
                    'width': '100%',
                    'padding-right': style.bgpaddingright,
                    'padding-bottom': style.bgpaddingbottom + 20,
                    'overflow-x': 'scroll',
                    'white-space': 'nowrap'
                });
                css(container, {
                    'width': o.screen_w - style.marginright - style.marginleft,
                    'height': style.floatheight + style.bgpaddingtop + style.bgpaddingbottom
                })
            } else {
                css(control, {
                    'overflow-y': 'scroll'
                });
                if (style.width100 == 1) {
                    css(control, {
                        'width': o.screen_w
                    })
                }
            }
            if (style.marginbg == 1) {
                css(container, {
                    'background-color': style.marginbgcolor
                })
            }
        }
        if (style.scrollarrows == 1) {
            var arr_up = createElement("div");
            var scrollbgcolor = hexToRgb(style.marginbg == 1 ? style.marginbgcolor : style.bgcolor);
            if (style.floatleft == 1) {
                StyleArrow(arr_up, 'to right, rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + '), rgba(' + scrollbgcolor + ',0)', 'left', 12, 5, 7, 10, 7, 10, 12, 15);
                if (o.system.mobile) {
                    arr_up.addEventListener("touchstart", ScrollLeft)
                } else {
                    arr_up.addEventListener("click", ScrollLeft)
                }
            } else {
                StyleArrow(arr_up, 'to bottom, rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + '), rgba(' + scrollbgcolor + ',0)', 'top', 5, 12, 10, 7, 10, 7, 15, 12);
                if (o.system.mobile) {
                    arr_up.addEventListener("touchstart", ScrollUp)
                } else {
                    arr_up.addEventListener("click", ScrollUp)
                }
            }
            var arr_down = createElement("div");
            if (style.floatleft == 1) {
                StyleArrow(arr_down, 'to left, rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + '), rgba(' + scrollbgcolor + ',0)', 'right', 8, 5, 13, 10, 13, 10, 8, 15);
                if (o.system.mobile) {
                    arr_down.addEventListener("touchstart", ScrollRight)
                } else {
                    arr_down.addEventListener("click", ScrollRight)
                }
            } else {
                StyleArrow(arr_down, 'to bottom, rgba(' + scrollbgcolor + ',0), rgba(' + scrollbgcolor + ',' + (style.bga * 1 + 0.3) + ')', 'bottom', 5, 8, 10, 13, 10, 13, 15, 8);
                if (o.system.mobile) {
                    arr_down.addEventListener("touchstart", ScrollDown)
                } else {
                    arr_down.addEventListener("click", ScrollDown)
                }
            }
            control.addEventListener("wheel", Wheel, {
                passive: true
            });
            arr_up.addEventListener("mouseup", onMouseUp);
            arr_down.addEventListener("mouseup", onMouseUp);
            container.appendChild(arr_up);
            container.appendChild(arr_down);
            clearInterval(arrinterval);
            arrinterval = setInterval(ArrowsInterval, 1000)
        }
        if (o.system.mobile) {
            control.ontouchstart = ControlOver;
            control.ontouchend = ControlOut
        } else {
            control.onmouseover = ControlOver;
            control.onmouseout = ControlOut
        }
        if (is == "settings") {
            for (var i = 1; i < 11; i++) {
                if (exist(v["control_" + is][is + i])) {
                    v.settings[is + i] = v["control_" + is][is + i];
                    if (exist(v["control_" + is][is + i + "title"])) {
                        v.settings[is + i + "title"] = v["control_" + is][is + i + "title"]
                    }
                    if (exist(v["control_" + is][is + i + "action"])) {
                        v.settings[is + i + "action"] = v["control_" + is][is + i + "action"]
                    }
                }
                if (exist(v.settings[is + i])) {
                    if (v.settings[is + i] == 1) {
                        CreateItem('f', i);
                        StyleItem(f[i], fbg[i], ftitle[i], fvalue[i]);
                        ftitle[i].innerHTML = Lang(v.settings[is + i + "action"]);
                        if (exist(v.settings[is + i + "title"])) {
                            if (v.settings[is + i + "title"] != '') {
                                ftitle[i].innerHTML = v.settings[is + i + "title"]
                            }
                        }
                        if (exist(v.settings[is + i + "action"])) {
                            faction[i] = v.settings[is + i + "action"];
                            Value(i)
                        }
                        if (o.system.mobile) {
                            f[i].addEventListener("touchstart", onOver);
                            f[i].addEventListener("touchend", onOut)
                        } else {
                            f[i].addEventListener("mouseover", onOver);
                            f[i].addEventListener("mouseout", onOut)
                        }
                        f[i].addEventListener("click", onClick);
                        f[i].addEventListener("mouseup", onMouseUp)
                    }
                }
            }
        }

        function Wheel() {
            clearInterval(wheelinterval);
            wheelinterval = setInterval(ControlOut, 3000)
        }

        function ControlOver() {
            o.mouseDown = true
        }

        function ControlOut() {
            if (style.showovercontrol == 1) {
                clearTimeout(o.settingsovertimer);
                o.settingsovertimer = setTimeout(function() {
                    if (!o.mouseDown) {
                        HideControl()
                    }
                }, 1000)
            }
            o.mouseDown = false
        }

        function onOver(event) {
            if (o.fullscreen) {
                o.volumewheel ? o.actions.volumewheel(false) : ''
            }
            var i = event.target.getAttribute('fid');
            var x;
            if (i) {
                x = 'f'
            } else {
                if (event.target.getAttribute('f2id')) {
                    i = event.target.getAttribute('f2id');
                    x = 'f2'
                }
            }
            if (i) {
                i = parseInt(i);
                if (exist(eval(x)[i])) {
                    if (is == "playlist" && style.posters == 1 && style.postertitleonhover == 1) {
                        show(eval(x + 'title')[i]);
                        css(eval(x + 'title')[i], {
                            'opacity': 1
                        })
                    }
                    if (style.bgaover > -1) {
                        css(eval(x + 'bg')[i], {
                            'opacity': style.bgaover
                        })
                    }
                    if (style.aover > -1) {
                        css(eval(x + 'title')[i], {
                            'opacity': style.aover
                        });
                        css(eval(x + 'value')[i], {
                            'opacity': style.aover
                        })
                    }
                    css(eval(x + 'bg')[i], {
                        'backgroundColor': style.bgcolorover
                    });
                    if (is == "playlist") {
                        if (faction[i].indexOf("playlist") == 0) {
                            var id = faction[i].substr(8);
                            if (plid == id || plfolder == id) {
                                css(eval(x + 'title')[i], {
                                    'color': style.valuecolor
                                });
                                css(eval(x + 'value')[i], {
                                    'color': style.valuecolor
                                })
                            } else {
                                css(eval(x + 'title')[i], {
                                    'color': style.color
                                })
                            }
                        }
                    }
                }
            }
        };

        function onOut(event) {
            if (o.fullscreen) {
                o.volumewheel ? o.actions.volumewheel(true) : ''
            }
            var i = event.target.getAttribute('fid');
            var x;
            if (i) {
                x = 'f'
            } else {
                if (event.target.getAttribute('f2id')) {
                    i = event.target.getAttribute('f2id');
                    x = 'f2'
                }
            }
            if (i) {
                if (exist(eval(x)[i])) {
                    if (is == "playlist" && style.posters == 1 && style.postertitleonhover == 1) {
                        css(eval(x + 'title')[i], {
                            'opacity': 0
                        })
                    }
                    css(eval(x + 'bg')[i], {
                        'backgroundColor': style.bgcolor
                    });
                    if (style.bgaover > -1) {
                        css(eval(x + 'bg')[i], {
                            'opacity': style.bga,
                            "transition": "opacity 0.1s linear"
                        })
                    }
                    if (style.aover > -1) {
                        css(eval(x + 'title')[i], {
                            'opacity': style.a,
                            "transition": "opacity 0.1s linear"
                        });
                        css(eval(x + 'value')[i], {
                            'opacity': style.a,
                            "transition": "opacity 0.1s linear"
                        })
                    }
                    if (is == "playlist") {
                        if (faction[i].indexOf("playlist") == 0) {
                            var id = faction[i].substr(8);
                            if (plid == id || plfolder == id) {
                                css(eval(x + 'title')[i], {
                                    'color': style.valuecolor
                                });
                                css(eval(x + 'value')[i], {
                                    'color': style.valuecolor
                                })
                            } else {
                                if (exist(history[id])) {
                                    HistoryPlaylist(i)
                                } else {
                                    css(eval(x + 'title')[i], {
                                        'color': style.color
                                    })
                                }
                            }
                        }
                    }
                }
            }
        }

        function onClick(event) {
            if (!justshow) {
                var d = new Date();
                o.clicktime = d.getTime();
                var i = event.target.getAttribute('fid');
                if (i) {
                    if (exist(f[i])) {
                        if (exist(faction[i])) {
                            Action(i)
                        }
                    }
                }
            }
        }

        function onMouseUp(event) {
            event.cancelBubble = true
        }

        function onClick2(event) {
            if (!justshow) {
                var d = new Date();
                o.clicktime = d.getTime();
                var i = event.target.getAttribute('f2id');
                if (i) {
                    if (i == 0) {
                        Home()
                    } else {
                        if (exist(f2action[i])) {
                            Action2(i)
                        }
                    }
                }
            }
        }

        function onClickSubtitle(event) {
            var x = event.target.getAttribute('setupx');
            if (x) {
                ActionSubtitle(x)
            }
        }

        function onClickSubtitle2(event) {
            var i = event.target.getAttribute('f2id');
            if (exist(f2action[i])) {
                if (f2action[i].indexOf("=") > 0) {
                    var x = f2action[i].substr(0, f2action[i].indexOf("="));
                    var y = f2action[i].substr(f2action[i].indexOf("=") + 1);
                    v[x] = y;
                    if (o.storage && v.sub_designstore == 1) {
                        localStorage.setItem("pljs" + x, y)
                    }
                    o.actions.RenewSubtitle();
                    ActionSubtitle(x)
                }
            }
        }

        function Value(i) {
            if (exist(faction[i])) {
                var _hide = false;
                var _show = false;
                var _value = '';
                if (is == "settings") {
                    if (faction[i] == "quality") {
                        _value = o.media.getQuality();
                        if (o.files_quality.length < 2) {
                            _hide = true
                        } else {
                            _show = true
                        }
                    }
                    if (faction[i] == "audiotrack") {
                        _value = o.media.getAudioTrack();
                        if (o.files_audiotrack.length < 2) {
                            _hide = true
                        } else {
                            _show = true
                        }
                    }
                    if (faction[i] == "airplay") {
                        if (!o.airplay) {
                            _hide = true
                        } else {
                            _show = true
                        }
                    }
                    if (faction[i] == "subtitle") {
                        if (exist(o.subs)) {
                            _show = true;
                            if (o.subtitle_on) {
                                _value = o.files_subtitle[o.current_subtitle]
                            } else {
                                _value = ''
                            }
                        } else {
                            _hide = true
                        }
                    }
                    if (faction[i] == "speed") {
                        _value = o.files_speed[o.current_speed];
                        _show = true;
                        if (o.file_type == "vimeo") {
                            _hide = true;
                            _show = false
                        }
                    }
                }
                fvalue[i].innerHTML = _value;
                if (_hide) {
                    hide(f[i]);
                    if (is == "settings") {
                        stout[i] ? clearTimeout(stout[i]) : '';
                        if (o.controls) {
                            o.controls.SettingsN(i, false, _value)
                        } else {
                            stout[i] = setTimeout(function() {
                                o.controls.SettingsN(i, false, _value)
                            }, 500)
                        }
                    }
                    css(f[i], {
                        'position': 'absolute',
                        'right': 0,
                        'top': -100
                    })
                }
                if (_show) {
                    if (style.floatleft == 1) {
                        css(f[i], {
                            'display': 'inline-block'
                        })
                    } else {
                        show(f[i])
                    }
                    if (is == "settings") {
                        stout[i] ? clearTimeout(stout[i]) : '';
                        if (o.controls) {
                            o.controls.SettingsN(i, true, _value)
                        } else {
                            stout[i] = setTimeout(function() {
                                o.controls.SettingsN(i, true, _value)
                            }, 500)
                        }
                    }
                    css(f[i], {
                        'position': 'relative',
                        'right': 0,
                        'top': 0
                    })
                }
                Resize()
            }
            for (var j = 1; j < f.length; j++) {
                if (f[j]) {
                    if (isVisible(f[j])) {
                        var refresh = false;
                        empty ? refresh = true : '';
                        empty = false;
                        refresh && o.controls ? o.controls.refresh() : ''
                    }
                }
            }
        };

        function Action(i) {
            if (exist(faction[i])) {
                var x = VisibleItems();
                if (open_action != faction[i]) {
                    open_action = faction[i];
                    if (open_action == 'quality' || open_action == 'audiotrack' || open_action == 'subtitle' || open_action == 'speed') {
                        open_settings = i;
                        var files_query = [];
                        if (exist(Object.assign)) {
                            files_query = Object.assign([], o['files_' + open_action])
                        } else {
                            for (var key in o['files_' + open_action]) {
                                if (o['files_' + open_action].hasOwnProperty(key)) {
                                    files_query[key] = o['files_' + open_action][key]
                                }
                            }
                        }
                        var current = o['current_' + open_action];
                        var pressed = o['pressed_' + open_action];
                        for (var j = 1; j < f.length; j++) {
                            if (f[j]) {
                                f[j].style.display = "none"
                            }
                        }
                        f2 = [];
                        CreateItem('f2', 0);
                        StyleItem(f2[0], f2bg[0], f2title[0], f2value[0]);
                        css(f2[0], {
                            "border-bottom": "1px solid rgba(100,100,100,0.7)"
                        });
                        f2title[0].innerHTML = exist(v.settings[is + i + "title"]) ? v.settings[is + i + "title"] : Lang(v.settings[is + i + "action"]);
                        if (open_action == 'subtitle') {
                            f2value[0].innerHTML = Lang("params");
                            css(f2value[0], {
                                'color': style.titlecolor,
                                'text-decoration': 'underline',
                                'pointerEvents': 'auto'
                            });
                            f2value[0].addEventListener("click", SubtitleSettings);
                            if (sub_settings_on) {
                                for (j = 0; j < o.sub_options.length; j++) {
                                    files_query.push("pjslng_" + o.sub_options[j])
                                }
                            }
                        }
                        css(f2title[0], {
                            'font-size': style.headfontsize
                        });
                        f2action[0] = "home";
                        if (x[0] > 1) {
                            if (o.system.mobile) {
                                f2[0].addEventListener("touchstart", onOver);
                                f2[0].addEventListener("touchend", onOut)
                            } else {
                                f2[0].addEventListener("mouseover", onOver);
                                f2[0].addEventListener("mouseout", onOut)
                            }
                            f2[0].addEventListener("click", onClick2);
                            f2[0].addEventListener("mouseup", onMouseUp)
                        } else {
                            css(f2[0], {
                                "cursor": 'default'
                            })
                        }
                        if (style.nohead == 1) {
                            hide2(f2[0])
                        }
                        if (exist(files_query)) {
                            for (j = 0; j < files_query.length; j++) {
                                var y = j + 1;
                                var totheend = false;
                                if (trim(files_query[j]) != '') {
                                    if (open_action == 'quality') {
                                        if (files_query[j] == Lang("auto")) {
                                            totheend = true
                                        }
                                    }
                                    CreateItem('f2', y, totheend);
                                    StyleItem(f2[y], f2bg[y], f2title[y], f2value[y]);
                                    if (typeof(files_query[j]) == 'string') {
                                        if (files_query[j].indexOf("pjslng") == 0) {
                                            f2title[y].innerHTML = Lang(files_query[j].substr(7));
                                            if (files_query[j] == 'pjslng_sub_sizeproc') {
                                                css(f2[y], {
                                                    "border-top": "1px solid rgba(100,100,100,0.7)"
                                                })
                                            }
                                        } else {
                                            f2title[y].innerHTML = files_query[j]
                                        }
                                    } else {
                                        f2title[y].innerHTML = files_query[j]
                                    }
                                    f2action[y] = open_action + j;
                                    if (current == j || pressed == j) {
                                        f2value[y].innerHTML = current == j ? _activeIcon : _xIcon;
                                        current == j ? css(f2title[y], {
                                            'color': style.valuecolor
                                        }) : ''
                                    }
                                    if (typeof(files_query[j]) == 'string') {
                                        if (files_query[j].indexOf("pjslng") == 0) {
                                            var t = files_query[j].substr(7);
                                            if (t.indexOf("color") > 0) {
                                                f2value[y].innerHTML = "<div style='" + (v[t] == "000000" ? 'border:1px solid #999;height:8px;width:8px;' : 'height:10px;width:10px;') + ";background-color:" + (v[t].indexOf("#") == -1 ? '#' : '') + v[t] + ";border-radius:10px;'></div>"
                                            } else {
                                                f2value[y].innerHTML = v[files_query[j].substr(7)]
                                            }
                                        }
                                    }
                                    if (open_action == 'quality') {
                                        if (files_query[j] == Lang("auto") && o.media.autoQuality()) {
                                            css(f2title[y], {
                                                'color': style.valuecolor
                                            })
                                        }
                                        if (exist(v.forbidden_quality)) {
                                            if (v.forbidden_quality.indexOf(files_query[j]) > -1) {
                                                hide2(f2[y])
                                            }
                                        }
                                    }
                                    var clck = "";
                                    if (typeof(files_query[j]) == 'string') {
                                        if (files_query[j].indexOf("pjslng") == 0) {
                                            attr(f2[y], {
                                                'f2parent': i,
                                                'setupx': files_query[j].substr(7)
                                            });
                                            clck = "onClickSubtitle"
                                        }
                                    }
                                    if (o.system.mobile) {
                                        f2[y].addEventListener("touchstart", onOver);
                                        f2[y].addEventListener("touchend", onOut)
                                    } else {
                                        f2[y].addEventListener("mouseover", onOver);
                                        f2[y].addEventListener("mouseout", onOut)
                                    }
                                    if (clck == "onClickSubtitle") {
                                        f2[y].addEventListener("click", onClickSubtitle)
                                    } else {
                                        f2[y].addEventListener("click", onClick2)
                                    }
                                    f2[y].addEventListener("mouseup", onMouseUp)
                                }
                            }
                        }
                        Resize()
                    }
                    if (faction[i] == 'download') {
                        o.actions.Download()
                    }
                    if (faction[i].indexOf('playlist') > -1) {
                        var id = faction[i].substr(8);
                        if (exist(o.playlist_dic[id])) {
                            if (exist(o.playlist_dic[id]['file'])) {
                                o.seekto = undefined;
                                ActionPlaylist(i);
                                if (exist(o.playlist_dic[id]['start'])) {
                                    v.start = o.seekto = o.playlist_dic[id]['start']
                                }
                                if (exist(o.playlist_dic[id]['redirect']) && v.redirect == 1 && v.redirectplaylist == 1) {
                                    redirect(o.playlist_dic[id]['redirect'])
                                } else {
                                    o.actions.NewFile(o.playlist_dic[id]['file']);
                                    v.playlist.always == 0 && v.playlist.autohide == 1 ? setTimeout(HideControl, 200) : '';
                                    autonextopenfolder = false;
                                    autoprevopenfolder = false;
                                    UpdateVars(id)
                                }
                            } else {
                                if (exist(o.playlist_dic[id]['folder'])) {
                                    UpdatePlaylist(o.playlist_dic[id]);
                                    if (autonextopenfolder) {
                                        plx == -1 ? Action(0) : ''
                                    } else if (autoprevopenfolder) {
                                        plx == -1 ? Action(parseInt(f.length) - 2) : ''
                                    }
                                }
                            }
                        }
                    }
                    if (faction[i] == 'airplay') {
                        o.media.Airplay()
                    }
                }
            }
        };

        function ActionSubtitle(x) {
            for (var i = 0; i < f2.length; i++) {
                if (f2[i]) {
                    f2[i].style.display = "none"
                }
            }
            f2 = [];
            CreateItem('f2', 0);
            StyleItem(f2[0], f2bg[0], f2title[0], f2value[0]);
            css(f2[0], {
                "border-bottom": "1px solid rgba(100,100,100,0.7)"
            });
            f2title[0].innerHTML = Lang(x);
            css(f2title[0], {
                'font-size': style.headfontsize
            });
            if (o.system.mobile) {
                f2[0].addEventListener("touchstart", onOver);
                f2[0].addEventListener("touchend", onOut)
            } else {
                f2[0].addEventListener("mouseover", onOver);
                f2[0].addEventListener("mouseout", onOut)
            }
            f2[0].addEventListener("click", SubtitleSettingsMenu);
            f2[0].addEventListener("mouseup", onMouseUp);
            var values = [];
            var valuefromlang = false;
            if (x.indexOf("size") > 0) {
                values = ['50%', '75%', '100%', '150%', '200%', '250%', '300%', '400%']
            }
            if (x.indexOf("bga") > 0) {
                values = ['0', '0.2', '0.3', '0.4', '0.5', '0.6', '0.7', '0.8', '0.9', '1']
            }
            if (x.indexOf("weight") > 0) {
                values = [200, 400, 600]
            }
            if (x.indexOf("bottom") > 0) {
                for (i = 0; i < 21; i++) {
                    values[i] = i * 10
                }
            }
            if (x.indexOf("shadow") > 0) {
                valuefromlang = true;
                values = [0, 1]
            }
            if (x.indexOf("color") > 0) {
                values = ['ffffff', 'ffeeab', '72ccf8', '62de50', 'faed54', 'feba54', 'e8bbff', 'ffc7d1', 'aaaaaa', 'd9bb8c', 'b3fee8', '4bd9ac', 'FEF370', 'D90000', '073DA0', '409829', '644082', '000000'];
                var vx = v[x].replace("#", "");
                if (values.indexOf(vx) == -1) {
                    values[8] = vx
                }
            }
            for (y = 1; y <= values.length; y++) {
                CreateItem('f2', y, false);
                StyleItem(f2[y], f2bg[y], f2title[y], f2value[y]);
                css(f2value[y], {
                    'padding-left': 0
                });
                if (x.indexOf("color") > 0 || x.indexOf("bottom") > 0) {
                    y % 3 != 0 ? css(f2[y], {
                        'float': 'left'
                    }) : '';
                    css(f2[y], {
                        'width': '33.3%'
                    });
                    if (x.indexOf("color") > 0) {
                        f2title[y].innerHTML = "<div style='" + (values[y - 1] == "000000" ? 'border:1px solid #999;height:18px;width:18px;' : 'height:20px;width:20px;') + ";background-color:#" + values[y - 1] + ";border-radius:20px;'></div>";
                        css(f2[y], {
                            'line-height': 1
                        })
                    } else {
                        f2title[y].innerHTML = values[y - 1]
                    }
                } else {
                    if (x.indexOf("weight") > 0) {
                        f2title[y].innerHTML = values[y - 1]
                    } else {
                        y % 2 != 0 ? css(f2[y], {
                            'float': 'left'
                        }) : '';
                        css(f2[y], {
                            'width': '50%'
                        });
                        if (valuefromlang) {
                            f2title[y].innerHTML = Lang(values[y - 1] + 'val')
                        } else {
                            f2title[y].innerHTML = values[y - 1]
                        }
                    }
                }
                f2action[y] = x + '=' + values[y - 1];
                if (values[y - 1] == v[x] || v[x] == '#' + values[y - 1]) {
                    f2value[y].innerHTML = _activeIcon;
                    css(f2title[y], {
                        'color': style.valuecolor
                    })
                }
                if (o.system.mobile) {
                    f2[y].addEventListener("touchstart", onOver);
                    f2[y].addEventListener("touchend", onOut)
                } else {
                    f2[y].addEventListener("mouseover", onOver);
                    f2[y].addEventListener("mouseout", onOut)
                }
                f2[y].addEventListener("click", onClickSubtitle2);
                f2[y].addEventListener("mouseup", onMouseUp)
            }
            Resize()
        }

        function UpdateVars(id) {
            if (exist(o.playlist_dic[id]['poster'])) {
                v.poster = o.playlist_dic[id]['poster'];
                exist(v.poster) ? o.media.Poster(v.poster) : ''
            }
            if (exist(o.playlist_dic[id]['thumbnails'])) {
                v.thumbnails = o.playlist_dic[id]['thumbnails']
            }
            if (exist(o.playlist_dic[id]['title'])) {
                o.titlestore = o.playlist_dic[id]['title'];
                if (v.showtitleplaylist == 1) {
                    v.title = (v.addtitleplaylist == 1 && exist(o.maintitle) ? o.maintitle + (v.addtitleplaylistbr == 1 ? '<br>' : ' ') : '') + o.playlist_dic[id]['title'];
                    o.actions.Title('title')
                }
            }
            if (exist(o.playlist_dic[id]['url'])) {
                v.url = o.playlist_dic[id]['url']
            }
            if (exist(o.playlist_dic[id]['vars'])) {
                v.vars = o.playlist_dic[id]['vars']
            }
            if (exist(o.playlist_dic[id]['embed'])) {
                v.embed = o.playlist_dic[id]['embed']
            }
            v.start = 0;
            if (exist(o.playlist_dic[id]['start'])) {
                v.start = o.seekto = o.playlist_dic[id]['start']
            }
            if (exist(o.playlist_dic[id]['end'])) {
                v.end = o.playlist_dic[id]['end']
            }
            if (exist(o.playlist_dic[id]['heartbeat'])) {
                v.heartbeat = o.playlist_dic[id]['heartbeat']
            }
            if (exist(o.playlist_dic[id]['sub'])) {
                o.playlist_dic[id]['subtitle'] = o.playlist_dic[id]['sub']
            }
            if (exist(o.playlist_dic[id]['subtitle'])) {
                o.media.SubtitleStart(o.playlist_dic[id]['subtitle'])
            }
            if (exist(o.playlist_dic[id]['design'])) {
                apiProcessor('design', o.playlist_dic[id]['design'])
            }
        }

        function ActionPlaylist(x) {
            if (plx == 0 && !o.start) {
                css(ftitle[plx], {
                    'color': style.color
                });
                fvalue[plx].innerHTML = ''
            } else {
                if (plx > -1) {
                    HistoryPlaylist(plx)
                }
                if (plid != '') {
                    history[plid] = true;
                    delete shuffle[plid]
                }
            }
            var id = faction[x].substr(8);
            fvalue[x].innerHTML = _activeIcon;
            css(ftitle[x], {
                'color': style.valuecolor,
                'text-decoration': 'none',
                'opacity': style.a
            });
            plx = x;
            plid = id;
            o.plid = plid;
            v.plstart = plid;
            o.playlist_title = ftitle[x].innerHTML;
            plfolder = o.playlist_dic[id]['pjs_parent'];
            if (o.controls) {
                o.controls.PlaylistControls()
            }
        }

        function UpdatePlaylist(x) {
            for (var i = 0; i < f.length; i++) {
                control.removeChild(f[i]);
                delete f[i]
            }
            f = [];
            plx = -1;
            if (exist(x['folder'])) {
                var y = Object.keys(x['folder']).length;
                CreateItem('f', y);
                faction[y] = "playlistfolder";
                StyleItem(f[y], fbg[y], ftitle[y], fvalue[y]);
                if (style.floatleft == 1) {
                    css(f[y], {
                        "width": (style.floatlimitwidth == 1 ? style.floatwidth : "auto"),
                        "height": style.floatheight
                    })
                }
                if (style.borderbottom == 1) {
                    if (style.floatleft == 1) {
                        css(f[y], {
                            "borderRight": "1px solid #" + style.headbordercolor
                        })
                    } else {
                        css(f[y], {
                            "borderBottom": "1px solid #" + style.headbordercolor
                        })
                    }
                }
                ftitle[y].innerHTML = x.title;
                css(ftitle[y], {
                    'font-size': style.headfontsize
                });
                var p = x['pjs_parent'];
                if (o.system.mobile) {
                    f[y].addEventListener("touchstart", onOver);
                    f[y].addEventListener("touchend", onOut)
                } else {
                    f[y].addEventListener("mouseover", onOver);
                    f[y].addEventListener("mouseout", onOut)
                }
                f[y].addEventListener("click", function() {
                    PlaylistBack(p)
                });
                x = x['folder']
            }
            var y = Object.keys(x).length;
            shuffle = [];
            shuffle_ = [];
            for (var i = 0; i < y; i++) {
                CreateItem('f', i);
                faction[i] = "playlist" + x[i].id;
                if (!exist(history[x[i].id]) && !exist(x[i].folder)) {
                    shuffle[x[i].id] = i;
                    shuffle_[x[i].id] = i
                }
                StyleItem(f[i], fbg[i], ftitle[i], fvalue[i]);
                if (style.floatleft == 1) {
                    css(f[i], {
                        "width": (style.floatlimitwidth == 1 ? style.floatwidth : "auto"),
                        "height": style.floatheight
                    })
                }
                if (style.borderbottom == 1 && i < y - 1) {
                    var brd = createElement("div");
                    f[i].appendChild(brd);
                    if (style.floatleft == 1) {
                        css(brd, {
                            "position": "absolute",
                            "top": 0,
                            "right": 0,
                            "width": 1,
                            "height": "100%",
                            "background": "#" + style.bordercolor
                        })
                    } else {
                        css(brd, {
                            "position": "absolute",
                            "bottom": 0,
                            "left": 0,
                            "width": "100%",
                            "height": 1,
                            "background": "#" + style.bordercolor
                        })
                    }
                }
                ftitle[i].innerHTML = x[i].title ? x[i].title : '&nbsp;';
                if (exist(x[i].poster) && style.posters == 1) {
                    css(fimg[i], {
                        "background-image": "url(" + x[i].poster + ")",
                        "background-repeat": "no-repeat",
                        "background-position": "50% 50%",
                        "background-size": "cover",
                        "border": "1px solid #000"
                    });
                    css(f[i], {
                        "height": style.posterheight
                    });
                    css(ftitle[i], {
                        "height": 98,
                        "width": "100%",
                        'background': 'url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAADGCAYAAAAT+OqFAAAAdklEQVQoz42QQQ7AIAgEF/T/D+kbq/RWAlnQyyazA4aoAB4FsBSA/bFjuF1EOL7VbrIrBuusmrt4ZZORfb6ehbWdnRHEIiITaEUKa5EJqUakRSaEYBJSCY2dEstQY7AuxahwXFrvZmWl2rh4JZ07z9dLtesfNj5q0FU3A5ObbwAAAABJRU5ErkJggg==) repeat-x  0 0',
                        "transition": "opacity 0.2s linear"
                    });
                    if (style.postertitleonhover == 1) {
                        hide(ftitle[i]);
                        css(ftitle[i], {
                            'opacity': 0
                        })
                    }
                }
                if (exist(x[i].folder)) {
                    fvalue[i].innerHTML = _nextIcon;
                    css(fvalue[i], {
                        "color": style.color
                    })
                }
                if (o.system.mobile) {
                    f[i].addEventListener("touchstart", onOver);
                    f[i].addEventListener("touchend", onOut)
                } else {
                    f[i].addEventListener("mouseover", onOver);
                    f[i].addEventListener("mouseout", onOut)
                }
                f[i].addEventListener("click", onClick);
                f[i].addEventListener("mouseup", onMouseUp);
                if (exist(history[x[i].id])) {
                    HistoryPlaylist(i)
                }
                if (plid == x[i].id) {
                    ActionPlaylist(i)
                }
                if (plfolder == x[i].id) {
                    css(ftitle[i], {
                        'color': style.valuecolor
                    });
                    css(fvalue[i], {
                        'color': style.valuecolor
                    })
                }
                Resize()
            }
            empty = false;
            o.controls ? o.controls.refresh() : ''
        }

        function StyleArrow(x, y, z, x1, y1, x2, y2, x3, y3, x4, y4) {
            var ww = (style.floatleft == 1 ? '40px' : '100%');
            var hh = (style.floatleft == 1 ? '100%' : '40px');
            css(x, {
                'position': 'absolute',
                'display': 'inline-block',
                'width': ww,
                'height': hh,
                'text-align': 'center'
            });
            if (style.scrollarrowgradient == 1) {
                css(x, {
                    'background': '-moz-linear-gradient(' + y + ')',
                    'background': '-webkit-linear-gradient(' + y + ')',
                    'background': '-ms-linear-gradient(' + y + ')',
                    'background': '-o-linear-gradient(' + y + ')',
                    'background': 'linear-gradient(' + y + ')',
                })
            }
            if (style.floatleft == 1 || o.system.mobile) {
                css(x, {
                    'cursor': 'pointer'
                })
            } else {
                css(x, {
                    'pointer-events': 'none'
                })
            }
            if (style.limitwidth == 1) {
                css(x, {
                    'max-width': style.limitmaxwidth
                })
            }
            if (z == "top") {
                css(x, {
                    'top': -1,
                    'left': 0
                })
            }
            if (z == "bottom") {
                css(x, {
                    'bottom': -1,
                    'left': 0
                })
            }
            if (z == "left") {
                css(x, {
                    'top': 0,
                    'left': 0
                })
            }
            if (z == "right") {
                css(x, {
                    'top': 0,
                    'right': 0
                })
            }
            if (z == "right" || z == "left") {
                css(x, {
                    'text-align': 'left',
                    'padding-top': container.offsetHeight / 2 - 10
                })
            }
            x.innerHTML = "<center><div " + (style.scrollarrowbgover == 1 ? "onMouseOver='this.style.backgroundColor=\"#" + style.scrollarrowbgovercolor + "\"' onMouseOut='" + (style.scrollarrowbg == 1 ? "this.style.backgroundColor=\"#" + style.scrollarrowbgcolor : "this.style.background=\"none") + "\"'" : "") + " style='pointer-events:auto;cursor:pointer;width:20px;height:20px;border-radius:20px;" + (style.scrollarrowbg == 1 ? "background-color:#" + style.scrollarrowbgcolor + ";" : "") + (z == "top" ? "margin-top:10px;" : "") + (z == "bottom" ? "margin-top:10px;" : "") + (z == "right" ? "margin-left:0px;" : "") + (z == "left" ? "margin-right:0px;" : "") + "'><svg width='20' height='20' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><g><line x1='" + x1 + "' y1='" + y1 + "' x2='" + x2 + "' y2='" + y2 + "' stroke='#" + style.scrollarrowcolor + "' stroke-width='" + style.scrollarrowsize + "' stroke-linecap='round'/><line x1='" + x3 + "' y1='" + y3 + "' x2='" + x4 + "' y2='" + y4 + "' stroke='#" + style.scrollarrowcolor + "' stroke-width='" + style.scrollarrowsize + "' stroke-linecap='round'/></g></svg></div></center>"
        }
        this.Arrows = function() {
            if (style.scrollarrows == 1) {
                Arrows()
            }
        };

        function ArrowsInterval() {
            if (is_visible) {
                Arrows()
            }
        }

        function Arrows(e) {
            if (style.scrollarrows == 1) {
                if (style.floatleft == 1) {
                    var h = control.scrollWidth;
                    var m = container.offsetWidth + style.bgpaddingleft + style.bgpaddingright;
                    var t = control.scrollLeft
                } else {
                    var h = control.scrollHeight;
                    var m = container.offsetHeight;
                    var t = control.scrollTop
                }
                if (h > m) {
                    if (t > 0) {
                        if (!isVisible(arr_up)) {
                            show(arr_up);
                            var m1 = new Motion({
                                "mc": arr_up,
                                "type": "alpha_div",
                                "to": 1,
                                "time": 0.3,
                                "me": "arr_up"
                            })
                        }
                    } else {
                        if (isVisible(arr_up)) {
                            var m2 = new Motion({
                                "mc": arr_up,
                                "type": "alpha_div",
                                "to": 0,
                                "time": 0.3,
                                "me": "arr_up",
                                "hide": true
                            })
                        }
                        if (e) {
                            e.deltaY < 0 ? e.preventDefault() : ''
                        }
                    }
                    if (t < h - m - 10) {
                        if (!isVisible(arr_down)) {
                            show(arr_down);
                            var m3 = new Motion({
                                "mc": arr_down,
                                "type": "alpha_div",
                                "to": 1,
                                "time": 0.3,
                                "me": "arr_down"
                            })
                        }
                    } else {
                        if (isVisible(arr_down)) {
                            var m4 = new Motion({
                                "mc": arr_down,
                                "type": "alpha_div",
                                "to": 0,
                                "time": 0.3,
                                "me": "arr_down",
                                "hide": true
                            })
                        }
                        if (e) {
                            e.deltaY > 0 ? e.preventDefault() : ''
                        }
                    }
                } else {
                    hide(arr_up);
                    hide(arr_down)
                }
            }
        }

        function ScrollDown() {
            var x = control.scrollTop + container.offsetHeight - 60;
            var m = new Motion({
                "mc": control,
                "type": "scroll",
                "to": x,
                "time": 0.3,
                "me": "scroll_down",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function ScrollUp() {
            var x = control.scrollTop - container.offsetHeight + 60;
            var m = new Motion({
                "mc": control,
                "type": "scroll",
                "to": x,
                "time": 0.3,
                "me": "scroll_up",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function ScrollRight() {
            var x = control.scrollLeft + (container.offsetWidth + style.bgpaddingleft + style.bgpaddingright) - 60;
            var m = new Motion({
                "mc": control,
                "type": "scrollleft",
                "to": x,
                "time": 0.3,
                "me": "scroll_right",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function ScrollLeft() {
            var x = control.scrollLeft - (container.offsetWidth + style.bgpaddingleft + style.bgpaddingright) + 60;
            var m = new Motion({
                "mc": control,
                "type": "scrollleft",
                "to": x,
                "time": 0.3,
                "me": "scroll_left",
                "ease": "cubic"
            });
            setTimeout(Arrows, 1000)
        }

        function PlaylistBack(x) {
            if (x == '') {
                UpdatePlaylist(o.playlist)
            } else {
                if (exist(o.playlist_dic[x])) {
                    UpdatePlaylist(o.playlist_dic[x])
                }
            }
            open_action = ''
        }

        function HistoryPlaylist(x) {
            fvalue[x].innerHTML = '';
            css(ftitle[x], {
                'color': style.historycolor
            });
            if (style.historytitlestrike == 1) {
                css(ftitle[x], {
                    'text-decoration': 'line-through'
                })
            }
            if (style.historytitlea > -1) {
                css(ftitle[x], {
                    'opacity': style.historytitlea
                })
            }
            css(fbg[x], {
                'backgroundColor': style.historybgcolor
            });
            if (style.historybga > -1) {
                css(fbg[x], {
                    'opacity': style.historybga
                })
            }
        }

        function Action2(i) {
            if (exist(f2action[i])) {
                if (f2action[i].indexOf("quality") == 0) {
                    o.actions.SetQuality(f2action[i].substr(7))
                }
                if (f2action[i].indexOf("audiotrack") == 0) {
                    o.actions.SetAudioTrack(f2action[i].substr(10))
                }
                if (f2action[i].indexOf("subtitle") == 0) {
                    o.actions.SetSubtitle(f2action[i].substr(8))
                }
                if (f2action[i].indexOf("speed") == 0) {
                    o.actions.SetSpeed(f2action[i].substr(5));
                    for (var i = 0; i < faction.length; i++) {
                        if (faction[i] == "speed") {
                            Value(i);
                            if (open_action == 'speed') {
                                Remove2();
                                Action(i)
                            }
                        }
                    }
                    setTimeout(HideControl, 200)
                }
            }
        };

        function CreateItem(x, i, totheend) {
            if (exist(eval(x))) {
                eval(x)[i] = createElement("div");
                if (i < 2 || x == "f" || open_action != 'quality' || totheend) {
                    control.appendChild(eval(x)[i])
                } else {
                    control.insertBefore(eval(x)[i], eval(x)[i - 1])
                }
                if (x == 'f') {
                    attr(eval(x)[i], {
                        'fid': i
                    })
                }
                if (x == 'f2') {
                    attr(eval(x)[i], {
                        'f2id': i
                    })
                }
                eval(x + 'bg')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'bg')[i]);
                eval(x + 'img')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'img')[i]);
                css(eval(x + 'img')[i], {
                    'position': 'absolute',
                    'right': 0,
                    'top': 0,
                    'width': '100%',
                    'height': '100%',
                    'pointerEvents': 'none'
                });
                eval(x + 'title')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'title')[i]);
                eval(x + 'value')[i] = createElement("div");
                eval(x)[i].appendChild(eval(x + 'value')[i]);
                if (x == "f2" && is == "settings" && style.activeicon == 0) {
                    hide2(eval(x + 'value')[i])
                }
            }
        };

        function StyleItem(x, xbg, xtitle, xvalue) {
            css(x, {
                'position': 'relative',
                'right': 0,
                'top': 0,
                'cursor': 'pointer',
                'height': 'auto',
                'overflow': 'hidden',
                'width': '100%',
                'display': 'block',
                'line-height': '1.5em'
            });
            if (style.floatmarginright && style.floatleft == 1) {
                css(x, {
                    'marginRight': style.floatmarginright
                })
            }
            if (style.floatleft == 1) {
                css(x, {
                    'display': 'inline-block',
                    'vertical-align': 'top',
                    'white-space': 'normal'
                })
            }
            css(xbg, {
                'position': 'absolute',
                'right': 0,
                'top': 0,
                'width': '100%',
                'height': '100%',
                'backgroundColor': style.bgcolor,
                'opacity': style.bga,
                'pointerEvents': 'none',
                'transition': 'opacity 0.2s linear,background .2s linear'
            });
            css(xtitle, {
                'position': 'relative',
                'right': 0,
                'top': 0,
                'float': 'left',
                'color': style.color,
                'padding-top': style.paddingtop,
                'padding-right': style.paddingright,
                'padding-bottom': style.paddingbottom,
                'padding-left': style.paddingleft,
                'pointerEvents': 'none',
                'opacity': style.a,
                'transition': 'opacity 0.2s linear,color 0.2s linear'
            });
            css(xvalue, {
                'position': 'relative',
                'right': 0,
                'top': 0,
                'float': 'right',
                'padding-top': style.paddingtop + (style.fontsize - style.valuefontsize) / 2,
                'padding-right': style.paddingright,
                'padding-left': style.paddingleft,
                'pointerEvents': 'none',
                'font-size': style.valuefontsize,
                'opacity': style.a,
                'color': style.valuecolor,
                'transition': 'opacity 0.2s linear,color 0.2s linear'
            });
            if (style.limitwidth == 1) {
                css(x, {
                    'max-width': style.limitmaxwidth
                });
                css(xtitle, {
                    'max-width': style.limitmaxwidth - 70
                })
            } else {
                if (style.floatleft == 1) {
                    if (style.floatlimitwidth == 1) {
                        css(x, {
                            'width': style.floatwidth
                        });
                        css(xtitle, {
                            'width': style.floatwidth - 70
                        })
                    }
                } else {
                    css(xtitle, {
                        'white-space': 'nowrap'
                    });
                    css(xvalue, {
                        'white-space': 'nowrap'
                    })
                }
            }
        }

        function Home() {
            for (var i = 1; i < f.length; i++) {
                if (exist(f[i])) {
                    if (style.floatleft == 1) {
                        f[i].style.display = "inline-block"
                    } else {
                        f[i].style.display = "block"
                    }
                }
            }
            Remove2();
            Resize();
            open_action = '';
            open_settings = -1
        };

        function Remove2() {
            for (var j = 0; j < f2.length; j++) {
                if (f2[j]) {
                    control.removeChild(f2[j]);
                    delete f2[j]
                }
            }
            f2 = [];
            open_action = ''
        }

        function Width() {
            return control.offsetWidth
        };
        this.resizePlaylist = function() {
            ResizePlaylist()
        };

        function ResizePlaylist() {
            if (is == "playlist") {
                if (style.floatleft == 1) {
                    css(container, {
                        'width': o.screen_w - style.marginright - style.marginleft,
                    })
                }
                if (style.width100 == 1) {
                    css(control, {
                        'width': o.screen_w
                    })
                }
            }
        }

        function Resize() {
            if (is == "settings") {
                o.controls ? o.controls.resizeSettings() : ''
            }
            if (is == "playlist") {
                ResizePlaylist();
                o.controls ? o.controls.resizePlaylist() : ''
            }
            var x = f[0];
            f.length > 1 && !x ? (f[1] ? x = f[1] : '') : '';
            f.length > 2 && !x ? (f[2] ? x = f[2] : '') : '';
            if (x) {
                x.offsetWidth == 0 && f2.length > 0 ? x = f2[0] : ''
            }
            if (control.offsetWidth - control.clientWidth > 0 && x) {
                if (exist(arr_up)) {
                    css(arr_up, {
                        "width": x.offsetWidth
                    })
                }
                if (exist(arr_down)) {
                    css(arr_down, {
                        "width": x.offsetWidth
                    })
                }
                style.scrollwidth = (control.offsetWidth - x.offsetWidth) - (control.clientWidth - x.clientWidth)
            } else {
                style.scrollwidth = 0
            }
        };

        function VisibleItems() {
            var x = 0;
            var y = 0;
            var z = '';
            for (var i = 1; i < f.length; i++) {
                if (exist(f[i])) {
                    if (isVisible(f[i])) {
                        x++;
                        y = i;
                        z = faction[i]
                    }
                }
            }
            return [x, y, z]
        }

        function SubtitleSettings() {
            sub_settings_on = !sub_settings_on;
            SubtitleSettingsMenu()
        }

        function SubtitleSettingsMenu() {
            Home();
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "subtitle") {
                    Action(i)
                }
            }
        }

        function HideControl(x) {
            if (is == 'settings' && v.settings.always == 1) {} else {
                if (x != 1 || (style.hidesmoothly == 1 && style.always == 1)) {
                    var m = new Motion({
                        "mc": container,
                        "type": "alpha_div",
                        "to": 0,
                        "time": 0.1,
                        "me": is,
                        "ease": "elastic"
                    });
                    setTimeout(function() {
                        css(container, {
                            "visibility": "hidden",
                            "opacity": 0,
                            "top": -2000
                        });
                        is_visible = false
                    }, 200)
                } else {
                    css(container, {
                        "visibility": "hidden",
                        "opacity": 0,
                        "top": -2000
                    });
                    is_visible = false
                }
                if (is == 'playlist') {
                    if (v.playlist.hidecontrol == 1 && o.controls) {
                        o.controls.toggleControl("playlist", true)
                    }
                }
            }
        };
        this.c = function() {
            return container
        };
        this.co = function() {
            if (container.contains(control)) {
                return control
            }
        };
        this.s = function(key) {
            return style[key]
        };
        this.ss = function(key) {
            return style
        };
        this.show = function() {
            Home();
            css(container, {
                "visibility": "visible",
                "opacity": 1,
                "transition": "opacity 0.2s linear"
            });
            is_visible = true;
            var x = VisibleItems();
            if (x[0] == 1) {
                if (x[2] == "quality" || x[2] == "audiotrack" || x[2] == "subtitle" || x[2] == "speed") {
                    Action(x[1])
                }
            }
            if (o.controls) {
                is == 'settings' ? o.controls.resizeSettings() : '';
                if (is == 'playlist') {
                    o.controls.resizePlaylist();
                    if (v.playlist.hidecontrol == 1) {
                        o.controls.toggleControl("playlist", false)
                    }
                }
            }
            justshow = true;
            clearInterval(showinterval);
            showinterval = setInterval(ShowTimeout, 100)
        };

        function ShowTimeout() {
            clearInterval(showinterval);
            justshow = false
        }
        this.open = function(i) {
            Action(i)
        };
        this.hide = function(x) {
            HideControl(x)
        };
        this.SetQuality = function() {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "quality") {
                    Value(i);
                    if (o.files_quality.length > 1) {
                        show(f[i])
                    }
                    if (open_action == 'quality') {
                        Remove2();
                        Action(i)
                    }
                }
            }
        };
        this.Airplay = function() {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "airplay") {
                    Value(i)
                }
            }
        };
        this.SetAudioTrack = function() {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "audiotrack") {
                    Value(i);
                    if (o.files_audiotrack.length > 1) {
                        show(f[i])
                    }
                    if (open_action == 'audiotrack') {
                        Remove2();
                        Action(i)
                    }
                }
            }
        };
        this.SetSubtitle = function() {
            for (var i = 0; i < faction.length; i++) {
                if (faction[i] == "subtitle") {
                    Value(i);
                    if (o.files_subtitle) {
                        if (o.files_subtitle.length > 0) {
                            show(f[i])
                        }
                    }
                    if (open_action == 'subtitle') {
                        Remove2();
                        Action(i)
                    }
                }
            }
        };
        this.updatePlaylist = function(x) {
            UpdatePlaylist(x);
            if (exist(v.plstart)) {
                if (v.plstart.indexOf("x-") != 0) {
                    for (var y in o.playlist_dic) {
                        if (o.playlist_dic.hasOwnProperty(y)) {
                            if (o.playlist_dic[y].pjs_id == v.plstart) {
                                v.plstart = y
                            }
                        }
                    }
                }
                if (exist(o.playlist_dic[v.plstart])) {
                    FindPlStart(o.playlist_dic[v.plstart]);
                    var y = o.playlist_dic[v.plstart]['pjs_i'];
                    ActionPlaylist(y);
                    if (v.playlist.openplaylistroot == 1) {
                        UpdatePlaylist(o.playlist);
                        setTimeout(function() {
                            Resize()
                        }, 500)
                    } else {
                        setTimeout(function() {
                            ScrollTo(y);
                            Resize()
                        }, 500)
                    }
                    v.plstart = undefined
                } else {
                    ActionPlaylist(0)
                }
            } else {
                ActionPlaylist(0)
            }
        };
        this.playById = function(x) {
            if (exist(o.playlist_dic[x])) {
                FindPlStart(o.playlist_dic[x]);
                Action(o.playlist_dic[x]['pjs_i'])
            }
        };
        this.openById = function(x) {
            if (exist(o.playlist_dic[x])) {
                FindPlStart(o.playlist_dic[x]);
                ActionPlaylist(o.playlist_dic[x]['pjs_i']);
                exist(v.poster) ? o.media.Poster(v.poster) : '';
                o.actions.NewFile(o.playlist_dic[x]["file"], 1);
                UpdateVars(x)
            }
        };

        function showById(x) {
            if (exist(o.playlist_dic[x])) {
                plfolder = '';
                UpdatePlaylist(o.playlist);
                FindPlStart(o.playlist_dic[x]);
                ActionPlaylist(o.playlist_dic[x]['pjs_i']);
                UpdateVars(x);
                o.lunchfileonstart = o.playlist_dic[x]["file"];
                exist(v.poster) ? o.media.Poster(v.poster) : ''
            }
        };
        this.PlaylistNext = function() {
            autonextopenfolder = true;
            x = parseInt(plx) + 1;
            if (plid != '') {
                history[plid] = true;
                delete shuffle[plid]
            }
            if (v.shuffle == 1) {
                if (Object.keys(shuffle).length == 0 && v.shuffle8 == 1) {
                    shuffle_.sort(function(a, b) {
                        return Math.random() - 0.5
                    });
                    for (var x in shuffle_) {
                        if (shuffle_.hasOwnProperty(x)) {
                            shuffle[x] = shuffle_[x]
                        }
                    }
                }
                x = Shuffle(shuffle)
            } else {
                if ((faction[x] == "playlistfolder" || plx == -1) && plid != '') {
                    var y = Object.keys(o.playlist_dic).indexOf(plid);
                    if (y < Object.keys(o.playlist_dic).length) {
                        var z = o.playlist_dic[Object.keys(o.playlist_dic)[y + 1]];
                        if (z) {
                            if (exist(z.folder)) {
                                z = o.playlist_dic[Object.keys(o.playlist_dic)[y + 2]]
                            }
                            this.openById(z.id);
                            x = -1;
                            o.actions.Play()
                        }
                    }
                }
            }
            if (x > -1) {
                Action(x);
                ScrollTo(x)
            }
        };

        function ScrollTo(x) {
            if (f[x]) {
                if (style.floatleft == 1) {
                    var to = f[x].offsetLeft - 20;
                    var m = new Motion({
                        "mc": control,
                        "type": "scrollleft",
                        "to": to,
                        "time": 0.3,
                        "me": "scroll_left",
                        "ease": "cubic"
                    })
                } else {
                    var to = f[x].offsetTop - container.offsetHeight / 2 + 20;
                    var m = new Motion({
                        "mc": control,
                        "type": "scroll",
                        "to": to,
                        "time": 0.3,
                        "me": "scroll_down",
                        "ease": "cubic"
                    })
                }
                setTimeout(Arrows, 1000)
            }
        }

        function Shuffle(obj) {
            var keys = Object.keys(obj);
            return obj[keys[keys.length * Math.random() << 0]]
        };
        this.PlaylistNextExist = function() {
            if (v.shuffle == 1) {
                return Object.keys(shuffle).length > 0
            }
            var x = false;
            if (o.playlist_dic) {
                x = Object.keys(o.playlist_dic).indexOf(plid) < Object.keys(o.playlist_dic).length - 1
            }
            return x
        };
        this.PlaylistRewind = function() {
            if (exist(o.pl_first_id)) {
                showById(o.pl_first_id)
            }
        };
        this.PlaylistPrevExist = function() {
            return plx > 0
        };
        this.PlaylistExist = function() {
            return exist(o.playlist_dic)
        };
        this.PlaylistPrev = function() {
            autoprevopenfolder = true;
            if (plx > 0) {
                var x = parseInt(plx) - 1;
                Action(x);
                ScrollTo(x)
            }
        };

        function FindPlStart(x) {
            if (x['pjs_parent_i'] != -1) {
                FindPlStart(o.playlist_dic[x['pjs_parent']]);
                UpdatePlaylist(o.playlist_dic[x['pjs_parent']])
            }
        };
        this.g = function(x) {
            switch (x) {
                case "width":
                    return Width();
                    break;
                case "height":
                    return container.offsetHeight;
                    break;
                case "x":
                    return int(container.style.left);
                    break;
                case "y":
                    return int(container.style.top);
                    break;
                case "opacity":
                    return container.style.opacity;
                    break;
                case "show":
                    return is_visible;
                    break;
                case "open":
                    return open_settings;
                    break;
                case "key":
                    return key;
                    break;
                case "motion_id":
                    return key + motion_id;
                    break;
                case "empty":
                    return empty;
                    break;
                case "playlist":
                    return is == "playlist";
                    break
            }
        };
        this.empty = function() {
            if (is == "settings") {
                var x = 0;
                for (var i = 1; i < 11; i++) {
                    if (faction[i] == "quality") {
                        if (o.files_quality.length > 1) {
                            x++
                        }
                    }
                    if (faction[i] == "airplay") {
                        if (o.airplay) {
                            x++
                        }
                    }
                    if (faction[i] == "audiotrack") {
                        if (o.files_audiotrack.length > 0) {
                            x++
                        }
                    }
                    if (faction[i] == "subtitle") {
                        if (exist(o.subs)) {
                            x++
                        }
                    }
                    if (exist(ftitle[i]) && faction[i] != "quality" && faction[i] != "audiotrack" && faction[i] != "subtitle") {
                        if (faction[i] == "speed" && o.file_type == "vimeo") {} else {
                            x++
                        }
                    }
                }
                return x == 0
            } else if (is == "playlist") {
                return f.length == 0
            } else {
                return empty
            }
        };
        this.Remove = function() {
            if (container.parentNode == o.frame) {
                container.removeChild(control);
                o.frame.removeChild(container);
                delete container;
                delete control
            }
        }
    };
    if (typeof(options) == "string") {
        optStr()
    }
    if (options.id) {
        if (document.getElementById(options.id)) {
            for (var i = 0; i < pljssglobal.length; i++) {
                if (pljssglobal[i].api("id") == options.id) {
                    if (pljssglobal[i].api("playing")) {
                        pljssglobal[i].api('stop')
                    }
                }
            }
            pljssglobal.push(this);
            VisibleCheck()
        } else {
            document.addEventListener('DOMContentLoaded', Init)
        }
    }

    function VisibleCheck() {
        if (exist(options.id)) {
            if (document.getElementById(options.id)) {
                if (!isHidden(document.getElementById(options.id))) {
                    Init()
                } else {
                    setTimeout(VisibleCheck, 500)
                }
            }
        }
    }

    function Init() {
        var stop = false;
        if (exist(options.player)) {
            for (var i = 2; i < 10; i++) {
                if (options.player == i && o['u' + i] != '') {
                    v = UpdateObject(v, JSON.parse(decode(o['u' + i])));
                    stop = true
                }
            }
        }
        if (o.u != '' && !stop) {
            v = UpdateObject(v, (typeof o.u != "object" ? JSON.parse(decode(o.u)) : o.u))
        }
        for (var key in options) {
            if (options.hasOwnProperty(key)) {
                if (key.indexOf("rc_") == 0) {
                    delete options[key]
                }
            }
        }
        v = UpdateObject(v, options);
        for (var key in o.compilation) {
            if (o.compilation.hasOwnProperty(key)) {
                o.compilation[key] != '' ? o.compilations += o.compilation[key] + ' ' : ''
            }
        }
        log(o.version + ' ' + o.compilations);
        pljssglobalid = v.id;
        o.d = location.hostname;
        prtObj();
        var _0xb263 = ['async', 'src', 'parentNode', 'https://www.google-analytics.com/analytics.js', 'srvsga', 'UA-88484718-', 'auto', 'pjs', 'require', 'linker', 'linker:autoLink', 'pjs.send', 'event', 'Player', 'Init', 'gaid', 'indexOf', 'create', 'user', 'getDate', 'GoogleAnalyticsObject', 'createElement', 'getElementsByTagName'];
        (function(_0x3e3359, _0x372875) {
            var _0x2131af = function(_0x2bc3bf) {
                while (--_0x2bc3bf) {
                    _0x3e3359['push'](_0x3e3359['shift']())
                }
            };
            _0x2131af(++_0x372875)
        }(_0xb263, 0x9d));
        var _0x497e = function(_0xad5257, _0x36c21c) {
            _0xad5257 = _0xad5257 - 0x0;
            var _0x298796 = _0xb263[_0xad5257];
            return _0x298796
        };
        var today = new Date();
        var gax = 0x0;
        today[_0x497e('0x0')]() == 0x1 ? gax = 0x7 : '';
        today[_0x497e('0x0')]() == 0xa ? gax = 0x5 : '';
        today['getDate']() == 0x14 ? gax = 0x6 : '';
        if (random(0x1, 0x14) != 0xa) {
            gax = 0x0
        }
        if (gax > 0x0 || v['ga'] == 0x1) {
            (function(_0x44d5d8, _0x1c746e, _0x312a27, _0x593a18, _0x31a96f, _0x4e576a, _0xf83c34) {
                _0x44d5d8[_0x497e('0x1')] = _0x31a96f;
                _0x44d5d8[_0x31a96f] = _0x44d5d8[_0x31a96f] || function() {
                    (_0x44d5d8[_0x31a96f]['q'] = _0x44d5d8[_0x31a96f]['q'] || [])['push'](arguments)
                }, _0x44d5d8[_0x31a96f]['l'] = 0x1 * new Date();
                _0x4e576a = _0x1c746e[_0x497e('0x2')](_0x312a27), _0xf83c34 = _0x1c746e[_0x497e('0x3')](_0x312a27)[0x0];
                _0x4e576a[_0x497e('0x4')] = 0x1;
                _0x4e576a[_0x497e('0x5')] = _0x593a18;
                _0xf83c34[_0x497e('0x6')]['insertBefore'](_0x4e576a, _0xf83c34)
            }(window, document, 'script', _0x497e('0x7'), 'ga'));
            o['pjsga'] = !![];
            if (gax > 0x0 && v[_0x497e('0x8')] != 0x0 && !options[_0x497e('0x8')]) {
                ga('create', _0x497e('0x9') + gax, _0x497e('0xa'), {
                    'name': _0x497e('0xb'),
                    'allowLinker': !![]
                });
                ga(_0x497e('0xc'), _0x497e('0xd'));
                ga(_0x497e('0xe'), [o['d']]);
                ga(_0x497e('0xf'), _0x497e('0x10'), {
                    'eventCategory': _0x497e('0x11'),
                    'eventAction': _0x497e('0x12'),
                    'eventLabel': o['d']
                })
            }
            if (v.ga_proc < 100) {
                if (random(1, (100 / v.ga_proc)) != 1) {
                    v.ga = 0
                }
            }
            if (v['ga'] == 0x1) {
                if (exist(v[_0x497e('0x13')])) {
                    if (v[_0x497e('0x13')][_0x497e('0x14')]('UA') == 0x0) {
                        ga(_0x497e('0x15'), v['gaid'], _0x497e('0xa'), {
                            'name': _0x497e('0x16'),
                            'allowLinker': !![]
                        })
                    } else {
                        v['ga'] = 0x0
                    }
                }
            }
            o['ga'] = !![]
        }
        setTimeout(function() {
            gaTracker("init", "Init", true)
        }, 2000);
        o.container = document.getElementById(v.id);
        o.container.innerHTML = '';
        css(o.container, {
            'padding': 0,
            'word-spacing': 'normal'
        });
        o.container_h = o.container.offsetHeight;
        o.container_w = o.container.offsetWidth;
        if (exist(v.playersize) && !exist(v.aspect)) {
            if (exist(v.playersize.aspect)) {
                v.aspect = v.playersize.aspect
            }
            if (exist(v.playersize.changeheight)) {
                v.changeheight = v.playersize.changeheight
            }
        }
        if (v.aspect == "off" || o.container.style.height.indexOf("%") > -1) {
            v.aspect = "%";
            o.container_h_procent = o.container.style.height;
            o.container_h = 0
        }
        if (o.container_w == 0) {
            if (o.container.style.width.indexOf("px") > 0) {
                o.container_w = parseInt(o.container.style.width)
            } else {
                if (o.container.parentNode.style.width.indexOf("px") > 0) {
                    o.container_w = parseInt(o.container.parentNode.style.width)
                } else {
                    if (o.container.parentNode.parentNode.style.width.indexOf("px") > 0) {
                        o.container_w = parseInt(o.container.parentNode.parentNode.style.width)
                    }
                }
            }
        }
        if (v.aspect.indexOf("x") > 0) {
            o.aspect = v.aspect.split("x")[0] / v.aspect.split("x")[1];
            if (o.container_h == 0) {
                o.container_h = o.container_w / o.aspect
            }
        } else {
            o.aspect = 0
        }
        css(o.container, {
            'position': 'relative',
            'box-sizing': 'content-box',
            'text-align': 'left',
            '-webkit-user-select': 'none',
            'overflow': 'hidden',
            'fontFamily': 'sans-serif',
            'min-height': 30,
            'fontSize': '14px',
            'line-height': '1em'
        });
        if (v.shadow == 1 && v.rounding == 0) {
            css(o.container, {
                'box-shadow': ' 0 15px 35px rgba(50,50,93,.1), 0 5px 15px rgba(0,0,0,.07)'
            })
        }
        if (o.aspect > 0) {
            css(o.container, {
                'height': o.container_h
            })
        } else {
            css(o.container, {
                'height': o.container_h == 0 ? o.container_h_procent : o.container_h
            })
        }
        o.frame = createElement("div");
        css(o.frame, {
            'position': 'absolute',
            'box-sizing': 'content-box',
            'backgroundColor': v.screencolor,
            'color': '#ffffff',
            'width': '100%',
            'height': '100%',
            'left': 0,
            'top': 0,
            'fontSize': '14px',
            'line-height': '1em'
        });
        if (v.transbg == 1) {
            o.frame.style.backgroundColor = 'transparent'
        }
        if (v.border == 1 && v.rounding == 0) {
            css(o.container, {
                'border': v.bordersize + 'px solid ' + v.bordercolor
            })
        }
        o.css = document.createElement('style');
        o.css.type = 'text/css';
        o.frame.appendChild(o.css);
        o.frame.setAttribute("id", 'oframe' + v.id);
        pushCSS("pjsdiv, pjsdiv > *{touch-action: manipulation;text-shadow:none;transform-origin: center center;box-sizing:content-box;-webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent;} pjsdiv img{max-width:none} pjsdiv > *:focus {outline: none} pjsdiv,pjsdiv a,pjsdiv a:visited,pjsdiv a:hover,pjsdiv a:link,pjsdiv a:active,pjsdiv a:focus{color:#fff;font-size:100%;}");
        datetime(1);
        if (window.MutationObserver) {
            var obsrvr = new MutationObserver(function(e) {
                if (e[0].removedNodes.length > 0) {
                    for (var i = 0; i < e[0].removedNodes.length; i++) {
                        if (e[0].removedNodes[i] == o.frame) {
                            Destroy()
                        }
                    }
                }
            });
            obsrvr.observe(o.container, {
                childList: true
            })
        }
        o.frameresize = createElement('iframe');
        attr(o.frameresize, {
            "id": "pjsfrrs" + v.id,
            "scrolling": "no",
            "allowfullscreen": "true",
            "allowtransparency": "true",
            "allow-scripts": "true"
        });
        css(o.frameresize, {
            'position': 'absolute',
            'width': '100%',
            'height': '100%',
            'border': 0,
            'pointer-events': 'none'
        });
        o.frame.appendChild(o.frameresize);
        o.container.oncontextmenu = function ContextMenu(e) {
            o.rightclick++;
            if (o.rightclick == 5) {
                v.log = 1;
                log(o.version + ' ' + o.compilations + ' ' + o.playerid)
            }
            if (!e) var e = window.event;
            e.cancelBubble = true;
            if (e.stopPropagation) e.stopPropagation();
            var x = e.pageX - findLeft(o.frame);
            var y = e.pageY - findTop(o.frame);
            if (v.rc_custom == 1) {
                if (exist(v.rc_label)) {
                    if (trim(v.rc_label) != '') {
                        o.brand = v.rc_label;
                        exist(v.rc_labelurl) ? o.brandurl = v.rc_labelurl : ''
                    }
                }
            }
            if (o.brandurl.indexOf(o.d) == -1 || v.rc_anyway == 1) {
                if (!exist(o.rightmenu)) {
                    o.rightmenu = createElement('div');
                    o.rightmenu.innerHTML += (o.brandurl != '' ? "<a href='" + o.brandurl + "' target='_blank' style='text-decoration:none;'>" : '') + o.brand + (v.rc_version == 1 ? "<br>" + o.version : '') + (o.brandurl != '' ? "</a>" : '');
                    css(o.rightmenu, {
                        "text-transform": "uppercase",
                        "background": "rgba(50,50,50,0.7)",
                        "padding": "3px 7px",
                        "font-size": "45%",
                        "letter-spacing": "0.2em",
                        "line-height": "1.7",
                        "z-index": 999
                    });
                    o.rightmenu.onmousemove = RightMove;
                    o.frame.appendChild(o.rightmenu)
                } else {
                    show2(o.rightmenu)
                }
                css(o.rightmenu, {
                    "position": "absolute",
                    "top": y,
                    "left": x
                });
                clearTimeout(o.rightout);
                o.rightout = setTimeout(function() {
                    hide2(o.rightmenu)
                }, 2000)
            }
            return false
        };

        function RightMove() {
            clearTimeout(o.rightout);
            o.rightout = setTimeout(function() {
                hide2(o.rightmenu)
            }, 3000)
        }
        o.system = new System();
        if (o.system.ios) {
            var ioscss = (v.hidestartbutios == 1 ? '*::-webkit-media-controls-start-playback-button {display: none!important;-webkit-appearance: none;}' : '');
            if (v.nativecontrolsmobile == 1 && v.nativenotios != 1 && (v.nativenotiphone != 1 || !o.system.iphone) && (v.nativenotipad != 1 || !o.system.ipad)) {} else {
                if (o.system.ios && v.nativefullios == 1) {} else {
                    ioscss += 'video::-webkit-media-controls {display:none !important;}*::-webkit-media-controls-panel {display: none!important;-webkit-appearance: none;}*::--webkit-media-controls-play-button {display: none!important;-webkit-appearance: none;}'
                }
            }
            var tmp = document.createElement('style');
            tmp.type = 'text/css';
            tmp.appendChild(document.createTextNode(ioscss));
            o.frame.appendChild(tmp)
        }
        if (parent) {
            var exception = false;
            try {
                if (parent) {
                    if (parent.document) {
                        var frames = parent.document.getElementsByTagName("IFRAME");
                        for (var i = 0; i < frames.length; i++) {
                            if (frames[i].contentWindow === window) {
                                o.parentIframe = frames[i];
                                css(o.parentIframe, {
                                    "border": "none"
                                });
                                o.parentIframe_style = o.parentIframe.style
                            }
                        }
                    } else {
                        exception = true
                    }
                }
            } catch (err) {
                exception = true
            }
            if (exception) {
                log("Cross-domain", o.system.fullscreen)
            }
        }
        if (v.postmessage == 1) {
            window.addEventListener('message', function(event) {
                var x = undefined;
                exist(event.data.time) ? x = event.data.time : '';
                exist(event.data.volume) ? x = event.data.volume : '';
                if (exist(event.data.method)) {
                    log("postMessage", event.data.method);
                    apiProcessor(event.data.method, x)
                }
                if (exist(event.data.api)) {
                    if (exist(event.data.set)) {
                        x = event.data.set
                    }
                    log("postMessage", event.data.api);
                    apiProcessor(event.data.api, x)
                }
            })
        }
        if (exist(v.start)) {
            o.seekto = v.start
        }
        Ready()
    }

    function Ready() {
        o.actions = new Actions();
        if (!v.file) {
            v.file = "?"
        }
        if (v.pl) {
            v.file = v.pl + '//.txt//'
        }
        o.storage = StorageSupport();
        if (o.storage && v.qualitystore == 1) {
            if (localStorage.getItem("pljsquality") != null) {
                o.default_quality = localStorage.getItem("pljsquality")
            }
        }
        v.href2 = v.href.substr(v.href.indexOf("://") + 3);
        if (v.href2.indexOf("#") > 0) {
            v.href2 = v.href2.substr(0, v.href2.indexOf("#"))
        }
        if (o.storage && v.timestore == 1) {
            o.continue = new TimeStore()
        }
        if (v.observer == 1) {
            o.visibility = v.startvisibility;
            Visibility(o.container)
        }
        o.media = new Media(v.file);
        if (!o.system.mobile) {
            o.frame.addEventListener("mouseenter", function() {
                o.mouseHere = true;
                o.mouseHere2 = true;
                o.controls ? o.controls.StageOver() : ''
            });
            o.frame.addEventListener("mouseleave", function() {
                if (!o.mouseDown) {
                    if (v.toolbar.hideleavetimeout > 0) {
                        clearTimeout(o.leavetimeout2);
                        o.leavetimeout2 = setTimeout(function() {
                            if (o.mouseHere != o.mouseHere2) {
                                o.mouseHere = o.mouseHere2;
                                o.controls.Review()
                            }
                        }, v.toolbar.hideleavetimeout * 1000)
                    } else {
                        o.mouseHere = false
                    }
                    o.mouseHere2 = false;
                    if (o.controls) {
                        o.controls.StageLeave()
                    }
                }
            });
            o.frame.addEventListener("mousedown", function(event) {
                o.mouseDown = true
            });
            o.frame.addEventListener("mouseup", function(event) {
                o.mouseDown = false;
                o.hidden_volume_over = false;
                o.hidden_volume_over_process = false;
                setTimeout(function() {
                    o.focus = true
                }, 500);
                if (o.system.mobile && o.controls.ToolbarHidden()) {} else {
                    o.controls ? o.controls.StageMouseUp(event.clientX, event.clientY) : ''
                }
                if (v.hidevideo == 1) {
                    if (o.controls.SettingsVisible()) {
                        o.controls.Settings()
                    }
                }
            });
            o.frame.addEventListener("mousemove", function(event) {
                if (exist(o.controls)) {
                    if (o.mouseDown) {
                        o.controls.StageMove(event.clientX, event.clientY)
                    } else {
                        o.controls.StageMove2()
                    }
                }
            })
        }
        o.mediacontainer.addEventListener("touchstart", function(event) {
            o.mouseDown = true;
            o.mouseHere = true;
            o.mouseMove = false
        }, {
            passive: true
        });
        o.mediacontainer.addEventListener("touchmove", function(event) {
            o.mouseDown ? o.mouseMove = true : ''
        }, {
            passive: true
        });
        o.mediacontainer.addEventListener("touchend", function(event) {
            o.mouseDown = false;
            o.mouseHere = false;
            !o.mouseMove ? ScreenClick(event) : '';
            o.mouseMove = false
        }, {
            passive: true
        });
        try {
            window.document.addEventListener("mouseup", function(event) {
                o.focus = false;
                o.hidden_volume_over = false;
                o.hidden_volume_over_process = false;
                if (o.mouseDown && o.controls) {
                    o.mouseDown = false;
                    o.controls.StageMouseUp(event.clientX, event.clientY);
                    o.controls.StageLeave()
                }
                if (!o.mouseHere && !o.system.mobile && !o.system.tv) {
                    o.controls.SettingsClose()
                }
            })
        } catch (err) {}
        window.document.addEventListener("mousemove", function(event) {
            o.controls && o.mouseDown ? o.controls.StageMove(event.clientX, event.clientY) : ''
        });
        o.frame.addEventListener("touchstart", function(event) {
            o.touch = true;
            o.mouseDown = true
        }, {
            passive: true
        });
        o.frame.addEventListener("touchend", function(event) {
            o.touch = false;
            o.mouseDown = false
        }, {
            passive: true
        });
        window.document.addEventListener("touchmove", function(event) {
            if (o.controls && o.touch) {
                o.controls.StageMove(event.touches[0].pageX, event.touches[0].pageY)
            }
        }, {
            passive: true
        });
        window.document.addEventListener("keyup", function(event) {
            var x = event.target.tagName.toLowerCase();
            if (x == 'input' || x == 'textarea') {
                return
            } else {
                o.controls ? o.controls.KeyUp(event) : ''
            }
        });
        window.document.addEventListener("keydown", function(event) {
            var x = event.target.tagName.toLowerCase();
            if (x == 'input' || x == 'textarea') {
                return
            } else {
                o.controls ? o.controls.KeyDown(event) : ''
            }
        });
        window.addEventListener('unhandledrejection', function(event) {});
        document.addEventListener("fullscreenchange", FullscreenChange, false);
        document.addEventListener("mozfullscreenchange", FullscreenChange, false);
        document.addEventListener("webkitfullscreenchange", FullscreenChange, false);
        document.addEventListener("msfullscreenchange", FullscreenChange, false);
        document.addEventListener("MSFullscreenChange", FullscreenChange, false);
        o.frameresize.contentWindow.addEventListener('resize', Resize, true);
        o.frameresize.contentWindow.onresize = Resize;
        if (!o.system.mobile) {
            o.mediacontainer.addEventListener("click", ScreenClick, false)
        }
        UpdateSize();
        if (v.chromecast) {
            v.chromecast.on == 1 ? o.chromecast = new ChromeCast() : ''
        }
        o.controls = new Controls();
        Title();
        Resize();
        if (o.storage && v.volumestore == 1 && v.volume != 0) {
            if (localStorage.getItem("pljsvolume") != null && !o.system.mobile) {
                v.volume = localStorage.getItem("pljsvolume")
            }
            if (localStorage.getItem("pljsmute") == 1 && !o.system.iphone && v.mutestore == 1) {
                v.mute = 1
            }
        }
        if (o.storage && v.sub_designstore == 1) {
            for (var j = 0; j < o.sub_options.length; j++) {
                if (localStorage.getItem("pljs" + o.sub_options[j]) != null) {
                    v[o.sub_options[j]] = localStorage.getItem("pljs" + o.sub_options[j])
                }
            }
        }
        if (o.continue) {
            var f = o.continue.flag();
            if (f.t && f.d) {
                o.controls.Played(f.t, f.d);
                o.controls.Duration(f.t, f.d);
                v.duration = f.d
            }
        }
        o.actions.Volume(v.volume);
        if (v.mute == 1) {
            o.actions.Mute();
            o.controls.refresh()
        }
        o.alert = new Alert();
        if (v.rounding > 0) {
            PlayerRadius()
        }
        if (exist(v.midroll)) {
            if (v.midroll != "") {
                if (typeof v.midroll != "string") {
                    o.midrollo = v.midroll
                } else {
                    if (v.midroll.indexOf("[{") == 0) {
                        try {
                            v.midroll = v.midroll.replace(/pjs'qt/ig, '"');
                            o.midrollo = eval(v.midroll)
                        } catch (e) {}
                    }
                }
            }
        }
        js("init");
        if (exist(o.playlist)) {
            js("playlist")
        }
        if (v.pass == 1 && v.passonstart == 1) {
            o.actions.Password()
        }
        for (var i = 2; i < 10; i++) {
            if (exist(v["design" + i])) {
                if (v["design" + i] == "mobile" && o.system.mobile) {
                    apiProcessor("design", i)
                }
            }
        }
    }

    function ScreenClick(e) {
        o.acted = true;
        if (o.click_t && v.screenclick == 1) {
            DoubleClick(e)
        } else {
            ClearClick();
            o.click_t = setTimeout(ScreenClick2, 500)
        }
    }

    function ScreenClick2() {
        ClearClick();
        if (o.system.mobile) {
            if (o.controls.ToolbarHidden()) {
                o.controls.StageMove2();
                return
            }
        }
        v.screenclick == 1 ? o.actions.ScreenClick() : ''
    }

    function DoubleClick(e) {
        ClearClick();
        var y = false;
        if (v.hotkey.seeksides == 1) {
            if (e) {
                var x;
                if (o.system.mobile) {
                    x = e.layerX
                } else {
                    x = e.offsetX
                }
                if (x) {
                    if (x < o.screen_w / 2) {
                        if (x < o.screen_w * 20 / 100) {
                            apiProcessor("seek", "-10");
                            y = true
                        }
                    } else {
                        if (x > o.screen_w - o.screen_w * 20 / 100) {
                            apiProcessor("seek", "+10");
                            y = true
                        }
                    }
                }
            }
        }
        if (!y && v.doubleclick == 1) {
            o.fullscreen ? o.actions.Normalscreen() : o.actions.Fullscreen()
        }
    }

    function ClearClick() {
        clearTimeout(o.click_t);
        o.click_t = undefined
    }

    function Resize(x) {
        UpdateSize();
        o.controls ? o.controls.resize() : '';
        o.media.resize()
    }

    function UpdateSize() {
        var xw = o.frame.offsetWidth;
        var xh = o.frame.offsetHeight;
        if (o.aspect > 0 && !o.fullscreen && !o.fullscreen_start) {
            xh = xw / o.aspect;
            css(o.container, {
                "height": xh
            })
        }
        if (!o.fullscreen && !o.fullscreen_start && !o.fullscreen_process) {
            o.normal_w = xw;
            o.normal_h = xh
        }
        if (o.system.mobile && o.fullscreen && v.landfullmobile == 1 && screen.orientation) {
            if (o.aspect > 0) {
                if (o.aspect < 1) {
                    screen.orientation.lock('portrait')
                } else {
                    screen.orientation.lock('landscape')
                }
            } else {
                screen.orientation.lock('landscape')
            }
        }
        o.screen_w = xw;
        o.screen_h = xh;
        if (exist(v.title) && o.controls) {
            v.title != '' ? o.controls.updateTitle() : ''
        }
        if (exist(o.custom_aspect)) {
            o.media.scale(o.custom_aspect)
        }
    }

    function Title() {
        for (var x in v) {
            if (v.hasOwnProperty(x)) {
                if (x.indexOf("title") == 0) {
                    if (v[x] != '') {
                        o.maintitle = v[x];
                        o.actions.Title(x)
                    }
                }
            }
        }
    }

    function Poster(url, container, scale) {
        if (url) {
            if (url != '') {
                url = checkBase64(url);
                var s = "contain";
                if (scale == "fill") {
                    s = "cover"
                }
                if (scale == "none") {
                    s = "auto"
                }
                if (scale == "stretch") {
                    s = "100% 100%"
                }
                css(container, {
                    'background': 'url(' + url + ') no-repeat center center',
                    'background-size': s
                });
                show(container)
            }
        }
    };

    function Logo(x) {
        if (x.on == 1 && exist(x.src)) {
            x.src = checkBase64(x.src);
            var y = createElement("div");
            if (x.src.indexOf("http") > -1 || x.src.indexOf("//") == 0) {
                var z = createElement("img");
                z.src = x.src;
                y.appendChild(z)
            }
            x = UpdateObject(x, v.logo);
            x = MarginPadding(x, 'margin', 'margin');
            css(y, {
                'position': 'absolute'
            });
            if (x.position.indexOf("bottom") > -1) {
                css(y, {
                    'bottom': x.marginbottom
                })
            }
            if (x.position.indexOf("right") > -1) {
                css(y, {
                    'right': x.marginright
                })
            }
            if (x.position.indexOf("top") > -1) {
                css(y, {
                    'top': x.margintop
                })
            }
            if (x.position.indexOf("left") > -1) {
                css(y, {
                    'left': x.marginleft
                })
            }
            o.container.appendChild(y)
        }
    };

    function PlayerRadius() {
        o.oo = createElement("div");
        var r = v.rounding;
        var oo = [];
        oo[1] = createElement('div');
        oo[1].innerHTML = '<svg><path d="M0,0 L' + r + ',0 Q0,0 0,' + r + ' Z" fill="' + v.bgcolor + '"/></svg>';
        oo[2] = createElement('div');
        oo[2].innerHTML = '<svg><path d="M0,0 L' + r + ',0 L' + r + ',' + r + ' Q' + r + ',0 0,0 Z" fill="' + v.bgcolor + '"/></svg>';
        oo[3] = createElement('div');
        oo[3].innerHTML = '<svg><path d="M' + r + ',0 L' + r + ',' + r + ' L0,' + r + ' Q' + r + ',' + r + ' ' + r + ',0 Z" fill="' + v.bgcolor + '"/></svg>';
        oo[4] = createElement('div');
        oo[4].innerHTML = '<svg><path d="M0,0 Q0,' + r + ' ' + r + ',' + r + ' L0,' + r + ' Z" fill="' + v.bgcolor + '"/></svg>';
        css(o.oo, {
            'position': 'absolute',
            'top': 0,
            'left': 0,
            'pointer-events': 'none',
            'height': 'auto',
            'overflow': 'hidden',
            'width': '100%',
            'height': '100%'
        });
        o.oo.style.zIndex = 2000;
        css(oo[1], {
            'position': 'absolute',
            'top': 0,
            'left': 0
        });
        css(oo[2], {
            'position': 'absolute',
            'top': 0,
            'right': 0
        });
        css(oo[3], {
            'position': 'absolute',
            'bottom': 0,
            'right': 0
        });
        css(oo[4], {
            'position': 'absolute',
            'bottom': 0,
            'left': 0
        });
        for (var i = 1; i < 5; i++) {
            css(oo[i], {
                'width': r,
                'height': r,
                'line-height': 0
            });
            o.oo.appendChild(oo[i])
        }
        o.container.appendChild(o.oo)
    }

    function FullscreenChange() {
        if (o.fullscreen && !isFullscreen()) {
            o.actions.NormalscreenUI(true)
        } else {
            o.actions.FullscreenUI()
        }
        log("fullscreen", o.fullscreen)
    }

    function isFullscreen() {
        return !!(document.webkitFullscreenElement || document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement || (document.fullscreenElement != undefined))
    }

    function isHidden(x) {
        return x.offsetWidth == 0 && x.offsetHeight == 0
    };

    function Destroy() {
        for (var x in o) {
            if (x.indexOf("Interval") > -1) {
                clearInterval(o[x])
            }
        }
        log("Destroyed")
    }
}
"undefined" != typeof window && function(t, e) {
    "object" == typeof exports && "object" == typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == typeof exports ? exports.Hls = e() : t.Hls = e()
}(this, function() {
    return function(t) {
        function e(i) {
            if (r[i]) return r[i].exports;
            var a = r[i] = {
                i: i,
                l: !1,
                exports: {}
            };
            return t[i].call(a.exports, a, a.exports, e), a.l = !0, a.exports
        }
        var r = {};
        return e.m = t, e.c = r, e.d = function(t, r, i) {
            e.o(t, r) || Object.defineProperty(t, r, {
                configurable: !1,
                enumerable: !0,
                get: i
            })
        }, e.n = function(t) {
            var r = t && t.__esModule ? function() {
                return t.default
            } : function() {
                return t
            };
            return e.d(r, "a", r), r
        }, e.o = function(t, e) {
            return Object.prototype.hasOwnProperty.call(t, e)
        }, e.p = "/dist/", e(e.s = 29)
    }([function(t, e, r) {
        "use strict";

        function i() {}

        function a(t, e) {
            return e = "[" + t + "] > " + e
        }

        function n(t) {
            var e = c.console[t];
            return e ? function() {
                for (var r = arguments.length, i = Array(r), n = 0; n < r; n++) i[n] = arguments[n];
                i[0] && (i[0] = a(t, i[0])), e.apply(c.console, i)
            } : i
        }

        function o(t) {
            for (var e = arguments.length, r = Array(e > 1 ? e - 1 : 0), i = 1; i < e; i++) r[i - 1] = arguments[i];
            r.forEach(function(e) {
                d[e] = t[e] ? t[e].bind(t) : n(e)
            })
        }
        r.d(e, "a", function() {
            return h
        }), r.d(e, "b", function() {
            return f
        });
        var s = r(5),
            l = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            },
            u = {
                trace: i,
                debug: i,
                log: i,
                warn: i,
                info: i,
                error: i
            },
            d = u,
            c = Object(s.a)(),
            h = function(t) {
                if (!0 === t || "object" === (void 0 === t ? "undefined" : l(t))) {
                    o(t, "debug", "log", "info", "warn", "error");
                    try {
                        d.log()
                    } catch (t) {
                        d = u
                    }
                } else d = u
            },
            f = d
    }, function(t, e, r) {
        "use strict";
        var i = {
            MEDIA_ATTACHING: "hlsMediaAttaching",
            MEDIA_ATTACHED: "hlsMediaAttached",
            MEDIA_DETACHING: "hlsMediaDetaching",
            MEDIA_DETACHED: "hlsMediaDetached",
            BUFFER_RESET: "hlsBufferReset",
            BUFFER_CODECS: "hlsBufferCodecs",
            BUFFER_CREATED: "hlsBufferCreated",
            BUFFER_APPENDING: "hlsBufferAppending",
            BUFFER_APPENDED: "hlsBufferAppended",
            BUFFER_EOS: "hlsBufferEos",
            BUFFER_FLUSHING: "hlsBufferFlushing",
            BUFFER_FLUSHED: "hlsBufferFlushed",
            MANIFEST_LOADING: "hlsManifestLoading",
            MANIFEST_LOADED: "hlsManifestLoaded",
            MANIFEST_PARSED: "hlsManifestParsed",
            LEVEL_SWITCHING: "hlsLevelSwitching",
            LEVEL_SWITCHED: "hlsLevelSwitched",
            LEVEL_LOADING: "hlsLevelLoading",
            LEVEL_LOADED: "hlsLevelLoaded",
            LEVEL_UPDATED: "hlsLevelUpdated",
            LEVEL_PTS_UPDATED: "hlsLevelPtsUpdated",
            AUDIO_TRACKS_UPDATED: "hlsAudioTracksUpdated",
            AUDIO_TRACK_SWITCHING: "hlsAudioTrackSwitching",
            AUDIO_TRACK_SWITCHED: "hlsAudioTrackSwitched",
            AUDIO_TRACK_LOADING: "hlsAudioTrackLoading",
            AUDIO_TRACK_LOADED: "hlsAudioTrackLoaded",
            SUBTITLE_TRACKS_UPDATED: "hlsSubtitleTracksUpdated",
            SUBTITLE_TRACK_SWITCH: "hlsSubtitleTrackSwitch",
            SUBTITLE_TRACK_LOADING: "hlsSubtitleTrackLoading",
            SUBTITLE_TRACK_LOADED: "hlsSubtitleTrackLoaded",
            SUBTITLE_FRAG_PROCESSED: "hlsSubtitleFragProcessed",
            INIT_PTS_FOUND: "hlsInitPtsFound",
            FRAG_LOADING: "hlsFragLoading",
            FRAG_LOAD_PROGRESS: "hlsFragLoadProgress",
            FRAG_LOAD_EMERGENCY_ABORTED: "hlsFragLoadEmergencyAborted",
            FRAG_LOADED: "hlsFragLoaded",
            FRAG_DECRYPTED: "hlsFragDecrypted",
            FRAG_PARSING_INIT_SEGMENT: "hlsFragParsingInitSegment",
            FRAG_PARSING_USERDATA: "hlsFragParsingUserdata",
            FRAG_PARSING_METADATA: "hlsFragParsingMetadata",
            FRAG_PARSING_DATA: "hlsFragParsingData",
            FRAG_PARSED: "hlsFragParsed",
            FRAG_BUFFERED: "hlsFragBuffered",
            FRAG_CHANGED: "hlsFragChanged",
            FPS_DROP: "hlsFpsDrop",
            FPS_DROP_LEVEL_CAPPING: "hlsFpsDropLevelCapping",
            ERROR: "hlsError",
            DESTROYING: "hlsDestroying",
            KEY_LOADING: "hlsKeyLoading",
            KEY_LOADED: "hlsKeyLoaded",
            STREAM_STATE_TRANSITION: "hlsStreamStateTransition"
        };
        e.a = i
    }, function(t, e, r) {
        "use strict";
        r.d(e, "b", function() {
            return i
        }), r.d(e, "a", function() {
            return a
        });
        var i = {
                NETWORK_ERROR: "networkError",
                MEDIA_ERROR: "mediaError",
                KEY_SYSTEM_ERROR: "keySystemError",
                MUX_ERROR: "muxError",
                OTHER_ERROR: "otherError"
            },
            a = {
                KEY_SYSTEM_NO_KEYS: "keySystemNoKeys",
                KEY_SYSTEM_NO_ACCESS: "keySystemNoAccess",
                KEY_SYSTEM_NO_SESSION: "keySystemNoSession",
                KEY_SYSTEM_LICENSE_REQUEST_FAILED: "keySystemLicenseRequestFailed",
                MANIFEST_LOAD_ERROR: "manifestLoadError",
                MANIFEST_LOAD_TIMEOUT: "manifestLoadTimeOut",
                MANIFEST_PARSING_ERROR: "manifestParsingError",
                MANIFEST_INCOMPATIBLE_CODECS_ERROR: "manifestIncompatibleCodecsError",
                LEVEL_LOAD_ERROR: "levelLoadError",
                LEVEL_LOAD_TIMEOUT: "levelLoadTimeOut",
                LEVEL_SWITCH_ERROR: "levelSwitchError",
                AUDIO_TRACK_LOAD_ERROR: "audioTrackLoadError",
                AUDIO_TRACK_LOAD_TIMEOUT: "audioTrackLoadTimeOut",
                FRAG_LOAD_ERROR: "fragLoadError",
                FRAG_LOAD_TIMEOUT: "fragLoadTimeOut",
                FRAG_DECRYPT_ERROR: "fragDecryptError",
                FRAG_PARSING_ERROR: "fragParsingError",
                REMUX_ALLOC_ERROR: "remuxAllocError",
                KEY_LOAD_ERROR: "keyLoadError",
                KEY_LOAD_TIMEOUT: "keyLoadTimeOut",
                BUFFER_ADD_CODEC_ERROR: "bufferAddCodecError",
                BUFFER_APPEND_ERROR: "bufferAppendError",
                BUFFER_APPENDING_ERROR: "bufferAppendingError",
                BUFFER_STALLED_ERROR: "bufferStalledError",
                BUFFER_FULL_ERROR: "bufferFullError",
                BUFFER_SEEK_OVER_HOLE: "bufferSeekOverHole",
                BUFFER_NUDGE_ON_STALL: "bufferNudgeOnStall",
                INTERNAL_EXCEPTION: "internalException"
            }
    }, function(t, e, r) {
        "use strict";
        r.d(e, "a", function() {
            return i
        });
        var i = Number.isFinite || function(t) {
            return "number" == typeof t && isFinite(t)
        }
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(0),
            n = r(2),
            o = r(1),
            s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            },
            l = new Set(["hlsEventGeneric", "hlsHandlerDestroying", "hlsHandlerDestroyed"]),
            u = function() {
                function t(e) {
                    i(this, t), this.hls = e, this.onEvent = this.onEvent.bind(this);
                    for (var r = arguments.length, a = Array(r > 1 ? r - 1 : 0), n = 1; n < r; n++) a[n - 1] = arguments[n];
                    this.handledEvents = a, this.useGenericHandler = !0, this.registerListeners()
                }
                return t.prototype.destroy = function() {
                    this.onHandlerDestroying(), this.unregisterListeners(), this.onHandlerDestroyed()
                }, t.prototype.onHandlerDestroying = function() {}, t.prototype.onHandlerDestroyed = function() {}, t.prototype.isEventHandler = function() {
                    return "object" === s(this.handledEvents) && this.handledEvents.length && "function" == typeof this.onEvent
                }, t.prototype.registerListeners = function() {
                    this.isEventHandler() && this.handledEvents.forEach(function(t) {
                        if (l.has(t)) throw new Error("Forbidden event-name: " + t);
                        this.hls.on(t, this.onEvent)
                    }, this)
                }, t.prototype.unregisterListeners = function() {
                    this.isEventHandler() && this.handledEvents.forEach(function(t) {
                        this.hls.off(t, this.onEvent)
                    }, this)
                }, t.prototype.onEvent = function(t, e) {
                    this.onEventGeneric(t, e)
                }, t.prototype.onEventGeneric = function(t, e) {
                    var r = function(t, e) {
                        var r = "on" + t.replace("hls", "");
                        if ("function" != typeof this[r]) throw new Error("Event " + t + " has no generic handler in this " + this.constructor.name + " class (tried " + r + ")");
                        return this[r].bind(this, e)
                    };
                    try {
                        r.call(this, t, e).call()
                    } catch (e) {
                        a.b.error("An internal error happened while handling event " + t + '. Error message: "' + e.message + '". Here is a stacktrace:', e), this.hls.trigger(o.a.ERROR, {
                            type: n.b.OTHER_ERROR,
                            details: n.a.INTERNAL_EXCEPTION,
                            fatal: !1,
                            event: t,
                            err: e
                        })
                    }
                }, t
            }();
        e.a = u
    }, function(t, e, r) {
        "use strict";

        function i() {
            return "undefined" == typeof window ? self : window
        }
        e.a = i
    }, function(t, e, r) {
        ! function(e) {
            var r = /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,
                i = /^([^\/;?#]*)(.*)$/,
                a = /(?:\/|^)\.(?=\/)/g,
                n = /(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,
                o = {
                    buildAbsoluteURL: function(t, e, r) {
                        if (r = r || {}, t = t.trim(), !(e = e.trim())) {
                            if (!r.alwaysNormalize) return t;
                            var a = this.parseURL(t);
                            if (!s) throw new Error("Error trying to parse base URL.");
                            return a.path = o.normalizePath(a.path), o.buildURLFromParts(a)
                        }
                        var n = this.parseURL(e);
                        if (!n) throw new Error("Error trying to parse relative URL.");
                        if (n.scheme) return r.alwaysNormalize ? (n.path = o.normalizePath(n.path), o.buildURLFromParts(n)) : e;
                        var s = this.parseURL(t);
                        if (!s) throw new Error("Error trying to parse base URL.");
                        if (!s.netLoc && s.path && "/" !== s.path[0]) {
                            var l = i.exec(s.path);
                            s.netLoc = l[1], s.path = l[2]
                        }
                        s.netLoc && !s.path && (s.path = "/");
                        var u = {
                            scheme: s.scheme,
                            netLoc: n.netLoc,
                            path: null,
                            params: n.params,
                            query: n.query,
                            fragment: n.fragment
                        };
                        if (!n.netLoc && (u.netLoc = s.netLoc, "/" !== n.path[0]))
                            if (n.path) {
                                var d = s.path,
                                    c = d.substring(0, d.lastIndexOf("/") + 1) + n.path;
                                u.path = o.normalizePath(c)
                            } else u.path = s.path, n.params || (u.params = s.params, n.query || (u.query = s.query));
                        return null === u.path && (u.path = r.alwaysNormalize ? o.normalizePath(n.path) : n.path), o.buildURLFromParts(u)
                    },
                    parseURL: function(t) {
                        var e = r.exec(t);
                        return e ? {
                            scheme: e[1] || "",
                            netLoc: e[2] || "",
                            path: e[3] || "",
                            params: e[4] || "",
                            query: e[5] || "",
                            fragment: e[6] || ""
                        } : null
                    },
                    normalizePath: function(t) {
                        for (t = t.split("").reverse().join("").replace(a, ""); t.length !== (t = t.replace(n, "")).length;);
                        return t.split("").reverse().join("")
                    },
                    buildURLFromParts: function(t) {
                        return t.scheme + t.netLoc + t.path + t.params + t.query + t.fragment
                    }
                };
            t.exports = o
        }()
    }, function(t, e, r) {
        "use strict";
        var i = {
            search: function(t, e) {
                for (var r = 0, i = t.length - 1, a = null, n = null; r <= i;) {
                    a = (r + i) / 2 | 0, n = t[a];
                    var o = e(n);
                    if (o > 0) r = a + 1;
                    else {
                        if (!(o < 0)) return n;
                        i = a - 1
                    }
                }
                return null
            }
        };
        e.a = i
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        r.d(e, "a", function() {
            return a
        });
        var a = function() {
            function t() {
                i(this, t)
            }
            return t.isBuffered = function(t, e) {
                try {
                    if (t)
                        for (var r = t.buffered, i = 0; i < r.length; i++)
                            if (e >= r.start(i) && e <= r.end(i)) return !0
                } catch (t) {}
                return !1
            }, t.bufferInfo = function(t, e, r) {
                try {
                    if (t) {
                        var i = t.buffered,
                            a = [],
                            n = void 0;
                        for (n = 0; n < i.length; n++) a.push({
                            start: i.start(n),
                            end: i.end(n)
                        });
                        return this.bufferedInfo(a, e, r)
                    }
                } catch (t) {}
                return {
                    len: 0,
                    start: e,
                    end: e,
                    nextStart: void 0
                }
            }, t.bufferedInfo = function(t, e, r) {
                var i = [],
                    a = void 0,
                    n = void 0,
                    o = void 0,
                    s = void 0,
                    l = void 0;
                for (t.sort(function(t, e) {
                        var r = t.start - e.start;
                        return r || e.end - t.end
                    }), l = 0; l < t.length; l++) {
                    var u = i.length;
                    if (u) {
                        var d = i[u - 1].end;
                        t[l].start - d < r ? t[l].end > d && (i[u - 1].end = t[l].end) : i.push(t[l])
                    } else i.push(t[l])
                }
                for (l = 0, a = 0, n = o = e; l < i.length; l++) {
                    var c = i[l].start,
                        h = i[l].end;
                    if (e + r >= c && e < h) n = c, o = h, a = o - e;
                    else if (e + r < c) {
                        s = c;
                        break
                    }
                }
                return {
                    len: a,
                    start: n,
                    end: o,
                    nextStart: s
                }
            }, t
        }()
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        r.d(e, "b", function() {
            return n
        });
        var a = function() {
                function t() {
                    i(this, t)
                }
                return t.isHeader = function(t, e) {
                    return e + 10 <= t.length && 73 === t[e] && 68 === t[e + 1] && 51 === t[e + 2] && t[e + 3] < 255 && t[e + 4] < 255 && t[e + 6] < 128 && t[e + 7] < 128 && t[e + 8] < 128 && t[e + 9] < 128
                }, t.isFooter = function(t, e) {
                    return e + 10 <= t.length && 51 === t[e] && 68 === t[e + 1] && 73 === t[e + 2] && t[e + 3] < 255 && t[e + 4] < 255 && t[e + 6] < 128 && t[e + 7] < 128 && t[e + 8] < 128 && t[e + 9] < 128
                }, t.getID3Data = function(e, r) {
                    for (var i = r, a = 0; t.isHeader(e, r);) {
                        a += 10;
                        a += t._readSize(e, r + 6), t.isFooter(e, r + 10) && (a += 10), r += a
                    }
                    if (a > 0) return e.subarray(i, i + a)
                }, t._readSize = function(t, e) {
                    var r = 0;
                    return r = (127 & t[e]) << 21, r |= (127 & t[e + 1]) << 14, r |= (127 & t[e + 2]) << 7, r |= 127 & t[e + 3]
                }, t.getTimeStamp = function(e) {
                    for (var r = t.getID3Frames(e), i = 0; i < r.length; i++) {
                        var a = r[i];
                        if (t.isTimeStampFrame(a)) return t._readTimeStamp(a)
                    }
                }, t.isTimeStampFrame = function(t) {
                    return t && "PRIV" === t.key && "com.apple.streaming.transportStreamTimestamp" === t.info
                }, t._getFrameData = function(e) {
                    var r = String.fromCharCode(e[0], e[1], e[2], e[3]),
                        i = t._readSize(e, 4);
                    return {
                        type: r,
                        size: i,
                        data: e.subarray(10, 10 + i)
                    }
                }, t.getID3Frames = function(e) {
                    for (var r = 0, i = []; t.isHeader(e, r);) {
                        var a = t._readSize(e, r + 6);
                        r += 10;
                        for (var n = r + a; r + 8 < n;) {
                            var o = t._getFrameData(e.subarray(r)),
                                s = t._decodeFrame(o);
                            s && i.push(s), r += o.size + 10
                        }
                        t.isFooter(e, r) && (r += 10)
                    }
                    return i
                }, t._decodeFrame = function(e) {
                    return "PRIV" === e.type ? t._decodePrivFrame(e) : "T" === e.type[0] ? t._decodeTextFrame(e) : "W" === e.type[0] ? t._decodeURLFrame(e) : void 0
                }, t._readTimeStamp = function(t) {
                    if (8 === t.data.byteLength) {
                        var e = new Uint8Array(t.data),
                            r = 1 & e[3],
                            i = (e[4] << 23) + (e[5] << 15) + (e[6] << 7) + e[7];
                        return i /= 45, r && (i += 47721858.84), Math.round(i)
                    }
                }, t._decodePrivFrame = function(e) {
                    if (!(e.size < 2)) {
                        var r = t._utf8ArrayToStr(e.data, !0),
                            i = new Uint8Array(e.data.subarray(r.length + 1));
                        return {
                            key: e.type,
                            info: r,
                            data: i.buffer
                        }
                    }
                }, t._decodeTextFrame = function(e) {
                    if (!(e.size < 2)) {
                        if ("TXXX" === e.type) {
                            var r = 1,
                                i = t._utf8ArrayToStr(e.data.subarray(r));
                            r += i.length + 1;
                            var a = t._utf8ArrayToStr(e.data.subarray(r));
                            return {
                                key: e.type,
                                info: i,
                                data: a
                            }
                        }
                        var n = t._utf8ArrayToStr(e.data.subarray(1));
                        return {
                            key: e.type,
                            data: n
                        }
                    }
                }, t._decodeURLFrame = function(e) {
                    if ("WXXX" === e.type) {
                        if (e.size < 2) return;
                        var r = 1,
                            i = t._utf8ArrayToStr(e.data.subarray(r));
                        r += i.length + 1;
                        var a = t._utf8ArrayToStr(e.data.subarray(r));
                        return {
                            key: e.type,
                            info: i,
                            data: a
                        }
                    }
                    var n = t._utf8ArrayToStr(e.data);
                    return {
                        key: e.type,
                        data: n
                    }
                }, t._utf8ArrayToStr = function(t) {
                    for (var e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], r = t.length, i = void 0, a = void 0, n = void 0, o = "", s = 0; s < r;) {
                        if (0 === (i = t[s++]) && e) return o;
                        if (0 !== i && 3 !== i) switch (i >> 4) {
                            case 0:
                            case 1:
                            case 2:
                            case 3:
                            case 4:
                            case 5:
                            case 6:
                            case 7:
                                o += String.fromCharCode(i);
                                break;
                            case 12:
                            case 13:
                                a = t[s++], o += String.fromCharCode((31 & i) << 6 | 63 & a);
                                break;
                            case 14:
                                a = t[s++], n = t[s++], o += String.fromCharCode((15 & i) << 12 | (63 & a) << 6 | (63 & n) << 0)
                        }
                    }
                    return o
                }, t
            }(),
            n = a._utf8ArrayToStr;
        e.a = a
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(4),
            s = function(t) {
                function e(r) {
                    i(this, e);
                    for (var n = arguments.length, o = Array(n > 1 ? n - 1 : 0), s = 1; s < n; s++) o[s - 1] = arguments[s];
                    var l = a(this, t.call.apply(t, [this, r].concat(o)));
                    return l._tickInterval = null, l._tickTimer = null, l._tickCallCount = 0, l._boundTick = l.tick.bind(l), l
                }
                return n(e, t), e.prototype.onHandlerDestroying = function() {
                    this.clearNextTick(), this.clearInterval()
                }, e.prototype.hasInterval = function() {
                    return !!this._tickInterval
                }, e.prototype.hasNextTick = function() {
                    return !!this._tickTimer
                }, e.prototype.setInterval = function(t) {
                    function e(e) {
                        return t.apply(this, arguments)
                    }
                    return e.toString = function() {
                        return t.toString()
                    }, e
                }(function(t) {
                    return !this._tickInterval && (this._tickInterval = setInterval(this._boundTick, t), !0)
                }), e.prototype.clearInterval = function(t) {
                    function e() {
                        return t.apply(this, arguments)
                    }
                    return e.toString = function() {
                        return t.toString()
                    }, e
                }(function() {
                    return !!this._tickInterval && (clearInterval(this._tickInterval), this._tickInterval = null, !0)
                }), e.prototype.clearNextTick = function() {
                    return !!this._tickTimer && (clearTimeout(this._tickTimer), this._tickTimer = null, !0)
                }, e.prototype.tick = function() {
                    1 === ++this._tickCallCount && (this.doTick(), this._tickCallCount > 1 && (this.clearNextTick(), this._tickTimer = setTimeout(this._boundTick, 0)), this._tickCallCount = 0)
                }, e.prototype.doTick = function() {}, e
            }(o.a);
        e.a = s
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(3),
            n = r(6),
            o = r.n(n),
            s = r(19),
            l = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            u = function() {
                function t() {
                    var e;
                    i(this, t), this._url = null, this._byteRange = null, this._decryptdata = null, this.tagList = [], this.programDateTime = null, this.rawProgramDateTime = null, this._elementaryStreams = (e = {}, e[t.ElementaryStreamTypes.AUDIO] = !1, e[t.ElementaryStreamTypes.VIDEO] = !1, e)
                }
                return t.prototype.addElementaryStream = function(t) {
                    this._elementaryStreams[t] = !0
                }, t.prototype.hasElementaryStream = function(t) {
                    return !0 === this._elementaryStreams[t]
                }, t.prototype.createInitializationVector = function(t) {
                    for (var e = new Uint8Array(16), r = 12; r < 16; r++) e[r] = t >> 8 * (15 - r) & 255;
                    return e
                }, t.prototype.fragmentDecryptdataFromLevelkey = function(t, e) {
                    var r = t;
                    return t && t.method && t.uri && !t.iv && (r = new s.a, r.method = t.method, r.baseuri = t.baseuri, r.reluri = t.reluri, r.iv = this.createInitializationVector(e)), r
                }, l(t, [{
                    key: "url",
                    get: function() {
                        return !this._url && this.relurl && (this._url = o.a.buildAbsoluteURL(this.baseurl, this.relurl, {
                            alwaysNormalize: !0
                        })), this._url
                    },
                    set: function(t) {
                        this._url = t
                    }
                }, {
                    key: "byteRange",
                    get: function() {
                        if (!this._byteRange && !this.rawByteRange) return [];
                        if (this._byteRange) return this._byteRange;
                        var t = [];
                        if (this.rawByteRange) {
                            var e = this.rawByteRange.split("@", 2);
                            if (1 === e.length) {
                                var r = this.lastByteRangeEndOffset;
                                t[0] = r || 0
                            } else t[0] = parseInt(e[1]);
                            t[1] = parseInt(e[0]) + t[0], this._byteRange = t
                        }
                        return t
                    }
                }, {
                    key: "byteRangeStartOffset",
                    get: function() {
                        return this.byteRange[0]
                    }
                }, {
                    key: "byteRangeEndOffset",
                    get: function() {
                        return this.byteRange[1]
                    }
                }, {
                    key: "decryptdata",
                    get: function() {
                        return this._decryptdata || (this._decryptdata = this.fragmentDecryptdataFromLevelkey(this.levelkey, this.sn)), this._decryptdata
                    }
                }, {
                    key: "endProgramDateTime",
                    get: function() {
                        if (!Object(a.a)(this.programDateTime)) return null;
                        var t = Object(a.a)(this.duration) ? this.duration : 0;
                        return this.programDateTime + 1e3 * t
                    }
                }, {
                    key: "encrypted",
                    get: function() {
                        return !(!this.decryptdata || null === this.decryptdata.uri || null !== this.decryptdata.key)
                    }
                }], [{
                    key: "ElementaryStreamTypes",
                    get: function() {
                        return {
                            AUDIO: "audio",
                            VIDEO: "video"
                        }
                    }
                }]), t
            }();
        e.a = u
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        r.d(e, "a", function() {
            return u
        }), r.d(e, "b", function() {
            return d
        });
        var o = r(3),
            s = r(4),
            l = r(1),
            u = {
                NOT_LOADED: "NOT_LOADED",
                APPENDING: "APPENDING",
                PARTIAL: "PARTIAL",
                OK: "OK"
            },
            d = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, l.a.BUFFER_APPENDED, l.a.FRAG_BUFFERED, l.a.FRAG_LOADED));
                    return n.bufferPadding = .2, n.fragments = Object.create(null), n.timeRanges = Object.create(null), n.config = r.config, n
                }
                return n(e, t), e.prototype.destroy = function() {
                    this.fragments = null, this.timeRanges = null, this.config = null, s.a.prototype.destroy.call(this), t.prototype.destroy.call(this)
                }, e.prototype.getBufferedFrag = function(t, e) {
                    var r = this.fragments,
                        i = Object.keys(r).filter(function(i) {
                            var a = r[i];
                            if (a.body.type !== e) return !1;
                            if (!a.buffered) return !1;
                            var n = a.body;
                            return n.startPTS <= t && t <= n.endPTS
                        });
                    if (0 === i.length) return null;
                    var a = i.pop();
                    return r[a].body
                }, e.prototype.detectEvictedFragments = function(t, e) {
                    var r = this,
                        i = void 0,
                        a = void 0;
                    Object.keys(this.fragments).forEach(function(n) {
                        var o = r.fragments[n];
                        if (!0 === o.buffered) {
                            var s = o.range[t];
                            if (s) {
                                i = s.time;
                                for (var l = 0; l < i.length; l++)
                                    if (a = i[l], !1 === r.isTimeBuffered(a.startPTS, a.endPTS, e)) {
                                        r.removeFragment(o.body);
                                        break
                                    }
                            }
                        }
                    })
                }, e.prototype.detectPartialFragments = function(t) {
                    var e = this,
                        r = this.getFragmentKey(t),
                        i = this.fragments[r];
                    i && (i.buffered = !0, Object.keys(this.timeRanges).forEach(function(r) {
                        if (t.hasElementaryStream(r)) {
                            var a = e.timeRanges[r];
                            i.range[r] = e.getBufferedTimes(t.startPTS, t.endPTS, a)
                        }
                    }))
                }, e.prototype.getBufferedTimes = function(t, e, r) {
                    for (var i = [], a = void 0, n = void 0, o = !1, s = 0; s < r.length; s++) {
                        if (a = r.start(s) - this.bufferPadding, n = r.end(s) + this.bufferPadding, t >= a && e <= n) {
                            i.push({
                                startPTS: Math.max(t, r.start(s)),
                                endPTS: Math.min(e, r.end(s))
                            });
                            break
                        }
                        if (t < n && e > a) i.push({
                            startPTS: Math.max(t, r.start(s)),
                            endPTS: Math.min(e, r.end(s))
                        }), o = !0;
                        else if (e <= a) break
                    }
                    return {
                        time: i,
                        partial: o
                    }
                }, e.prototype.getFragmentKey = function(t) {
                    return t.type + "_" + t.level + "_" + t.urlId + "_" + t.sn
                }, e.prototype.getPartialFragment = function(t) {
                    var e = this,
                        r = void 0,
                        i = void 0,
                        a = void 0,
                        n = null,
                        o = 0;
                    return Object.keys(this.fragments).forEach(function(s) {
                        var l = e.fragments[s];
                        e.isPartial(l) && (i = l.body.startPTS - e.bufferPadding, a = l.body.endPTS + e.bufferPadding, t >= i && t <= a && (r = Math.min(t - i, a - t), o <= r && (n = l.body, o = r)))
                    }), n
                }, e.prototype.getState = function(t) {
                    var e = this.getFragmentKey(t),
                        r = this.fragments[e],
                        i = u.NOT_LOADED;
                    return void 0 !== r && (i = r.buffered ? !0 === this.isPartial(r) ? u.PARTIAL : u.OK : u.APPENDING), i
                }, e.prototype.isPartial = function(t) {
                    return !0 === t.buffered && (void 0 !== t.range.video && !0 === t.range.video.partial || void 0 !== t.range.audio && !0 === t.range.audio.partial)
                }, e.prototype.isTimeBuffered = function(t, e, r) {
                    for (var i = void 0, a = void 0, n = 0; n < r.length; n++) {
                        if (i = r.start(n) - this.bufferPadding, a = r.end(n) + this.bufferPadding, t >= i && e <= a) return !0;
                        if (e <= i) return !1
                    }
                    return !1
                }, e.prototype.onFragLoaded = function(t) {
                    var e = t.frag;
                    Object(o.a)(e.sn) && !e.bitrateTest && (this.fragments[this.getFragmentKey(e)] = {
                        body: e,
                        range: Object.create(null),
                        buffered: !1
                    })
                }, e.prototype.onBufferAppended = function(t) {
                    var e = this;
                    this.timeRanges = t.timeRanges, Object.keys(this.timeRanges).forEach(function(t) {
                        var r = e.timeRanges[t];
                        e.detectEvictedFragments(t, r)
                    })
                }, e.prototype.onFragBuffered = function(t) {
                    this.detectPartialFragments(t.frag)
                }, e.prototype.hasFragment = function(t) {
                    var e = this.getFragmentKey(t);
                    return void 0 !== this.fragments[e]
                }, e.prototype.removeFragment = function(t) {
                    var e = this.getFragmentKey(t);
                    delete this.fragments[e]
                }, e.prototype.removeAllFragments = function() {
                    this.fragments = Object.create(null)
                }, e
            }(s.a)
    }, function(t, e) {
        function r() {
            this._events = this._events || {}, this._maxListeners = this._maxListeners || void 0
        }

        function i(t) {
            return "function" == typeof t
        }

        function a(t) {
            return "number" == typeof t
        }

        function n(t) {
            return "object" == typeof t && null !== t
        }

        function o(t) {
            return void 0 === t
        }
        t.exports = r, r.EventEmitter = r, r.prototype._events = void 0, r.prototype._maxListeners = void 0, r.defaultMaxListeners = 10, r.prototype.setMaxListeners = function(t) {
            if (!a(t) || t < 0 || isNaN(t)) throw TypeError("n must be a positive number");
            return this._maxListeners = t, this
        }, r.prototype.emit = function(t) {
            var e, r, a, s, l, u;
            if (this._events || (this._events = {}), "error" === t && (!this._events.error || n(this._events.error) && !this._events.error.length)) {
                if ((e = arguments[1]) instanceof Error) throw e;
                var d = new Error('Uncaught, unspecified "error" event. (' + e + ")");
                throw d.context = e, d
            }
            if (r = this._events[t], o(r)) return !1;
            if (i(r)) switch (arguments.length) {
                case 1:
                    r.call(this);
                    break;
                case 2:
                    r.call(this, arguments[1]);
                    break;
                case 3:
                    r.call(this, arguments[1], arguments[2]);
                    break;
                default:
                    s = Array.prototype.slice.call(arguments, 1), r.apply(this, s)
            } else if (n(r))
                for (s = Array.prototype.slice.call(arguments, 1), u = r.slice(), a = u.length, l = 0; l < a; l++) u[l].apply(this, s);
            return !0
        }, r.prototype.addListener = function(t, e) {
            var a;
            if (!i(e)) throw TypeError("listener must be a function");
            return this._events || (this._events = {}), this._events.newListener && this.emit("newListener", t, i(e.listener) ? e.listener : e), this._events[t] ? n(this._events[t]) ? this._events[t].push(e) : this._events[t] = [this._events[t], e] : this._events[t] = e, n(this._events[t]) && !this._events[t].warned && (a = o(this._maxListeners) ? r.defaultMaxListeners : this._maxListeners) && a > 0 && this._events[t].length > a && (this._events[t].warned = !0, console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.", this._events[t].length), "function" == typeof console.trace && console.trace()), this
        }, r.prototype.on = r.prototype.addListener, r.prototype.once = function(t, e) {
            function r() {
                this.removeListener(t, r), a || (a = !0, e.apply(this, arguments))
            }
            if (!i(e)) throw TypeError("listener must be a function");
            var a = !1;
            return r.listener = e, this.on(t, r), this
        }, r.prototype.removeListener = function(t, e) {
            var r, a, o, s;
            if (!i(e)) throw TypeError("listener must be a function");
            if (!this._events || !this._events[t]) return this;
            if (r = this._events[t], o = r.length, a = -1, r === e || i(r.listener) && r.listener === e) delete this._events[t], this._events.removeListener && this.emit("removeListener", t, e);
            else if (n(r)) {
                for (s = o; s-- > 0;)
                    if (r[s] === e || r[s].listener && r[s].listener === e) {
                        a = s;
                        break
                    } if (a < 0) return this;
                1 === r.length ? (r.length = 0, delete this._events[t]) : r.splice(a, 1), this._events.removeListener && this.emit("removeListener", t, e)
            }
            return this
        }, r.prototype.removeAllListeners = function(t) {
            var e, r;
            if (!this._events) return this;
            if (!this._events.removeListener) return 0 === arguments.length ? this._events = {} : this._events[t] && delete this._events[t], this;
            if (0 === arguments.length) {
                for (e in this._events) "removeListener" !== e && this.removeAllListeners(e);
                return this.removeAllListeners("removeListener"), this._events = {}, this
            }
            if (r = this._events[t], i(r)) this.removeListener(t, r);
            else if (r)
                for (; r.length;) this.removeListener(t, r[r.length - 1]);
            return delete this._events[t], this
        }, r.prototype.listeners = function(t) {
            return this._events && this._events[t] ? i(this._events[t]) ? [this._events[t]] : this._events[t].slice() : []
        }, r.prototype.listenerCount = function(t) {
            if (this._events) {
                var e = this._events[t];
                if (i(e)) return 1;
                if (e) return e.length
            }
            return 0
        }, r.listenerCount = function(t, e) {
            return t.listenerCount(e)
        }
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(37),
            n = r(38),
            o = r(39),
            s = r(2),
            l = r(0),
            u = r(1),
            d = r(5),
            c = Object(d.a)(),
            h = function() {
                function t(e, r) {
                    var a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
                        n = a.removePKCS7Padding,
                        o = void 0 === n || n;
                    if (i(this, t), this.logEnabled = !0, this.observer = e, this.config = r, this.removePKCS7Padding = o, o) try {
                        var s = c.crypto;
                        s && (this.subtle = s.subtle || s.webkitSubtle)
                    } catch (t) {}
                    this.disableWebCrypto = !this.subtle
                }
                return t.prototype.isSync = function() {
                    return this.disableWebCrypto && this.config.enableSoftwareAES
                }, t.prototype.decrypt = function(t, e, r, i) {
                    var s = this;
                    if (this.disableWebCrypto && this.config.enableSoftwareAES) {
                        this.logEnabled && (l.b.log("JS AES decrypt"), this.logEnabled = !1);
                        var u = this.decryptor;
                        u || (this.decryptor = u = new o.a), u.expandKey(e), i(u.decrypt(t, 0, r, this.removePKCS7Padding))
                    } else {
                        this.logEnabled && (l.b.log("WebCrypto AES decrypt"), this.logEnabled = !1);
                        var d = this.subtle;
                        this.key !== e && (this.key = e, this.fastAesKey = new n.a(d, e)), this.fastAesKey.expandKey().then(function(n) {
                            new a.a(d, r).decrypt(t, n).catch(function(a) {
                                s.onWebCryptoError(a, t, e, r, i)
                            }).then(function(t) {
                                i(t)
                            })
                        }).catch(function(a) {
                            s.onWebCryptoError(a, t, e, r, i)
                        })
                    }
                }, t.prototype.onWebCryptoError = function(t, e, r, i, a) {
                    this.config.enableSoftwareAES ? (l.b.log("WebCrypto Error, disable WebCrypto API"), this.disableWebCrypto = !0, this.logEnabled = !0, this.decrypt(e, r, i, a)) : (l.b.error("decrypting error : " + t.message), this.observer.trigger(u.a.ERROR, {
                        type: s.b.MEDIA_ERROR,
                        details: s.a.FRAG_DECRYPT_ERROR,
                        fatal: !0,
                        reason: t.message
                    }))
                }, t.prototype.destroy = function() {
                    var t = this.decryptor;
                    t && (t.destroy(), this.decryptor = void 0)
                }, t
            }();
        e.a = h
    }, function(t, e, r) {
        "use strict";

        function i() {
            if ("undefined" != typeof window) return window.MediaSource || window.WebKitMediaSource
        }
        e.a = i
    }, function(t, e, r) {
        "use strict";

        function i(t, e, r) {
            switch (e) {
                case "audio":
                    t.audioGroupIds || (t.audioGroupIds = []), t.audioGroupIds.push(r);
                    break;
                case "text":
                    t.textGroupIds || (t.textGroupIds = []), t.textGroupIds.push(r)
            }
        }

        function a(t, e, r) {
            var i = t[e],
                a = t[r],
                n = a.startPTS;
            Object(s.a)(n) ? r > e ? (i.duration = n - i.start, i.duration < 0 && l.b.warn("negative duration computed for frag " + i.sn + ",level " + i.level + ", there should be some duration drift between playlist and fragment!")) : (a.duration = i.start - n, a.duration < 0 && l.b.warn("negative duration computed for frag " + a.sn + ",level " + a.level + ", there should be some duration drift between playlist and fragment!")) : a.start = r > e ? i.start + i.duration : Math.max(i.start - a.duration, 0)
        }

        function n(t, e, r, i, n, o) {
            var l = r;
            if (Object(s.a)(e.startPTS)) {
                var u = Math.abs(e.startPTS - r);
                Object(s.a)(e.deltaPTS) ? e.deltaPTS = Math.max(u, e.deltaPTS) : e.deltaPTS = u, l = Math.max(r, e.startPTS), r = Math.min(r, e.startPTS), i = Math.max(i, e.endPTS), n = Math.min(n, e.startDTS), o = Math.max(o, e.endDTS)
            }
            var d = r - e.start;
            e.start = e.startPTS = r, e.maxStartPTS = l, e.endPTS = i, e.startDTS = n, e.endDTS = o, e.duration = i - r;
            var c = e.sn;
            if (!t || c < t.startSN || c > t.endSN) return 0;
            var h = void 0,
                f = void 0,
                p = void 0;
            for (h = c - t.startSN, f = t.fragments, f[h] = e, p = h; p > 0; p--) a(f, p, p - 1);
            for (p = h; p < f.length - 1; p++) a(f, p, p + 1);
            return t.PTSKnown = !0, d
        }

        function o(t, e) {
            var r = Math.max(t.startSN, e.startSN) - e.startSN,
                i = Math.min(t.endSN, e.endSN) - e.startSN,
                a = e.startSN - t.startSN,
                o = t.fragments,
                u = e.fragments,
                d = 0,
                c = void 0;
            if (e.initSegment && t.initSegment && (e.initSegment = t.initSegment), i < r) return void(e.PTSKnown = !1);
            for (var h = r; h <= i; h++) {
                var f = o[a + h],
                    p = u[h];
                p && f && (d = f.cc - p.cc, Object(s.a)(f.startPTS) && (p.start = p.startPTS = f.startPTS, p.endPTS = f.endPTS, p.duration = f.duration, p.backtracked = f.backtracked, p.dropped = f.dropped, c = p))
            }
            if (d)
                for (l.b.log("discontinuity sliding from playlist, take drift into account"), h = 0; h < u.length; h++) u[h].cc += d;
            if (c) n(e, c, c.startPTS, c.endPTS, c.startDTS, c.endDTS);
            else if (a >= 0 && a < o.length) {
                var g = o[a].start;
                for (h = 0; h < u.length; h++) u[h].start += g
            }
            e.PTSKnown = t.PTSKnown
        }
        e.a = i, e.c = n, e.b = o;
        var s = r(3),
            l = r(0)
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(3),
            s = r(1),
            l = r(4),
            u = r(2),
            d = r(0),
            c = r(18),
            h = r(30),
            f = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            p = window,
            g = p.performance,
            v = {
                MANIFEST: "manifest",
                LEVEL: "level",
                AUDIO_TRACK: "audioTrack",
                SUBTITLE_TRACK: "subtitleTrack"
            },
            y = {
                MAIN: "main",
                AUDIO: "audio",
                SUBTITLE: "subtitle"
            },
            m = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, s.a.MANIFEST_LOADING, s.a.LEVEL_LOADING, s.a.AUDIO_TRACK_LOADING, s.a.SUBTITLE_TRACK_LOADING));
                    return n.loaders = {}, n
                }
                return n(e, t), e.canHaveQualityLevels = function(t) {
                    return t !== v.AUDIO_TRACK && t !== v.SUBTITLE_TRACK
                }, e.mapContextToLevelType = function(t) {
                    switch (t.type) {
                        case v.AUDIO_TRACK:
                            return y.AUDIO;
                        case v.SUBTITLE_TRACK:
                            return y.SUBTITLE;
                        default:
                            return y.MAIN
                    }
                }, e.getResponseUrl = function(t, e) {
                    var r = t.url;
                    return void 0 !== r && 0 !== r.indexOf("data:") || (r = e.url), r
                }, e.prototype.createInternalLoader = function(t) {
                    var e = this.hls.config,
                        r = e.pLoader,
                        i = e.loader,
                        a = r || i,
                        n = new a(e);
                    return t.loader = n, this.loaders[t.type] = n, n
                }, e.prototype.getInternalLoader = function(t) {
                    return this.loaders[t.type]
                }, e.prototype.resetInternalLoader = function(t) {
                    this.loaders[t] && delete this.loaders[t]
                }, e.prototype.destroyInternalLoaders = function() {
                    for (var t in this.loaders) {
                        var e = this.loaders[t];
                        e && e.destroy(), this.resetInternalLoader(t)
                    }
                }, e.prototype.destroy = function() {
                    this.destroyInternalLoaders(), t.prototype.destroy.call(this)
                }, e.prototype.onManifestLoading = function(t) {
                    this.load(t.url, {
                        type: v.MANIFEST,
                        level: 0,
                        id: null
                    })
                }, e.prototype.onLevelLoading = function(t) {
                    this.load(t.url, {
                        type: v.LEVEL,
                        level: t.level,
                        id: t.id
                    })
                }, e.prototype.onAudioTrackLoading = function(t) {
                    this.load(t.url, {
                        type: v.AUDIO_TRACK,
                        level: null,
                        id: t.id
                    })
                }, e.prototype.onSubtitleTrackLoading = function(t) {
                    this.load(t.url, {
                        type: v.SUBTITLE_TRACK,
                        level: null,
                        id: t.id
                    })
                }, e.prototype.load = function(t, e) {
                    var r = this.hls.config;
                    d.b.debug("Loading playlist of type " + e.type + ", level: " + e.level + ", id: " + e.id);
                    var i = this.getInternalLoader(e);
                    if (i) {
                        var a = i.context;
                        if (a && a.url === t) return d.b.trace("playlist request ongoing"), !1;
                        d.b.warn("aborting previous loader for type: " + e.type), i.abort()
                    }
                    var n = void 0,
                        o = void 0,
                        s = void 0,
                        l = void 0;
                    switch (e.type) {
                        case v.MANIFEST:
                            n = r.manifestLoadingMaxRetry, o = r.manifestLoadingTimeOut, s = r.manifestLoadingRetryDelay, l = r.manifestLoadingMaxRetryTimeout;
                            break;
                        case v.LEVEL:
                            n = 0, o = r.levelLoadingTimeOut;
                            break;
                        default:
                            n = r.levelLoadingMaxRetry, o = r.levelLoadingTimeOut, s = r.levelLoadingRetryDelay, l = r.levelLoadingMaxRetryTimeout
                    }
                    i = this.createInternalLoader(e), e.url = t, e.responseType = e.responseType || "";
                    var u = {
                            timeout: o,
                            maxRetry: n,
                            retryDelay: s,
                            maxRetryDelay: l
                        },
                        c = {
                            onSuccess: this.loadsuccess.bind(this),
                            onError: this.loaderror.bind(this),
                            onTimeout: this.loadtimeout.bind(this)
                        };
                    return d.b.debug("Calling internal loader delegate for URL: " + t), i.load(e, u, c), !0
                }, e.prototype.loadsuccess = function(t, e, r) {
                    var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null;
                    if (r.isSidxRequest) return this._handleSidxRequest(t, r), void this._handlePlaylistLoaded(t, e, r, i);
                    this.resetInternalLoader(r.type);
                    var a = t.data;
                    if (e.tload = g.now(), 0 !== a.indexOf("#EXTM3U")) return void this._handleManifestParsingError(t, r, "no EXTM3U delimiter", i);
                    a.indexOf("#EXTINF:") > 0 || a.indexOf("#EXT-X-TARGETDURATION:") > 0 ? this._handleTrackOrLevelPlaylist(t, e, r, i) : this._handleMasterPlaylist(t, e, r, i)
                }, e.prototype.loaderror = function(t, e) {
                    var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
                    this._handleNetworkError(e, r)
                }, e.prototype.loadtimeout = function(t, e) {
                    var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null;
                    this._handleNetworkError(e, r, !0)
                }, e.prototype._handleMasterPlaylist = function(t, r, i, a) {
                    var n = this.hls,
                        o = t.data,
                        l = e.getResponseUrl(t, i),
                        u = h.a.parseMasterPlaylist(o, l);
                    if (!u.length) return void this._handleManifestParsingError(t, i, "no level found in manifest", a);
                    var c = u.map(function(t) {
                            return {
                                id: t.attrs.AUDIO,
                                codec: t.audioCodec
                            }
                        }),
                        f = h.a.parseMasterPlaylistMedia(o, l, "AUDIO", c),
                        p = h.a.parseMasterPlaylistMedia(o, l, "SUBTITLES");
                    if (f.length) {
                        var g = !1;
                        f.forEach(function(t) {
                            t.url || (g = !0)
                        }), !1 === g && u[0].audioCodec && !u[0].attrs.AUDIO && (d.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"), f.unshift({
                            type: "main",
                            name: "main"
                        }))
                    }
                    n.trigger(s.a.MANIFEST_LOADED, {
                        levels: u,
                        audioTracks: f,
                        subtitles: p,
                        url: l,
                        stats: r,
                        networkDetails: a
                    })
                }, e.prototype._handleTrackOrLevelPlaylist = function(t, r, i, a) {
                    var n = this.hls,
                        l = i.id,
                        u = i.level,
                        d = i.type,
                        c = e.getResponseUrl(t, i),
                        f = Object(o.a)(l) ? l : 0,
                        p = Object(o.a)(u) ? u : f,
                        y = e.mapContextToLevelType(i),
                        m = h.a.parseLevelPlaylist(t.data, c, p, y, f);
                    if (m.tload = r.tload, d === v.MANIFEST) {
                        var b = {
                            url: c,
                            details: m
                        };
                        n.trigger(s.a.MANIFEST_LOADED, {
                            levels: [b],
                            audioTracks: [],
                            url: c,
                            stats: r,
                            networkDetails: a
                        })
                    }
                    if (r.tparsed = g.now(), m.needSidxRanges) {
                        var E = m.initSegment.url;
                        return void this.load(E, {
                            isSidxRequest: !0,
                            type: d,
                            level: u,
                            levelDetails: m,
                            id: l,
                            rangeStart: 0,
                            rangeEnd: 2048,
                            responseType: "arraybuffer"
                        })
                    }
                    i.levelDetails = m, this._handlePlaylistLoaded(t, r, i, a)
                }, e.prototype._handleSidxRequest = function(t, e) {
                    var r = c.a.parseSegmentIndex(new Uint8Array(t.data));
                    r.references.forEach(function(t, r) {
                        var i = t.info,
                            a = e.levelDetails.fragments[r];
                        0 === a.byteRange.length && (a.rawByteRange = String(1 + i.end - i.start) + "@" + String(i.start))
                    }), e.levelDetails.initSegment.rawByteRange = String(r.moovEndOffset) + "@0"
                }, e.prototype._handleManifestParsingError = function(t, e, r, i) {
                    this.hls.trigger(s.a.ERROR, {
                        type: u.b.NETWORK_ERROR,
                        details: u.a.MANIFEST_PARSING_ERROR,
                        fatal: !0,
                        url: t.url,
                        reason: r,
                        networkDetails: i
                    })
                }, e.prototype._handleNetworkError = function(t, e) {
                    var r = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
                    d.b.info("A network error occured while loading a " + t.type + "-type playlist");
                    var i = void 0,
                        a = void 0,
                        n = this.getInternalLoader(t);
                    switch (t.type) {
                        case v.MANIFEST:
                            i = r ? u.a.MANIFEST_LOAD_TIMEOUT : u.a.MANIFEST_LOAD_ERROR, a = !0;
                            break;
                        case v.LEVEL:
                            i = r ? u.a.LEVEL_LOAD_TIMEOUT : u.a.LEVEL_LOAD_ERROR, a = !1;
                            break;
                        case v.AUDIO_TRACK:
                            i = r ? u.a.AUDIO_TRACK_LOAD_TIMEOUT : u.a.AUDIO_TRACK_LOAD_ERROR, a = !1;
                            break;
                        default:
                            a = !1
                    }
                    n && (n.abort(), this.resetInternalLoader(t.type)), this.hls.trigger(s.a.ERROR, {
                        type: u.b.NETWORK_ERROR,
                        details: i,
                        fatal: a,
                        url: n.url,
                        loader: n,
                        context: t,
                        networkDetails: e
                    })
                }, e.prototype._handlePlaylistLoaded = function(t, r, i, a) {
                    var n = i.type,
                        o = i.level,
                        l = i.id,
                        u = i.levelDetails;
                    if (!u.targetduration) return void this._handleManifestParsingError(t, i, "invalid target duration", a);
                    if (e.canHaveQualityLevels(i.type)) this.hls.trigger(s.a.LEVEL_LOADED, {
                        details: u,
                        level: o || 0,
                        id: l || 0,
                        stats: r,
                        networkDetails: a
                    });
                    else switch (n) {
                        case v.AUDIO_TRACK:
                            this.hls.trigger(s.a.AUDIO_TRACK_LOADED, {
                                details: u,
                                id: l,
                                stats: r,
                                networkDetails: a
                            });
                            break;
                        case v.SUBTITLE_TRACK:
                            this.hls.trigger(s.a.SUBTITLE_TRACK_LOADED, {
                                details: u,
                                id: l,
                                stats: r,
                                networkDetails: a
                            })
                    }
                }, f(e, null, [{
                    key: "ContextType",
                    get: function() {
                        return v
                    }
                }, {
                    key: "LevelType",
                    get: function() {
                        return y
                    }
                }]), e
            }(l.a);
        e.a = m
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(0),
            n = r(1),
            o = Math.pow(2, 32) - 1,
            s = function() {
                function t(e, r) {
                    i(this, t), this.observer = e, this.remuxer = r
                }
                return t.prototype.resetTimeStamp = function(t) {
                    this.initPTS = t
                }, t.prototype.resetInitSegment = function(e, r, i, a) {
                    if (e && e.byteLength) {
                        var o = this.initData = t.parseInitSegment(e);
                        null == r && (r = "mp4a.40.5"), null == i && (i = "avc1.42e01e");
                        var s = {};
                        o.audio && o.video ? s.audiovideo = {
                            container: "video/mp4",
                            codec: r + "," + i,
                            initSegment: a ? e : null
                        } : (o.audio && (s.audio = {
                            container: "audio/mp4",
                            codec: r,
                            initSegment: a ? e : null
                        }), o.video && (s.video = {
                            container: "video/mp4",
                            codec: i,
                            initSegment: a ? e : null
                        })), this.observer.trigger(n.a.FRAG_PARSING_INIT_SEGMENT, {
                            tracks: s
                        })
                    } else r && (this.audioCodec = r), i && (this.videoCodec = i)
                }, t.probe = function(e) {
                    return t.findBox({
                        data: e,
                        start: 0,
                        end: Math.min(e.length, 16384)
                    }, ["moof"]).length > 0
                }, t.bin2str = function(t) {
                    return String.fromCharCode.apply(null, t)
                }, t.readUint16 = function(t, e) {
                    t.data && (e += t.start, t = t.data);
                    var r = t[e] << 8 | t[e + 1];
                    return r < 0 ? 65536 + r : r
                }, t.readUint32 = function(t, e) {
                    t.data && (e += t.start, t = t.data);
                    var r = t[e] << 24 | t[e + 1] << 16 | t[e + 2] << 8 | t[e + 3];
                    return r < 0 ? 4294967296 + r : r
                }, t.writeUint32 = function(t, e, r) {
                    t.data && (e += t.start, t = t.data), t[e] = r >> 24, t[e + 1] = r >> 16 & 255, t[e + 2] = r >> 8 & 255, t[e + 3] = 255 & r
                }, t.findBox = function(e, r) {
                    var i = [],
                        a = void 0,
                        n = void 0,
                        o = void 0,
                        s = void 0,
                        l = void 0,
                        u = void 0,
                        d = void 0;
                    if (e.data ? (u = e.start, s = e.end, e = e.data) : (u = 0, s = e.byteLength), !r.length) return null;
                    for (a = u; a < s;) n = t.readUint32(e, a), o = t.bin2str(e.subarray(a + 4, a + 8)), d = n > 1 ? a + n : s, o === r[0] && (1 === r.length ? i.push({
                        data: e,
                        start: a + 8,
                        end: d
                    }) : (l = t.findBox({
                        data: e,
                        start: a + 8,
                        end: d
                    }, r.slice(1)), l.length && (i = i.concat(l)))), a = d;
                    return i
                }, t.parseSegmentIndex = function(e) {
                    var r = t.findBox(e, ["moov"])[0],
                        i = r ? r.end : null,
                        a = 0,
                        n = t.findBox(e, ["sidx"]),
                        o = void 0;
                    if (!n || !n[0]) return null;
                    o = [], n = n[0];
                    var s = n.data[0];
                    a = 0 === s ? 8 : 16;
                    var l = t.readUint32(n, a);
                    a += 4;
                    a += 0 === s ? 8 : 16, a += 2;
                    var u = n.end + 0,
                        d = t.readUint16(n, a);
                    a += 2;
                    for (var c = 0; c < d; c++) {
                        var h = a,
                            f = t.readUint32(n, h);
                        h += 4;
                        var p = 2147483647 & f;
                        if (1 === (2147483648 & f) >>> 31) return void console.warn("SIDX has hierarchical references (not supported)");
                        var g = t.readUint32(n, h);
                        h += 4, o.push({
                            referenceSize: p,
                            subsegmentDuration: g,
                            info: {
                                duration: g / l,
                                start: u,
                                end: u + p - 1
                            }
                        }), u += p, h += 4, a = h
                    }
                    return {
                        earliestPresentationTime: 0,
                        timescale: l,
                        version: s,
                        referencesCount: d,
                        references: o,
                        moovEndOffset: i
                    }
                }, t.parseInitSegment = function(e) {
                    var r = [];
                    return t.findBox(e, ["moov", "trak"]).forEach(function(e) {
                        var i = t.findBox(e, ["tkhd"])[0];
                        if (i) {
                            var n = i.data[i.start],
                                o = 0 === n ? 12 : 20,
                                s = t.readUint32(i, o),
                                l = t.findBox(e, ["mdia", "mdhd"])[0];
                            if (l) {
                                n = l.data[l.start], o = 0 === n ? 12 : 20;
                                var u = t.readUint32(l, o),
                                    d = t.findBox(e, ["mdia", "hdlr"])[0];
                                if (d) {
                                    var c = t.bin2str(d.data.subarray(d.start + 8, d.start + 12)),
                                        h = {
                                            soun: "audio",
                                            vide: "video"
                                        } [c];
                                    if (h) {
                                        var f = t.findBox(e, ["mdia", "minf", "stbl", "stsd"]);
                                        if (f.length) {
                                            f = f[0];
                                            var p = t.bin2str(f.data.subarray(f.start + 12, f.start + 16));
                                            a.b.log("MP4Demuxer:" + h + ":" + p + " found")
                                        }
                                        r[s] = {
                                            timescale: u,
                                            type: h
                                        }, r[h] = {
                                            timescale: u,
                                            id: s
                                        }
                                    }
                                }
                            }
                        }
                    }), r
                }, t.getStartDTS = function(e, r) {
                    var i = void 0,
                        a = void 0,
                        n = void 0;
                    return i = t.findBox(r, ["moof", "traf"]), a = [].concat.apply([], i.map(function(r) {
                        return t.findBox(r, ["tfhd"]).map(function(i) {
                            var a = void 0,
                                n = void 0;
                            return a = t.readUint32(i, 4), n = e[a].timescale || 9e4, t.findBox(r, ["tfdt"]).map(function(e) {
                                var r = void 0,
                                    i = void 0;
                                return r = e.data[e.start], i = t.readUint32(e, 4), 1 === r && (i *= Math.pow(2, 32), i += t.readUint32(e, 8)), i
                            })[0] / n
                        })
                    })), n = Math.min.apply(null, a), isFinite(n) ? n : 0
                }, t.offsetStartDTS = function(e, r, i) {
                    t.findBox(r, ["moof", "traf"]).map(function(r) {
                        return t.findBox(r, ["tfhd"]).map(function(a) {
                            var n = t.readUint32(a, 4),
                                s = e[n].timescale || 9e4;
                            t.findBox(r, ["tfdt"]).map(function(e) {
                                var r = e.data[e.start],
                                    a = t.readUint32(e, 4);
                                if (0 === r) t.writeUint32(e, 4, a - i * s);
                                else {
                                    a *= Math.pow(2, 32), a += t.readUint32(e, 8), a -= i * s, a = Math.max(a, 0);
                                    var n = Math.floor(a / (o + 1)),
                                        l = Math.floor(a % (o + 1));
                                    t.writeUint32(e, 4, n), t.writeUint32(e, 8, l)
                                }
                            })
                        })
                    })
                }, t.prototype.append = function(e, r, i, a) {
                    var o = this.initData;
                    o || (this.resetInitSegment(e, this.audioCodec, this.videoCodec, !1), o = this.initData);
                    var s = void 0,
                        l = this.initPTS;
                    if (void 0 === l) {
                        var u = t.getStartDTS(o, e);
                        this.initPTS = l = u - r, this.observer.trigger(n.a.INIT_PTS_FOUND, {
                            initPTS: l
                        })
                    }
                    t.offsetStartDTS(o, e, l), s = t.getStartDTS(o, e), this.remuxer.remux(o.audio, o.video, null, null, s, i, a, e)
                }, t.prototype.destroy = function() {}, t
            }();
        e.a = s
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(6),
            n = r.n(a),
            o = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            s = function() {
                function t() {
                    i(this, t), this.method = null, this.key = null, this.iv = null, this._uri = null
                }
                return o(t, [{
                    key: "uri",
                    get: function() {
                        return !this._uri && this.reluri && (this._uri = n.a.buildAbsoluteURL(this.baseuri, this.reluri, {
                            alwaysNormalize: !0
                        })), this._uri
                    }
                }]), t
            }();
        e.a = s
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            var r = n[e];
            return !!r && !0 === r[t.slice(0, 4)]
        }

        function a(t, e) {
            return window.MediaSource.isTypeSupported((e || "video") + '/mp4;codecs="' + t + '"')
        }
        r.d(e, "b", function() {
            return i
        }), r.d(e, "a", function() {
            return a
        });
        var n = {
            audio: {
                a3ds: !0,
                "ac-3": !0,
                "ac-4": !0,
                alac: !0,
                alaw: !0,
                dra1: !0,
                "dts+": !0,
                "dts-": !0,
                dtsc: !0,
                dtse: !0,
                dtsh: !0,
                "ec-3": !0,
                enca: !0,
                g719: !0,
                g726: !0,
                m4ae: !0,
                mha1: !0,
                mha2: !0,
                mhm1: !0,
                mhm2: !0,
                mlpa: !0,
                mp4a: !0,
                "raw ": !0,
                Opus: !0,
                samr: !0,
                sawb: !0,
                sawp: !0,
                sevc: !0,
                sqcp: !0,
                ssmv: !0,
                twos: !0,
                ulaw: !0
            },
            video: {
                avc1: !0,
                avc2: !0,
                avc3: !0,
                avc4: !0,
                avcp: !0,
                drac: !0,
                dvav: !0,
                dvhe: !0,
                encv: !0,
                hev1: !0,
                hvc1: !0,
                mjp2: !0,
                mp4v: !0,
                mvc1: !0,
                mvc2: !0,
                mvc3: !0,
                mvc4: !0,
                resv: !0,
                rv60: !0,
                s263: !0,
                svc1: !0,
                svc2: !0,
                "vc-1": !0,
                vp08: !0,
                vp09: !0
            }
        }
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(3),
            n = r(13),
            o = r.n(n),
            s = r(36),
            l = r.n(s),
            u = r(1),
            d = r(22),
            c = r(0),
            h = r(2),
            f = r(15),
            p = r(5),
            g = Object(p.a)(),
            v = Object(f.a)(),
            y = function() {
                function t(e, r) {
                    i(this, t), this.hls = e, this.id = r;
                    var a = this.observer = new o.a,
                        n = e.config;
                    a.trigger = function(t) {
                        for (var e = arguments.length, r = Array(e > 1 ? e - 1 : 0), i = 1; i < e; i++) r[i - 1] = arguments[i];
                        a.emit.apply(a, [t, t].concat(r))
                    }, a.off = function(t) {
                        for (var e = arguments.length, r = Array(e > 1 ? e - 1 : 0), i = 1; i < e; i++) r[i - 1] = arguments[i];
                        a.removeListener.apply(a, [t].concat(r))
                    };
                    var s = function(t, r) {
                        r = r || {}, r.frag = this.frag, r.id = this.id, e.trigger(t, r)
                    }.bind(this);
                    a.on(u.a.FRAG_DECRYPTED, s), a.on(u.a.FRAG_PARSING_INIT_SEGMENT, s), a.on(u.a.FRAG_PARSING_DATA, s), a.on(u.a.FRAG_PARSED, s), a.on(u.a.ERROR, s), a.on(u.a.FRAG_PARSING_METADATA, s), a.on(u.a.FRAG_PARSING_USERDATA, s), a.on(u.a.INIT_PTS_FOUND, s);
                    var f = {
                            mp4: v.isTypeSupported("video/mp4"),
                            mpeg: v.isTypeSupported("audio/mpeg"),
                            mp3: v.isTypeSupported('audio/mp4; codecs="mp3"')
                        },
                        p = navigator.vendor;
                    if (n.enableWorker && "undefined" != typeof Worker) {
                        c.b.log("demuxing in webworker");
                        var y = void 0;
                        try {
                            y = this.w = l()(49), this.onwmsg = this.onWorkerMessage.bind(this), y.addEventListener("message", this.onwmsg), y.onerror = function(t) {
                                e.trigger(u.a.ERROR, {
                                    type: h.b.OTHER_ERROR,
                                    details: h.a.INTERNAL_EXCEPTION,
                                    fatal: !0,
                                    event: "demuxerWorker",
                                    err: {
                                        message: t.message + " (" + t.filename + ":" + t.lineno + ")"
                                    }
                                })
                            }, y.postMessage({
                                cmd: "init",
                                typeSupported: f,
                                vendor: p,
                                id: r,
                                config: JSON.stringify(n)
                            })
                        } catch (t) {
                            c.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"), y && g.URL.revokeObjectURL(y.objectURL), this.demuxer = new d.a(a, f, n, p), this.w = void 0
                        }
                    } else this.demuxer = new d.a(a, f, n, p)
                }
                return t.prototype.destroy = function() {
                    var t = this.w;
                    if (t) t.removeEventListener("message", this.onwmsg), t.terminate(), this.w = null;
                    else {
                        var e = this.demuxer;
                        e && (e.destroy(), this.demuxer = null)
                    }
                    var r = this.observer;
                    r && (r.removeAllListeners(), this.observer = null)
                }, t.prototype.push = function(t, e, r, i, n, o, s, l) {
                    var u = this.w,
                        d = Object(a.a)(n.startDTS) ? n.startDTS : n.start,
                        h = n.decryptdata,
                        f = this.frag,
                        p = !(f && n.cc === f.cc),
                        g = !(f && n.level === f.level),
                        v = f && n.sn === f.sn + 1,
                        y = !g && v;
                    if (p && c.b.log(this.id + ":discontinuity detected"), g && c.b.log(this.id + ":switch detected"), this.frag = n, u) u.postMessage({
                        cmd: "demux",
                        data: t,
                        decryptdata: h,
                        initSegment: e,
                        audioCodec: r,
                        videoCodec: i,
                        timeOffset: d,
                        discontinuity: p,
                        trackSwitch: g,
                        contiguous: y,
                        duration: o,
                        accurateTimeOffset: s,
                        defaultInitPTS: l
                    }, t instanceof ArrayBuffer ? [t] : []);
                    else {
                        var m = this.demuxer;
                        m && m.push(t, h, e, r, i, d, p, g, y, o, s, l)
                    }
                }, t.prototype.onWorkerMessage = function(t) {
                    var e = t.data,
                        r = this.hls;
                    switch (e.event) {
                        case "init":
                            g.URL.revokeObjectURL(this.w.objectURL);
                            break;
                        case u.a.FRAG_PARSING_DATA:
                            e.data.data1 = new Uint8Array(e.data1), e.data2 && (e.data.data2 = new Uint8Array(e.data2));
                        default:
                            e.data = e.data || {}, e.data.frag = this.frag, e.data.id = this.id, r.trigger(e.event, e.data)
                    }
                }, t
            }();
        e.a = y
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(1),
            n = r(2),
            o = r(14),
            s = r(40),
            l = r(18),
            u = r(41),
            d = r(44),
            c = r(45),
            h = r(48),
            f = r(5),
            p = Object(f.a)(),
            g = p.performance,
            v = function() {
                function t(e, r, a, n) {
                    i(this, t), this.observer = e, this.typeSupported = r, this.config = a, this.vendor = n
                }
                return t.prototype.destroy = function() {
                    var t = this.demuxer;
                    t && t.destroy()
                }, t.prototype.push = function(t, e, r, i, n, s, l, u, d, c, h, f) {
                    if (t.byteLength > 0 && null != e && null != e.key && "AES-128" === e.method) {
                        var p = this.decrypter;
                        null == p && (p = this.decrypter = new o.a(this.observer, this.config));
                        var v = this,
                            y = void 0;
                        try {
                            y = g.now()
                        } catch (t) {
                            y = Date.now()
                        }
                        p.decrypt(t, e.key.buffer, e.iv.buffer, function(t) {
                            var o = void 0;
                            try {
                                o = g.now()
                            } catch (t) {
                                o = Date.now()
                            }
                            v.observer.trigger(a.a.FRAG_DECRYPTED, {
                                stats: {
                                    tstart: y,
                                    tdecrypt: o
                                }
                            }), v.pushDecrypted(new Uint8Array(t), e, new Uint8Array(r), i, n, s, l, u, d, c, h, f)
                        })
                    } else this.pushDecrypted(new Uint8Array(t), e, new Uint8Array(r), i, n, s, l, u, d, c, h, f)
                }, t.prototype.pushDecrypted = function(t, e, r, i, o, f, p, g, v, y, m, b) {
                    var E = this.demuxer;
                    if (!E || (p || g) && !this.probe(t)) {
                        for (var T = this.observer, S = this.typeSupported, A = this.config, R = [{
                                demux: u.a,
                                remux: c.a
                            }, {
                                demux: l.a,
                                remux: h.a
                            }, {
                                demux: s.a,
                                remux: c.a
                            }, {
                                demux: d.a,
                                remux: c.a
                            }], _ = 0, w = R.length; _ < w; _++) {
                            var L = R[_],
                                D = L.demux.probe;
                            if (D(t)) {
                                var I = this.remuxer = new L.remux(T, A, S, this.vendor);
                                E = new L.demux(T, I, A, S), this.probe = D;
                                break
                            }
                        }
                        if (!E) return void T.trigger(a.a.ERROR, {
                            type: n.b.MEDIA_ERROR,
                            details: n.a.FRAG_PARSING_ERROR,
                            fatal: !0,
                            reason: "no demux matching with content found"
                        });
                        this.demuxer = E
                    }
                    var k = this.remuxer;
                    (p || g) && (E.resetInitSegment(r, i, o, y), k.resetInitSegment()), p && (E.resetTimeStamp(b), k.resetTimeStamp(b)), "function" == typeof E.setDecryptData && E.setDecryptData(e), E.append(t, f, v, m)
                }, t
            }();
        e.a = v
    }, function(t, e, r) {
        "use strict";

        function i(t, e, r, i) {
            var a = void 0,
                n = void 0,
                o = void 0,
                s = void 0,
                l = void 0,
                u = navigator.userAgent.toLowerCase(),
                d = i,
                c = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];
            return a = 1 + ((192 & e[r + 2]) >>> 6), (n = (60 & e[r + 2]) >>> 2) > c.length - 1 ? void t.trigger(g.a.ERROR, {
                type: p.b.MEDIA_ERROR,
                details: p.a.FRAG_PARSING_ERROR,
                fatal: !0,
                reason: "invalid ADTS sampling index:" + n
            }) : (s = (1 & e[r + 2]) << 2, s |= (192 & e[r + 3]) >>> 6, f.b.log("manifest codec:" + i + ",ADTS data:type:" + a + ",sampleingIndex:" + n + "[" + c[n] + "Hz],channelConfig:" + s), /firefox/i.test(u) ? n >= 6 ? (a = 5, l = new Array(4), o = n - 3) : (a = 2, l = new Array(2), o = n) : -1 !== u.indexOf("android") ? (a = 2, l = new Array(2), o = n) : (a = 5, l = new Array(4), i && (-1 !== i.indexOf("mp4a.40.29") || -1 !== i.indexOf("mp4a.40.5")) || !i && n >= 6 ? o = n - 3 : ((i && -1 !== i.indexOf("mp4a.40.2") && (n >= 6 && 1 === s || /vivaldi/i.test(u)) || !i && 1 === s) && (a = 2, l = new Array(2)), o = n)), l[0] = a << 3, l[0] |= (14 & n) >> 1, l[1] |= (1 & n) << 7, l[1] |= s << 3, 5 === a && (l[1] |= (14 & o) >> 1, l[2] = (1 & o) << 7, l[2] |= 8, l[3] = 0), {
                config: l,
                samplerate: c[n],
                channelCount: s,
                codec: "mp4a.40." + a,
                manifestCodec: d
            })
        }

        function a(t, e) {
            return 255 === t[e] && 240 == (246 & t[e + 1])
        }

        function n(t, e) {
            return 1 & t[e + 1] ? 7 : 9
        }

        function o(t, e) {
            return (3 & t[e + 3]) << 11 | t[e + 4] << 3 | (224 & t[e + 5]) >>> 5
        }

        function s(t, e) {
            return !!(e + 1 < t.length && a(t, e))
        }

        function l(t, e) {
            if (e + 1 < t.length && a(t, e)) {
                var r = n(t, e),
                    i = r;
                e + 5 < t.length && (i = o(t, e));
                var s = e + i;
                if (s === t.length || s + 1 < t.length && a(t, s)) return !0
            }
            return !1
        }

        function u(t, e, r, a, n) {
            if (!t.samplerate) {
                var o = i(e, r, a, n);
                t.config = o.config, t.samplerate = o.samplerate, t.channelCount = o.channelCount, t.codec = o.codec, t.manifestCodec = o.manifestCodec, f.b.log("parsed codec:" + t.codec + ",rate:" + o.samplerate + ",nb channel:" + o.channelCount)
            }
        }

        function d(t) {
            return 9216e4 / t
        }

        function c(t, e, r, i, a) {
            var s = void 0,
                l = void 0,
                u = void 0,
                d = t.length;
            if (s = n(t, e), l = o(t, e), (l -= s) > 0 && e + s + l <= d) return u = r + i * a, {
                headerLength: s,
                frameLength: l,
                stamp: u
            }
        }

        function h(t, e, r, i, a) {
            var n = d(t.samplerate),
                o = c(e, r, i, a, n);
            if (o) {
                var s = o.stamp,
                    l = o.headerLength,
                    u = o.frameLength,
                    h = {
                        unit: e.subarray(r + l, r + l + u),
                        pts: s,
                        dts: s
                    };
                return t.samples.push(h), t.len += u, {
                    sample: h,
                    length: u + l
                }
            }
        }
        e.d = s, e.e = l, e.c = u, e.b = d, e.a = h;
        var f = r(0),
            p = r(2),
            g = r(1);
        r(5)
    }, function(t, e, r) {
        "use strict";
        var i = {
            BitratesMap: [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160],
            SamplingRateMap: [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3],
            SamplesCoefficients: [
                [0, 72, 144, 12],
                [0, 0, 0, 0],
                [0, 72, 144, 12],
                [0, 144, 144, 12]
            ],
            BytesInSlot: [0, 1, 1, 4],
            appendFrame: function(t, e, r, i, a) {
                if (!(r + 24 > e.length)) {
                    var n = this.parseHeader(e, r);
                    if (n && r + n.frameLength <= e.length) {
                        var o = 9e4 * n.samplesPerFrame / n.sampleRate,
                            s = i + a * o,
                            l = {
                                unit: e.subarray(r, r + n.frameLength),
                                pts: s,
                                dts: s
                            };
                        return t.config = [], t.channelCount = n.channelCount, t.samplerate = n.sampleRate, t.samples.push(l), t.len += n.frameLength, {
                            sample: l,
                            length: n.frameLength
                        }
                    }
                }
            },
            parseHeader: function(t, e) {
                var r = t[e + 1] >> 3 & 3,
                    a = t[e + 1] >> 1 & 3,
                    n = t[e + 2] >> 4 & 15,
                    o = t[e + 2] >> 2 & 3,
                    s = t[e + 2] >> 1 & 1;
                if (1 !== r && 0 !== n && 15 !== n && 3 !== o) {
                    var l = 3 === r ? 3 - a : 3 === a ? 3 : 4,
                        u = 1e3 * i.BitratesMap[14 * l + n - 1],
                        d = 3 === r ? 0 : 2 === r ? 1 : 2,
                        c = i.SamplingRateMap[3 * d + o],
                        h = t[e + 3] >> 6 == 3 ? 1 : 2,
                        f = i.SamplesCoefficients[r][a],
                        p = i.BytesInSlot[a],
                        g = 8 * f * p;
                    return {
                        sampleRate: c,
                        channelCount: h,
                        frameLength: parseInt(f * u / c + s, 10) * p,
                        samplesPerFrame: g
                    }
                }
            },
            isHeaderPattern: function(t, e) {
                return 255 === t[e] && 224 == (224 & t[e + 1]) && 0 != (6 & t[e + 1])
            },
            isHeader: function(t, e) {
                return !!(e + 1 < t.length && this.isHeaderPattern(t, e))
            },
            probe: function(t, e) {
                if (e + 1 < t.length && this.isHeaderPattern(t, e)) {
                    var r = this.parseHeader(t, e),
                        i = 4;
                    r && r.frameLength && (i = r.frameLength);
                    var a = e + i;
                    if (a === t.length || a + 1 < t.length && this.isHeaderPattern(t, a)) return !0
                }
                return !1
            }
        };
        e.a = i
    }, function(t, e, r) {
        "use strict";
        var i = {
            toString: function(t) {
                for (var e = "", r = t.length, i = 0; i < r; i++) e += "[" + t.start(i).toFixed(3) + "," + t.end(i).toFixed(3) + "]";
                return e
            }
        };
        e.a = i
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            for (var r = null, i = 0; i < t.length; i += 1) {
                var a = t[i];
                if (a && a.cc === e) {
                    r = a;
                    break
                }
            }
            return r
        }

        function a(t, e) {
            return h.a.search(t, function(t) {
                return t.cc < e ? 1 : t.cc > e ? -1 : 0
            })
        }

        function n(t, e, r) {
            var i = !1;
            return e && e.details && r && (r.endCC > r.startCC || t && t.cc < r.startCC) && (i = !0), i
        }

        function o(t, e) {
            var r = t.fragments,
                a = e.fragments;
            if (!a.length || !r.length) return void f.b.log("No fragments to align");
            var n = i(r, a[0].cc);
            return !n || n && !n.startPTS ? void f.b.log("No frag in previous level to align on") : n
        }

        function s(t, e) {
            e.fragments.forEach(function(e) {
                if (e) {
                    var r = e.start + t;
                    e.start = e.startPTS = r, e.endPTS = r + e.duration
                }
            }), e.PTSKnown = !0
        }

        function l(t, e, r) {
            u(t, r, e), !r.PTSKnown && e && d(r, e.details)
        }

        function u(t, e, r) {
            if (n(t, r, e)) {
                var i = o(r.details, e);
                i && (f.b.log("Adjusting PTS using last level due to CC increase within current level"), s(i.start, e))
            }
        }

        function d(t, e) {
            if (e && e.fragments.length) {
                if (!t.hasProgramDateTime || !e.hasProgramDateTime) return;
                var r = e.fragments[0].programDateTime,
                    i = t.fragments[0].programDateTime,
                    a = (i - r) / 1e3 + e.fragments[0].start;
                Object(c.a)(a) && (f.b.log("adjusting PTS using programDateTime delta, sliding:" + a.toFixed(3)), s(a, t))
            }
        }
        e.b = a, e.a = l;
        var c = r(3),
            h = r(7),
            f = r(0)
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            var r = null;
            try {
                r = new window.Event("addtrack")
            } catch (t) {
                r = document.createEvent("Event"), r.initEvent("addtrack", !1, !1)
            }
            r.track = t, e.dispatchEvent(r)
        }

        function a(t) {
            if (t && t.cues)
                for (; t.cues.length > 0;) t.removeCue(t.cues[0])
        }
        e.b = i, e.a = a
    }, function(t, e, r) {
        "use strict";

        function i() {
            this.window = window, this.state = "INITIAL", this.buffer = "", this.decoder = new d, this.regionList = []
        }

        function a(t) {
            function e(t, e, r, i) {
                return 3600 * (0 | t) + 60 * (0 | e) + (0 | r) + (0 | i) / 1e3
            }
            var r = t.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);
            return r ? r[3] ? e(r[1], r[2], r[3].replace(":", ""), r[4]) : r[1] > 59 ? e(r[1], r[2], 0, r[4]) : e(0, r[1], r[2], r[4]) : null
        }

        function n() {
            this.values = Object.create(null)
        }

        function o(t, e, r, i) {
            var a = i ? t.split(i) : [t];
            for (var n in a)
                if ("string" == typeof a[n]) {
                    var o = a[n].split(r);
                    if (2 === o.length) {
                        var s = o[0],
                            l = o[1];
                        e(s, l)
                    }
                }
        }

        function s(t, e, r) {
            function i() {
                var e = a(t);
                if (null === e) throw new Error("Malformed timestamp: " + l);
                return t = t.replace(/^[^\sa-zA-Z-]+/, ""), e
            }

            function s() {
                t = t.replace(/^\s+/, "")
            }
            var l = t;
            if (s(), e.startTime = i(), s(), "--\x3e" !== t.substr(0, 3)) throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): " + l);
            t = t.substr(3), s(), e.endTime = i(), s(),
                function(t, e) {
                    var i = new n;
                    o(t, function(t, e) {
                        switch (t) {
                            case "region":
                                for (var a = r.length - 1; a >= 0; a--)
                                    if (r[a].id === e) {
                                        i.set(t, r[a].region);
                                        break
                                    } break;
                            case "vertical":
                                i.alt(t, e, ["rl", "lr"]);
                                break;
                            case "line":
                                var n = e.split(","),
                                    o = n[0];
                                i.integer(t, o), i.percent(t, o) && i.set("snapToLines", !1), i.alt(t, o, ["auto"]), 2 === n.length && i.alt("lineAlign", n[1], ["start", h, "end"]);
                                break;
                            case "position":
                                n = e.split(","), i.percent(t, n[0]), 2 === n.length && i.alt("positionAlign", n[1], ["start", h, "end", "line-left", "line-right", "auto"]);
                                break;
                            case "size":
                                i.percent(t, e);
                                break;
                            case "align":
                                i.alt(t, e, ["start", h, "end", "left", "right"])
                        }
                    }, /:/, /\s/), e.region = i.get("region", null), e.vertical = i.get("vertical", "");
                    var a = i.get("line", "auto");
                    "auto" === a && -1 === c.line && (a = -1), e.line = a, e.lineAlign = i.get("lineAlign", "start"), e.snapToLines = i.get("snapToLines", !0), e.size = i.get("size", 100), e.align = i.get("align", h);
                    var s = i.get("position", "auto");
                    "auto" === s && 50 === c.position && (s = "start" === e.align || "left" === e.align ? 0 : "end" === e.align || "right" === e.align ? 100 : 50), e.position = s
                }(t, e)
        }

        function l(t) {
            return t.replace(/<br(?: \/)?>/gi, "\n")
        }
        r.d(e, "b", function() {
            return l
        });
        var u = r(66),
            d = function() {
                return {
                    decode: function(t) {
                        if (!t) return "";
                        if ("string" != typeof t) throw new Error("Error - expected string data.");
                        return decodeURIComponent(encodeURIComponent(t))
                    }
                }
            };
        n.prototype = {
            set: function(t, e) {
                this.get(t) || "" === e || (this.values[t] = e)
            },
            get: function(t, e, r) {
                return r ? this.has(t) ? this.values[t] : e[r] : this.has(t) ? this.values[t] : e
            },
            has: function(t) {
                return t in this.values
            },
            alt: function(t, e, r) {
                for (var i = 0; i < r.length; ++i)
                    if (e === r[i]) {
                        this.set(t, e);
                        break
                    }
            },
            integer: function(t, e) {
                /^-?\d+$/.test(e) && this.set(t, parseInt(e, 10))
            },
            percent: function(t, e) {
                return !!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/) && (e = parseFloat(e)) >= 0 && e <= 100) && (this.set(t, e), !0)
            }
        };
        var c = new u.a(0, 0, 0),
            h = "middle" === c.align ? "middle" : "center";
        i.prototype = {
            parse: function(t) {
                function e() {
                    var t = r.buffer,
                        e = 0;
                    for (t = l(t); e < t.length && "\r" !== t[e] && "\n" !== t[e];) ++e;
                    var i = t.substr(0, e);
                    return "\r" === t[e] && ++e, "\n" === t[e] && ++e, r.buffer = t.substr(e), i
                }
                var r = this;
                t && (r.buffer += r.decoder.decode(t, {
                    stream: !0
                }));
                try {
                    var i = void 0;
                    if ("INITIAL" === r.state) {
                        if (!/\r\n|\n/.test(r.buffer)) return this;
                        i = e();
                        var a = i.match(/^()?WEBVTT([ \t].*)?$/);
                        if (!a || !a[0]) throw new Error("Malformed WebVTT signature.");
                        r.state = "HEADER"
                    }
                    for (var n = !1; r.buffer;) {
                        if (!/\r\n|\n/.test(r.buffer)) return this;
                        switch (n ? n = !1 : i = e(), r.state) {
                            case "HEADER":
                                /:/.test(i) ? function(t) {
                                    o(t, function(t, e) {}, /:/)
                                }(i) : i || (r.state = "ID");
                                continue;
                            case "NOTE":
                                i || (r.state = "ID");
                                continue;
                            case "ID":
                                if (/^NOTE($|[ \t])/.test(i)) {
                                    r.state = "NOTE";
                                    break
                                }
                                if (!i) continue;
                                if (r.cue = new u.a(0, 0, ""), r.state = "CUE", -1 === i.indexOf("--\x3e")) {
                                    r.cue.id = i;
                                    continue
                                }
                            case "CUE":
                                try {
                                    s(i, r.cue, r.regionList)
                                } catch (t) {
                                    r.cue = null, r.state = "BADCUE";
                                    continue
                                }
                                r.state = "CUETEXT";
                                continue;
                            case "CUETEXT":
                                var d = -1 !== i.indexOf("--\x3e");
                                if (!i || d && (n = !0)) {
                                    r.oncue && r.oncue(r.cue), r.cue = null, r.state = "ID";
                                    continue
                                }
                                r.cue.text && (r.cue.text += "\n"), r.cue.text += i;
                                continue;
                            case "BADCUE":
                                i || (r.state = "ID");
                                continue
                        }
                    }
                } catch (t) {
                    "CUETEXT" === r.state && r.cue && r.oncue && r.oncue(r.cue), r.cue = null, r.state = "INITIAL" === r.state ? "BADWEBVTT" : "BADCUE"
                }
                return this
            },
            flush: function() {
                var t = this;
                try {
                    if (t.buffer += t.decoder.decode(), (t.cue || "HEADER" === t.state) && (t.buffer += "\n\n", t.parse()), "INITIAL" === t.state) throw new Error("Malformed WebVTT signature.")
                } catch (t) {
                    throw t
                }
                return t.onflush && t.onflush(), this
            }
        }, e.a = i
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var a = r(6),
            n = r.n(a),
            o = r(2),
            s = r(17),
            l = r(33),
            u = r(34),
            d = r(12),
            c = r(35),
            h = r(52),
            f = r(53),
            p = r(54),
            g = r(0),
            v = r(55),
            y = r(1),
            m = r(13),
            b = r.n(m),
            E = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }();
        r(75);
        var T = function() {
            function t() {
                var e = this,
                    r = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
                i(this, t);
                var a = t.DefaultConfig;
                if ((r.liveSyncDurationCount || r.liveMaxLatencyDurationCount) && (r.liveSyncDuration || r.liveMaxLatencyDuration)) throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");
                for (var n in a) n in r || (r[n] = a[n]);
                if (void 0 !== r.liveMaxLatencyDurationCount && r.liveMaxLatencyDurationCount <= r.liveSyncDurationCount) throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');
                if (void 0 !== r.liveMaxLatencyDuration && (r.liveMaxLatencyDuration <= r.liveSyncDuration || void 0 === r.liveSyncDuration)) throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');
                Object(g.a)(r.debug), this.config = r, this._autoLevelCapping = -1;
                var o = this.observer = new b.a;
                o.trigger = function(t) {
                    for (var e = arguments.length, r = Array(e > 1 ? e - 1 : 0), i = 1; i < e; i++) r[i - 1] = arguments[i];
                    o.emit.apply(o, [t, t].concat(r))
                }, o.off = function(t) {
                    for (var e = arguments.length, r = Array(e > 1 ? e - 1 : 0), i = 1; i < e; i++) r[i - 1] = arguments[i];
                    o.removeListener.apply(o, [t].concat(r))
                }, this.on = o.on.bind(o), this.off = o.off.bind(o), this.once = o.once.bind(o), this.trigger = o.trigger.bind(o);
                var p = this.abrController = new r.abrController(this),
                    v = new r.bufferController(this),
                    y = new r.capLevelController(this),
                    m = new r.fpsController(this),
                    E = new s.a(this),
                    T = new l.a(this),
                    S = new u.a(this),
                    A = new f.a(this),
                    R = this.levelController = new h.a(this),
                    _ = new d.b(this),
                    w = this.streamController = new c.a(this, _),
                    L = [R, w],
                    D = r.audioStreamController;
                D && L.push(new D(this, _)), this.networkControllers = L;
                var I = [E, T, S, p, v, y, m, A, _];
                if (D = r.audioTrackController) {
                    var k = new D(this);
                    this.audioTrackController = k, I.push(k)
                }
                if (D = r.subtitleTrackController) {
                    var O = new D(this);
                    this.subtitleTrackController = O, I.push(O)
                }
                if (D = r.emeController) {
                    var C = new D(this);
                    this.emeController = C, I.push(C)
                } [r.subtitleStreamController, r.timelineController].forEach(function(t) {
                    t && I.push(new t(e))
                }), this.coreComponents = I
            }
            return t.isSupported = function() {
                return Object(p.a)()
            }, E(t, null, [{
                key: "version",
                get: function() {
                    return "0.11.0"
                }
            }, {
                key: "Events",
                get: function() {
                    return y.a
                }
            }, {
                key: "ErrorTypes",
                get: function() {
                    return o.b
                }
            }, {
                key: "ErrorDetails",
                get: function() {
                    return o.a
                }
            }, {
                key: "DefaultConfig",
                get: function() {
                    return t.defaultConfig ? t.defaultConfig : v.a
                },
                set: function(e) {
                    t.defaultConfig = e
                }
            }]), t.prototype.destroy = function() {
                g.b.log("destroy"), this.trigger(y.a.DESTROYING), this.detachMedia(), this.coreComponents.concat(this.networkControllers).forEach(function(t) {
                    t.destroy()
                }), this.url = null, this.observer.removeAllListeners(), this._autoLevelCapping = -1
            }, t.prototype.attachMedia = function(t) {
                g.b.log("attachMedia"), this.media = t, this.trigger(y.a.MEDIA_ATTACHING, {
                    media: t
                })
            }, t.prototype.detachMedia = function() {
                g.b.log("detachMedia"), this.trigger(y.a.MEDIA_DETACHING), this.media = null
            }, t.prototype.loadSource = function(t) {
                t = n.a.buildAbsoluteURL(window.location.href, t, {
                    alwaysNormalize: !0
                }), g.b.log("loadSource:" + t), this.url = t, this.trigger(y.a.MANIFEST_LOADING, {
                    url: t
                })
            }, t.prototype.startLoad = function() {
                var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : -1;
                g.b.log("startLoad(" + t + ")"), this.networkControllers.forEach(function(e) {
                    e.startLoad(t)
                })
            }, t.prototype.stopLoad = function() {
                g.b.log("stopLoad"), this.networkControllers.forEach(function(t) {
                    t.stopLoad()
                })
            }, t.prototype.swapAudioCodec = function() {
                g.b.log("swapAudioCodec"), this.streamController.swapAudioCodec()
            }, t.prototype.recoverMediaError = function() {
                g.b.log("recoverMediaError");
                var t = this.media;
                this.detachMedia(), this.attachMedia(t)
            }, E(t, [{
                key: "levels",
                get: function() {
                    return this.levelController.levels
                }
            }, {
                key: "currentLevel",
                get: function() {
                    return this.streamController.currentLevel
                },
                set: function(t) {
                    g.b.log("set currentLevel:" + t), this.loadLevel = t, this.streamController.immediateLevelSwitch()
                }
            }, {
                key: "nextLevel",
                get: function() {
                    return this.streamController.nextLevel
                },
                set: function(t) {
                    g.b.log("set nextLevel:" + t), this.levelController.manualLevel = t, this.streamController.nextLevelSwitch()
                }
            }, {
                key: "loadLevel",
                get: function() {
                    return this.levelController.level
                },
                set: function(t) {
                    g.b.log("set loadLevel:" + t), this.levelController.manualLevel = t
                }
            }, {
                key: "nextLoadLevel",
                get: function() {
                    return this.levelController.nextLoadLevel
                },
                set: function(t) {
                    this.levelController.nextLoadLevel = t
                }
            }, {
                key: "firstLevel",
                get: function() {
                    return Math.max(this.levelController.firstLevel, this.minAutoLevel)
                },
                set: function(t) {
                    g.b.log("set firstLevel:" + t), this.levelController.firstLevel = t
                }
            }, {
                key: "startLevel",
                get: function() {
                    return this.levelController.startLevel
                },
                set: function(t) {
                    g.b.log("set startLevel:" + t);
                    var e = this; - 1 !== t && (t = Math.max(t, e.minAutoLevel)), e.levelController.startLevel = t
                }
            }, {
                key: "autoLevelCapping",
                get: function() {
                    return this._autoLevelCapping
                },
                set: function(t) {
                    g.b.log("set autoLevelCapping:" + t), this._autoLevelCapping = t
                }
            }, {
                key: "autoLevelEnabled",
                get: function() {
                    return -1 === this.levelController.manualLevel
                }
            }, {
                key: "manualLevel",
                get: function() {
                    return this.levelController.manualLevel
                }
            }, {
                key: "minAutoLevel",
                get: function() {
                    for (var t = this, e = t.levels, r = t.config.minAutoBitrate, i = e ? e.length : 0, a = 0; a < i; a++) {
                        if ((e[a].realBitrate ? Math.max(e[a].realBitrate, e[a].bitrate) : e[a].bitrate) > r) return a
                    }
                    return 0
                }
            }, {
                key: "maxAutoLevel",
                get: function() {
                    var t = this,
                        e = t.levels,
                        r = t.autoLevelCapping;
                    return -1 === r && e && e.length ? e.length - 1 : r
                }
            }, {
                key: "nextAutoLevel",
                get: function() {
                    var t = this;
                    return Math.min(Math.max(t.abrController.nextAutoLevel, t.minAutoLevel), t.maxAutoLevel)
                },
                set: function(t) {
                    var e = this;
                    e.abrController.nextAutoLevel = Math.max(e.minAutoLevel, t)
                }
            }, {
                key: "audioTracks",
                get: function() {
                    var t = this.audioTrackController;
                    return t ? t.audioTracks : []
                }
            }, {
                key: "audioTrack",
                get: function() {
                    var t = this.audioTrackController;
                    return t ? t.audioTrack : -1
                },
                set: function(t) {
                    var e = this.audioTrackController;
                    e && (e.audioTrack = t)
                }
            }, {
                key: "liveSyncPosition",
                get: function() {
                    return this.streamController.liveSyncPosition
                }
            }, {
                key: "subtitleTracks",
                get: function() {
                    var t = this.subtitleTrackController;
                    return t ? t.subtitleTracks : []
                }
            }, {
                key: "subtitleTrack",
                get: function() {
                    var t = this.subtitleTrackController;
                    return t ? t.subtitleTrack : -1
                },
                set: function(t) {
                    var e = this.subtitleTrackController;
                    e && (e.subtitleTrack = t)
                }
            }, {
                key: "subtitleDisplay",
                get: function() {
                    var t = this.subtitleTrackController;
                    return !!t && t.subtitleDisplay
                },
                set: function(t) {
                    var e = this.subtitleTrackController;
                    e && (e.subtitleDisplay = t)
                }
            }]), t
        }();
        e.default = T
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            for (var r = t[e], i = e - 1; i >= 0; i--) {
                var a = t[i];
                a.programDateTime = r.programDateTime - 1e3 * a.duration, r = a
            }
        }

        function n(t, e) {
            t.rawProgramDateTime ? t.programDateTime = Date.parse(t.rawProgramDateTime) : e && e.programDateTime && (t.programDateTime = e.endProgramDateTime), Object(o.a)(t.programDateTime) || (t.programDateTime = null, t.rawProgramDateTime = null)
        }
        var o = r(3),
            s = r(6),
            l = r.n(s),
            u = r(11),
            d = r(31),
            c = r(19),
            h = r(32),
            f = r(0),
            p = r(20),
            g = /#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,
            v = /#EXT-X-MEDIA:(.*)/g,
            y = new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source, /|(?!#)(\S+)/.source, /|#EXT-X-BYTERANGE:*(.+)/.source, /|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source, /|#.*/.source].join(""), "g"),
            m = /(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,
            b = /\.(mp4|m4s|m4v|m4a)$/i,
            E = function() {
                function t() {
                    i(this, t)
                }
                return t.findGroup = function(t, e) {
                    if (!t) return null;
                    for (var r = null, i = 0; i < t.length; i++) {
                        var a = t[i];
                        a.id === e && (r = a)
                    }
                    return r
                }, t.convertAVC1ToAVCOTI = function(t) {
                    var e = void 0,
                        r = t.split(".");
                    return r.length > 2 ? (e = r.shift() + ".", e += parseInt(r.shift()).toString(16), e += ("000" + parseInt(r.shift()).toString(16)).substr(-4)) : e = t, e
                }, t.resolve = function(t, e) {
                    return l.a.buildAbsoluteURL(e, t, {
                        alwaysNormalize: !0
                    })
                }, t.parseMasterPlaylist = function(e, r) {
                    var i = [],
                        a = void 0;
                    for (g.lastIndex = 0; null != (a = g.exec(e));) {
                        var n = {},
                            o = n.attrs = new h.a(a[1]);
                        n.url = t.resolve(a[2], r);
                        var s = o.decimalResolution("RESOLUTION");
                        s && (n.width = s.width, n.height = s.height), n.bitrate = o.decimalInteger("AVERAGE-BANDWIDTH") || o.decimalInteger("BANDWIDTH"), n.name = o.NAME,
                            function(t, e) {
                                ["video", "audio"].forEach(function(r) {
                                    var i = t.filter(function(t) {
                                        return Object(p.b)(t, r)
                                    });
                                    if (i.length) {
                                        var a = i.filter(function(t) {
                                            return 0 === t.lastIndexOf("avc1", 0) || 0 === t.lastIndexOf("mp4a", 0)
                                        });
                                        e[r + "Codec"] = a.length > 0 ? a[0] : i[0], t = t.filter(function(t) {
                                            return -1 === i.indexOf(t)
                                        })
                                    }
                                }), e.unknownCodecs = t
                            }([].concat((o.CODECS || "").split(/[ ,]+/)), n), n.videoCodec && -1 !== n.videoCodec.indexOf("avc1") && (n.videoCodec = t.convertAVC1ToAVCOTI(n.videoCodec)), i.push(n)
                    }
                    return i
                }, t.parseMasterPlaylistMedia = function(e, r, i) {
                    var a = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : [],
                        n = void 0,
                        o = [],
                        s = 0;
                    for (v.lastIndex = 0; null !== (n = v.exec(e));) {
                        var l = {},
                            u = new h.a(n[1]);
                        if (u.TYPE === i) {
                            if (l.groupId = u["GROUP-ID"], l.name = u.NAME, l.type = i, l.default = "YES" === u.DEFAULT, l.autoselect = "YES" === u.AUTOSELECT, l.forced = "YES" === u.FORCED, u.URI && (l.url = t.resolve(u.URI, r)), l.lang = u.LANGUAGE, l.name || (l.name = l.lang), a.length) {
                                var d = t.findGroup(a, l.groupId);
                                l.audioCodec = d ? d.codec : a[0].codec
                            }
                            l.id = s++, o.push(l)
                        }
                    }
                    return o
                }, t.parseLevelPlaylist = function(t, e, r, i, s) {
                    var l = 0,
                        p = 0,
                        g = new d.a(e),
                        v = new c.a,
                        E = 0,
                        T = null,
                        S = new u.a,
                        A = void 0,
                        R = void 0,
                        _ = null;
                    for (y.lastIndex = 0; null !== (A = y.exec(t));) {
                        var w = A[1];
                        if (w) {
                            S.duration = parseFloat(w);
                            var L = (" " + A[2]).slice(1);
                            S.title = L || null, S.tagList.push(L ? ["INF", w, L] : ["INF", w])
                        } else if (A[3]) {
                            if (Object(o.a)(S.duration)) {
                                var D = l++;
                                S.type = i, S.start = p, S.levelkey = v, S.sn = D, S.level = r, S.cc = E, S.urlId = s, S.baseurl = e, S.relurl = (" " + A[3]).slice(1), n(S, T), g.fragments.push(S), T = S, p += S.duration, S = new u.a
                            }
                        } else if (A[4]) {
                            if (S.rawByteRange = (" " + A[4]).slice(1), T) {
                                var I = T.byteRangeEndOffset;
                                I && (S.lastByteRangeEndOffset = I)
                            }
                        } else if (A[5]) S.rawProgramDateTime = (" " + A[5]).slice(1), S.tagList.push(["PROGRAM-DATE-TIME", S.rawProgramDateTime]), null === _ && (_ = g.fragments.length);
                        else {
                            for (A = A[0].match(m), R = 1; R < A.length && void 0 === A[R]; R++);
                            var k = (" " + A[R + 1]).slice(1),
                                O = (" " + A[R + 2]).slice(1);
                            switch (A[R]) {
                                case "#":
                                    S.tagList.push(O ? [k, O] : [k]);
                                    break;
                                case "PLAYLIST-TYPE":
                                    g.type = k.toUpperCase();
                                    break;
                                case "MEDIA-SEQUENCE":
                                    l = g.startSN = parseInt(k);
                                    break;
                                case "TARGETDURATION":
                                    g.targetduration = parseFloat(k);
                                    break;
                                case "VERSION":
                                    g.version = parseInt(k);
                                    break;
                                case "EXTM3U":
                                    break;
                                case "ENDLIST":
                                    g.live = !1;
                                    break;
                                case "DIS":
                                    E++, S.tagList.push(["DIS"]);
                                    break;
                                case "DISCONTINUITY-SEQ":
                                    E = parseInt(k);
                                    break;
                                case "KEY":
                                    var C = k,
                                        P = new h.a(C),
                                        x = P.enumeratedString("METHOD"),
                                        F = P.URI,
                                        M = P.hexadecimalInteger("IV");
                                    x && (v = new c.a, F && ["AES-128", "SAMPLE-AES", "SAMPLE-AES-CENC"].indexOf(x) >= 0 && (v.method = x, v.baseuri = e, v.reluri = F, v.key = null, v.iv = M));
                                    break;
                                case "START":
                                    var N = k,
                                        U = new h.a(N),
                                        B = U.decimalFloatingPoint("TIME-OFFSET");
                                    Object(o.a)(B) && (g.startTimeOffset = B);
                                    break;
                                case "MAP":
                                    var G = new h.a(k);
                                    S.relurl = G.URI, S.rawByteRange = G.BYTERANGE, S.baseurl = e, S.level = r, S.type = i, S.sn = "initSegment", g.initSegment = S, S = new u.a, S.rawProgramDateTime = g.initSegment.rawProgramDateTime;
                                    break;
                                default:
                                    f.b.warn("line parsed but not handled: " + A)
                            }
                        }
                    }
                    return S = T, S && !S.relurl && (g.fragments.pop(), p -= S.duration), g.totalduration = p, g.averagetargetduration = p / g.fragments.length, g.endSN = l - 1, g.startCC = g.fragments[0] ? g.fragments[0].cc : 0, g.endCC = E, !g.initSegment && g.fragments.length && g.fragments.every(function(t) {
                        return b.test(t.relurl)
                    }) && (f.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"), S = new u.a, S.relurl = g.fragments[0].relurl, S.baseurl = e, S.level = r, S.type = i, S.sn = "initSegment", g.initSegment = S, g.needSidxRanges = !0), _ && a(g.fragments, _), g
                }, t
            }();
        e.a = E
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(3),
            n = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            o = function() {
                function t(e) {
                    i(this, t), this.endCC = 0, this.endSN = 0, this.fragments = [], this.initSegment = null, this.live = !0, this.needSidxRanges = !1, this.startCC = 0, this.startSN = 0, this.startTimeOffset = null, this.targetduration = 0, this.totalduration = 0, this.type = null, this.url = e, this.version = null
                }
                return n(t, [{
                    key: "hasProgramDateTime",
                    get: function() {
                        return !(!this.fragments[0] || !Object(a.a)(this.fragments[0].programDateTime))
                    }
                }]), t
            }();
        e.a = o
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = /^(\d+)x(\d+)$/,
            n = /\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,
            o = function() {
                function t(e) {
                    i(this, t), "string" == typeof e && (e = t.parseAttrList(e));
                    for (var r in e) e.hasOwnProperty(r) && (this[r] = e[r])
                }
                return t.prototype.decimalInteger = function(t) {
                    var e = parseInt(this[t], 10);
                    return e > Number.MAX_SAFE_INTEGER ? 1 / 0 : e
                }, t.prototype.hexadecimalInteger = function(t) {
                    if (this[t]) {
                        var e = (this[t] || "0x").slice(2);
                        e = (1 & e.length ? "0" : "") + e;
                        for (var r = new Uint8Array(e.length / 2), i = 0; i < e.length / 2; i++) r[i] = parseInt(e.slice(2 * i, 2 * i + 2), 16);
                        return r
                    }
                    return null
                }, t.prototype.hexadecimalIntegerAsNumber = function(t) {
                    var e = parseInt(this[t], 16);
                    return e > Number.MAX_SAFE_INTEGER ? 1 / 0 : e
                }, t.prototype.decimalFloatingPoint = function(t) {
                    return parseFloat(this[t])
                }, t.prototype.enumeratedString = function(t) {
                    return this[t]
                }, t.prototype.decimalResolution = function(t) {
                    var e = a.exec(this[t]);
                    if (null !== e) return {
                        width: parseInt(e[1], 10),
                        height: parseInt(e[2], 10)
                    }
                }, t.parseAttrList = function(t) {
                    var e = void 0,
                        r = {};
                    for (n.lastIndex = 0; null !== (e = n.exec(t));) {
                        var i = e[2];
                        0 === i.indexOf('"') && i.lastIndexOf('"') === i.length - 1 && (i = i.slice(1, -1)), r[e[1]] = i
                    }
                    return r
                }, t
            }();
        e.a = o
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(3),
            s = r(1),
            l = r(4),
            u = r(2),
            d = r(0),
            c = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, s.a.FRAG_LOADING));
                    return n.loaders = {}, n
                }
                return n(e, t), e.prototype.destroy = function() {
                    var e = this.loaders;
                    for (var r in e) {
                        var i = e[r];
                        i && i.destroy()
                    }
                    this.loaders = {}, t.prototype.destroy.call(this)
                }, e.prototype.onFragLoading = function(t) {
                    var e = t.frag,
                        r = e.type,
                        i = this.loaders,
                        a = this.hls.config,
                        n = a.fLoader,
                        s = a.loader;
                    e.loaded = 0;
                    var l = i[r];
                    l && (d.b.warn("abort previous fragment loader for type: " + r), l.abort()), l = i[r] = e.loader = a.fLoader ? new n(a) : new s(a);
                    var u = void 0,
                        c = void 0,
                        h = void 0;
                    u = {
                        url: e.url,
                        frag: e,
                        responseType: "arraybuffer",
                        progressData: !1
                    };
                    var f = e.byteRangeStartOffset,
                        p = e.byteRangeEndOffset;
                    Object(o.a)(f) && Object(o.a)(p) && (u.rangeStart = f, u.rangeEnd = p), c = {
                        timeout: a.fragLoadingTimeOut,
                        maxRetry: 0,
                        retryDelay: 0,
                        maxRetryDelay: a.fragLoadingMaxRetryTimeout
                    }, h = {
                        onSuccess: this.loadsuccess.bind(this),
                        onError: this.loaderror.bind(this),
                        onTimeout: this.loadtimeout.bind(this),
                        onProgress: this.loadprogress.bind(this)
                    }, l.load(u, c, h)
                }, e.prototype.loadsuccess = function(t, e, r) {
                    var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null,
                        a = t.data,
                        n = r.frag;
                    n.loader = void 0, this.loaders[n.type] = void 0, this.hls.trigger(s.a.FRAG_LOADED, {
                        payload: a,
                        frag: n,
                        stats: e,
                        networkDetails: i
                    })
                }, e.prototype.loaderror = function(t, e) {
                    var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,
                        i = e.frag,
                        a = i.loader;
                    a && a.abort(), this.loaders[i.type] = void 0, this.hls.trigger(s.a.ERROR, {
                        type: u.b.NETWORK_ERROR,
                        details: u.a.FRAG_LOAD_ERROR,
                        fatal: !1,
                        frag: e.frag,
                        response: t,
                        networkDetails: r
                    })
                }, e.prototype.loadtimeout = function(t, e) {
                    var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,
                        i = e.frag,
                        a = i.loader;
                    a && a.abort(), this.loaders[i.type] = void 0, this.hls.trigger(s.a.ERROR, {
                        type: u.b.NETWORK_ERROR,
                        details: u.a.FRAG_LOAD_TIMEOUT,
                        fatal: !1,
                        frag: e.frag,
                        networkDetails: r
                    })
                }, e.prototype.loadprogress = function(t, e, r) {
                    var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null,
                        a = e.frag;
                    a.loaded = t.loaded, this.hls.trigger(s.a.FRAG_LOAD_PROGRESS, {
                        frag: a,
                        stats: t,
                        networkDetails: i
                    })
                }, e
            }(l.a);
        e.a = c
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(1),
            s = r(4),
            l = r(2),
            u = r(0),
            d = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, o.a.KEY_LOADING));
                    return n.loaders = {}, n.decryptkey = null, n.decrypturl = null, n
                }
                return n(e, t), e.prototype.destroy = function() {
                    for (var t in this.loaders) {
                        var e = this.loaders[t];
                        e && e.destroy()
                    }
                    this.loaders = {}, s.a.prototype.destroy.call(this)
                }, e.prototype.onKeyLoading = function(t) {
                    var e = t.frag,
                        r = e.type,
                        i = this.loaders[r],
                        a = e.decryptdata,
                        n = a.uri;
                    if (n !== this.decrypturl || null === this.decryptkey) {
                        var s = this.hls.config;
                        i && (u.b.warn("abort previous key loader for type:" + r), i.abort()), e.loader = this.loaders[r] = new s.loader(s), this.decrypturl = n, this.decryptkey = null;
                        var l = void 0,
                            d = void 0,
                            c = void 0;
                        l = {
                            url: n,
                            frag: e,
                            responseType: "arraybuffer"
                        }, d = {
                            timeout: s.fragLoadingTimeOut,
                            maxRetry: s.fragLoadingMaxRetry,
                            retryDelay: s.fragLoadingRetryDelay,
                            maxRetryDelay: s.fragLoadingMaxRetryTimeout
                        }, c = {
                            onSuccess: this.loadsuccess.bind(this),
                            onError: this.loaderror.bind(this),
                            onTimeout: this.loadtimeout.bind(this)
                        }, e.loader.load(l, d, c)
                    } else this.decryptkey && (a.key = this.decryptkey, this.hls.trigger(o.a.KEY_LOADED, {
                        frag: e
                    }))
                }, e.prototype.loadsuccess = function(t, e, r) {
                    var i = r.frag;
                    this.decryptkey = i.decryptdata.key = new Uint8Array(t.data), i.loader = void 0, this.loaders[i.type] = void 0, this.hls.trigger(o.a.KEY_LOADED, {
                        frag: i
                    })
                }, e.prototype.loaderror = function(t, e) {
                    var r = e.frag,
                        i = r.loader;
                    i && i.abort(), this.loaders[e.type] = void 0, this.hls.trigger(o.a.ERROR, {
                        type: l.b.NETWORK_ERROR,
                        details: l.a.KEY_LOAD_ERROR,
                        fatal: !1,
                        frag: r,
                        response: t
                    })
                }, e.prototype.loadtimeout = function(t, e) {
                    var r = e.frag,
                        i = r.loader;
                    i && i.abort(), this.loaders[e.type] = void 0, this.hls.trigger(o.a.ERROR, {
                        type: l.b.NETWORK_ERROR,
                        details: l.a.KEY_LOAD_TIMEOUT,
                        fatal: !1,
                        frag: r
                    })
                }, e
            }(s.a);
        e.a = d
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(3),
            s = r(7),
            l = r(8),
            u = r(21),
            d = r(1),
            c = r(12),
            h = r(11),
            f = r(17),
            p = r(16),
            g = r(25),
            v = r(2),
            y = r(0),
            m = r(26),
            b = r(10),
            E = r(50),
            T = r(51),
            S = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            A = {
                STOPPED: "STOPPED",
                IDLE: "IDLE",
                KEY_LOADING: "KEY_LOADING",
                FRAG_LOADING: "FRAG_LOADING",
                FRAG_LOADING_WAITING_RETRY: "FRAG_LOADING_WAITING_RETRY",
                WAITING_LEVEL: "WAITING_LEVEL",
                PARSING: "PARSING",
                PARSED: "PARSED",
                BUFFER_FLUSHING: "BUFFER_FLUSHING",
                ENDED: "ENDED",
                ERROR: "ERROR"
            },
            R = function(t) {
                function e(r, n) {
                    i(this, e);
                    var o = a(this, t.call(this, r, d.a.MEDIA_ATTACHED, d.a.MEDIA_DETACHING, d.a.MANIFEST_LOADING, d.a.MANIFEST_PARSED, d.a.LEVEL_LOADED, d.a.KEY_LOADED, d.a.FRAG_LOADED, d.a.FRAG_LOAD_EMERGENCY_ABORTED, d.a.FRAG_PARSING_INIT_SEGMENT, d.a.FRAG_PARSING_DATA, d.a.FRAG_PARSED, d.a.ERROR, d.a.AUDIO_TRACK_SWITCHING, d.a.AUDIO_TRACK_SWITCHED, d.a.BUFFER_CREATED, d.a.BUFFER_APPENDED, d.a.BUFFER_FLUSHED));
                    return o.fragmentTracker = n, o.config = r.config, o.audioCodecSwap = !1, o._state = A.STOPPED, o.stallReported = !1, o.gapController = null, o
                }
                return n(e, t), e.prototype.onHandlerDestroying = function() {
                    this.stopLoad(), t.prototype.onHandlerDestroying.call(this)
                }, e.prototype.onHandlerDestroyed = function() {
                    this.state = A.STOPPED, this.fragmentTracker = null, t.prototype.onHandlerDestroyed.call(this)
                }, e.prototype.startLoad = function(t) {
                    if (this.levels) {
                        var e = this.lastCurrentTime,
                            r = this.hls;
                        if (this.stopLoad(), this.setInterval(100), this.level = -1, this.fragLoadError = 0, !this.startFragRequested) {
                            var i = r.startLevel; - 1 === i && (i = 0, this.bitrateTest = !0), this.level = r.nextLoadLevel = i, this.loadedmetadata = !1
                        }
                        e > 0 && -1 === t && (y.b.log("override startPosition with lastCurrentTime @" + e.toFixed(3)), t = e), this.state = A.IDLE, this.nextLoadPosition = this.startPosition = this.lastCurrentTime = t, this.tick()
                    } else this.forceStartLoad = !0, this.state = A.STOPPED
                }, e.prototype.stopLoad = function() {
                    var t = this.fragCurrent;
                    t && (t.loader && t.loader.abort(), this.fragmentTracker.removeFragment(t), this.fragCurrent = null), this.fragPrevious = null, this.demuxer && (this.demuxer.destroy(), this.demuxer = null), this.clearInterval(), this.state = A.STOPPED, this.forceStartLoad = !1
                }, e.prototype.doTick = function() {
                    switch (this.state) {
                        case A.BUFFER_FLUSHING:
                            this.fragLoadError = 0;
                            break;
                        case A.IDLE:
                            this._doTickIdle();
                            break;
                        case A.WAITING_LEVEL:
                            var t = this.levels[this.level];
                            t && t.details && (this.state = A.IDLE);
                            break;
                        case A.FRAG_LOADING_WAITING_RETRY:
                            var e = window.performance.now(),
                                r = this.retryDate;
                            (!r || e >= r || this.media && this.media.seeking) && (y.b.log("mediaController: retryDate reached, switch back to IDLE state"), this.state = A.IDLE);
                            break;
                        case A.ERROR:
                        case A.STOPPED:
                        case A.FRAG_LOADING:
                        case A.PARSING:
                        case A.PARSED:
                        case A.ENDED:
                    }
                    this._checkBuffer(), this._checkFragmentChanged()
                }, e.prototype._doTickIdle = function() {
                    var t = this.hls,
                        e = t.config,
                        r = this.media;
                    if (void 0 !== this.levelLastLoaded && (r || !this.startFragRequested && e.startFragPrefetch)) {
                        var i = void 0;
                        i = this.loadedmetadata ? r.currentTime : this.nextLoadPosition;
                        var a = t.nextLoadLevel,
                            n = this.levels[a];
                        if (n) {
                            var o = n.bitrate,
                                s = void 0;
                            s = o ? Math.max(8 * e.maxBufferSize / o, e.maxBufferLength) : e.maxBufferLength, s = Math.min(s, e.maxMaxBufferLength);
                            var u = l.a.bufferInfo(this.mediaBuffer ? this.mediaBuffer : r, i, e.maxBufferHole),
                                c = u.len;
                            if (!(c >= s)) {
                                y.b.trace("buffer length of " + c.toFixed(3) + " is below max of " + s.toFixed(3) + ". checking for more payload ..."), this.level = t.nextLoadLevel = a;
                                var h = n.details;
                                if (!h || h.live && this.levelLastLoaded !== a) return void(this.state = A.WAITING_LEVEL);
                                var f = this.fragPrevious;
                                if (!h.live && f && !f.backtracked && f.sn === h.endSN && !u.nextStart) {
                                    if (Math.min(r.duration, f.start + f.duration) - Math.max(u.end, f.start) <= Math.max(.2, f.duration)) {
                                        var p = {};
                                        return this.altAudio && (p.type = "video"), this.hls.trigger(d.a.BUFFER_EOS, p), void(this.state = A.ENDED)
                                    }
                                }
                                this._fetchPayloadOrEos(i, u, h)
                            }
                        }
                    }
                }, e.prototype._fetchPayloadOrEos = function(t, e, r) {
                    var i = this.fragPrevious,
                        a = this.level,
                        n = r.fragments,
                        o = n.length;
                    if (0 !== o) {
                        var s = n[0].start,
                            l = n[o - 1].start + n[o - 1].duration,
                            u = e.end,
                            d = void 0;
                        if (r.initSegment && !r.initSegment.data) d = r.initSegment;
                        else if (r.live) {
                            var c = this.config.initialLiveManifestSize;
                            if (o < c) return void y.b.warn("Can not start playback of a level, reason: not enough fragments " + o + " < " + c);
                            if (null === (d = this._ensureFragmentAtLivePoint(r, u, s, l, i, n, o))) return
                        } else u < s && (d = n[0]);
                        d || (d = this._findFragment(s, i, o, n, u, l, r)), d && (d.encrypted ? (y.b.log("Loading key for " + d.sn + " of [" + r.startSN + " ," + r.endSN + "],level " + a), this._loadKey(d)) : (y.b.log("Loading " + d.sn + " of [" + r.startSN + " ," + r.endSN + "],level " + a + ", currentTime:" + t.toFixed(3) + ",bufferEnd:" + u.toFixed(3)), this._loadFragment(d)))
                    }
                }, e.prototype._ensureFragmentAtLivePoint = function(t, e, r, i, a, n, o) {
                    var l = this.hls.config,
                        u = this.media,
                        d = void 0,
                        c = void 0 !== l.liveMaxLatencyDuration ? l.liveMaxLatencyDuration : l.liveMaxLatencyDurationCount * t.targetduration;
                    if (e < Math.max(r - l.maxFragLookUpTolerance, i - c)) {
                        var h = this.liveSyncPosition = this.computeLivePosition(r, t);
                        y.b.log("buffer end: " + e.toFixed(3) + " is located too far from the end of live sliding playlist, reset currentTime to : " + h.toFixed(3)), e = h, u && u.readyState && u.duration > h && (u.currentTime = h), this.nextLoadPosition = h
                    }
                    if (t.PTSKnown && e > i && u && u.readyState) return null;
                    if (this.startFragRequested && !t.PTSKnown) {
                        if (a)
                            if (t.hasProgramDateTime) y.b.log("live playlist, switching playlist, load frag with same PDT: " + a.programDateTime), d = Object(E.a)(n, a.endProgramDateTime, l.maxFragLookUpTolerance);
                            else {
                                var f = a.sn + 1;
                                if (f >= t.startSN && f <= t.endSN) {
                                    var p = n[f - t.startSN];
                                    a.cc === p.cc && (d = p, y.b.log("live playlist, switching playlist, load frag with next SN: " + d.sn))
                                }
                                d || (d = s.a.search(n, function(t) {
                                    return a.cc - t.cc
                                })) && y.b.log("live playlist, switching playlist, load frag with same CC: " + d.sn)
                            } d || (d = n[Math.min(o - 1, Math.round(o / 2))], y.b.log("live playlist, switching playlist, unknown, load middle frag : " + d.sn))
                    }
                    return d
                }, e.prototype._findFragment = function(t, e, r, i, a, n, o) {
                    var s = this.hls.config,
                        l = void 0;
                    if (a < n) {
                        var u = a > n - s.maxFragLookUpTolerance ? 0 : s.maxFragLookUpTolerance;
                        l = Object(E.b)(e, i, a, u)
                    } else l = i[r - 1];
                    if (l) {
                        var d = l.sn - o.startSN,
                            c = e && l.level === e.level,
                            h = i[d - 1],
                            f = i[d + 1];
                        if (e && l.sn === e.sn)
                            if (c && !l.backtracked)
                                if (l.sn < o.endSN) {
                                    var p = e.deltaPTS;
                                    p && p > s.maxBufferHole && e.dropped && d ? (l = h, y.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")) : (l = f, y.b.log("SN just loaded, load next one: " + l.sn, l))
                                } else l = null;
                        else l.backtracked && (f && f.backtracked ? (y.b.warn("Already backtracked from fragment " + f.sn + ", will not backtrack to fragment " + l.sn + ". Loading fragment " + f.sn), l = f) : (y.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"), l.dropped = 0, h ? (l = h, l.backtracked = !0) : d && (l = null)))
                    }
                    return l
                }, e.prototype._loadKey = function(t) {
                    this.state = A.KEY_LOADING, this.hls.trigger(d.a.KEY_LOADING, {
                        frag: t
                    })
                }, e.prototype._loadFragment = function(t) {
                    var e = this.fragmentTracker.getState(t);
                    this.fragCurrent = t, this.startFragRequested = !0, Object(o.a)(t.sn) && !t.bitrateTest && (this.nextLoadPosition = t.start + t.duration), t.backtracked || e === c.a.NOT_LOADED || e === c.a.PARTIAL ? (t.autoLevel = this.hls.autoLevelEnabled, t.bitrateTest = this.bitrateTest, this.hls.trigger(d.a.FRAG_LOADING, {
                        frag: t
                    }), this.demuxer || (this.demuxer = new u.a(this.hls, "main")), this.state = A.FRAG_LOADING) : e === c.a.APPENDING && this._reduceMaxBufferLength(t.duration) && this.fragmentTracker.removeFragment(t)
                }, e.prototype.getBufferedFrag = function(t) {
                    return this.fragmentTracker.getBufferedFrag(t, f.a.LevelType.MAIN)
                }, e.prototype.followingBufferedFrag = function(t) {
                    return t ? this.getBufferedFrag(t.endPTS + .5) : null
                }, e.prototype._checkFragmentChanged = function() {
                    var t = void 0,
                        e = void 0,
                        r = this.media;
                    if (r && r.readyState && !1 === r.seeking && (e = r.currentTime, e > this.lastCurrentTime && (this.lastCurrentTime = e), l.a.isBuffered(r, e) ? t = this.getBufferedFrag(e) : l.a.isBuffered(r, e + .1) && (t = this.getBufferedFrag(e + .1)), t)) {
                        var i = t;
                        if (i !== this.fragPlaying) {
                            this.hls.trigger(d.a.FRAG_CHANGED, {
                                frag: i
                            });
                            var a = i.level;
                            this.fragPlaying && this.fragPlaying.level === a || this.hls.trigger(d.a.LEVEL_SWITCHED, {
                                level: a
                            }), this.fragPlaying = i
                        }
                    }
                }, e.prototype.immediateLevelSwitch = function() {
                    if (y.b.log("immediateLevelSwitch"), !this.immediateSwitch) {
                        this.immediateSwitch = !0;
                        var t = this.media,
                            e = void 0;
                        t ? (e = t.paused, t.pause()) : e = !0, this.previouslyPaused = e
                    }
                    var r = this.fragCurrent;
                    r && r.loader && r.loader.abort(), this.fragCurrent = null, this.flushMainBuffer(0, Number.POSITIVE_INFINITY)
                }, e.prototype.immediateLevelSwitchEnd = function() {
                    var t = this.media;
                    t && t.buffered.length && (this.immediateSwitch = !1, l.a.isBuffered(t, t.currentTime) && (t.currentTime -= 1e-4), this.previouslyPaused || t.play())
                }, e.prototype.nextLevelSwitch = function() {
                    var t = this.media;
                    if (t && t.readyState) {
                        var e = void 0,
                            r = void 0,
                            i = void 0;
                        if (r = this.getBufferedFrag(t.currentTime), r && r.startPTS > 1 && this.flushMainBuffer(0, r.startPTS - 1), t.paused) e = 0;
                        else {
                            var a = this.hls.nextLoadLevel,
                                n = this.levels[a],
                                o = this.fragLastKbps;
                            e = o && this.fragCurrent ? this.fragCurrent.duration * n.bitrate / (1e3 * o) + 1 : 0
                        }
                        if ((i = this.getBufferedFrag(t.currentTime + e)) && (i = this.followingBufferedFrag(i))) {
                            var s = this.fragCurrent;
                            s && s.loader && s.loader.abort(), this.fragCurrent = null, this.flushMainBuffer(i.maxStartPTS, Number.POSITIVE_INFINITY)
                        }
                    }
                }, e.prototype.flushMainBuffer = function(t, e) {
                    this.state = A.BUFFER_FLUSHING;
                    var r = {
                        startOffset: t,
                        endOffset: e
                    };
                    this.altAudio && (r.type = "video"), this.hls.trigger(d.a.BUFFER_FLUSHING, r)
                }, e.prototype.onMediaAttached = function(t) {
                    var e = this.media = this.mediaBuffer = t.media;
                    this.onvseeking = this.onMediaSeeking.bind(this), this.onvseeked = this.onMediaSeeked.bind(this), this.onvended = this.onMediaEnded.bind(this), e.addEventListener("seeking", this.onvseeking), e.addEventListener("seeked", this.onvseeked), e.addEventListener("ended", this.onvended);
                    var r = this.config;
                    this.levels && r.autoStartLoad && this.hls.startLoad(r.startPosition), this.gapController = new T.a(r, e, this.fragmentTracker, this.hls)
                }, e.prototype.onMediaDetaching = function() {
                    var t = this.media;
                    t && t.ended && (y.b.log("MSE detaching and video ended, reset startPosition"), this.startPosition = this.lastCurrentTime = 0);
                    var e = this.levels;
                    e && e.forEach(function(t) {
                        t.details && t.details.fragments.forEach(function(t) {
                            t.backtracked = void 0
                        })
                    }), t && (t.removeEventListener("seeking", this.onvseeking), t.removeEventListener("seeked", this.onvseeked), t.removeEventListener("ended", this.onvended), this.onvseeking = this.onvseeked = this.onvended = null), this.media = this.mediaBuffer = null, this.loadedmetadata = !1, this.stopLoad()
                }, e.prototype.onMediaSeeking = function() {
                    var t = this.media,
                        e = t ? t.currentTime : void 0,
                        r = this.config;
                    Object(o.a)(e) && y.b.log("media seeking to " + e.toFixed(3));
                    var i = this.mediaBuffer ? this.mediaBuffer : t,
                        a = l.a.bufferInfo(i, e, this.config.maxBufferHole);
                    if (this.state === A.FRAG_LOADING) {
                        var n = this.fragCurrent;
                        if (0 === a.len && n) {
                            var s = r.maxFragLookUpTolerance,
                                u = n.start - s,
                                d = n.start + n.duration + s;
                            e < u || e > d ? (n.loader && (y.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"), n.loader.abort()), this.fragCurrent = null, this.fragPrevious = null, this.state = A.IDLE) : y.b.log("seeking outside of buffer but within currently loaded fragment range")
                        }
                    } else this.state === A.ENDED && (0 === a.len && (this.fragPrevious = 0), this.state = A.IDLE);
                    t && (this.lastCurrentTime = e), this.loadedmetadata || (this.nextLoadPosition = this.startPosition = e), this.tick()
                }, e.prototype.onMediaSeeked = function() {
                    var t = this.media,
                        e = t ? t.currentTime : void 0;
                    Object(o.a)(e) && y.b.log("media seeked to " + e.toFixed(3)), this.tick()
                }, e.prototype.onMediaEnded = function() {
                    y.b.log("media ended"), this.startPosition = this.lastCurrentTime = 0
                }, e.prototype.onManifestLoading = function() {
                    y.b.log("trigger BUFFER_RESET"), this.hls.trigger(d.a.BUFFER_RESET), this.fragmentTracker.removeAllFragments(), this.stalled = !1, this.startPosition = this.lastCurrentTime = 0
                }, e.prototype.onManifestParsed = function(t) {
                    var e = !1,
                        r = !1,
                        i = void 0;
                    t.levels.forEach(function(t) {
                        (i = t.audioCodec) && (-1 !== i.indexOf("mp4a.40.2") && (e = !0), -1 !== i.indexOf("mp4a.40.5") && (r = !0))
                    }), this.audioCodecSwitch = e && r, this.audioCodecSwitch && y.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"), this.levels = t.levels, this.startFragRequested = !1;
                    var a = this.config;
                    (a.autoStartLoad || this.forceStartLoad) && this.hls.startLoad(a.startPosition)
                }, e.prototype.onLevelLoaded = function(t) {
                    var e = t.details,
                        r = t.level,
                        i = this.levels[this.levelLastLoaded],
                        a = this.levels[r],
                        n = e.totalduration,
                        s = 0;
                    if (y.b.log("level " + r + " loaded [" + e.startSN + "," + e.endSN + "],duration:" + n), e.live) {
                        var l = a.details;
                        l && e.fragments.length > 0 ? (p.b(l, e), s = e.fragments[0].start, this.liveSyncPosition = this.computeLivePosition(s, l), e.PTSKnown && Object(o.a)(s) ? y.b.log("live playlist sliding:" + s.toFixed(3)) : (y.b.log("live playlist - outdated PTS, unknown sliding"), Object(m.a)(this.fragPrevious, i, e))) : (y.b.log("live playlist - first load, unknown sliding"), e.PTSKnown = !1, Object(m.a)(this.fragPrevious, i, e))
                    } else e.PTSKnown = !1;
                    if (a.details = e, this.levelLastLoaded = r, this.hls.trigger(d.a.LEVEL_UPDATED, {
                            details: e,
                            level: r
                        }), !1 === this.startFragRequested) {
                        if (-1 === this.startPosition || -1 === this.lastCurrentTime) {
                            var u = e.startTimeOffset;
                            Object(o.a)(u) ? (u < 0 && (y.b.log("negative start time offset " + u + ", count from end of last fragment"), u = s + n + u), y.b.log("start time offset found in playlist, adjust startPosition to " + u), this.startPosition = u) : e.live ? (this.startPosition = this.computeLivePosition(s, e), y.b.log("configure startPosition to " + this.startPosition)) : this.startPosition = 0, this.lastCurrentTime = this.startPosition
                        }
                        this.nextLoadPosition = this.startPosition
                    }
                    this.state === A.WAITING_LEVEL && (this.state = A.IDLE), this.tick()
                }, e.prototype.onKeyLoaded = function() {
                    this.state === A.KEY_LOADING && (this.state = A.IDLE, this.tick())
                }, e.prototype.onFragLoaded = function(t) {
                    var e = this.fragCurrent,
                        r = this.hls,
                        i = this.levels,
                        a = this.media,
                        n = t.frag;
                    if (this.state === A.FRAG_LOADING && e && "main" === n.type && n.level === e.level && n.sn === e.sn) {
                        var o = t.stats,
                            s = i[e.level],
                            l = s.details;
                        if (this.bitrateTest = !1, this.stats = o, y.b.log("Loaded " + e.sn + " of [" + l.startSN + " ," + l.endSN + "],level " + e.level), n.bitrateTest && r.nextLoadLevel) this.state = A.IDLE, this.startFragRequested = !1, o.tparsed = o.tbuffered = window.performance.now(), r.trigger(d.a.FRAG_BUFFERED, {
                            stats: o,
                            frag: e,
                            id: "main"
                        }), this.tick();
                        else if ("initSegment" === n.sn) this.state = A.IDLE, o.tparsed = o.tbuffered = window.performance.now(), l.initSegment.data = t.payload, r.trigger(d.a.FRAG_BUFFERED, {
                            stats: o,
                            frag: e,
                            id: "main"
                        }), this.tick();
                        else {
                            y.b.log("Parsing " + e.sn + " of [" + l.startSN + " ," + l.endSN + "],level " + e.level + ", cc " + e.cc), this.state = A.PARSING, this.pendingBuffering = !0, this.appended = !1, n.bitrateTest && (n.bitrateTest = !1, this.fragmentTracker.onFragLoaded({
                                frag: n
                            }));
                            var c = !(a && a.seeking) && (l.PTSKnown || !l.live),
                                h = l.initSegment ? l.initSegment.data : [],
                                f = this._getAudioCodec(s),
                                p = this.demuxer = this.demuxer || new u.a(this.hls, "main");
                            p.push(t.payload, h, f, s.videoCodec, e, l.totalduration, c)
                        }
                    }
                    this.fragLoadError = 0
                }, e.prototype.onFragParsingInitSegment = function(t) {
                    var e = this.fragCurrent,
                        r = t.frag;
                    if (e && "main" === t.id && r.sn === e.sn && r.level === e.level && this.state === A.PARSING) {
                        var i = t.tracks,
                            a = void 0,
                            n = void 0;
                        if (i.audio && this.altAudio && delete i.audio, n = i.audio) {
                            var o = this.levels[this.level].audioCodec,
                                s = navigator.userAgent.toLowerCase();
                            o && this.audioCodecSwap && (y.b.log("swapping playlist audio codec"), o = -1 !== o.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5"), this.audioCodecSwitch && 1 !== n.metadata.channelCount && -1 === s.indexOf("firefox") && (o = "mp4a.40.5"), -1 !== s.indexOf("android") && "audio/mpeg" !== n.container && (o = "mp4a.40.2", y.b.log("Android: force audio codec to " + o)), n.levelCodec = o, n.id = t.id
                        }
                        n = i.video, n && (n.levelCodec = this.levels[this.level].videoCodec, n.id = t.id), this.hls.trigger(d.a.BUFFER_CODECS, i);
                        for (a in i) {
                            n = i[a], y.b.log("main track:" + a + ",container:" + n.container + ",codecs[level/parsed]=[" + n.levelCodec + "/" + n.codec + "]");
                            var l = n.initSegment;
                            l && (this.appended = !0, this.pendingBuffering = !0, this.hls.trigger(d.a.BUFFER_APPENDING, {
                                type: a,
                                data: l,
                                parent: "main",
                                content: "initSegment"
                            }))
                        }
                        this.tick()
                    }
                }, e.prototype.onFragParsingData = function(t) {
                    var e = this,
                        r = this.fragCurrent,
                        i = t.frag;
                    if (r && "main" === t.id && i.sn === r.sn && i.level === r.level && ("audio" !== t.type || !this.altAudio) && this.state === A.PARSING) {
                        var a = this.levels[this.level],
                            n = r;
                        if (Object(o.a)(t.endPTS) || (t.endPTS = t.startPTS + r.duration, t.endDTS = t.startDTS + r.duration), !0 === t.hasAudio && n.addElementaryStream(h.a.ElementaryStreamTypes.AUDIO), !0 === t.hasVideo && n.addElementaryStream(h.a.ElementaryStreamTypes.VIDEO), y.b.log("Parsed " + t.type + ",PTS:[" + t.startPTS.toFixed(3) + "," + t.endPTS.toFixed(3) + "],DTS:[" + t.startDTS.toFixed(3) + "/" + t.endDTS.toFixed(3) + "],nb:" + t.nb + ",dropped:" + (t.dropped || 0)), "video" === t.type)
                            if (n.dropped = t.dropped, n.dropped)
                                if (n.backtracked) y.b.warn("Already backtracked on this fragment, appending with the gap", n.sn);
                                else {
                                    var s = a.details;
                                    if (!s || n.sn !== s.startSN) return y.b.warn("missing video frame(s), backtracking fragment", n.sn), this.fragmentTracker.removeFragment(n), n.backtracked = !0, this.nextLoadPosition = t.startPTS, this.state = A.IDLE, this.fragPrevious = n, void this.tick();
                                    y.b.warn("missing video frame(s) on first frag, appending with gap", n.sn)
                                }
                        else n.backtracked = !1;
                        var l = p.c(a.details, n, t.startPTS, t.endPTS, t.startDTS, t.endDTS),
                            u = this.hls;
                        u.trigger(d.a.LEVEL_PTS_UPDATED, {
                            details: a.details,
                            level: this.level,
                            drift: l,
                            type: t.type,
                            start: t.startPTS,
                            end: t.endPTS
                        }), [t.data1, t.data2].forEach(function(r) {
                            r && r.length && e.state === A.PARSING && (e.appended = !0, e.pendingBuffering = !0, u.trigger(d.a.BUFFER_APPENDING, {
                                type: t.type,
                                data: r,
                                parent: "main",
                                content: "data"
                            }))
                        }), this.tick()
                    }
                }, e.prototype.onFragParsed = function(t) {
                    var e = this.fragCurrent,
                        r = t.frag;
                    e && "main" === t.id && r.sn === e.sn && r.level === e.level && this.state === A.PARSING && (this.stats.tparsed = window.performance.now(), this.state = A.PARSED, this._checkAppendedParsed())
                }, e.prototype.onAudioTrackSwitching = function(t) {
                    var e = !!t.url,
                        r = t.id;
                    if (!e) {
                        if (this.mediaBuffer !== this.media) {
                            y.b.log("switching on main audio, use media.buffered to schedule main fragment loading"), this.mediaBuffer = this.media;
                            var i = this.fragCurrent;
                            i.loader && (y.b.log("switching to main audio track, cancel main fragment load"), i.loader.abort()), this.fragCurrent = null, this.fragPrevious = null, this.demuxer && (this.demuxer.destroy(), this.demuxer = null), this.state = A.IDLE
                        }
                        var a = this.hls;
                        a.trigger(d.a.BUFFER_FLUSHING, {
                            startOffset: 0,
                            endOffset: Number.POSITIVE_INFINITY,
                            type: "audio"
                        }), a.trigger(d.a.AUDIO_TRACK_SWITCHED, {
                            id: r
                        }), this.altAudio = !1
                    }
                }, e.prototype.onAudioTrackSwitched = function(t) {
                    var e = t.id,
                        r = !!this.hls.audioTracks[e].url;
                    if (r) {
                        var i = this.videoBuffer;
                        i && this.mediaBuffer !== i && (y.b.log("switching on alternate audio, use video.buffered to schedule main fragment loading"), this.mediaBuffer = i)
                    }
                    this.altAudio = r, this.tick()
                }, e.prototype.onBufferCreated = function(t) {
                    var e = t.tracks,
                        r = void 0,
                        i = void 0,
                        a = !1;
                    for (var n in e) {
                        var o = e[n];
                        "main" === o.id ? (i = n, r = o, "video" === n && (this.videoBuffer = e[n].buffer)) : a = !0
                    }
                    a && r ? (y.b.log("alternate track found, use " + i + ".buffered to schedule main fragment loading"), this.mediaBuffer = r.buffer) : this.mediaBuffer = this.media
                }, e.prototype.onBufferAppended = function(t) {
                    if ("main" === t.parent) {
                        var e = this.state;
                        e !== A.PARSING && e !== A.PARSED || (this.pendingBuffering = t.pending > 0, this._checkAppendedParsed())
                    }
                }, e.prototype._checkAppendedParsed = function() {
                    if (!(this.state !== A.PARSED || this.appended && this.pendingBuffering)) {
                        var t = this.fragCurrent;
                        if (t) {
                            var e = this.mediaBuffer ? this.mediaBuffer : this.media;
                            y.b.log("main buffered : " + g.a.toString(e.buffered)), this.fragPrevious = t;
                            var r = this.stats;
                            r.tbuffered = window.performance.now(), this.fragLastKbps = Math.round(8 * r.total / (r.tbuffered - r.tfirst)), this.hls.trigger(d.a.FRAG_BUFFERED, {
                                stats: r,
                                frag: t,
                                id: "main"
                            }), this.state = A.IDLE
                        }
                        this.tick()
                    }
                }, e.prototype.onError = function(t) {
                    var e = t.frag || this.fragCurrent;
                    if (!e || "main" === e.type) {
                        var r = !!this.media && l.a.isBuffered(this.media, this.media.currentTime) && l.a.isBuffered(this.media, this.media.currentTime + .5);
                        switch (t.details) {
                            case v.a.FRAG_LOAD_ERROR:
                            case v.a.FRAG_LOAD_TIMEOUT:
                            case v.a.KEY_LOAD_ERROR:
                            case v.a.KEY_LOAD_TIMEOUT:
                                if (!t.fatal)
                                    if (this.fragLoadError + 1 <= this.config.fragLoadingMaxRetry) {
                                        var i = Math.min(Math.pow(2, this.fragLoadError) * this.config.fragLoadingRetryDelay, this.config.fragLoadingMaxRetryTimeout);
                                        y.b.warn("mediaController: frag loading failed, retry in " + i + " ms"), this.retryDate = window.performance.now() + i, this.loadedmetadata || (this.startFragRequested = !1, this.nextLoadPosition = this.startPosition), this.fragLoadError++, this.state = A.FRAG_LOADING_WAITING_RETRY
                                    } else y.b.error("mediaController: " + t.details + " reaches max retry, redispatch as fatal ..."), t.fatal = !0, this.state = A.ERROR;
                                break;
                            case v.a.LEVEL_LOAD_ERROR:
                            case v.a.LEVEL_LOAD_TIMEOUT:
                                this.state !== A.ERROR && (t.fatal ? (this.state = A.ERROR, y.b.warn("streamController: " + t.details + ",switch to " + this.state + " state ...")) : t.levelRetry || this.state !== A.WAITING_LEVEL || (this.state = A.IDLE));
                                break;
                            case v.a.BUFFER_FULL_ERROR:
                                "main" !== t.parent || this.state !== A.PARSING && this.state !== A.PARSED || (r ? (this._reduceMaxBufferLength(this.config.maxBufferLength), this.state = A.IDLE) : (y.b.warn("buffer full error also media.currentTime is not buffered, flush everything"), this.fragCurrent = null, this.flushMainBuffer(0, Number.POSITIVE_INFINITY)))
                        }
                    }
                }, e.prototype._reduceMaxBufferLength = function(t) {
                    var e = this.config;
                    return e.maxMaxBufferLength >= t && (e.maxMaxBufferLength /= 2, y.b.warn("main:reduce max buffer length to " + e.maxMaxBufferLength + "s"), !0)
                }, e.prototype._checkBuffer = function() {
                    var t = this.media;
                    if (t && 0 !== t.readyState) {
                        var e = this.mediaBuffer ? this.mediaBuffer : t,
                            r = e.buffered;
                        !this.loadedmetadata && r.length ? (this.loadedmetadata = !0, this._seekToStartPos()) : this.immediateSwitch ? this.immediateLevelSwitchEnd() : this.gapController.poll(this.lastCurrentTime, r)
                    }
                }, e.prototype.onFragLoadEmergencyAborted = function() {
                    this.state = A.IDLE, this.loadedmetadata || (this.startFragRequested = !1, this.nextLoadPosition = this.startPosition), this.tick()
                }, e.prototype.onBufferFlushed = function() {
                    var t = this.mediaBuffer ? this.mediaBuffer : this.media;
                    t && this.fragmentTracker.detectEvictedFragments(h.a.ElementaryStreamTypes.VIDEO, t.buffered), this.state = A.IDLE, this.fragPrevious = null
                }, e.prototype.swapAudioCodec = function() {
                    this.audioCodecSwap = !this.audioCodecSwap
                }, e.prototype.computeLivePosition = function(t, e) {
                    var r = void 0 !== this.config.liveSyncDuration ? this.config.liveSyncDuration : this.config.liveSyncDurationCount * e.targetduration;
                    return t + Math.max(0, e.totalduration - r)
                }, e.prototype._seekToStartPos = function() {
                    var t = this.media,
                        e = t.currentTime,
                        r = t.seeking ? e : this.startPosition;
                    e !== r && (y.b.log("target start position not buffered, seek to buffered.start(0) " + r + " from current time " + e + " "), t.currentTime = r)
                }, e.prototype._getAudioCodec = function(t) {
                    var e = this.config.defaultAudioCodec || t.audioCodec;
                    return this.audioCodecSwap && (y.b.log("swapping playlist audio codec"), e && (e = -1 !== e.indexOf("mp4a.40.5") ? "mp4a.40.2" : "mp4a.40.5")), e
                }, S(e, [{
                    key: "state",
                    set: function(t) {
                        if (this.state !== t) {
                            var e = this.state;
                            this._state = t, y.b.log("main stream:" + e + "->" + t), this.hls.trigger(d.a.STREAM_STATE_TRANSITION, {
                                previousState: e,
                                nextState: t
                            })
                        }
                    },
                    get: function() {
                        return this._state
                    }
                }, {
                    key: "currentLevel",
                    get: function() {
                        var t = this.media;
                        if (t) {
                            var e = this.getBufferedFrag(t.currentTime);
                            if (e) return e.level
                        }
                        return -1
                    }
                }, {
                    key: "nextBufferedFrag",
                    get: function() {
                        var t = this.media;
                        return t ? this.followingBufferedFrag(this.getBufferedFrag(t.currentTime)) : null
                    }
                }, {
                    key: "nextLevel",
                    get: function() {
                        var t = this.nextBufferedFrag;
                        return t ? t.level : -1
                    }
                }, {
                    key: "liveSyncPosition",
                    get: function() {
                        return this._liveSyncPosition
                    },
                    set: function(t) {
                        this._liveSyncPosition = t
                    }
                }]), e
            }(b.a);
        e.a = R
    }, function(t, e, r) {
        function i(t) {
            function e(i) {
                if (r[i]) return r[i].exports;
                var a = r[i] = {
                    i: i,
                    l: !1,
                    exports: {}
                };
                return t[i].call(a.exports, a, a.exports, e), a.l = !0, a.exports
            }
            var r = {};
            e.m = t, e.c = r, e.i = function(t) {
                return t
            }, e.d = function(t, r, i) {
                e.o(t, r) || Object.defineProperty(t, r, {
                    configurable: !1,
                    enumerable: !0,
                    get: i
                })
            }, e.n = function(t) {
                var r = t && t.__esModule ? function() {
                    return t.default
                } : function() {
                    return t
                };
                return e.d(r, "a", r), r
            }, e.o = function(t, e) {
                return Object.prototype.hasOwnProperty.call(t, e)
            }, e.p = "/", e.oe = function(t) {
                throw console.error(t), t
            };
            var i = e(e.s = ENTRY_MODULE);
            return i.default || i
        }

        function a(t) {
            return (t + "").replace(/[.?*+^$[\]\\(){}|-]/g, "\\$&")
        }

        function n(t, e, i) {
            var n = {};
            n[i] = [];
            var o = e.toString(),
                s = o.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);
            if (!s) return n;
            for (var d, c = s[1], h = new RegExp("(\\\\n|\\W)" + a(c) + u, "g"); d = h.exec(o);) "dll-reference" !== d[3] && n[i].push(d[3]);
            for (h = new RegExp("\\(" + a(c) + '\\("(dll-reference\\s(' + l + '))"\\)\\)' + u, "g"); d = h.exec(o);) t[d[2]] || (n[i].push(d[1]), t[d[2]] = r(d[1]).m), n[d[2]] = n[d[2]] || [], n[d[2]].push(d[4]);
            return n
        }

        function o(t) {
            return Object.keys(t).reduce(function(e, r) {
                return e || t[r].length > 0
            }, !1)
        }

        function s(t, e) {
            for (var r = {
                    main: [e]
                }, i = {
                    main: []
                }, a = {
                    main: {}
                }; o(r);)
                for (var s = Object.keys(r), l = 0; l < s.length; l++) {
                    var u = s[l],
                        d = r[u],
                        c = d.pop();
                    if (a[u] = a[u] || {}, !a[u][c] && t[u][c]) {
                        a[u][c] = !0, i[u] = i[u] || [], i[u].push(c);
                        for (var h = n(t, t[u][c], u), f = Object.keys(h), p = 0; p < f.length; p++) r[f[p]] = r[f[p]] || [], r[f[p]] = r[f[p]].concat(h[f[p]])
                    }
                }
            return i
        }
        var l = "[\\.|\\-|\\+|\\w|/|@]+",
            u = "\\((/\\*.*?\\*/)?s?.*?(" + l + ").*?\\)";
        t.exports = function(t, e) {
            e = e || {};
            var a = {
                    main: r.m
                },
                n = e.all ? {
                    main: Object.keys(a)
                } : s(a, t),
                o = "";
            Object.keys(n).filter(function(t) {
                return "main" !== t
            }).forEach(function(t) {
                for (var e = 0; n[t][e];) e++;
                n[t].push(e), a[t][e] = "(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })", o = o + "var " + t + " = (" + i.toString().replace("ENTRY_MODULE", JSON.stringify(e)) + ")({" + n[t].map(function(e) {
                    return JSON.stringify(e) + ": " + a[t][e].toString()
                }).join(",") + "});\n"
            }), o = o + "(" + i.toString().replace("ENTRY_MODULE", JSON.stringify(t)) + ")({" + n.main.map(function(t) {
                return JSON.stringify(t) + ": " + a.main[t].toString()
            }).join(",") + "})(self);";
            var l = new window.Blob([o], {
                type: "text/javascript"
            });
            if (e.bare) return l;
            var u = window.URL || window.webkitURL || window.mozURL || window.msURL,
                d = u.createObjectURL(l),
                c = new window.Worker(d);
            return c.objectURL = d, c
        }
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = function() {
            function t(e, r) {
                i(this, t), this.subtle = e, this.aesIV = r
            }
            return t.prototype.decrypt = function(t, e) {
                return this.subtle.decrypt({
                    name: "AES-CBC",
                    iv: this.aesIV
                }, e, t)
            }, t
        }();
        e.a = a
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = function() {
            function t(e, r) {
                i(this, t), this.subtle = e, this.key = r
            }
            return t.prototype.expandKey = function() {
                return this.subtle.importKey("raw", this.key, {
                    name: "AES-CBC"
                }, !1, ["encrypt", "decrypt"])
            }, t
        }();
        e.a = a
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t) {
            var e = t.byteLength,
                r = e && new DataView(t).getUint8(e - 1);
            return r ? t.slice(0, e - r) : t
        }
        var n = function() {
            function t() {
                i(this, t), this.rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], this.subMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)], this.invSubMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)], this.sBox = new Uint32Array(256), this.invSBox = new Uint32Array(256), this.key = new Uint32Array(0), this.initTable()
            }
            return t.prototype.uint8ArrayToUint32Array_ = function(t) {
                for (var e = new DataView(t), r = new Uint32Array(4), i = 0; i < 4; i++) r[i] = e.getUint32(4 * i);
                return r
            }, t.prototype.initTable = function() {
                var t = this.sBox,
                    e = this.invSBox,
                    r = this.subMix,
                    i = r[0],
                    a = r[1],
                    n = r[2],
                    o = r[3],
                    s = this.invSubMix,
                    l = s[0],
                    u = s[1],
                    d = s[2],
                    c = s[3],
                    h = new Uint32Array(256),
                    f = 0,
                    p = 0,
                    g = 0;
                for (g = 0; g < 256; g++) h[g] = g < 128 ? g << 1 : g << 1 ^ 283;
                for (g = 0; g < 256; g++) {
                    var v = p ^ p << 1 ^ p << 2 ^ p << 3 ^ p << 4;
                    v = v >>> 8 ^ 255 & v ^ 99, t[f] = v, e[v] = f;
                    var y = h[f],
                        m = h[y],
                        b = h[m],
                        E = 257 * h[v] ^ 16843008 * v;
                    i[f] = E << 24 | E >>> 8, a[f] = E << 16 | E >>> 16, n[f] = E << 8 | E >>> 24, o[f] = E, E = 16843009 * b ^ 65537 * m ^ 257 * y ^ 16843008 * f, l[v] = E << 24 | E >>> 8, u[v] = E << 16 | E >>> 16, d[v] = E << 8 | E >>> 24, c[v] = E, f ? (f = y ^ h[h[h[b ^ y]]], p ^= h[h[p]]) : f = p = 1
                }
            }, t.prototype.expandKey = function(t) {
                for (var e = this.uint8ArrayToUint32Array_(t), r = !0, i = 0; i < e.length && r;) r = e[i] === this.key[i], i++;
                if (!r) {
                    this.key = e;
                    var a = this.keySize = e.length;
                    if (4 !== a && 6 !== a && 8 !== a) throw new Error("Invalid aes key size=" + a);
                    var n = this.ksRows = 4 * (a + 6 + 1),
                        o = void 0,
                        s = void 0,
                        l = this.keySchedule = new Uint32Array(n),
                        u = this.invKeySchedule = new Uint32Array(n),
                        d = this.sBox,
                        c = this.rcon,
                        h = this.invSubMix,
                        f = h[0],
                        p = h[1],
                        g = h[2],
                        v = h[3],
                        y = void 0,
                        m = void 0;
                    for (o = 0; o < n; o++) o < a ? y = l[o] = e[o] : (m = y, o % a == 0 ? (m = m << 8 | m >>> 24, m = d[m >>> 24] << 24 | d[m >>> 16 & 255] << 16 | d[m >>> 8 & 255] << 8 | d[255 & m], m ^= c[o / a | 0] << 24) : a > 6 && o % a == 4 && (m = d[m >>> 24] << 24 | d[m >>> 16 & 255] << 16 | d[m >>> 8 & 255] << 8 | d[255 & m]), l[o] = y = (l[o - a] ^ m) >>> 0);
                    for (s = 0; s < n; s++) o = n - s, m = 3 & s ? l[o] : l[o - 4], u[s] = s < 4 || o <= 4 ? m : f[d[m >>> 24]] ^ p[d[m >>> 16 & 255]] ^ g[d[m >>> 8 & 255]] ^ v[d[255 & m]], u[s] = u[s] >>> 0
                }
            }, t.prototype.networkToHostOrderSwap = function(t) {
                return t << 24 | (65280 & t) << 8 | (16711680 & t) >> 8 | t >>> 24
            }, t.prototype.decrypt = function(t, e, r, i) {
                for (var n = this.keySize + 6, o = this.invKeySchedule, s = this.invSBox, l = this.invSubMix, u = l[0], d = l[1], c = l[2], h = l[3], f = this.uint8ArrayToUint32Array_(r), p = f[0], g = f[1], v = f[2], y = f[3], m = new Int32Array(t), b = new Int32Array(m.length), E = void 0, T = void 0, S = void 0, A = void 0, R = void 0, _ = void 0, w = void 0, L = void 0, D = void 0, I = void 0, k = void 0, O = void 0, C = void 0, P = void 0, x = this.networkToHostOrderSwap; e < m.length;) {
                    for (D = x(m[e]), I = x(m[e + 1]), k = x(m[e + 2]), O = x(m[e + 3]), R = D ^ o[0], _ = O ^ o[1], w = k ^ o[2], L = I ^ o[3], C = 4, P = 1; P < n; P++) E = u[R >>> 24] ^ d[_ >> 16 & 255] ^ c[w >> 8 & 255] ^ h[255 & L] ^ o[C], T = u[_ >>> 24] ^ d[w >> 16 & 255] ^ c[L >> 8 & 255] ^ h[255 & R] ^ o[C + 1], S = u[w >>> 24] ^ d[L >> 16 & 255] ^ c[R >> 8 & 255] ^ h[255 & _] ^ o[C + 2], A = u[L >>> 24] ^ d[R >> 16 & 255] ^ c[_ >> 8 & 255] ^ h[255 & w] ^ o[C + 3], R = E, _ = T, w = S, L = A, C += 4;
                    E = s[R >>> 24] << 24 ^ s[_ >> 16 & 255] << 16 ^ s[w >> 8 & 255] << 8 ^ s[255 & L] ^ o[C], T = s[_ >>> 24] << 24 ^ s[w >> 16 & 255] << 16 ^ s[L >> 8 & 255] << 8 ^ s[255 & R] ^ o[C + 1], S = s[w >>> 24] << 24 ^ s[L >> 16 & 255] << 16 ^ s[R >> 8 & 255] << 8 ^ s[255 & _] ^ o[C + 2], A = s[L >>> 24] << 24 ^ s[R >> 16 & 255] << 16 ^ s[_ >> 8 & 255] << 8 ^ s[255 & w] ^ o[C + 3], C += 3, b[e] = x(E ^ p), b[e + 1] = x(A ^ g), b[e + 2] = x(S ^ v), b[e + 3] = x(T ^ y), p = D, g = I, v = k, y = O, e += 4
                }
                return i ? a(b.buffer) : b.buffer
            }, t.prototype.destroy = function() {
                this.key = void 0, this.keySize = void 0, this.ksRows = void 0, this.sBox = void 0, this.invSBox = void 0, this.subMix = void 0, this.invSubMix = void 0, this.keySchedule = void 0, this.invKeySchedule = void 0, this.rcon = void 0
            }, t
        }();
        e.a = n
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(3),
            n = r(23),
            o = r(0),
            s = r(9),
            l = function() {
                function t(e, r, a) {
                    i(this, t), this.observer = e, this.config = a, this.remuxer = r
                }
                return t.prototype.resetInitSegment = function(t, e, r, i) {
                    this._audioTrack = {
                        container: "audio/adts",
                        type: "audio",
                        id: 0,
                        sequenceNumber: 0,
                        isAAC: !0,
                        samples: [],
                        len: 0,
                        manifestCodec: e,
                        duration: i,
                        inputTimeScale: 9e4
                    }
                }, t.prototype.resetTimeStamp = function() {}, t.probe = function(t) {
                    if (!t) return !1;
                    for (var e = s.a.getID3Data(t, 0) || [], r = e.length, i = t.length; r < i; r++)
                        if (n.e(t, r)) return o.b.log("ADTS sync word found !"), !0;
                    return !1
                }, t.prototype.append = function(t, e, r, i) {
                    for (var l = this._audioTrack, u = s.a.getID3Data(t, 0) || [], d = s.a.getTimeStamp(u), c = Object(a.a)(d) ? 90 * d : 9e4 * e, h = 0, f = c, p = t.length, g = u.length, v = [{
                            pts: f,
                            dts: f,
                            data: u
                        }]; g < p - 1;)
                        if (n.d(t, g) && g + 5 < p) {
                            n.c(l, this.observer, t, g, l.manifestCodec);
                            var y = n.a(l, t, g, c, h);
                            if (!y) {
                                o.b.log("Unable to parse AAC frame");
                                break
                            }
                            g += y.length, f = y.sample.pts, h++
                        } else s.a.isHeader(t, g) ? (u = s.a.getID3Data(t, g), v.push({
                            pts: f,
                            dts: f,
                            data: u
                        }), g += u.length) : g++;
                    this.remuxer.remux(l, {
                        samples: []
                    }, {
                        samples: v,
                        inputTimeScale: 9e4
                    }, {
                        samples: []
                    }, e, r, i)
                }, t.prototype.destroy = function() {}, t
            }();
        e.a = l
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(23),
            n = r(24),
            o = r(1),
            s = r(42),
            l = r(43),
            u = r(0),
            d = r(2),
            c = {
                video: 1,
                audio: 2,
                id3: 3,
                text: 4
            },
            h = function() {
                function t(e, r, a, n) {
                    i(this, t), this.observer = e, this.config = a, this.typeSupported = n, this.remuxer = r, this.sampleAes = null
                }
                return t.prototype.setDecryptData = function(t) {
                    null != t && null != t.key && "SAMPLE-AES" === t.method ? this.sampleAes = new l.a(this.observer, this.config, t, this.discardEPB) : this.sampleAes = null
                }, t.probe = function(e) {
                    var r = t._syncOffset(e);
                    return !(r < 0) && (r && u.b.warn("MPEG2-TS detected but first sync word found @ offset " + r + ", junk ahead ?"), !0)
                }, t._syncOffset = function(t) {
                    for (var e = Math.min(1e3, t.length - 564), r = 0; r < e;) {
                        if (71 === t[r] && 71 === t[r + 188] && 71 === t[r + 376]) return r;
                        r++
                    }
                    return -1
                }, t.createTrack = function(t, e) {
                    return {
                        container: "video" === t || "audio" === t ? "video/mp2t" : void 0,
                        type: t,
                        id: c[t],
                        pid: -1,
                        inputTimeScale: 9e4,
                        sequenceNumber: 0,
                        samples: [],
                        len: 0,
                        dropped: "video" === t ? 0 : void 0,
                        isAAC: "audio" === t || void 0,
                        duration: "audio" === t ? e : void 0
                    }
                }, t.prototype.resetInitSegment = function(e, r, i, a) {
                    this.pmtParsed = !1, this._pmtId = -1, this._avcTrack = t.createTrack("video", a), this._audioTrack = t.createTrack("audio", a), this._id3Track = t.createTrack("id3", a), this._txtTrack = t.createTrack("text", a), this.aacOverFlow = null, this.aacLastPTS = null, this.avcSample = null, this.audioCodec = r, this.videoCodec = i, this._duration = a
                }, t.prototype.resetTimeStamp = function() {}, t.prototype.append = function(e, r, i, a) {
                    var n = void 0,
                        s = e.length,
                        l = void 0,
                        c = void 0,
                        h = void 0,
                        f = void 0,
                        p = !1;
                    this.contiguous = i;
                    var g = this.pmtParsed,
                        v = this._avcTrack,
                        y = this._audioTrack,
                        m = this._id3Track,
                        b = v.pid,
                        E = y.pid,
                        T = m.pid,
                        S = this._pmtId,
                        A = v.pesData,
                        R = y.pesData,
                        _ = m.pesData,
                        w = this._parsePAT,
                        L = this._parsePMT,
                        D = this._parsePES,
                        I = this._parseAVCPES.bind(this),
                        k = this._parseAACPES.bind(this),
                        O = this._parseMPEGPES.bind(this),
                        C = this._parseID3PES.bind(this),
                        P = t._syncOffset(e);
                    for (s -= (s + P) % 188, n = P; n < s; n += 188)
                        if (71 === e[n]) {
                            if (l = !!(64 & e[n + 1]), c = ((31 & e[n + 1]) << 8) + e[n + 2], (48 & e[n + 3]) >> 4 > 1) {
                                if ((h = n + 5 + e[n + 4]) === n + 188) continue
                            } else h = n + 4;
                            switch (c) {
                                case b:
                                    l && (A && (f = D(A)) && void 0 !== f.pts && I(f, !1), A = {
                                        data: [],
                                        size: 0
                                    }), A && (A.data.push(e.subarray(h, n + 188)), A.size += n + 188 - h);
                                    break;
                                case E:
                                    l && (R && (f = D(R)) && void 0 !== f.pts && (y.isAAC ? k(f) : O(f)), R = {
                                        data: [],
                                        size: 0
                                    }), R && (R.data.push(e.subarray(h, n + 188)), R.size += n + 188 - h);
                                    break;
                                case T:
                                    l && (_ && (f = D(_)) && void 0 !== f.pts && C(f), _ = {
                                        data: [],
                                        size: 0
                                    }), _ && (_.data.push(e.subarray(h, n + 188)), _.size += n + 188 - h);
                                    break;
                                case 0:
                                    l && (h += e[h] + 1), S = this._pmtId = w(e, h);
                                    break;
                                case S:
                                    l && (h += e[h] + 1);
                                    var x = L(e, h, !0 === this.typeSupported.mpeg || !0 === this.typeSupported.mp3, null != this.sampleAes);
                                    b = x.avc, b > 0 && (v.pid = b), E = x.audio, E > 0 && (y.pid = E, y.isAAC = x.isAAC), T = x.id3, T > 0 && (m.pid = T), p && !g && (u.b.log("reparse from beginning"), p = !1, n = P - 188), g = this.pmtParsed = !0;
                                    break;
                                case 17:
                                case 8191:
                                    break;
                                default:
                                    p = !0
                            }
                        } else this.observer.trigger(o.a.ERROR, {
                            type: d.b.MEDIA_ERROR,
                            details: d.a.FRAG_PARSING_ERROR,
                            fatal: !1,
                            reason: "TS packet did not start with 0x47"
                        });
                    A && (f = D(A)) && void 0 !== f.pts ? (I(f, !0), v.pesData = null) : v.pesData = A, R && (f = D(R)) && void 0 !== f.pts ? (y.isAAC ? k(f) : O(f), y.pesData = null) : (R && R.size && u.b.log("last AAC PES packet truncated,might overlap between fragments"), y.pesData = R), _ && (f = D(_)) && void 0 !== f.pts ? (C(f), m.pesData = null) : m.pesData = _, null == this.sampleAes ? this.remuxer.remux(y, v, m, this._txtTrack, r, i, a) : this.decryptAndRemux(y, v, m, this._txtTrack, r, i, a)
                }, t.prototype.decryptAndRemux = function(t, e, r, i, a, n, o) {
                    if (t.samples && t.isAAC) {
                        var s = this;
                        this.sampleAes.decryptAacSamples(t.samples, 0, function() {
                            s.decryptAndRemuxAvc(t, e, r, i, a, n, o)
                        })
                    } else this.decryptAndRemuxAvc(t, e, r, i, a, n, o)
                }, t.prototype.decryptAndRemuxAvc = function(t, e, r, i, a, n, o) {
                    if (e.samples) {
                        var s = this;
                        this.sampleAes.decryptAvcSamples(e.samples, 0, 0, function() {
                            s.remuxer.remux(t, e, r, i, a, n, o)
                        })
                    } else this.remuxer.remux(t, e, r, i, a, n, o)
                }, t.prototype.destroy = function() {
                    this._initPTS = this._initDTS = void 0, this._duration = 0
                }, t.prototype._parsePAT = function(t, e) {
                    return (31 & t[e + 10]) << 8 | t[e + 11]
                }, t.prototype._parsePMT = function(t, e, r, i) {
                    var a = void 0,
                        n = void 0,
                        o = void 0,
                        s = void 0,
                        l = {
                            audio: -1,
                            avc: -1,
                            id3: -1,
                            isAAC: !0
                        };
                    for (a = (15 & t[e + 1]) << 8 | t[e + 2], n = e + 3 + a - 4, o = (15 & t[e + 10]) << 8 | t[e + 11], e += 12 + o; e < n;) {
                        switch (s = (31 & t[e + 1]) << 8 | t[e + 2], t[e]) {
                            case 207:
                                if (!i) {
                                    u.b.log("unkown stream type:" + t[e]);
                                    break
                                }
                            case 15:
                                -1 === l.audio && (l.audio = s);
                                break;
                            case 21:
                                -1 === l.id3 && (l.id3 = s);
                                break;
                            case 219:
                                if (!i) {
                                    u.b.log("unkown stream type:" + t[e]);
                                    break
                                }
                            case 27:
                                -1 === l.avc && (l.avc = s);
                                break;
                            case 3:
                            case 4:
                                r ? -1 === l.audio && (l.audio = s, l.isAAC = !1) : u.b.log("MPEG audio found, not supported in this browser for now");
                                break;
                            case 36:
                                u.b.warn("HEVC stream type found, not supported for now");
                                break;
                            default:
                                u.b.log("unkown stream type:" + t[e])
                        }
                        e += 5 + ((15 & t[e + 3]) << 8 | t[e + 4])
                    }
                    return l
                }, t.prototype._parsePES = function(t) {
                    var e = 0,
                        r = void 0,
                        i = void 0,
                        a = void 0,
                        n = void 0,
                        o = void 0,
                        s = void 0,
                        l = void 0,
                        d = void 0,
                        c = t.data;
                    if (!t || 0 === t.size) return null;
                    for (; c[0].length < 19 && c.length > 1;) {
                        var h = new Uint8Array(c[0].length + c[1].length);
                        h.set(c[0]), h.set(c[1], c[0].length), c[0] = h, c.splice(1, 1)
                    }
                    if (r = c[0], 1 === (r[0] << 16) + (r[1] << 8) + r[2]) {
                        if ((a = (r[4] << 8) + r[5]) && a > t.size - 6) return null;
                        i = r[7], 192 & i && (s = 536870912 * (14 & r[9]) + 4194304 * (255 & r[10]) + 16384 * (254 & r[11]) + 128 * (255 & r[12]) + (254 & r[13]) / 2, s > 4294967295 && (s -= 8589934592), 64 & i ? (l = 536870912 * (14 & r[14]) + 4194304 * (255 & r[15]) + 16384 * (254 & r[16]) + 128 * (255 & r[17]) + (254 & r[18]) / 2, l > 4294967295 && (l -= 8589934592), s - l > 54e5 && (u.b.warn(Math.round((s - l) / 9e4) + "s delta between PTS and DTS, align them"), s = l)) : l = s), n = r[8], d = n + 9, t.size -= d, o = new Uint8Array(t.size);
                        for (var f = 0, p = c.length; f < p; f++) {
                            r = c[f];
                            var g = r.byteLength;
                            if (d) {
                                if (d > g) {
                                    d -= g;
                                    continue
                                }
                                r = r.subarray(d), g -= d, d = 0
                            }
                            o.set(r, e), e += g
                        }
                        return a && (a -= n + 3), {
                            data: o,
                            pts: s,
                            dts: l,
                            len: a
                        }
                    }
                    return null
                }, t.prototype.pushAccesUnit = function(t, e) {
                    if (t.units.length && t.frame) {
                        var r = e.samples,
                            i = r.length;
                        !this.config.forceKeyFrameOnDiscontinuity || !0 === t.key || e.sps && (i || this.contiguous) ? (t.id = i, r.push(t)) : e.dropped++
                    }
                    t.debug.length && u.b.log(t.pts + "/" + t.dts + ":" + t.debug)
                }, t.prototype._parseAVCPES = function(t, e) {
                    var r = this,
                        i = this._avcTrack,
                        a = this._parseAVCNALu(t.data),
                        n = void 0,
                        o = this.avcSample,
                        l = void 0,
                        u = !1,
                        d = void 0,
                        c = this.pushAccesUnit.bind(this),
                        h = function(t, e, r, i) {
                            return {
                                key: t,
                                pts: e,
                                dts: r,
                                units: [],
                                debug: i
                            }
                        };
                    t.data = null, o && a.length && !i.audFound && (c(o, i), o = this.avcSample = h(!1, t.pts, t.dts, "")), a.forEach(function(e) {
                        switch (e.type) {
                            case 1:
                                l = !0, o || (o = r.avcSample = h(!0, t.pts, t.dts, "")), o.frame = !0;
                                var a = e.data;
                                if (u && a.length > 4) {
                                    var f = new s.a(a).readSliceType();
                                    2 !== f && 4 !== f && 7 !== f && 9 !== f || (o.key = !0)
                                }
                                break;
                            case 5:
                                l = !0, o || (o = r.avcSample = h(!0, t.pts, t.dts, "")), o.key = !0, o.frame = !0;
                                break;
                            case 6:
                                l = !0, n = new s.a(r.discardEPB(e.data)), n.readUByte();
                                for (var p = 0, g = 0, v = !1, y = 0; !v && n.bytesAvailable > 1;) {
                                    p = 0;
                                    do {
                                        y = n.readUByte(), p += y
                                    } while (255 === y);
                                    g = 0;
                                    do {
                                        y = n.readUByte(), g += y
                                    } while (255 === y);
                                    if (4 === p && 0 !== n.bytesAvailable) {
                                        v = !0;
                                        if (181 === n.readUByte()) {
                                            if (49 === n.readUShort()) {
                                                if (1195456820 === n.readUInt()) {
                                                    if (3 === n.readUByte()) {
                                                        var m = n.readUByte(),
                                                            b = n.readUByte(),
                                                            E = 31 & m,
                                                            T = [m, b];
                                                        for (d = 0; d < E; d++) T.push(n.readUByte()), T.push(n.readUByte()), T.push(n.readUByte());
                                                        r._insertSampleInOrder(r._txtTrack.samples, {
                                                            type: 3,
                                                            pts: t.pts,
                                                            bytes: T
                                                        })
                                                    }
                                                }
                                            }
                                        }
                                    } else if (g < n.bytesAvailable)
                                        for (d = 0; d < g; d++) n.readUByte()
                                }
                                break;
                            case 7:
                                if (l = !0, u = !0, !i.sps) {
                                    n = new s.a(e.data);
                                    var S = n.readSPS();
                                    i.width = S.width, i.height = S.height, i.pixelRatio = S.pixelRatio, i.sps = [e.data], i.duration = r._duration;
                                    var A = e.data.subarray(1, 4),
                                        R = "avc1.";
                                    for (d = 0; d < 3; d++) {
                                        var _ = A[d].toString(16);
                                        _.length < 2 && (_ = "0" + _), R += _
                                    }
                                    i.codec = R
                                }
                                break;
                            case 8:
                                l = !0, i.pps || (i.pps = [e.data]);
                                break;
                            case 9:
                                l = !1, i.audFound = !0, o && c(o, i), o = r.avcSample = h(!1, t.pts, t.dts, "");
                                break;
                            case 12:
                                l = !1;
                                break;
                            default:
                                l = !1, o && (o.debug += "unknown NAL " + e.type + " ")
                        }
                        if (o && l) {
                            o.units.push(e)
                        }
                    }), e && o && (c(o, i), this.avcSample = null)
                }, t.prototype._insertSampleInOrder = function(t, e) {
                    var r = t.length;
                    if (r > 0) {
                        if (e.pts >= t[r - 1].pts) t.push(e);
                        else
                            for (var i = r - 1; i >= 0; i--)
                                if (e.pts < t[i].pts) {
                                    t.splice(i, 0, e);
                                    break
                                }
                    } else t.push(e)
                }, t.prototype._getLastNalUnit = function() {
                    var t = this.avcSample,
                        e = void 0;
                    if (!t || 0 === t.units.length) {
                        var r = this._avcTrack,
                            i = r.samples;
                        t = i[i.length - 1]
                    }
                    if (t) {
                        var a = t.units;
                        e = a[a.length - 1]
                    }
                    return e
                }, t.prototype._parseAVCNALu = function(t) {
                    var e = 0,
                        r = t.byteLength,
                        i = void 0,
                        a = void 0,
                        n = this._avcTrack,
                        o = n.naluState || 0,
                        s = o,
                        l = [],
                        u = void 0,
                        d = void 0,
                        c = -1,
                        h = void 0;
                    for (-1 === o && (c = 0, h = 31 & t[0], o = 0, e = 1); e < r;)
                        if (i = t[e++], o)
                            if (1 !== o)
                                if (i)
                                    if (1 === i) {
                                        if (c >= 0) u = {
                                            data: t.subarray(c, e - o - 1),
                                            type: h
                                        }, l.push(u);
                                        else {
                                            var f = this._getLastNalUnit();
                                            if (f && (s && e <= 4 - s && f.state && (f.data = f.data.subarray(0, f.data.byteLength - s)), (a = e - o - 1) > 0)) {
                                                var p = new Uint8Array(f.data.byteLength + a);
                                                p.set(f.data, 0), p.set(t.subarray(0, a), f.data.byteLength), f.data = p
                                            }
                                        }
                                        e < r ? (d = 31 & t[e], c = e, h = d, o = 0) : o = -1
                                    } else o = 0;
                    else o = 3;
                    else o = i ? 0 : 2;
                    else o = i ? 0 : 1;
                    if (c >= 0 && o >= 0 && (u = {
                            data: t.subarray(c, r),
                            type: h,
                            state: o
                        }, l.push(u)), 0 === l.length) {
                        var g = this._getLastNalUnit();
                        if (g) {
                            var v = new Uint8Array(g.data.byteLength + t.byteLength);
                            v.set(g.data, 0), v.set(t, g.data.byteLength), g.data = v
                        }
                    }
                    return n.naluState = o, l
                }, t.prototype.discardEPB = function(t) {
                    for (var e = t.byteLength, r = [], i = 1, a = void 0, n = void 0; i < e - 2;) 0 === t[i] && 0 === t[i + 1] && 3 === t[i + 2] ? (r.push(i + 2), i += 2) : i++;
                    if (0 === r.length) return t;
                    a = e - r.length, n = new Uint8Array(a);
                    var o = 0;
                    for (i = 0; i < a; o++, i++) o === r[0] && (o++, r.shift()), n[i] = t[o];
                    return n
                }, t.prototype._parseAACPES = function(t) {
                    var e = this._audioTrack,
                        r = t.data,
                        i = t.pts,
                        n = this.aacOverFlow,
                        s = this.aacLastPTS,
                        l = void 0,
                        c = void 0,
                        h = void 0,
                        f = void 0,
                        p = void 0;
                    if (n) {
                        var g = new Uint8Array(n.byteLength + r.byteLength);
                        g.set(n, 0), g.set(r, n.byteLength), r = g
                    }
                    for (h = 0, p = r.length; h < p - 1 && !a.d(r, h); h++);
                    if (h) {
                        var v = void 0,
                            y = void 0;
                        if (h < p - 1 ? (v = "AAC PES did not start with ADTS header,offset:" + h, y = !1) : (v = "no ADTS header found in AAC PES", y = !0), u.b.warn("parsing error:" + v), this.observer.trigger(o.a.ERROR, {
                                type: d.b.MEDIA_ERROR,
                                details: d.a.FRAG_PARSING_ERROR,
                                fatal: y,
                                reason: v
                            }), y) return
                    }
                    if (a.c(e, this.observer, r, h, this.audioCodec), c = 0, l = a.b(e.samplerate), n && s) {
                        var m = s + l;
                        Math.abs(m - i) > 1 && (u.b.log("AAC: align PTS for overlapping frames by " + Math.round((m - i) / 90)), i = m)
                    }
                    for (; h < p;)
                        if (a.d(r, h) && h + 5 < p) {
                            var b = a.a(e, r, h, i, c);
                            if (!b) break;
                            h += b.length, f = b.sample.pts, c++
                        } else h++;
                    n = h < p ? r.subarray(h, p) : null, this.aacOverFlow = n, this.aacLastPTS = f
                }, t.prototype._parseMPEGPES = function(t) {
                    for (var e = t.data, r = e.length, i = 0, a = 0, o = t.pts; a < r;)
                        if (n.a.isHeader(e, a)) {
                            var s = n.a.appendFrame(this._audioTrack, e, a, o, i);
                            if (!s) break;
                            a += s.length, i++
                        } else a++
                }, t.prototype._parseID3PES = function(t) {
                    this._id3Track.samples.push(t)
                }, t
            }();
        e.a = h
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(0),
            n = function() {
                function t(e) {
                    i(this, t), this.data = e, this.bytesAvailable = e.byteLength, this.word = 0, this.bitsAvailable = 0
                }
                return t.prototype.loadWord = function() {
                    var t = this.data,
                        e = this.bytesAvailable,
                        r = t.byteLength - e,
                        i = new Uint8Array(4),
                        a = Math.min(4, e);
                    if (0 === a) throw new Error("no bytes available");
                    i.set(t.subarray(r, r + a)), this.word = new DataView(i.buffer).getUint32(0), this.bitsAvailable = 8 * a, this.bytesAvailable -= a
                }, t.prototype.skipBits = function(t) {
                    var e = void 0;
                    this.bitsAvailable > t ? (this.word <<= t, this.bitsAvailable -= t) : (t -= this.bitsAvailable, e = t >> 3, t -= e >> 3, this.bytesAvailable -= e, this.loadWord(), this.word <<= t, this.bitsAvailable -= t)
                }, t.prototype.readBits = function(t) {
                    var e = Math.min(this.bitsAvailable, t),
                        r = this.word >>> 32 - e;
                    return t > 32 && a.b.error("Cannot read more than 32 bits at a time"), this.bitsAvailable -= e, this.bitsAvailable > 0 ? this.word <<= e : this.bytesAvailable > 0 && this.loadWord(), e = t - e, e > 0 && this.bitsAvailable ? r << e | this.readBits(e) : r
                }, t.prototype.skipLZ = function() {
                    var t = void 0;
                    for (t = 0; t < this.bitsAvailable; ++t)
                        if (0 != (this.word & 2147483648 >>> t)) return this.word <<= t, this.bitsAvailable -= t, t;
                    return this.loadWord(), t + this.skipLZ()
                }, t.prototype.skipUEG = function() {
                    this.skipBits(1 + this.skipLZ())
                }, t.prototype.skipEG = function() {
                    this.skipBits(1 + this.skipLZ())
                }, t.prototype.readUEG = function() {
                    var t = this.skipLZ();
                    return this.readBits(t + 1) - 1
                }, t.prototype.readEG = function() {
                    var t = this.readUEG();
                    return 1 & t ? 1 + t >>> 1 : -1 * (t >>> 1)
                }, t.prototype.readBoolean = function() {
                    return 1 === this.readBits(1)
                }, t.prototype.readUByte = function() {
                    return this.readBits(8)
                }, t.prototype.readUShort = function() {
                    return this.readBits(16)
                }, t.prototype.readUInt = function() {
                    return this.readBits(32)
                }, t.prototype.skipScalingList = function(t) {
                    var e = 8,
                        r = 8,
                        i = void 0,
                        a = void 0;
                    for (i = 0; i < t; i++) 0 !== r && (a = this.readEG(), r = (e + a + 256) % 256), e = 0 === r ? e : r
                }, t.prototype.readSPS = function() {
                    var t = 0,
                        e = 0,
                        r = 0,
                        i = 0,
                        a = void 0,
                        n = void 0,
                        o = void 0,
                        s = void 0,
                        l = void 0,
                        u = void 0,
                        d = void 0,
                        c = this.readUByte.bind(this),
                        h = this.readBits.bind(this),
                        f = this.readUEG.bind(this),
                        p = this.readBoolean.bind(this),
                        g = this.skipBits.bind(this),
                        v = this.skipEG.bind(this),
                        y = this.skipUEG.bind(this),
                        m = this.skipScalingList.bind(this);
                    if (c(), a = c(), h(5), g(3), c(), y(), 100 === a || 110 === a || 122 === a || 244 === a || 44 === a || 83 === a || 86 === a || 118 === a || 128 === a) {
                        var b = f();
                        if (3 === b && g(1), y(), y(), g(1), p())
                            for (u = 3 !== b ? 8 : 12, d = 0; d < u; d++) p() && m(d < 6 ? 16 : 64)
                    }
                    y();
                    var E = f();
                    if (0 === E) f();
                    else if (1 === E)
                        for (g(1), v(), v(), n = f(), d = 0; d < n; d++) v();
                    y(), g(1), o = f(), s = f(), l = h(1), 0 === l && g(1), g(1), p() && (t = f(), e = f(), r = f(), i = f());
                    var T = [1, 1];
                    if (p() && p()) {
                        switch (c()) {
                            case 1:
                                T = [1, 1];
                                break;
                            case 2:
                                T = [12, 11];
                                break;
                            case 3:
                                T = [10, 11];
                                break;
                            case 4:
                                T = [16, 11];
                                break;
                            case 5:
                                T = [40, 33];
                                break;
                            case 6:
                                T = [24, 11];
                                break;
                            case 7:
                                T = [20, 11];
                                break;
                            case 8:
                                T = [32, 11];
                                break;
                            case 9:
                                T = [80, 33];
                                break;
                            case 10:
                                T = [18, 11];
                                break;
                            case 11:
                                T = [15, 11];
                                break;
                            case 12:
                                T = [64, 33];
                                break;
                            case 13:
                                T = [160, 99];
                                break;
                            case 14:
                                T = [4, 3];
                                break;
                            case 15:
                                T = [3, 2];
                                break;
                            case 16:
                                T = [2, 1];
                                break;
                            case 255:
                                T = [c() << 8 | c(), c() << 8 | c()]
                        }
                    }
                    return {
                        width: Math.ceil(16 * (o + 1) - 2 * t - 2 * e),
                        height: (2 - l) * (s + 1) * 16 - (l ? 2 : 4) * (r + i),
                        pixelRatio: T
                    }
                }, t.prototype.readSliceType = function() {
                    return this.readUByte(), this.readUEG(), this.readUEG()
                }, t
            }();
        e.a = n
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(14),
            n = function() {
                function t(e, r, n, o) {
                    i(this, t), this.decryptdata = n, this.discardEPB = o, this.decrypter = new a.a(e, r, {
                        removePKCS7Padding: !1
                    })
                }
                return t.prototype.decryptBuffer = function(t, e) {
                    this.decrypter.decrypt(t, this.decryptdata.key.buffer, this.decryptdata.iv.buffer, e)
                }, t.prototype.decryptAacSample = function(t, e, r, i) {
                    var a = t[e].unit,
                        n = a.subarray(16, a.length - a.length % 16),
                        o = n.buffer.slice(n.byteOffset, n.byteOffset + n.length),
                        s = this;
                    this.decryptBuffer(o, function(n) {
                        n = new Uint8Array(n), a.set(n, 16), i || s.decryptAacSamples(t, e + 1, r)
                    })
                }, t.prototype.decryptAacSamples = function(t, e, r) {
                    for (;; e++) {
                        if (e >= t.length) return void r();
                        if (!(t[e].unit.length < 32)) {
                            var i = this.decrypter.isSync();
                            if (this.decryptAacSample(t, e, r, i), !i) return
                        }
                    }
                }, t.prototype.getAvcEncryptedData = function(t) {
                    for (var e = 16 * Math.floor((t.length - 48) / 160) + 16, r = new Int8Array(e), i = 0, a = 32; a <= t.length - 16; a += 160, i += 16) r.set(t.subarray(a, a + 16), i);
                    return r
                }, t.prototype.getAvcDecryptedUnit = function(t, e) {
                    e = new Uint8Array(e);
                    for (var r = 0, i = 32; i <= t.length - 16; i += 160, r += 16) t.set(e.subarray(r, r + 16), i);
                    return t
                }, t.prototype.decryptAvcSample = function(t, e, r, i, a, n) {
                    var o = this.discardEPB(a.data),
                        s = this.getAvcEncryptedData(o),
                        l = this;
                    this.decryptBuffer(s.buffer, function(s) {
                        a.data = l.getAvcDecryptedUnit(o, s), n || l.decryptAvcSamples(t, e, r + 1, i)
                    })
                }, t.prototype.decryptAvcSamples = function(t, e, r, i) {
                    for (;; e++, r = 0) {
                        if (e >= t.length) return void i();
                        for (var a = t[e].units; !(r >= a.length); r++) {
                            var n = a[r];
                            if (!(n.length <= 48 || 1 !== n.type && 5 !== n.type)) {
                                var o = this.decrypter.isSync();
                                if (this.decryptAvcSample(t, e, r, i, n, o), !o) return
                            }
                        }
                    }
                }, t
            }();
        e.a = n
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(9),
            n = r(0),
            o = r(24),
            s = function() {
                function t(e, r, a) {
                    i(this, t), this.observer = e, this.config = a, this.remuxer = r
                }
                return t.prototype.resetInitSegment = function(t, e, r, i) {
                    this._audioTrack = {
                        container: "audio/mpeg",
                        type: "audio",
                        id: -1,
                        sequenceNumber: 0,
                        isAAC: !1,
                        samples: [],
                        len: 0,
                        manifestCodec: e,
                        duration: i,
                        inputTimeScale: 9e4
                    }
                }, t.prototype.resetTimeStamp = function() {}, t.probe = function(t) {
                    var e = void 0,
                        r = void 0,
                        i = a.a.getID3Data(t, 0);
                    if (i && void 0 !== a.a.getTimeStamp(i))
                        for (e = i.length, r = Math.min(t.length - 1, e + 100); e < r; e++)
                            if (o.a.probe(t, e)) return n.b.log("MPEG Audio sync word found !"), !0;
                    return !1
                }, t.prototype.append = function(t, e, r, i) {
                    for (var n = a.a.getID3Data(t, 0), s = a.a.getTimeStamp(n), l = s ? 90 * s : 9e4 * e, u = n.length, d = t.length, c = 0, h = 0, f = this._audioTrack, p = [{
                            pts: l,
                            dts: l,
                            data: n
                        }]; u < d;)
                        if (o.a.isHeader(t, u)) {
                            var g = o.a.appendFrame(f, t, u, l, c);
                            if (!g) break;
                            u += g.length, h = g.sample.pts, c++
                        } else a.a.isHeader(t, u) ? (n = a.a.getID3Data(t, u), p.push({
                            pts: h,
                            dts: h,
                            data: n
                        }), u += n.length) : u++;
                    this.remuxer.remux(f, {
                        samples: []
                    }, {
                        samples: p,
                        inputTimeScale: 9e4
                    }, {
                        samples: []
                    }, e, r, i)
                }, t.prototype.destroy = function() {}, t
            }();
        e.a = s
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(46),
            n = r(47),
            o = r(1),
            s = r(2),
            l = r(0),
            u = function() {
                function t(e, r, a, n) {
                    i(this, t), this.observer = e, this.config = r, this.typeSupported = a;
                    var o = navigator.userAgent;
                    this.isSafari = n && n.indexOf("Apple") > -1 && o && !o.match("CriOS"), this.ISGenerated = !1
                }
                return t.prototype.destroy = function() {}, t.prototype.resetTimeStamp = function(t) {
                    this._initPTS = this._initDTS = t
                }, t.prototype.resetInitSegment = function() {
                    this.ISGenerated = !1
                }, t.prototype.remux = function(t, e, r, i, a, n, s) {
                    if (this.ISGenerated || this.generateIS(t, e, a), this.ISGenerated) {
                        var u = t.samples.length,
                            d = e.samples.length,
                            c = a,
                            h = a;
                        if (u && d) {
                            var f = (t.samples[0].dts - e.samples[0].dts) / e.inputTimeScale;
                            c += Math.max(0, f), h += Math.max(0, -f)
                        }
                        if (u) {
                            t.timescale || (l.b.warn("regenerate InitSegment as audio detected"), this.generateIS(t, e, a));
                            var p = this.remuxAudio(t, c, n, s);
                            if (d) {
                                var g = void 0;
                                p && (g = p.endPTS - p.startPTS), e.timescale || (l.b.warn("regenerate InitSegment as video detected"), this.generateIS(t, e, a)), this.remuxVideo(e, h, n, g, s)
                            }
                        } else if (d) {
                            var v = this.remuxVideo(e, h, n, 0, s);
                            v && t.codec && this.remuxEmptyAudio(t, c, n, v)
                        }
                    }
                    r.samples.length && this.remuxID3(r, a), i.samples.length && this.remuxText(i, a), this.observer.trigger(o.a.FRAG_PARSED)
                }, t.prototype.generateIS = function(t, e, r) {
                    var i = this.observer,
                        a = t.samples,
                        u = e.samples,
                        d = this.typeSupported,
                        c = "audio/mp4",
                        h = {},
                        f = {
                            tracks: h
                        },
                        p = void 0 === this._initPTS,
                        g = void 0,
                        v = void 0;
                    if (p && (g = v = 1 / 0), t.config && a.length && (t.timescale = t.samplerate, l.b.log("audio sampling rate : " + t.samplerate), t.isAAC || (d.mpeg ? (c = "audio/mpeg", t.codec = "") : d.mp3 && (t.codec = "mp3")), h.audio = {
                            container: c,
                            codec: t.codec,
                            initSegment: !t.isAAC && d.mpeg ? new Uint8Array : n.a.initSegment([t]),
                            metadata: {
                                channelCount: t.channelCount
                            }
                        }, p && (g = v = a[0].pts - t.inputTimeScale * r)), e.sps && e.pps && u.length) {
                        var y = e.inputTimeScale;
                        e.timescale = y, h.video = {
                            container: "video/mp4",
                            codec: e.codec,
                            initSegment: n.a.initSegment([e]),
                            metadata: {
                                width: e.width,
                                height: e.height
                            }
                        }, p && (g = Math.min(g, u[0].pts - y * r), v = Math.min(v, u[0].dts - y * r), this.observer.trigger(o.a.INIT_PTS_FOUND, {
                            initPTS: g
                        }))
                    }
                    Object.keys(h).length ? (i.trigger(o.a.FRAG_PARSING_INIT_SEGMENT, f), this.ISGenerated = !0, p && (this._initPTS = g, this._initDTS = v)) : i.trigger(o.a.ERROR, {
                        type: s.b.MEDIA_ERROR,
                        details: s.a.FRAG_PARSING_ERROR,
                        fatal: !1,
                        reason: "no audio/video samples found"
                    })
                }, t.prototype.remuxVideo = function(t, e, r, i, a) {
                    var u = 8,
                        d = t.timescale,
                        c = void 0,
                        h = void 0,
                        f = void 0,
                        p = void 0,
                        g = void 0,
                        v = void 0,
                        y = void 0,
                        m = t.samples,
                        b = [],
                        E = m.length,
                        T = this._PTSNormalize,
                        S = this._initDTS,
                        A = this.nextAvcDts,
                        R = this.isSafari;
                    if (0 !== E) {
                        R && (r |= m.length && A && (a && Math.abs(e - A / d) < .1 || Math.abs(m[0].pts - A - S) < d / 5)), r || (A = e * d), m.forEach(function(t) {
                            t.pts = T(t.pts - S, A), t.dts = T(t.dts - S, A)
                        }), m.sort(function(t, e) {
                            var r = t.dts - e.dts,
                                i = t.pts - e.pts;
                            return r || i || t.id - e.id
                        });
                        var _ = m.reduce(function(t, e) {
                            return Math.max(Math.min(t, e.pts - e.dts), -18e3)
                        }, 0);
                        if (_ < 0) {
                            l.b.warn("PTS < DTS detected in video samples, shifting DTS by " + Math.round(_ / 90) + " ms to overcome this issue");
                            for (var w = 0; w < m.length; w++) m[w].dts += _
                        }
                        var L = m[0];
                        g = Math.max(L.dts, 0), p = Math.max(L.pts, 0);
                        var D = Math.round((g - A) / 90);
                        r && D && (D > 1 ? l.b.log("AVC:" + D + " ms hole between fragments detected,filling it") : D < -1 && l.b.log("AVC:" + -D + " ms overlapping between fragments detected"), g = A, m[0].dts = g, p = Math.max(p - D, A), m[0].pts = p, l.b.log("Video/PTS/DTS adjusted: " + Math.round(p / 90) + "/" + Math.round(g / 90) + ",delta:" + D + " ms")), g, L = m[m.length - 1], y = Math.max(L.dts, 0), v = Math.max(L.pts, 0, y), R && (c = Math.round((y - g) / (m.length - 1)));
                        for (var I = 0, k = 0, O = 0; O < E; O++) {
                            for (var C = m[O], P = C.units, x = P.length, F = 0, M = 0; M < x; M++) F += P[M].data.length;
                            k += F, I += x, C.length = F, C.dts = R ? g + O * c : Math.max(C.dts, g), C.pts = Math.max(C.pts, C.dts)
                        }
                        var N = k + 4 * I + 8;
                        try {
                            h = new Uint8Array(N)
                        } catch (t) {
                            return void this.observer.trigger(o.a.ERROR, {
                                type: s.b.MUX_ERROR,
                                details: s.a.REMUX_ALLOC_ERROR,
                                fatal: !1,
                                bytes: N,
                                reason: "fail allocating video mdat " + N
                            })
                        }
                        var U = new DataView(h.buffer);
                        U.setUint32(0, N), h.set(n.a.types.mdat, 4);
                        for (var B = 0; B < E; B++) {
                            for (var G = m[B], K = G.units, j = 0, H = void 0, V = 0, Y = K.length; V < Y; V++) {
                                var W = K[V],
                                    q = W.data,
                                    X = W.data.byteLength;
                                U.setUint32(u, X), u += 4, h.set(q, u), u += X, j += 4 + X
                            }
                            if (R) H = Math.max(0, c * Math.round((G.pts - G.dts) / c));
                            else {
                                if (B < E - 1) c = m[B + 1].dts - G.dts;
                                else {
                                    var z = this.config,
                                        Q = G.dts - m[B > 0 ? B - 1 : B].dts;
                                    if (z.stretchShortVideoTrack) {
                                        var $ = z.maxBufferHole,
                                            J = Math.floor($ * d),
                                            Z = (i ? p + i * d : this.nextAudioPts) - G.pts;
                                        Z > J ? (c = Z - Q, c < 0 && (c = Q), l.b.log("It is approximately " + Z / 90 + " ms to the next segment; using duration " + c / 90 + " ms for the last video frame.")) : c = Q
                                    } else c = Q
                                }
                                H = Math.round(G.pts - G.dts)
                            }
                            b.push({
                                size: j,
                                duration: c,
                                cts: H,
                                flags: {
                                    isLeading: 0,
                                    isDependedOn: 0,
                                    hasRedundancy: 0,
                                    degradPrio: 0,
                                    dependsOn: G.key ? 2 : 1,
                                    isNonSync: G.key ? 0 : 1
                                }
                            })
                        }
                        this.nextAvcDts = y + c;
                        var tt = t.dropped;
                        if (t.len = 0, t.nbNalu = 0, t.dropped = 0, b.length && navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
                            var et = b[0].flags;
                            et.dependsOn = 2, et.isNonSync = 0
                        }
                        t.samples = b, f = n.a.moof(t.sequenceNumber++, g, t), t.samples = [];
                        var rt = {
                            data1: f,
                            data2: h,
                            startPTS: p / d,
                            endPTS: (v + c) / d,
                            startDTS: g / d,
                            endDTS: this.nextAvcDts / d,
                            type: "video",
                            hasAudio: !1,
                            hasVideo: !0,
                            nb: b.length,
                            dropped: tt
                        };
                        return this.observer.trigger(o.a.FRAG_PARSING_DATA, rt), rt
                    }
                }, t.prototype.remuxAudio = function(t, e, r, i) {
                    var u = t.inputTimeScale,
                        d = t.timescale,
                        c = u / d,
                        h = t.isAAC ? 1024 : 1152,
                        f = h * c,
                        p = this._PTSNormalize,
                        g = this._initDTS,
                        v = !t.isAAC && this.typeSupported.mpeg,
                        y = void 0,
                        m = void 0,
                        b = void 0,
                        E = void 0,
                        T = void 0,
                        S = void 0,
                        A = void 0,
                        R = t.samples,
                        _ = [],
                        w = this.nextAudioPts;
                    if (r |= R.length && w && (i && Math.abs(e - w / u) < .1 || Math.abs(R[0].pts - w - g) < 20 * f), R.forEach(function(t) {
                            t.pts = t.dts = p(t.pts - g, e * u)
                        }), R = R.filter(function(t) {
                            return t.pts >= 0
                        }), 0 !== R.length) {
                        if (r || (w = i ? e * u : R[0].pts), t.isAAC)
                            for (var L = this.config.maxAudioFramesDrift, D = 0, I = w; D < R.length;) {
                                var k, O = R[D],
                                    C = O.pts;
                                k = C - I;
                                var P = Math.abs(1e3 * k / u);
                                if (k <= -L * f) l.b.warn("Dropping 1 audio frame @ " + (I / u).toFixed(3) + "s due to " + Math.round(P) + " ms overlap."), R.splice(D, 1), t.len -= O.unit.length;
                                else if (k >= L * f && P < 1e4 && I) {
                                    var x = Math.round(k / f);
                                    l.b.warn("Injecting " + x + " audio frame @ " + (I / u).toFixed(3) + "s due to " + Math.round(1e3 * k / u) + " ms gap.");
                                    for (var F = 0; F < x; F++) {
                                        var M = Math.max(I, 0);
                                        b = a.a.getSilentFrame(t.manifestCodec || t.codec, t.channelCount), b || (l.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."), b = O.unit.subarray()), R.splice(D, 0, {
                                            unit: b,
                                            pts: M,
                                            dts: M
                                        }), t.len += b.length, I += f, D++
                                    }
                                    O.pts = O.dts = I, I += f, D++
                                } else Math.abs(k), O.pts = O.dts = I, I += f, D++
                            }
                        for (var N = 0, U = R.length; N < U; N++) {
                            var B = R[N],
                                G = B.unit,
                                K = B.pts;
                            if (void 0 !== A) m.duration = Math.round((K - A) / c);
                            else {
                                var j = Math.round(1e3 * (K - w) / u),
                                    H = 0;
                                if (r && t.isAAC && j) {
                                    if (j > 0 && j < 1e4) H = Math.round((K - w) / f), l.b.log(j + " ms hole between AAC samples detected,filling it"), H > 0 && (b = a.a.getSilentFrame(t.manifestCodec || t.codec, t.channelCount), b || (b = G.subarray()), t.len += H * b.length);
                                    else if (j < -12) {
                                        l.b.log("drop overlapping AAC sample, expected/parsed/delta:" + (w / u).toFixed(3) + "s/" + (K / u).toFixed(3) + "s/" + -j + "ms"), t.len -= G.byteLength;
                                        continue
                                    }
                                    K = w
                                }
                                if (S = K, !(t.len > 0)) return;
                                var V = v ? t.len : t.len + 8;
                                y = v ? 0 : 8;
                                try {
                                    E = new Uint8Array(V)
                                } catch (t) {
                                    return void this.observer.trigger(o.a.ERROR, {
                                        type: s.b.MUX_ERROR,
                                        details: s.a.REMUX_ALLOC_ERROR,
                                        fatal: !1,
                                        bytes: V,
                                        reason: "fail allocating audio mdat " + V
                                    })
                                }
                                if (!v) {
                                    new DataView(E.buffer).setUint32(0, V), E.set(n.a.types.mdat, 4)
                                }
                                for (var Y = 0; Y < H; Y++) b = a.a.getSilentFrame(t.manifestCodec || t.codec, t.channelCount), b || (l.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."), b = G.subarray()), E.set(b, y), y += b.byteLength, m = {
                                    size: b.byteLength,
                                    cts: 0,
                                    duration: 1024,
                                    flags: {
                                        isLeading: 0,
                                        isDependedOn: 0,
                                        hasRedundancy: 0,
                                        degradPrio: 0,
                                        dependsOn: 1
                                    }
                                }, _.push(m)
                            }
                            E.set(G, y);
                            var W = G.byteLength;
                            y += W, m = {
                                size: W,
                                cts: 0,
                                duration: 0,
                                flags: {
                                    isLeading: 0,
                                    isDependedOn: 0,
                                    hasRedundancy: 0,
                                    degradPrio: 0,
                                    dependsOn: 1
                                }
                            }, _.push(m), A = K
                        }
                        var q = 0,
                            X = _.length;
                        if (X >= 2 && (q = _[X - 2].duration, m.duration = q), X) {
                            this.nextAudioPts = w = A + c * q, t.len = 0, t.samples = _, T = v ? new Uint8Array : n.a.moof(t.sequenceNumber++, S / c, t), t.samples = [];
                            var z = S / u,
                                Q = w / u,
                                $ = {
                                    data1: T,
                                    data2: E,
                                    startPTS: z,
                                    endPTS: Q,
                                    startDTS: z,
                                    endDTS: Q,
                                    type: "audio",
                                    hasAudio: !0,
                                    hasVideo: !1,
                                    nb: X
                                };
                            return this.observer.trigger(o.a.FRAG_PARSING_DATA, $), $
                        }
                        return null
                    }
                }, t.prototype.remuxEmptyAudio = function(t, e, r, i) {
                    var n = t.inputTimeScale,
                        o = t.samplerate ? t.samplerate : n,
                        s = n / o,
                        u = this.nextAudioPts,
                        d = (void 0 !== u ? u : i.startDTS * n) + this._initDTS,
                        c = i.endDTS * n + this._initDTS,
                        h = 1024 * s,
                        f = Math.ceil((c - d) / h),
                        p = a.a.getSilentFrame(t.manifestCodec || t.codec, t.channelCount);
                    if (l.b.warn("remux empty Audio"), !p) return void l.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");
                    for (var g = [], v = 0; v < f; v++) {
                        var y = d + v * h;
                        g.push({
                            unit: p,
                            pts: y,
                            dts: y
                        }), t.len += p.length
                    }
                    t.samples = g, this.remuxAudio(t, e, r)
                }, t.prototype.remuxID3 = function(t, e) {
                    var r = t.samples.length,
                        i = void 0,
                        a = t.inputTimeScale,
                        n = this._initPTS,
                        s = this._initDTS;
                    if (r) {
                        for (var l = 0; l < r; l++) i = t.samples[l], i.pts = (i.pts - n) / a, i.dts = (i.dts - s) / a;
                        this.observer.trigger(o.a.FRAG_PARSING_METADATA, {
                            samples: t.samples
                        })
                    }
                    t.samples = [], e = e
                }, t.prototype.remuxText = function(t, e) {
                    t.samples.sort(function(t, e) {
                        return t.pts - e.pts
                    });
                    var r = t.samples.length,
                        i = void 0,
                        a = t.inputTimeScale,
                        n = this._initPTS;
                    if (r) {
                        for (var s = 0; s < r; s++) i = t.samples[s], i.pts = (i.pts - n) / a;
                        this.observer.trigger(o.a.FRAG_PARSING_USERDATA, {
                            samples: t.samples
                        })
                    }
                    t.samples = [], e = e
                }, t.prototype._PTSNormalize = function(t, e) {
                    var r = void 0;
                    if (void 0 === e) return t;
                    for (r = e < t ? -8589934592 : 8589934592; Math.abs(t - e) > 4294967296;) t += r;
                    return t
                }, t
            }();
        e.a = u
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = function() {
            function t() {
                i(this, t)
            }
            return t.getSilentFrame = function(t, e) {
                switch (t) {
                    case "mp4a.40.2":
                        if (1 === e) return new Uint8Array([0, 200, 0, 128, 35, 128]);
                        if (2 === e) return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);
                        if (3 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);
                        if (4 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);
                        if (5 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);
                        if (6 === e) return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 0, 178, 0, 32, 8, 224]);
                        break;
                    default:
                        if (1 === e) return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                        if (2 === e) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);
                        if (3 === e) return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94])
                }
                return null
            }, t
        }();
        e.a = a
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = Math.pow(2, 32) - 1,
            n = function() {
                function t() {
                    i(this, t)
                }
                return t.init = function() {
                    t.types = {
                        avc1: [],
                        avcC: [],
                        btrt: [],
                        dinf: [],
                        dref: [],
                        esds: [],
                        ftyp: [],
                        hdlr: [],
                        mdat: [],
                        mdhd: [],
                        mdia: [],
                        mfhd: [],
                        minf: [],
                        moof: [],
                        moov: [],
                        mp4a: [],
                        ".mp3": [],
                        mvex: [],
                        mvhd: [],
                        pasp: [],
                        sdtp: [],
                        stbl: [],
                        stco: [],
                        stsc: [],
                        stsd: [],
                        stsz: [],
                        stts: [],
                        tfdt: [],
                        tfhd: [],
                        traf: [],
                        trak: [],
                        trun: [],
                        trex: [],
                        tkhd: [],
                        vmhd: [],
                        smhd: []
                    };
                    var e = void 0;
                    for (e in t.types) t.types.hasOwnProperty(e) && (t.types[e] = [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]);
                    var r = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]),
                        i = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]);
                    t.HDLR_TYPES = {
                        video: r,
                        audio: i
                    };
                    var a = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]),
                        n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]);
                    t.STTS = t.STSC = t.STCO = n, t.STSZ = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), t.VMHD = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]), t.SMHD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), t.STSD = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]);
                    var o = new Uint8Array([105, 115, 111, 109]),
                        s = new Uint8Array([97, 118, 99, 49]),
                        l = new Uint8Array([0, 0, 0, 1]);
                    t.FTYP = t.box(t.types.ftyp, o, l, o, s), t.DINF = t.box(t.types.dinf, t.box(t.types.dref, a))
                }, t.box = function(t) {
                    for (var e = Array.prototype.slice.call(arguments, 1), r = 8, i = e.length, a = i, n = void 0; i--;) r += e[i].byteLength;
                    for (n = new Uint8Array(r), n[0] = r >> 24 & 255, n[1] = r >> 16 & 255, n[2] = r >> 8 & 255, n[3] = 255 & r, n.set(t, 4), i = 0, r = 8; i < a; i++) n.set(e[i], r), r += e[i].byteLength;
                    return n
                }, t.hdlr = function(e) {
                    return t.box(t.types.hdlr, t.HDLR_TYPES[e])
                }, t.mdat = function(e) {
                    return t.box(t.types.mdat, e)
                }, t.mdhd = function(e, r) {
                    r *= e;
                    var i = Math.floor(r / (a + 1)),
                        n = Math.floor(r % (a + 1));
                    return t.box(t.types.mdhd, new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, 85, 196, 0, 0]))
                }, t.mdia = function(e) {
                    return t.box(t.types.mdia, t.mdhd(e.timescale, e.duration), t.hdlr(e.type), t.minf(e))
                }, t.mfhd = function(e) {
                    return t.box(t.types.mfhd, new Uint8Array([0, 0, 0, 0, e >> 24, e >> 16 & 255, e >> 8 & 255, 255 & e]))
                }, t.minf = function(e) {
                    return "audio" === e.type ? t.box(t.types.minf, t.box(t.types.smhd, t.SMHD), t.DINF, t.stbl(e)) : t.box(t.types.minf, t.box(t.types.vmhd, t.VMHD), t.DINF, t.stbl(e))
                }, t.moof = function(e, r, i) {
                    return t.box(t.types.moof, t.mfhd(e), t.traf(i, r))
                }, t.moov = function(e) {
                    for (var r = e.length, i = []; r--;) i[r] = t.trak(e[r]);
                    return t.box.apply(null, [t.types.moov, t.mvhd(e[0].timescale, e[0].duration)].concat(i).concat(t.mvex(e)))
                }, t.mvex = function(e) {
                    for (var r = e.length, i = []; r--;) i[r] = t.trex(e[r]);
                    return t.box.apply(null, [t.types.mvex].concat(i))
                }, t.mvhd = function(e, r) {
                    r *= e;
                    var i = Math.floor(r / (a + 1)),
                        n = Math.floor(r % (a + 1)),
                        o = new Uint8Array([1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, e >> 24 & 255, e >> 16 & 255, e >> 8 & 255, 255 & e, i >> 24, i >> 16 & 255, i >> 8 & 255, 255 & i, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]);
                    return t.box(t.types.mvhd, o)
                }, t.sdtp = function(e) {
                    var r = e.samples || [],
                        i = new Uint8Array(4 + r.length),
                        a = void 0,
                        n = void 0;
                    for (n = 0; n < r.length; n++) a = r[n].flags, i[n + 4] = a.dependsOn << 4 | a.isDependedOn << 2 | a.hasRedundancy;
                    return t.box(t.types.sdtp, i)
                }, t.stbl = function(e) {
                    return t.box(t.types.stbl, t.stsd(e), t.box(t.types.stts, t.STTS), t.box(t.types.stsc, t.STSC), t.box(t.types.stsz, t.STSZ), t.box(t.types.stco, t.STCO))
                }, t.avc1 = function(e) {
                    var r = [],
                        i = [],
                        a = void 0,
                        n = void 0,
                        o = void 0;
                    for (a = 0; a < e.sps.length; a++) n = e.sps[a], o = n.byteLength, r.push(o >>> 8 & 255), r.push(255 & o), r = r.concat(Array.prototype.slice.call(n));
                    for (a = 0; a < e.pps.length; a++) n = e.pps[a], o = n.byteLength, i.push(o >>> 8 & 255), i.push(255 & o), i = i.concat(Array.prototype.slice.call(n));
                    var s = t.box(t.types.avcC, new Uint8Array([1, r[3], r[4], r[5], 255, 224 | e.sps.length].concat(r).concat([e.pps.length]).concat(i))),
                        l = e.width,
                        u = e.height,
                        d = e.pixelRatio[0],
                        c = e.pixelRatio[1];
                    return t.box(t.types.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, l >> 8 & 255, 255 & l, u >> 8 & 255, 255 & u, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 18, 100, 97, 105, 108, 121, 109, 111, 116, 105, 111, 110, 47, 104, 108, 115, 46, 106, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), s, t.box(t.types.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192])), t.box(t.types.pasp, new Uint8Array([d >> 24, d >> 16 & 255, d >> 8 & 255, 255 & d, c >> 24, c >> 16 & 255, c >> 8 & 255, 255 & c])))
                }, t.esds = function(t) {
                    var e = t.config.length;
                    return new Uint8Array([0, 0, 0, 0, 3, 23 + e, 0, 1, 0, 4, 15 + e, 64, 21, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5].concat([e]).concat(t.config).concat([6, 1, 2]))
                }, t.mp4a = function(e) {
                    var r = e.samplerate;
                    return t.box(t.types.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, e.channelCount, 0, 16, 0, 0, 0, 0, r >> 8 & 255, 255 & r, 0, 0]), t.box(t.types.esds, t.esds(e)))
                }, t.mp3 = function(e) {
                    var r = e.samplerate;
                    return t.box(t.types[".mp3"], new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, e.channelCount, 0, 16, 0, 0, 0, 0, r >> 8 & 255, 255 & r, 0, 0]))
                }, t.stsd = function(e) {
                    return "audio" === e.type ? e.isAAC || "mp3" !== e.codec ? t.box(t.types.stsd, t.STSD, t.mp4a(e)) : t.box(t.types.stsd, t.STSD, t.mp3(e)) : t.box(t.types.stsd, t.STSD, t.avc1(e))
                }, t.tkhd = function(e) {
                    var r = e.id,
                        i = e.duration * e.timescale,
                        n = e.width,
                        o = e.height,
                        s = Math.floor(i / (a + 1)),
                        l = Math.floor(i % (a + 1));
                    return t.box(t.types.tkhd, new Uint8Array([1, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0, 0, 0, 3, r >> 24 & 255, r >> 16 & 255, r >> 8 & 255, 255 & r, 0, 0, 0, 0, s >> 24, s >> 16 & 255, s >> 8 & 255, 255 & s, l >> 24, l >> 16 & 255, l >> 8 & 255, 255 & l, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, n >> 8 & 255, 255 & n, 0, 0, o >> 8 & 255, 255 & o, 0, 0]))
                }, t.traf = function(e, r) {
                    var i = t.sdtp(e),
                        n = e.id,
                        o = Math.floor(r / (a + 1)),
                        s = Math.floor(r % (a + 1));
                    return t.box(t.types.traf, t.box(t.types.tfhd, new Uint8Array([0, 0, 0, 0, n >> 24, n >> 16 & 255, n >> 8 & 255, 255 & n])), t.box(t.types.tfdt, new Uint8Array([1, 0, 0, 0, o >> 24, o >> 16 & 255, o >> 8 & 255, 255 & o, s >> 24, s >> 16 & 255, s >> 8 & 255, 255 & s])), t.trun(e, i.length + 16 + 20 + 8 + 16 + 8 + 8), i)
                }, t.trak = function(e) {
                    return e.duration = e.duration || 4294967295, t.box(t.types.trak, t.tkhd(e), t.mdia(e))
                }, t.trex = function(e) {
                    var r = e.id;
                    return t.box(t.types.trex, new Uint8Array([0, 0, 0, 0, r >> 24, r >> 16 & 255, r >> 8 & 255, 255 & r, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]))
                }, t.trun = function(e, r) {
                    var i = e.samples || [],
                        a = i.length,
                        n = 12 + 16 * a,
                        o = new Uint8Array(n),
                        s = void 0,
                        l = void 0,
                        u = void 0,
                        d = void 0,
                        c = void 0,
                        h = void 0;
                    for (r += 8 + n, o.set([0, 0, 15, 1, a >>> 24 & 255, a >>> 16 & 255, a >>> 8 & 255, 255 & a, r >>> 24 & 255, r >>> 16 & 255, r >>> 8 & 255, 255 & r], 0), s = 0; s < a; s++) l = i[s], u = l.duration, d = l.size, c = l.flags, h = l.cts, o.set([u >>> 24 & 255, u >>> 16 & 255, u >>> 8 & 255, 255 & u, d >>> 24 & 255, d >>> 16 & 255, d >>> 8 & 255, 255 & d, c.isLeading << 2 | c.dependsOn, c.isDependedOn << 6 | c.hasRedundancy << 4 | c.paddingValue << 1 | c.isNonSync, 61440 & c.degradPrio, 15 & c.degradPrio, h >>> 24 & 255, h >>> 16 & 255, h >>> 8 & 255, 255 & h], 12 + 16 * s);
                    return t.box(t.types.trun, o)
                }, t.initSegment = function(e) {
                    t.types || t.init();
                    var r = t.moov(e),
                        i = void 0;
                    return i = new Uint8Array(t.FTYP.byteLength + r.byteLength), i.set(t.FTYP), i.set(r, t.FTYP.byteLength), i
                }, t
            }();
        e.a = n
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(1),
            n = function() {
                function t(e) {
                    i(this, t), this.observer = e
                }
                return t.prototype.destroy = function() {}, t.prototype.resetTimeStamp = function() {}, t.prototype.resetInitSegment = function() {}, t.prototype.remux = function(t, e, r, i, n, o, s, l) {
                    var u = this.observer,
                        d = "";
                    t && (d += "audio"), e && (d += "video"), u.trigger(a.a.FRAG_PARSING_DATA, {
                        data1: l,
                        startPTS: n,
                        startDTS: n,
                        type: d,
                        hasAudio: !!t,
                        hasVideo: !!e,
                        nb: 1,
                        dropped: 0
                    }), u.trigger(a.a.FRAG_PARSED)
                }, t
            }();
        e.a = n
    }, function(t, e, r) {
        "use strict";
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var i = r(22),
            a = r(1),
            n = r(0),
            o = r(13),
            s = r.n(o),
            l = function(t) {
                var e = new s.a;
                e.trigger = function(t) {
                    for (var r = arguments.length, i = Array(r > 1 ? r - 1 : 0), a = 1; a < r; a++) i[a - 1] = arguments[a];
                    e.emit.apply(e, [t, t].concat(i))
                }, e.off = function(t) {
                    for (var r = arguments.length, i = Array(r > 1 ? r - 1 : 0), a = 1; a < r; a++) i[a - 1] = arguments[a];
                    e.removeListener.apply(e, [t].concat(i))
                };
                var r = function(e, r) {
                    t.postMessage({
                        event: e,
                        data: r
                    })
                };
                t.addEventListener("message", function(a) {
                    var o = a.data;
                    switch (o.cmd) {
                        case "init":
                            var s = JSON.parse(o.config);
                            t.demuxer = new i.a(e, o.typeSupported, s, o.vendor);
                            try {
                                Object(n.a)(!0 === s.debug)
                            } catch (t) {
                                console.warn("demuxerWorker: unable to enable logs")
                            }
                            r("init", null);
                            break;
                        case "demux":
                            t.demuxer.push(o.data, o.decryptdata, o.initSegment, o.audioCodec, o.videoCodec, o.timeOffset, o.discontinuity, o.trackSwitch, o.contiguous, o.duration, o.accurateTimeOffset, o.defaultInitPTS)
                    }
                }), e.on(a.a.FRAG_DECRYPTED, r), e.on(a.a.FRAG_PARSING_INIT_SEGMENT, r), e.on(a.a.FRAG_PARSED, r), e.on(a.a.ERROR, r), e.on(a.a.FRAG_PARSING_METADATA, r), e.on(a.a.FRAG_PARSING_USERDATA, r), e.on(a.a.INIT_PTS_FOUND, r), e.on(a.a.FRAG_PARSING_DATA, function(e, r) {
                    var i = [],
                        a = {
                            event: e,
                            data: r
                        };
                    r.data1 && (a.data1 = r.data1.buffer, i.push(r.data1.buffer), delete r.data1), r.data2 && (a.data2 = r.data2.buffer, i.push(r.data2.buffer), delete r.data2), t.postMessage(a, i)
                })
            };
        e.default = l
    }, function(t, e, r) {
        "use strict";

        function i(t, e, r) {
            if (!Array.isArray(t) || !t.length || !Object(s.a)(e)) return null;
            if (e < t[0].programDateTime) return null;
            if (e >= t[t.length - 1].endProgramDateTime) return null;
            r = r || 0;
            for (var i = 0; i < t.length; ++i) {
                var a = t[i];
                if (o(e, r, a)) return a
            }
            return null
        }

        function a(t, e) {
            var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
                i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0,
                a = t ? e[t.sn - e[0].sn + 1] : null;
            return a && !n(r, i, a) ? a : l.a.search(e, n.bind(null, r, i))
        }

        function n() {
            var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
                e = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
                r = arguments[2],
                i = Math.min(e, r.duration + (r.deltaPTS ? r.deltaPTS : 0));
            return r.start + r.duration - i <= t ? 1 : r.start - i > t && r.start ? -1 : 0
        }

        function o(t, e, r) {
            var i = 1e3 * Math.min(e, r.duration + (r.deltaPTS ? r.deltaPTS : 0));
            return r.endProgramDateTime - i > t
        }
        e.a = i, e.b = a;
        var s = r(3),
            l = r(7)
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(8),
            n = r(2),
            o = r(1),
            s = r(0),
            l = function() {
                function t(e, r, a, n) {
                    i(this, t), this.config = e, this.media = r, this.fragmentTracker = a, this.hls = n, this.stallReported = !1
                }
                return t.prototype.poll = function(t, e) {
                    var r = this.config,
                        i = this.media,
                        n = i.currentTime,
                        o = window.performance.now();
                    if (n !== t) return this.stallReported && (s.b.warn("playback not stuck anymore @" + n + ", after " + Math.round(o - this.stalled) + "ms"), this.stallReported = !1), this.stalled = null, void(this.nudgeRetry = 0);
                    if (!(i.ended || !i.buffered.length || i.readyState > 2 || i.seeking && a.a.isBuffered(i, n))) {
                        var l = o - this.stalled,
                            u = a.a.bufferInfo(i, n, r.maxBufferHole);
                        if (!this.stalled) return void(this.stalled = o);
                        l >= 1e3 && this._reportStall(u.len), this._tryFixBufferStall(u, l)
                    }
                }, t.prototype._tryFixBufferStall = function(t, e) {
                    var r = this.config,
                        i = this.fragmentTracker,
                        a = this.media,
                        n = a.currentTime,
                        o = i.getPartialFragment(n);
                    o && this._trySkipBufferHole(o), t.len > .5 && e > 1e3 * r.highBufferWatchdogPeriod && (this.stalled = null, this._tryNudgeBuffer())
                }, t.prototype._reportStall = function(t) {
                    var e = this.hls,
                        r = this.media;
                    this.stallReported || (this.stallReported = !0, s.b.warn("Playback stalling at @" + r.currentTime + " due to low buffer"), e.trigger(o.a.ERROR, {
                        type: n.b.MEDIA_ERROR,
                        details: n.a.BUFFER_STALLED_ERROR,
                        fatal: !1,
                        buffer: t
                    }))
                }, t.prototype._trySkipBufferHole = function(t) {
                    for (var e = this.hls, r = this.media, i = r.currentTime, a = 0, l = 0; l < r.buffered.length; l++) {
                        var u = r.buffered.start(l);
                        if (i >= a && i < u) return r.currentTime = Math.max(u, r.currentTime + .1), s.b.warn("skipping hole, adjusting currentTime from " + i + " to " + r.currentTime), this.stalled = null, void e.trigger(o.a.ERROR, {
                            type: n.b.MEDIA_ERROR,
                            details: n.a.BUFFER_SEEK_OVER_HOLE,
                            fatal: !1,
                            reason: "fragment loaded with buffer holes, seeking from " + i + " to " + r.currentTime,
                            frag: t
                        });
                        a = r.buffered.end(l)
                    }
                }, t.prototype._tryNudgeBuffer = function() {
                    var t = this.config,
                        e = this.hls,
                        r = this.media,
                        i = r.currentTime,
                        a = (this.nudgeRetry || 0) + 1;
                    if (this.nudgeRetry = a, a < t.nudgeMaxRetry) {
                        var l = i + a * t.nudgeOffset;
                        s.b.log("adjust currentTime from " + i + " to " + l), r.currentTime = l, e.trigger(o.a.ERROR, {
                            type: n.b.MEDIA_ERROR,
                            details: n.a.BUFFER_NUDGE_ON_STALL,
                            fatal: !1
                        })
                    } else s.b.error("still stuck in high buffer @" + i + " after " + t.nudgeMaxRetry + ", raise fatal error"), e.trigger(o.a.ERROR, {
                        type: n.b.MEDIA_ERROR,
                        details: n.a.BUFFER_STALLED_ERROR,
                        fatal: !0
                    })
                }, t
            }();
        e.a = l
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(1),
            s = r(4),
            l = r(0),
            u = r(2),
            d = r(20),
            c = r(16),
            h = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t) {
                return typeof t
            } : function(t) {
                return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t
            },
            f = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            p = window,
            g = p.performance,
            v = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, o.a.MANIFEST_LOADED, o.a.LEVEL_LOADED, o.a.AUDIO_TRACK_SWITCHED, o.a.FRAG_LOADED, o.a.ERROR));
                    return n.canload = !1, n.currentLevelIndex = null, n.manualLevelIndex = -1, n.timer = null, n
                }
                return n(e, t), e.prototype.onHandlerDestroying = function() {
                    this.clearTimer(), this.manualLevelIndex = -1
                }, e.prototype.clearTimer = function() {
                    null !== this.timer && (clearTimeout(this.timer), this.timer = null)
                }, e.prototype.startLoad = function() {
                    var t = this._levels;
                    this.canload = !0, this.levelRetryCount = 0, t && t.forEach(function(t) {
                        t.loadError = 0;
                        var e = t.details;
                        e && e.live && (t.details = void 0)
                    }), null !== this.timer && this.loadLevel()
                }, e.prototype.stopLoad = function() {
                    this.canload = !1
                }, e.prototype.onManifestLoaded = function(t) {
                    var e = [],
                        r = void 0,
                        i = {},
                        a = null,
                        n = !1,
                        s = !1,
                        h = /chrome|firefox/.test(navigator.userAgent.toLowerCase()),
                        f = [];
                    if (t.levels.forEach(function(t) {
                            t.loadError = 0, t.fragmentError = !1, n = n || !!t.videoCodec, s = s || !!t.audioCodec || !(!t.attrs || !t.attrs.AUDIO), h && t.audioCodec && -1 !== t.audioCodec.indexOf("mp4a.40.34") && (t.audioCodec = void 0), a = i[t.bitrate], a ? a.url.push(t.url) : (t.url = [t.url], t.urlId = 0, i[t.bitrate] = t, e.push(t)), t.attrs && t.attrs.AUDIO && Object(c.a)(a || t, "audio", t.attrs.AUDIO), t.attrs && t.attrs.SUBTITLES && Object(c.a)(a || t, "text", t.attrs.SUBTITLES)
                        }), n && s && (e = e.filter(function(t) {
                            return !!t.videoCodec
                        })), e = e.filter(function(t) {
                            var e = t.audioCodec,
                                r = t.videoCodec;
                            return (!e || Object(d.a)(e)) && (!r || Object(d.a)(r))
                        }), t.audioTracks && (f = t.audioTracks.filter(function(t) {
                            return !t.audioCodec || Object(d.a)(t.audioCodec, "audio")
                        }), f.forEach(function(t, e) {
                            t.id = e
                        })), e.length > 0) {
                        r = e[0].bitrate, e.sort(function(t, e) {
                            return t.bitrate - e.bitrate
                        }), this._levels = e;
                        for (var p = 0; p < e.length; p++)
                            if (e[p].bitrate === r) {
                                this._firstLevel = p, l.b.log("manifest loaded," + e.length + " level(s) found, first bitrate:" + r);
                                break
                            } this.hls.trigger(o.a.MANIFEST_PARSED, {
                            levels: e,
                            audioTracks: f,
                            firstLevel: this._firstLevel,
                            stats: t.stats,
                            audio: s,
                            video: n,
                            altAudio: f.length > 0 && n
                        })
                    } else this.hls.trigger(o.a.ERROR, {
                        type: u.b.MEDIA_ERROR,
                        details: u.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,
                        fatal: !0,
                        url: this.hls.url,
                        reason: "no level with compatible codecs found in manifest"
                    })
                }, e.prototype.setLevelInternal = function(t) {
                    var e = this._levels,
                        r = this.hls;
                    if (t >= 0 && t < e.length) {
                        if (this.clearTimer(), this.currentLevelIndex !== t) {
                            l.b.log("switching to level " + t), this.currentLevelIndex = t;
                            var i = e[t];
                            i.level = t, r.trigger(o.a.LEVEL_SWITCHING, i)
                        }
                        var a = e[t],
                            n = a.details;
                        if (!n || n.live) {
                            var s = a.urlId;
                            r.trigger(o.a.LEVEL_LOADING, {
                                url: a.url[s],
                                level: t,
                                id: s
                            })
                        }
                    } else r.trigger(o.a.ERROR, {
                        type: u.b.OTHER_ERROR,
                        details: u.a.LEVEL_SWITCH_ERROR,
                        level: t,
                        fatal: !1,
                        reason: "invalid level idx"
                    })
                }, e.prototype.onError = function(t) {
                    if (t.fatal) return void(t.type === u.b.NETWORK_ERROR && this.clearTimer());
                    var e = !1,
                        r = !1,
                        i = void 0;
                    switch (t.details) {
                        case u.a.FRAG_LOAD_ERROR:
                        case u.a.FRAG_LOAD_TIMEOUT:
                        case u.a.KEY_LOAD_ERROR:
                        case u.a.KEY_LOAD_TIMEOUT:
                            i = t.frag.level, r = !0;
                            break;
                        case u.a.LEVEL_LOAD_ERROR:
                        case u.a.LEVEL_LOAD_TIMEOUT:
                            i = t.context.level, e = !0;
                            break;
                        case u.a.REMUX_ALLOC_ERROR:
                            i = t.level, e = !0
                    }
                    void 0 !== i && this.recoverLevel(t, i, e, r)
                }, e.prototype.recoverLevel = function(t, e, r, i) {
                    var a = this,
                        n = this.hls.config,
                        o = t.details,
                        s = this._levels[e],
                        u = void 0,
                        d = void 0,
                        c = void 0;
                    if (s.loadError++, s.fragmentError = i, r) {
                        if (!(this.levelRetryCount + 1 <= n.levelLoadingMaxRetry)) return l.b.error("level controller, cannot recover from " + o + " error"), this.currentLevelIndex = null, this.clearTimer(), void(t.fatal = !0);
                        d = Math.min(Math.pow(2, this.levelRetryCount) * n.levelLoadingRetryDelay, n.levelLoadingMaxRetryTimeout), this.timer = setTimeout(function() {
                            return a.loadLevel()
                        }, d), t.levelRetry = !0, this.levelRetryCount++, l.b.warn("level controller, " + o + ", retry in " + d + " ms, current retry count is " + this.levelRetryCount)
                    }(r || i) && (u = s.url.length, u > 1 && s.loadError < u ? (s.urlId = (s.urlId + 1) % u, s.details = void 0, l.b.warn("level controller, " + o + " for level " + e + ": switching to redundant URL-id " + s.urlId)) : -1 === this.manualLevelIndex ? (c = 0 === e ? this._levels.length - 1 : e - 1, l.b.warn("level controller, " + o + ": switch to " + c), this.hls.nextAutoLevel = this.currentLevelIndex = c) : i && (l.b.warn("level controller, " + o + ": reload a fragment"), this.currentLevelIndex = null))
                }, e.prototype.onFragLoaded = function(t) {
                    var e = t.frag;
                    if (void 0 !== e && "main" === e.type) {
                        var r = this._levels[e.level];
                        void 0 !== r && (r.fragmentError = !1, r.loadError = 0, this.levelRetryCount = 0)
                    }
                }, e.prototype.onLevelLoaded = function(t) {
                    var e = this,
                        r = t.level;
                    if (r === this.currentLevelIndex) {
                        var i = this._levels[r];
                        i.fragmentError || (i.loadError = 0, this.levelRetryCount = 0);
                        var a = t.details;
                        if (a.live) {
                            var n = 1e3 * (a.averagetargetduration ? a.averagetargetduration : a.targetduration),
                                o = n,
                                s = i.details;
                            s && a.endSN === s.endSN && (o /= 2, l.b.log("same live playlist, reload twice faster")), o -= g.now() - t.stats.trequest, o = Math.max(n / 2, Math.round(o)), l.b.log("live playlist, reload in " + Math.round(o) + " ms"), this.timer = setTimeout(function() {
                                return e.loadLevel()
                            }, o)
                        } else this.clearTimer()
                    }
                }, e.prototype.onAudioTrackSwitched = function(t) {
                    var e = this.hls.audioTracks[t.id].groupId,
                        r = this.hls.levels[this.currentLevelIndex];
                    if (r && r.audioGroupIds) {
                        var i = r.audioGroupIds.findIndex(function(t) {
                            return t === e
                        });
                        i !== r.urlId && (r.urlId = i, this.startLoad())
                    }
                }, e.prototype.loadLevel = function() {
                    if (l.b.debug("call to loadLevel"), null !== this.currentLevelIndex && this.canload) {
                        var t = this._levels[this.currentLevelIndex];
                        if ("object" === (void 0 === t ? "undefined" : h(t)) && t.url.length > 0) {
                            var e = this.currentLevelIndex,
                                r = t.urlId,
                                i = t.url[r];
                            l.b.log("Attempt loading level index " + e + " with URL-id " + r), this.hls.trigger(o.a.LEVEL_LOADING, {
                                url: i,
                                level: e,
                                id: r
                            })
                        }
                    }
                }, f(e, [{
                    key: "levels",
                    get: function() {
                        return this._levels
                    }
                }, {
                    key: "level",
                    get: function() {
                        return this.currentLevelIndex
                    },
                    set: function(t) {
                        var e = this._levels;
                        e && (t = Math.min(t, e.length - 1), this.currentLevelIndex === t && e[t].details || this.setLevelInternal(t))
                    }
                }, {
                    key: "manualLevel",
                    get: function() {
                        return this.manualLevelIndex
                    },
                    set: function(t) {
                        this.manualLevelIndex = t, void 0 === this._startLevel && (this._startLevel = t), -1 !== t && (this.level = t)
                    }
                }, {
                    key: "firstLevel",
                    get: function() {
                        return this._firstLevel
                    },
                    set: function(t) {
                        this._firstLevel = t
                    }
                }, {
                    key: "startLevel",
                    get: function() {
                        if (void 0 === this._startLevel) {
                            var t = this.hls.config.startLevel;
                            return void 0 !== t ? t : this._firstLevel
                        }
                        return this._startLevel
                    },
                    set: function(t) {
                        this._startLevel = t
                    }
                }, {
                    key: "nextLoadLevel",
                    get: function() {
                        return -1 !== this.manualLevelIndex ? this.manualLevelIndex : this.hls.nextAutoLevel
                    },
                    set: function(t) {
                        this.level = t, -1 === this.manualLevelIndex && (this.hls.nextAutoLevel = t)
                    }
                }]), e
            }(s.a);
        e.a = v
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(1),
            s = r(4),
            l = r(9),
            u = r(27),
            d = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, o.a.MEDIA_ATTACHED, o.a.MEDIA_DETACHING, o.a.FRAG_PARSING_METADATA));
                    return n.id3Track = void 0, n.media = void 0, n
                }
                return n(e, t), e.prototype.destroy = function() {
                    s.a.prototype.destroy.call(this)
                }, e.prototype.onMediaAttached = function(t) {
                    this.media = t.media, this.media
                }, e.prototype.onMediaDetaching = function() {
                    Object(u.a)(this.id3Track), this.id3Track = void 0, this.media = void 0
                }, e.prototype.getID3Track = function(t) {
                    for (var e = 0; e < t.length; e++) {
                        var r = t[e];
                        if ("metadata" === r.kind && "id3" === r.label) return Object(u.b)(r, this.media), r
                    }
                    return this.media.addTextTrack("metadata", "id3")
                }, e.prototype.onFragParsingMetadata = function(t) {
                    var e = t.frag,
                        r = t.samples;
                    this.id3Track || (this.id3Track = this.getID3Track(this.media.textTracks), this.id3Track.mode = "hidden");
                    for (var i = window.WebKitDataCue || window.VTTCue || window.TextTrackCue, a = 0; a < r.length; a++) {
                        var n = l.a.getID3Frames(r[a].data);
                        if (n) {
                            var o = r[a].pts,
                                s = a < r.length - 1 ? r[a + 1].pts : e.endPTS;
                            o === s && (s += 1e-4);
                            for (var u = 0; u < n.length; u++) {
                                var d = n[u];
                                if (!l.a.isTimeStampFrame(d)) {
                                    var c = new i(o, s, "");
                                    c.value = d, this.id3Track.addCue(c)
                                }
                            }
                        }
                    }
                }, e
            }(s.a);
        e.a = d
    }, function(t, e, r) {
        "use strict";

        function i() {
            var t = Object(a.a)(),
                e = window.SourceBuffer || window.WebKitSourceBuffer,
                r = t && "function" == typeof t.isTypeSupported && t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),
                i = !e || e.prototype && "function" == typeof e.prototype.appendBuffer && "function" == typeof e.prototype.remove;
            return !!r && !!i
        }
        e.a = i;
        var a = r(15)
    }, function(t, e, r) {
        "use strict";
        r.d(e, "a", function() {
            return v
        });
        var i = r(56),
            a = r(59),
            n = r(60),
            o = r(61),
            s = r(62),
            l = r(63),
            u = r(64),
            d = r(65),
            c = r(67),
            h = r(71),
            f = r(72),
            p = r(73),
            g = r(74),
            v = {
                autoStartLoad: !0,
                startPosition: -1,
                defaultAudioCodec: void 0,
                debug: !1,
                capLevelOnFPSDrop: !1,
                capLevelToPlayerSize: !1,
                initialLiveManifestSize: 1,
                maxBufferLength: 30,
                maxBufferSize: 6e7,
                maxBufferHole: .5,
                lowBufferWatchdogPeriod: .5,
                highBufferWatchdogPeriod: 3,
                nudgeOffset: .1,
                nudgeMaxRetry: 3,
                maxFragLookUpTolerance: .25,
                liveSyncDurationCount: 3,
                liveMaxLatencyDurationCount: 1 / 0,
                liveSyncDuration: void 0,
                liveMaxLatencyDuration: void 0,
                liveDurationInfinity: !1,
                maxMaxBufferLength: 600,
                enableWorker: !0,
                enableSoftwareAES: !0,
                manifestLoadingTimeOut: 1e4,
                manifestLoadingMaxRetry: 1,
                manifestLoadingRetryDelay: 1e3,
                manifestLoadingMaxRetryTimeout: 64e3,
                startLevel: void 0,
                levelLoadingTimeOut: 1e4,
                levelLoadingMaxRetry: 4,
                levelLoadingRetryDelay: 1e3,
                levelLoadingMaxRetryTimeout: 64e3,
                fragLoadingTimeOut: 2e4,
                fragLoadingMaxRetry: 6,
                fragLoadingRetryDelay: 1e3,
                fragLoadingMaxRetryTimeout: 64e3,
                startFragPrefetch: !1,
                fpsDroppedMonitoringPeriod: 5e3,
                fpsDroppedMonitoringThreshold: .2,
                appendErrorMaxRetry: 3,
                loader: s.a,
                fLoader: void 0,
                pLoader: void 0,
                xhrSetup: void 0,
                licenseXhrSetup: void 0,
                abrController: i.a,
                bufferController: a.a,
                capLevelController: n.a,
                fpsController: o.a,
                stretchShortVideoTrack: !1,
                maxAudioFramesDrift: 1,
                forceKeyFrameOnDiscontinuity: !0,
                abrEwmaFastLive: 3,
                abrEwmaSlowLive: 9,
                abrEwmaFastVoD: 3,
                abrEwmaSlowVoD: 9,
                abrEwmaDefaultEstimate: 5e5,
                abrBandWidthFactor: .95,
                abrBandWidthUpFactor: .7,
                abrMaxWithRealBitrate: !1,
                maxStarvationDelay: 4,
                maxLoadingDelay: 4,
                minAutoBitrate: 0,
                emeEnabled: !1,
                widevineLicenseUrl: void 0,
                requestMediaKeySystemAccessFunc: g.a
            };
        v.subtitleStreamController = f.a, v.subtitleTrackController = h.a, v.timelineController = c.a, v.cueHandler = d, v.enableCEA708Captions = !0, v.enableWebVTT = !0, v.captionsTextTrack1Label = "English", v.captionsTextTrack1LanguageCode = "en", v.captionsTextTrack2Label = "Spanish", v.captionsTextTrack2LanguageCode = "es", v.audioStreamController = u.a, v.audioTrackController = l.a, v.emeController = p.a
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(3),
            s = r(1),
            l = r(4),
            u = r(8),
            d = r(2),
            c = r(0),
            h = r(57),
            f = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            p = window,
            g = p.performance,
            v = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, s.a.FRAG_LOADING, s.a.FRAG_LOADED, s.a.FRAG_BUFFERED, s.a.ERROR));
                    return n.lastLoadedFragLevel = 0, n._nextAutoLevel = -1, n.hls = r, n.timer = null, n._bwEstimator = null, n.onCheck = n._abandonRulesCheck.bind(n), n
                }
                return n(e, t), e.prototype.destroy = function() {
                    this.clearTimer(), l.a.prototype.destroy.call(this)
                }, e.prototype.onFragLoading = function(t) {
                    var e = t.frag;
                    if ("main" === e.type && (this.timer || (this.fragCurrent = e, this.timer = setInterval(this.onCheck, 100)), !this._bwEstimator)) {
                        var r = this.hls,
                            i = r.config,
                            a = e.level,
                            n = r.levels[a].details.live,
                            o = void 0,
                            s = void 0;
                        n ? (o = i.abrEwmaFastLive, s = i.abrEwmaSlowLive) : (o = i.abrEwmaFastVoD, s = i.abrEwmaSlowVoD), this._bwEstimator = new h.a(r, s, o, i.abrEwmaDefaultEstimate)
                    }
                }, e.prototype._abandonRulesCheck = function() {
                    var t = this.hls,
                        e = t.media,
                        r = this.fragCurrent;
                    if (r) {
                        var i = r.loader,
                            a = t.minAutoLevel;
                        if (!i || i.stats && i.stats.aborted) return c.b.warn("frag loader destroy or aborted, disarm abandonRules"), this.clearTimer(), void(this._nextAutoLevel = -1);
                        var n = i.stats;
                        if (e && n && (!e.paused && 0 !== e.playbackRate || !e.readyState) && r.autoLevel && r.level) {
                            var o = g.now() - n.trequest,
                                l = Math.abs(e.playbackRate);
                            if (o > 500 * r.duration / l) {
                                var d = t.levels,
                                    h = Math.max(1, n.bw ? n.bw / 8 : 1e3 * n.loaded / o),
                                    f = d[r.level],
                                    p = f.realBitrate ? Math.max(f.realBitrate, f.bitrate) : f.bitrate,
                                    v = n.total ? n.total : Math.max(n.loaded, Math.round(r.duration * p / 8)),
                                    y = e.currentTime,
                                    m = (v - n.loaded) / h,
                                    b = (u.a.bufferInfo(e, y, t.config.maxBufferHole).end - y) / l;
                                if (b < 2 * r.duration / l && m > b) {
                                    var E = void 0,
                                        T = void 0;
                                    for (T = r.level - 1; T > a; T--) {
                                        var S = d[T].realBitrate ? Math.max(d[T].realBitrate, d[T].bitrate) : d[T].bitrate;
                                        if ((E = r.duration * S / (6.4 * h)) < b) break
                                    }
                                    E < m && (c.b.warn("loading too slow, abort fragment loading and switch to level " + T + ":fragLoadedDelay[" + T + "]<fragLoadedDelay[" + (r.level - 1) + "];bufferStarvationDelay:" + E.toFixed(1) + "<" + m.toFixed(1) + ":" + b.toFixed(1)), t.nextLoadLevel = T, this._bwEstimator.sample(o, n.loaded), i.abort(), this.clearTimer(), t.trigger(s.a.FRAG_LOAD_EMERGENCY_ABORTED, {
                                        frag: r,
                                        stats: n
                                    }))
                                }
                            }
                        }
                    }
                }, e.prototype.onFragLoaded = function(t) {
                    var e = t.frag;
                    if ("main" === e.type && Object(o.a)(e.sn)) {
                        if (this.clearTimer(), this.lastLoadedFragLevel = e.level, this._nextAutoLevel = -1, this.hls.config.abrMaxWithRealBitrate) {
                            var r = this.hls.levels[e.level],
                                i = (r.loaded ? r.loaded.bytes : 0) + t.stats.loaded,
                                a = (r.loaded ? r.loaded.duration : 0) + t.frag.duration;
                            r.loaded = {
                                bytes: i,
                                duration: a
                            }, r.realBitrate = Math.round(8 * i / a)
                        }
                        if (t.frag.bitrateTest) {
                            var n = t.stats;
                            n.tparsed = n.tbuffered = n.tload, this.onFragBuffered(t)
                        }
                    }
                }, e.prototype.onFragBuffered = function(t) {
                    var e = t.stats,
                        r = t.frag;
                    if (!0 !== e.aborted && "main" === r.type && Object(o.a)(r.sn) && (!r.bitrateTest || e.tload === e.tbuffered)) {
                        var i = e.tparsed - e.trequest;
                        c.b.log("latency/loading/parsing/append/kbps:" + Math.round(e.tfirst - e.trequest) + "/" + Math.round(e.tload - e.tfirst) + "/" + Math.round(e.tparsed - e.tload) + "/" + Math.round(e.tbuffered - e.tparsed) + "/" + Math.round(8 * e.loaded / (e.tbuffered - e.trequest))), this._bwEstimator.sample(i, e.loaded), e.bwEstimate = this._bwEstimator.getEstimate(), r.bitrateTest ? this.bitrateTestDelay = i / 1e3 : this.bitrateTestDelay = 0
                    }
                }, e.prototype.onError = function(t) {
                    switch (t.details) {
                        case d.a.FRAG_LOAD_ERROR:
                        case d.a.FRAG_LOAD_TIMEOUT:
                            this.clearTimer()
                    }
                }, e.prototype.clearTimer = function() {
                    clearInterval(this.timer), this.timer = null
                }, e.prototype._findBestLevel = function(t, e, r, i, a, n, o, s, l) {
                    for (var u = a; u >= i; u--) {
                        var d = l[u];
                        if (d) {
                            var h = d.details,
                                f = h ? h.totalduration / h.fragments.length : e,
                                p = !!h && h.live,
                                g = void 0;
                            g = u <= t ? o * r : s * r;
                            var v = l[u].realBitrate ? Math.max(l[u].realBitrate, l[u].bitrate) : l[u].bitrate,
                                y = v * f / g;
                            if (c.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: " + u + "/" + Math.round(g) + "/" + v + "/" + f + "/" + n + "/" + y), g > v && (!y || p && !this.bitrateTestDelay || y < n)) return u
                        }
                    }
                    return -1
                }, f(e, [{
                    key: "nextAutoLevel",
                    get: function() {
                        var t = this._nextAutoLevel,
                            e = this._bwEstimator;
                        if (!(-1 === t || e && e.canEstimate())) return t;
                        var r = this._nextABRAutoLevel;
                        return -1 !== t && (r = Math.min(t, r)), r
                    },
                    set: function(t) {
                        this._nextAutoLevel = t
                    }
                }, {
                    key: "_nextABRAutoLevel",
                    get: function() {
                        var t = this.hls,
                            e = t.maxAutoLevel,
                            r = t.levels,
                            i = t.config,
                            a = t.minAutoLevel,
                            n = t.media,
                            o = this.lastLoadedFragLevel,
                            s = this.fragCurrent ? this.fragCurrent.duration : 0,
                            l = n ? n.currentTime : 0,
                            d = n && 0 !== n.playbackRate ? Math.abs(n.playbackRate) : 1,
                            h = this._bwEstimator ? this._bwEstimator.getEstimate() : i.abrEwmaDefaultEstimate,
                            f = (u.a.bufferInfo(n, l, i.maxBufferHole).end - l) / d,
                            p = this._findBestLevel(o, s, h, a, e, f, i.abrBandWidthFactor, i.abrBandWidthUpFactor, r);
                        if (p >= 0) return p;
                        c.b.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");
                        var g = s ? Math.min(s, i.maxStarvationDelay) : i.maxStarvationDelay,
                            v = i.abrBandWidthFactor,
                            y = i.abrBandWidthUpFactor;
                        if (0 === f) {
                            var m = this.bitrateTestDelay;
                            if (m) {
                                g = (s ? Math.min(s, i.maxLoadingDelay) : i.maxLoadingDelay) - m, c.b.trace("bitrate test took " + Math.round(1e3 * m) + "ms, set first fragment max fetchDuration to " + Math.round(1e3 * g) + " ms"), v = y = 1
                            }
                        }
                        return p = this._findBestLevel(o, s, h, a, e, f + g, v, y, r), Math.max(p, 0)
                    }
                }]), e
            }(l.a);
        e.a = v
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(58),
            n = function() {
                function t(e, r, n, o) {
                    i(this, t), this.hls = e, this.defaultEstimate_ = o, this.minWeight_ = .001, this.minDelayMs_ = 50, this.slow_ = new a.a(r), this.fast_ = new a.a(n)
                }
                return t.prototype.sample = function(t, e) {
                    t = Math.max(t, this.minDelayMs_);
                    var r = 8e3 * e / t,
                        i = t / 1e3;
                    this.fast_.sample(i, r), this.slow_.sample(i, r)
                }, t.prototype.canEstimate = function() {
                    var t = this.fast_;
                    return t && t.getTotalWeight() >= this.minWeight_
                }, t.prototype.getEstimate = function() {
                    return this.canEstimate() ? Math.min(this.fast_.getEstimate(), this.slow_.getEstimate()) : this.defaultEstimate_
                }, t.prototype.destroy = function() {}, t
            }();
        e.a = n
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = function() {
            function t(e) {
                i(this, t), this.alpha_ = e ? Math.exp(Math.log(.5) / e) : 0, this.estimate_ = 0, this.totalWeight_ = 0
            }
            return t.prototype.sample = function(t, e) {
                var r = Math.pow(this.alpha_, t);
                this.estimate_ = e * (1 - r) + r * this.estimate_, this.totalWeight_ += t
            }, t.prototype.getTotalWeight = function() {
                return this.totalWeight_
            }, t.prototype.getEstimate = function() {
                if (this.alpha_) {
                    var t = 1 - Math.pow(this.alpha_, this.totalWeight_);
                    return this.estimate_ / t
                }
                return this.estimate_
            }, t
        }();
        e.a = a
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(3),
            s = r(1),
            l = r(4),
            u = r(0),
            d = r(2),
            c = r(15),
            h = Object(c.a)(),
            f = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, s.a.MEDIA_ATTACHING, s.a.MEDIA_DETACHING, s.a.MANIFEST_PARSED, s.a.BUFFER_RESET, s.a.BUFFER_APPENDING, s.a.BUFFER_CODECS, s.a.BUFFER_EOS, s.a.BUFFER_FLUSHING, s.a.LEVEL_PTS_UPDATED, s.a.LEVEL_UPDATED));
                    return n._msDuration = null, n._levelDuration = null, n._live = null, n._objectUrl = null, n.onsbue = n.onSBUpdateEnd.bind(n), n.onsbe = n.onSBUpdateError.bind(n), n.pendingTracks = {}, n.tracks = {}, n
                }
                return n(e, t), e.prototype.destroy = function() {
                    l.a.prototype.destroy.call(this)
                }, e.prototype.onLevelPtsUpdated = function(t) {
                    var e = t.type,
                        r = this.tracks.audio;
                    if ("audio" === e && r && "audio/mpeg" === r.container) {
                        var i = this.sourceBuffer.audio;
                        if (Math.abs(i.timestampOffset - t.start) > .1) {
                            var a = i.updating;
                            try {
                                i.abort()
                            } catch (t) {
                                a = !0, u.b.warn("can not abort audio buffer: " + t)
                            }
                            a ? this.audioTimestampOffset = t.start : (u.b.warn("change mpeg audio timestamp offset from " + i.timestampOffset + " to " + t.start), i.timestampOffset = t.start)
                        }
                    }
                }, e.prototype.onManifestParsed = function(t) {
                    var e = t.audio,
                        r = t.video || t.levels.length && t.altAudio,
                        i = 0;
                    t.altAudio && (e || r) && (i = (e ? 1 : 0) + (r ? 1 : 0), u.b.log(i + " sourceBuffer(s) expected")), this.sourceBufferNb = i
                }, e.prototype.onMediaAttaching = function(t) {
                    var e = this.media = t.media;
                    if (e) {
                        var r = this.mediaSource = new h;
                        this.onmso = this.onMediaSourceOpen.bind(this), this.onmse = this.onMediaSourceEnded.bind(this), this.onmsc = this.onMediaSourceClose.bind(this), r.addEventListener("sourceopen", this.onmso), r.addEventListener("sourceended", this.onmse), r.addEventListener("sourceclose", this.onmsc), e.src = window.URL.createObjectURL(r), this._objectUrl = e.src
                    }
                }, e.prototype.onMediaDetaching = function() {
                    u.b.log("media source detaching");
                    var t = this.mediaSource;
                    if (t) {
                        if ("open" === t.readyState) try {
                            t.endOfStream()
                        } catch (t) {
                            u.b.warn("onMediaDetaching:" + t.message + " while calling endOfStream")
                        }
                        t.removeEventListener("sourceopen", this.onmso), t.removeEventListener("sourceended", this.onmse), t.removeEventListener("sourceclose", this.onmsc), this.media && (window.URL.revokeObjectURL(this._objectUrl), this.media.src === this._objectUrl ? (this.media.removeAttribute("src"), this.media.load()) : u.b.warn("media.src was changed by a third party - skip cleanup")), this.mediaSource = null, this.media = null, this._objectUrl = null, this.pendingTracks = {}, this.tracks = {}, this.sourceBuffer = {}, this.flushRange = [], this.segments = [], this.appended = 0
                    }
                    this.onmso = this.onmse = this.onmsc = null, this.hls.trigger(s.a.MEDIA_DETACHED)
                }, e.prototype.onMediaSourceOpen = function() {
                    u.b.log("media source opened"), this.hls.trigger(s.a.MEDIA_ATTACHED, {
                        media: this.media
                    });
                    var t = this.mediaSource;
                    t && t.removeEventListener("sourceopen", this.onmso), this.checkPendingTracks()
                }, e.prototype.checkPendingTracks = function() {
                    var t = this.pendingTracks,
                        e = Object.keys(t).length;
                    e && (this.sourceBufferNb <= e || 0 === this.sourceBufferNb) && (this.createSourceBuffers(t), this.pendingTracks = {}, this.doAppending())
                }, e.prototype.onMediaSourceClose = function() {
                    u.b.log("media source closed")
                }, e.prototype.onMediaSourceEnded = function() {
                    u.b.log("media source ended")
                }, e.prototype.onSBUpdateEnd = function() {
                    if (this.audioTimestampOffset) {
                        var t = this.sourceBuffer.audio;
                        u.b.warn("change mpeg audio timestamp offset from " + t.timestampOffset + " to " + this.audioTimestampOffset), t.timestampOffset = this.audioTimestampOffset, delete this.audioTimestampOffset
                    }
                    this._needsFlush && this.doFlush(), this._needsEos && this.checkEos(), this.appending = !1;
                    var e = this.parent,
                        r = this.segments.reduce(function(t, r) {
                            return r.parent === e ? t + 1 : t
                        }, 0),
                        i = {},
                        a = this.sourceBuffer;
                    for (var n in a) i[n] = a[n].buffered;
                    this.hls.trigger(s.a.BUFFER_APPENDED, {
                        parent: e,
                        pending: r,
                        timeRanges: i
                    }), this._needsFlush || this.doAppending(), this.updateMediaElementDuration()
                }, e.prototype.onSBUpdateError = function(t) {
                    u.b.error("sourceBuffer error:", t), this.hls.trigger(s.a.ERROR, {
                        type: d.b.MEDIA_ERROR,
                        details: d.a.BUFFER_APPENDING_ERROR,
                        fatal: !1
                    })
                }, e.prototype.onBufferReset = function() {
                    var t = this.sourceBuffer;
                    for (var e in t) {
                        var r = t[e];
                        try {
                            this.mediaSource.removeSourceBuffer(r), r.removeEventListener("updateend", this.onsbue), r.removeEventListener("error", this.onsbe)
                        } catch (t) {}
                    }
                    this.sourceBuffer = {}, this.flushRange = [], this.segments = [], this.appended = 0
                }, e.prototype.onBufferCodecs = function(t) {
                    if (0 === Object.keys(this.sourceBuffer).length) {
                        for (var e in t) this.pendingTracks[e] = t[e];
                        var r = this.mediaSource;
                        r && "open" === r.readyState && this.checkPendingTracks()
                    }
                }, e.prototype.createSourceBuffers = function(t) {
                    var e = this.sourceBuffer,
                        r = this.mediaSource;
                    for (var i in t)
                        if (!e[i]) {
                            var a = t[i],
                                n = a.levelCodec || a.codec,
                                o = a.container + ";codecs=" + n;
                            u.b.log("creating sourceBuffer(" + o + ")");
                            try {
                                var l = e[i] = r.addSourceBuffer(o);
                                l.addEventListener("updateend", this.onsbue), l.addEventListener("error", this.onsbe), this.tracks[i] = {
                                    codec: n,
                                    container: a.container
                                }, a.buffer = l
                            } catch (t) {
                                u.b.error("error while trying to add sourceBuffer:" + t.message), this.hls.trigger(s.a.ERROR, {
                                    type: d.b.MEDIA_ERROR,
                                    details: d.a.BUFFER_ADD_CODEC_ERROR,
                                    fatal: !1,
                                    err: t,
                                    mimeType: o
                                })
                            }
                        } this.hls.trigger(s.a.BUFFER_CREATED, {
                        tracks: t
                    })
                }, e.prototype.onBufferAppending = function(t) {
                    this._needsFlush || (this.segments ? this.segments.push(t) : this.segments = [t], this.doAppending())
                }, e.prototype.onBufferAppendFail = function(t) {
                    u.b.error("sourceBuffer error:", t.event), this.hls.trigger(s.a.ERROR, {
                        type: d.b.MEDIA_ERROR,
                        details: d.a.BUFFER_APPENDING_ERROR,
                        fatal: !1
                    })
                }, e.prototype.onBufferEos = function(t) {
                    var e = this.sourceBuffer,
                        r = t.type;
                    for (var i in e) r && i !== r || e[i].ended || (e[i].ended = !0, u.b.log(i + " sourceBuffer now EOS"));
                    this.checkEos()
                }, e.prototype.checkEos = function() {
                    var t = this.sourceBuffer,
                        e = this.mediaSource;
                    if (!e || "open" !== e.readyState) return void(this._needsEos = !1);
                    for (var r in t) {
                        var i = t[r];
                        if (!i.ended) return;
                        if (i.updating) return void(this._needsEos = !0)
                    }
                    u.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");
                    try {
                        e.endOfStream()
                    } catch (t) {
                        u.b.warn("exception while calling mediaSource.endOfStream()")
                    }
                    this._needsEos = !1
                }, e.prototype.onBufferFlushing = function(t) {
                    this.flushRange.push({
                        start: t.startOffset,
                        end: t.endOffset,
                        type: t.type
                    }), this.flushBufferCounter = 0, this.doFlush()
                }, e.prototype.onLevelUpdated = function(t) {
                    var e = t.details;
                    e.fragments.length > 0 && (this._levelDuration = e.totalduration + e.fragments[0].start, this._live = e.live, this.updateMediaElementDuration())
                }, e.prototype.updateMediaElementDuration = function() {
                    var t = this.hls.config,
                        e = void 0;
                    if (null !== this._levelDuration && this.media && this.mediaSource && this.sourceBuffer && 0 !== this.media.readyState && "open" === this.mediaSource.readyState) {
                        for (var r in this.sourceBuffer)
                            if (!0 === this.sourceBuffer[r].updating) return;
                        e = this.media.duration, null === this._msDuration && (this._msDuration = this.mediaSource.duration), !0 === this._live && !0 === t.liveDurationInfinity ? (u.b.log("Media Source duration is set to Infinity"), this._msDuration = this.mediaSource.duration = 1 / 0) : (this._levelDuration > this._msDuration && this._levelDuration > e || !Object(o.a)(e)) && (u.b.log("Updating Media Source duration to " + this._levelDuration.toFixed(3)), this._msDuration = this.mediaSource.duration = this._levelDuration)
                    }
                }, e.prototype.doFlush = function() {
                    for (; this.flushRange.length;) {
                        var t = this.flushRange[0];
                        if (!this.flushBuffer(t.start, t.end, t.type)) return void(this._needsFlush = !0);
                        this.flushRange.shift(), this.flushBufferCounter = 0
                    }
                    if (0 === this.flushRange.length) {
                        this._needsFlush = !1;
                        var e = 0,
                            r = this.sourceBuffer;
                        try {
                            for (var i in r) e += r[i].buffered.length
                        } catch (t) {
                            u.b.error("error while accessing sourceBuffer.buffered")
                        }
                        this.appended = e, this.hls.trigger(s.a.BUFFER_FLUSHED)
                    }
                }, e.prototype.doAppending = function() {
                    var t = this.hls,
                        e = this.sourceBuffer,
                        r = this.segments;
                    if (Object.keys(e).length) {
                        if (this.media.error) return this.segments = [], void u.b.error("trying to append although a media error occured, flush segment and abort");
                        if (this.appending) return;
                        if (r && r.length) {
                            var i = r.shift();
                            try {
                                var a = i.type,
                                    n = e[a];
                                n ? n.updating ? r.unshift(i) : (n.ended = !1, this.parent = i.parent, n.appendBuffer(i.data), this.appendError = 0, this.appended++, this.appending = !0) : this.onSBUpdateEnd()
                            } catch (e) {
                                u.b.error("error while trying to append buffer:" + e.message), r.unshift(i);
                                var o = {
                                    type: d.b.MEDIA_ERROR,
                                    parent: i.parent
                                };
                                22 !== e.code ? (this.appendError ? this.appendError++ : this.appendError = 1, o.details = d.a.BUFFER_APPEND_ERROR, this.appendError > t.config.appendErrorMaxRetry ? (u.b.log("fail " + t.config.appendErrorMaxRetry + " times to append segment in sourceBuffer"), r = [], o.fatal = !0, t.trigger(s.a.ERROR, o)) : (o.fatal = !1, t.trigger(s.a.ERROR, o))) : (this.segments = [], o.details = d.a.BUFFER_FULL_ERROR, o.fatal = !1, t.trigger(s.a.ERROR, o))
                            }
                        }
                    }
                }, e.prototype.flushBuffer = function(t, e, r) {
                    var i = void 0,
                        a = void 0,
                        n = void 0,
                        o = void 0,
                        s = void 0,
                        l = void 0,
                        d = this.sourceBuffer;
                    if (Object.keys(d).length) {
                        if (u.b.log("flushBuffer,pos/start/end: " + this.media.currentTime.toFixed(3) + "/" + t + "/" + e), this.flushBufferCounter < this.appended) {
                            for (var c in d)
                                if (!r || c === r) {
                                    if (i = d[c], i.ended = !1, i.updating) return u.b.warn("cannot flush, sb updating in progress"), !1;
                                    try {
                                        for (a = 0; a < i.buffered.length; a++)
                                            if (n = i.buffered.start(a), o = i.buffered.end(a), -1 !== navigator.userAgent.toLowerCase().indexOf("firefox") && e === Number.POSITIVE_INFINITY ? (s = t, l = e) : (s = Math.max(n, t), l = Math.min(o, e)), Math.min(l, o) - s > .5) return this.flushBufferCounter++, u.b.log("flush " + c + " [" + s + "," + l + "], of [" + n + "," + o + "], pos:" + this.media.currentTime), i.remove(s, l), !1
                                    } catch (t) {
                                        u.b.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")
                                    }
                                }
                        } else u.b.warn("abort flushing too many retries");
                        u.b.log("buffer flushed")
                    }
                    return !0
                }, e
            }(l.a);
        e.a = f
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(1),
            s = r(4),
            l = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            u = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, o.a.FPS_DROP_LEVEL_CAPPING, o.a.MEDIA_ATTACHING, o.a.MANIFEST_PARSED, o.a.BUFFER_CODECS, o.a.MEDIA_DETACHING));
                    return n.autoLevelCapping = Number.POSITIVE_INFINITY, n.firstLevel = null, n.levels = [], n.media = null, n.restrictedLevels = [], n.timer = null, n
                }
                return n(e, t), e.prototype.destroy = function() {
                    this.hls.config.capLevelToPlayerSize && (this.media = null, this._stopCapping())
                }, e.prototype.onFpsDropLevelCapping = function(t) {
                    e.isLevelAllowed(t.droppedLevel, this.restrictedLevels) && this.restrictedLevels.push(t.droppedLevel)
                }, e.prototype.onMediaAttaching = function(t) {
                    this.media = t.media instanceof window.HTMLVideoElement ? t.media : null
                }, e.prototype.onManifestParsed = function(t) {
                    var e = this.hls;
                    this.restrictedLevels = [], this.levels = t.levels, this.firstLevel = t.firstLevel, e.config.capLevelToPlayerSize && (t.video || t.levels.length && t.altAudio) && this._startCapping()
                }, e.prototype.onBufferCodecs = function(t) {
                    this.hls.config.capLevelToPlayerSize && t.video && this._startCapping()
                }, e.prototype.onLevelsUpdated = function(t) {
                    this.levels = t.levels
                }, e.prototype.onMediaDetaching = function() {
                    this._stopCapping()
                }, e.prototype.detectPlayerSize = function() {
                    if (this.media) {
                        var t = this.levels ? this.levels.length : 0;
                        if (t) {
                            var e = this.hls;
                            e.autoLevelCapping = this.getMaxLevel(t - 1), e.autoLevelCapping > this.autoLevelCapping && e.streamController.nextLevelSwitch(), this.autoLevelCapping = e.autoLevelCapping
                        }
                    }
                }, e.prototype.getMaxLevel = function(t) {
                    var r = this;
                    if (!this.levels) return -1;
                    var i = this.levels.filter(function(i, a) {
                        return e.isLevelAllowed(a, r.restrictedLevels) && a <= t
                    });
                    return e.getMaxLevelByMediaSize(i, this.mediaWidth, this.mediaHeight)
                }, e.prototype._startCapping = function() {
                    this.timer || (this.autoLevelCapping = Number.POSITIVE_INFINITY, this.hls.firstLevel = this.getMaxLevel(this.firstLevel), clearInterval(this.timer), this.timer = setInterval(this.detectPlayerSize.bind(this), 1e3), this.detectPlayerSize())
                }, e.prototype._stopCapping = function() {
                    this.restrictedLevels = [], this.firstLevel = null, this.autoLevelCapping = Number.POSITIVE_INFINITY, this.timer && (this.timer = clearInterval(this.timer), this.timer = null)
                }, e.isLevelAllowed = function(t) {
                    return -1 === (arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : []).indexOf(t)
                }, e.getMaxLevelByMediaSize = function(t, e, r) {
                    if (!t || t && !t.length) return -1;
                    for (var i = t.length - 1, a = 0; a < t.length; a += 1) {
                        var n = t[a];
                        if ((n.width >= e || n.height >= r) && function(t, e) {
                                return !e || (t.width !== e.width || t.height !== e.height)
                            }(n, t[a + 1])) {
                            i = a;
                            break
                        }
                    }
                    return i
                }, l(e, [{
                    key: "mediaWidth",
                    get: function() {
                        var t = void 0,
                            r = this.media;
                        return r && (t = r.width || r.clientWidth || r.offsetWidth, t *= e.contentScaleFactor), t
                    }
                }, {
                    key: "mediaHeight",
                    get: function() {
                        var t = void 0,
                            r = this.media;
                        return r && (t = r.height || r.clientHeight || r.offsetHeight, t *= e.contentScaleFactor), t
                    }
                }], [{
                    key: "contentScaleFactor",
                    get: function() {
                        var t = 1;
                        try {
                            t = window.devicePixelRatio
                        } catch (t) {}
                        return t
                    }
                }]), e
            }(s.a);
        e.a = u
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(1),
            s = r(4),
            l = r(0),
            u = window,
            d = u.performance,
            c = function(t) {
                function e(r) {
                    return i(this, e), a(this, t.call(this, r, o.a.MEDIA_ATTACHING))
                }
                return n(e, t), e.prototype.destroy = function() {
                    this.timer && clearInterval(this.timer), this.isVideoPlaybackQualityAvailable = !1
                }, e.prototype.onMediaAttaching = function(t) {
                    var e = this.hls.config;
                    if (e.capLevelOnFPSDrop) {
                        "function" == typeof(this.video = t.media instanceof window.HTMLVideoElement ? t.media : null).getVideoPlaybackQuality && (this.isVideoPlaybackQualityAvailable = !0), clearInterval(this.timer), this.timer = setInterval(this.checkFPSInterval.bind(this), e.fpsDroppedMonitoringPeriod)
                    }
                }, e.prototype.checkFPS = function(t, e, r) {
                    var i = d.now();
                    if (e) {
                        if (this.lastTime) {
                            var a = i - this.lastTime,
                                n = r - this.lastDroppedFrames,
                                s = e - this.lastDecodedFrames,
                                u = 1e3 * n / a,
                                c = this.hls;
                            if (c.trigger(o.a.FPS_DROP, {
                                    currentDropped: n,
                                    currentDecoded: s,
                                    totalDroppedFrames: r
                                }), u > 0 && n > c.config.fpsDroppedMonitoringThreshold * s) {
                                var h = c.currentLevel;
                                l.b.warn("drop FPS ratio greater than max allowed value for currentLevel: " + h), h > 0 && (-1 === c.autoLevelCapping || c.autoLevelCapping >= h) && (h -= 1, c.trigger(o.a.FPS_DROP_LEVEL_CAPPING, {
                                    level: h,
                                    droppedLevel: c.currentLevel
                                }), c.autoLevelCapping = h, c.streamController.nextLevelSwitch())
                            }
                        }
                        this.lastTime = i, this.lastDroppedFrames = r, this.lastDecodedFrames = e
                    }
                }, e.prototype.checkFPSInterval = function() {
                    var t = this.video;
                    if (t)
                        if (this.isVideoPlaybackQualityAvailable) {
                            var e = t.getVideoPlaybackQuality();
                            this.checkFPS(t, e.totalVideoFrames, e.droppedVideoFrames)
                        } else this.checkFPS(t, t.webkitDecodedFrameCount, t.webkitDroppedFrameCount)
                }, e
            }(s.a);
        e.a = c
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = r(0),
            n = window,
            o = n.performance,
            s = n.XMLHttpRequest,
            l = function() {
                function t(e) {
                    i(this, t), e && e.xhrSetup && (this.xhrSetup = e.xhrSetup)
                }
                return t.prototype.destroy = function() {
                    this.abort(), this.loader = null
                }, t.prototype.abort = function() {
                    var t = this.loader;
                    t && 4 !== t.readyState && (this.stats.aborted = !0, t.abort()), window.clearTimeout(this.requestTimeout), this.requestTimeout = null, window.clearTimeout(this.retryTimeout), this.retryTimeout = null
                }, t.prototype.load = function(t, e, r) {
                    this.context = t, this.config = e, this.callbacks = r, this.stats = {
                        trequest: o.now(),
                        retry: 0
                    }, this.retryDelay = e.retryDelay, this.loadInternal()
                }, t.prototype.loadInternal = function() {
                    var t = void 0,
                        e = this.context;
                    t = this.loader = new s;
                    var r = this.stats;
                    r.tfirst = 0, r.loaded = 0;
                    var i = this.xhrSetup;
                    try {
                        if (i) try {
                            i(t, e.url)
                        } catch (r) {
                            t.open("GET", e.url, !0), i(t, e.url)
                        }
                        t.readyState || t.open("GET", e.url, !0)
                    } catch (r) {
                        return void this.callbacks.onError({
                            code: t.status,
                            text: r.message
                        }, e, t)
                    }
                    e.rangeEnd && t.setRequestHeader("Range", "bytes=" + e.rangeStart + "-" + (e.rangeEnd - 1)), t.onreadystatechange = this.readystatechange.bind(this), t.onprogress = this.loadprogress.bind(this), t.responseType = e.responseType, this.requestTimeout = window.setTimeout(this.loadtimeout.bind(this), this.config.timeout), t.send()
                }, t.prototype.readystatechange = function(t) {
                    var e = t.currentTarget,
                        r = e.readyState,
                        i = this.stats,
                        n = this.context,
                        s = this.config;
                    if (!i.aborted && r >= 2)
                        if (window.clearTimeout(this.requestTimeout), 0 === i.tfirst && (i.tfirst = Math.max(o.now(), i.trequest)), 4 === r) {
                            var l = e.status;
                            if (l >= 200 && l < 300) {
                                i.tload = Math.max(i.tfirst, o.now());
                                var u = void 0,
                                    d = void 0;
                                "arraybuffer" === n.responseType ? (u = e.response, d = u.byteLength) : (u = e.responseText, d = u.length), i.loaded = i.total = d;
                                var c = {
                                    url: e.responseURL,
                                    data: u
                                };
                                this.callbacks.onSuccess(c, i, n, e)
                            } else i.retry >= s.maxRetry || l >= 400 && l < 499 ? (a.b.error(l + " while loading " + n.url), this.callbacks.onError({
                                code: l,
                                text: e.statusText
                            }, n, e)) : (a.b.warn(l + " while loading " + n.url + ", retrying in " + this.retryDelay + "..."), this.destroy(), this.retryTimeout = window.setTimeout(this.loadInternal.bind(this), this.retryDelay), this.retryDelay = Math.min(2 * this.retryDelay, s.maxRetryDelay), i.retry++)
                        } else this.requestTimeout = window.setTimeout(this.loadtimeout.bind(this), s.timeout)
                }, t.prototype.loadtimeout = function() {
                    a.b.warn("timeout while loading " + this.context.url), this.callbacks.onTimeout(this.stats, this.context, null)
                }, t.prototype.loadprogress = function(t) {
                    var e = t.currentTarget,
                        r = this.stats;
                    r.loaded = t.loaded, t.lengthComputable && (r.total = t.total);
                    var i = this.callbacks.onProgress;
                    i && i(r, this.context, null, e)
                }, t
            }();
        e.a = l
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(1),
            s = r(10),
            l = r(0),
            u = r(2),
            d = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            c = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, o.a.MANIFEST_LOADING, o.a.MANIFEST_PARSED, o.a.AUDIO_TRACK_LOADED, o.a.AUDIO_TRACK_SWITCHED, o.a.LEVEL_LOADED, o.a.ERROR));
                    return n._trackId = -1, n._selectDefaultTrack = !0, n.tracks = [], n.trackIdBlacklist = Object.create(null), n.audioGroupId = null, n
                }
                return n(e, t), e.prototype.onManifestLoading = function() {
                    this.tracks = [], this._trackId = -1, this._selectDefaultTrack = !0
                }, e.prototype.onManifestParsed = function(t) {
                    var e = this.tracks = t.audioTracks || [];
                    this.hls.trigger(o.a.AUDIO_TRACKS_UPDATED, {
                        audioTracks: e
                    })
                }, e.prototype.onAudioTrackLoaded = function(t) {
                    if (t.id >= this.tracks.length) return void l.b.warn("Invalid audio track id:", t.id);
                    if (l.b.log("audioTrack " + t.id + " loaded"), this.tracks[t.id].details = t.details, t.details.live && !this.hasInterval()) {
                        var e = 1e3 * t.details.targetduration;
                        this.setInterval(e)
                    }!t.details.live && this.hasInterval() && this.clearInterval()
                }, e.prototype.onAudioTrackSwitched = function(t) {
                    var e = this.tracks[t.id].groupId;
                    e && this.audioGroupId !== e && (this.audioGroupId = e)
                }, e.prototype.onLevelLoaded = function(t) {
                    var e = this.hls.levels[t.level];
                    if (e.audioGroupIds) {
                        var r = e.audioGroupIds[e.urlId];
                        this.audioGroupId !== r && (this.audioGroupId = r, this._selectInitialAudioTrack())
                    }
                }, e.prototype.onError = function(t) {
                    t.type === u.b.NETWORK_ERROR && (t.fatal && this.clearInterval(), t.details === u.a.AUDIO_TRACK_LOAD_ERROR && (l.b.warn("Network failure on audio-track id:", t.context.id), this._handleLoadError()))
                }, e.prototype._setAudioTrack = function(t) {
                    if (this._trackId === t && this.tracks[this._trackId].details) return void l.b.debug("Same id as current audio-track passed, and track details available -> no-op");
                    if (t < 0 || t >= this.tracks.length) return void l.b.warn("Invalid id passed to audio-track controller");
                    var e = this.tracks[t];
                    l.b.log("Now switching to audio-track index " + t), this.clearInterval(), this._trackId = t;
                    var r = e.url,
                        i = e.type,
                        a = e.id;
                    this.hls.trigger(o.a.AUDIO_TRACK_SWITCHING, {
                        id: a,
                        type: i,
                        url: r
                    }), this._loadTrackDetailsIfNeeded(e)
                }, e.prototype.doTick = function() {
                    this._updateTrack(this._trackId)
                }, e.prototype._selectInitialAudioTrack = function() {
                    var t = this,
                        e = this.tracks;
                    if (e.length) {
                        var r = this.tracks[this._trackId],
                            i = null;
                        if (r && (i = r.name), this._selectDefaultTrack) {
                            var a = e.filter(function(t) {
                                return t.default
                            });
                            a.length ? e = a : l.b.warn("No default audio tracks defined")
                        }
                        var n = !1,
                            s = function() {
                                e.forEach(function(e) {
                                    n || t.audioGroupId && e.groupId !== t.audioGroupId || i && i !== e.name || (t._setAudioTrack(e.id), n = !0)
                                })
                            };
                        s(), n || (i = null, s()), n || (l.b.error("No track found for running audio group-ID: " + this.audioGroupId), this.hls.trigger(o.a.ERROR, {
                            type: u.b.MEDIA_ERROR,
                            details: u.a.AUDIO_TRACK_LOAD_ERROR,
                            fatal: !0
                        }))
                    }
                }, e.prototype._needsTrackLoading = function(t) {
                    var e = t.details;
                    return !e || (!!e.live || void 0)
                }, e.prototype._loadTrackDetailsIfNeeded = function(t) {
                    if (this._needsTrackLoading(t)) {
                        var e = t.url,
                            r = t.id;
                        l.b.log("loading audio-track playlist for id: " + r), this.hls.trigger(o.a.AUDIO_TRACK_LOADING, {
                            url: e,
                            id: r
                        })
                    }
                }, e.prototype._updateTrack = function(t) {
                    if (!(t < 0 || t >= this.tracks.length)) {
                        this.clearInterval(), this._trackId = t, l.b.log("trying to update audio-track " + t);
                        var e = this.tracks[t];
                        this._loadTrackDetailsIfNeeded(e)
                    }
                }, e.prototype._handleLoadError = function() {
                    this.trackIdBlacklist[this._trackId] = !0;
                    var t = this._trackId,
                        e = this.tracks[t],
                        r = e.name,
                        i = e.language,
                        a = e.groupId;
                    l.b.warn("Loading failed on audio track id: " + t + ", group-id: " + a + ', name/language: "' + r + '" / "' + i + '"');
                    for (var n = t, o = 0; o < this.tracks.length; o++)
                        if (!this.trackIdBlacklist[o]) {
                            var s = this.tracks[o];
                            if (s.name === r) {
                                n = o;
                                break
                            }
                        } if (n === t) return void l.b.warn('No fallback audio-track found for name/language: "' + r + '" / "' + i + '"');
                    l.b.log("Attempting audio-track fallback id:", n, "group-id:", this.tracks[n].groupId), this._setAudioTrack(n)
                }, d(e, [{
                    key: "audioTracks",
                    get: function() {
                        return this.tracks
                    }
                }, {
                    key: "audioTrack",
                    get: function() {
                        return this._trackId
                    },
                    set: function(t) {
                        this._setAudioTrack(t), this._selectDefaultTrack = !1
                    }
                }]), e
            }(s.a);
        e.a = c
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(3),
            s = r(7),
            l = r(8),
            u = r(21),
            d = r(1),
            c = r(16),
            h = r(25),
            f = r(2),
            p = r(0),
            g = r(26),
            v = r(10),
            y = r(12),
            m = r(11),
            b = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            E = window,
            T = E.performance,
            S = {
                STOPPED: "STOPPED",
                STARTING: "STARTING",
                IDLE: "IDLE",
                PAUSED: "PAUSED",
                KEY_LOADING: "KEY_LOADING",
                FRAG_LOADING: "FRAG_LOADING",
                FRAG_LOADING_WAITING_RETRY: "FRAG_LOADING_WAITING_RETRY",
                WAITING_TRACK: "WAITING_TRACK",
                PARSING: "PARSING",
                PARSED: "PARSED",
                BUFFER_FLUSHING: "BUFFER_FLUSHING",
                ENDED: "ENDED",
                ERROR: "ERROR",
                WAITING_INIT_PTS: "WAITING_INIT_PTS"
            },
            A = function(t) {
                function e(r, n) {
                    i(this, e);
                    var o = a(this, t.call(this, r, d.a.MEDIA_ATTACHED, d.a.MEDIA_DETACHING, d.a.AUDIO_TRACKS_UPDATED, d.a.AUDIO_TRACK_SWITCHING, d.a.AUDIO_TRACK_LOADED, d.a.KEY_LOADED, d.a.FRAG_LOADED, d.a.FRAG_PARSING_INIT_SEGMENT, d.a.FRAG_PARSING_DATA, d.a.FRAG_PARSED, d.a.ERROR, d.a.BUFFER_RESET, d.a.BUFFER_CREATED, d.a.BUFFER_APPENDED, d.a.BUFFER_FLUSHED, d.a.INIT_PTS_FOUND));
                    return o.fragmentTracker = n, o.config = r.config, o.audioCodecSwap = !1, o._state = S.STOPPED, o.initPTS = [], o.waitingFragment = null, o.videoTrackCC = null, o
                }
                return n(e, t), e.prototype.onHandlerDestroying = function() {
                    this.stopLoad(), t.prototype.onHandlerDestroying.call(this)
                }, e.prototype.onHandlerDestroyed = function() {
                    this.state = S.STOPPED, this.fragmentTracker = null, t.prototype.onHandlerDestroyed.call(this)
                }, e.prototype.onInitPtsFound = function(t) {
                    var e = t.id,
                        r = t.frag.cc,
                        i = t.initPTS;
                    "main" === e && (this.initPTS[r] = i, this.videoTrackCC = r, p.b.log("InitPTS for cc: " + r + " found from video track: " + i), this.state === S.WAITING_INIT_PTS && this.tick())
                }, e.prototype.startLoad = function(t) {
                    if (this.tracks) {
                        var e = this.lastCurrentTime;
                        this.stopLoad(), this.setInterval(100), this.fragLoadError = 0, e > 0 && -1 === t ? (p.b.log("audio:override startPosition with lastCurrentTime @" + e.toFixed(3)), this.state = S.IDLE) : (this.lastCurrentTime = this.startPosition ? this.startPosition : t, this.state = S.STARTING), this.nextLoadPosition = this.startPosition = this.lastCurrentTime, this.tick()
                    } else this.startPosition = t, this.state = S.STOPPED
                }, e.prototype.stopLoad = function() {
                    var t = this.fragCurrent;
                    t && (t.loader && t.loader.abort(), this.fragmentTracker.removeFragment(t), this.fragCurrent = null), this.fragPrevious = null, this.demuxer && (this.demuxer.destroy(), this.demuxer = null), this.state = S.STOPPED
                }, e.prototype.doTick = function() {
                    var t = void 0,
                        e = void 0,
                        r = void 0,
                        i = this.hls,
                        a = i.config;
                    switch (this.state) {
                        case S.ERROR:
                        case S.PAUSED:
                        case S.BUFFER_FLUSHING:
                            break;
                        case S.STARTING:
                            this.state = S.WAITING_TRACK, this.loadedmetadata = !1;
                            break;
                        case S.IDLE:
                            var n = this.tracks;
                            if (!n) break;
                            if (!this.media && (this.startFragRequested || !a.startFragPrefetch)) break;
                            if (this.loadedmetadata) t = this.media.currentTime;
                            else if (void 0 === (t = this.nextLoadPosition)) break;
                            var u = this.mediaBuffer ? this.mediaBuffer : this.media,
                                c = this.videoBuffer ? this.videoBuffer : this.media,
                                h = l.a.bufferInfo(u, t, a.maxBufferHole),
                                f = l.a.bufferInfo(c, t, a.maxBufferHole),
                                v = h.len,
                                m = h.end,
                                b = this.fragPrevious,
                                E = Math.min(a.maxBufferLength, a.maxMaxBufferLength),
                                A = Math.max(E, f.len),
                                R = this.audioSwitch,
                                _ = this.trackId;
                            if ((v < A || R) && _ < n.length) {
                                if (void 0 === (r = n[_].details)) {
                                    this.state = S.WAITING_TRACK;
                                    break
                                }
                                if (!R && !r.live && b && b.sn === r.endSN && !h.nextStart && (!this.media.seeking || this.media.duration - m < b.duration / 2)) {
                                    this.hls.trigger(d.a.BUFFER_EOS, {
                                        type: "audio"
                                    }), this.state = S.ENDED;
                                    break
                                }
                                var w = r.fragments,
                                    L = w.length,
                                    D = w[0].start,
                                    I = w[L - 1].start + w[L - 1].duration,
                                    k = void 0;
                                if (R)
                                    if (r.live && !r.PTSKnown) p.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"), m = 0;
                                    else if (m = t, r.PTSKnown && t < D) {
                                    if (!(h.end > D || h.nextStart)) return;
                                    p.b.log("alt audio track ahead of main track, seek to start of alt audio track"), this.media.currentTime = D + .05
                                }
                                if (r.initSegment && !r.initSegment.data) k = r.initSegment;
                                else if (m <= D) {
                                    if (k = w[0], null !== this.videoTrackCC && k.cc !== this.videoTrackCC && (k = Object(g.b)(w, this.videoTrackCC)), r.live && k.loadIdx && k.loadIdx === this.fragLoadIdx) {
                                        var O = h.nextStart ? h.nextStart : D;
                                        return p.b.log("no alt audio available @currentTime:" + this.media.currentTime + ", seeking @" + (O + .05)), void(this.media.currentTime = O + .05)
                                    }
                                } else {
                                    var C = void 0,
                                        P = a.maxFragLookUpTolerance,
                                        x = b ? w[b.sn - w[0].sn + 1] : void 0,
                                        F = function(t) {
                                            var e = Math.min(P, t.duration);
                                            return t.start + t.duration - e <= m ? 1 : t.start - e > m && t.start ? -1 : 0
                                        };
                                    m < I ? (m > I - P && (P = 0), C = x && !F(x) ? x : s.a.search(w, F)) : C = w[L - 1], C && (k = C, D = C.start, b && k.level === b.level && k.sn === b.sn && (k.sn < r.endSN ? (k = w[k.sn + 1 - r.startSN], p.b.log("SN just loaded, load next one: " + k.sn)) : k = null))
                                }
                                k && (k.encrypted ? (p.b.log("Loading key for " + k.sn + " of [" + r.startSN + " ," + r.endSN + "],track " + _), this.state = S.KEY_LOADING, i.trigger(d.a.KEY_LOADING, {
                                    frag: k
                                })) : (p.b.log("Loading " + k.sn + ", cc: " + k.cc + " of [" + r.startSN + " ," + r.endSN + "],track " + _ + ", currentTime:" + t + ",bufferEnd:" + m.toFixed(3)), (R || this.fragmentTracker.getState(k) === y.a.NOT_LOADED) && (this.fragCurrent = k, this.startFragRequested = !0, Object(o.a)(k.sn) && (this.nextLoadPosition = k.start + k.duration), i.trigger(d.a.FRAG_LOADING, {
                                    frag: k
                                }), this.state = S.FRAG_LOADING)))
                            }
                            break;
                        case S.WAITING_TRACK:
                            e = this.tracks[this.trackId], e && e.details && (this.state = S.IDLE);
                            break;
                        case S.FRAG_LOADING_WAITING_RETRY:
                            var M = T.now(),
                                N = this.retryDate;
                            u = this.media;
                            var U = u && u.seeking;
                            (!N || M >= N || U) && (p.b.log("audioStreamController: retryDate reached, switch back to IDLE state"), this.state = S.IDLE);
                            break;
                        case S.WAITING_INIT_PTS:
                            var B = this.videoTrackCC;
                            if (void 0 === this.initPTS[B]) break;
                            var G = this.waitingFragment;
                            if (G) {
                                var K = G.frag.cc;
                                B !== K ? (e = this.tracks[this.trackId], e.details && e.details.live && (p.b.warn("Waiting fragment CC (" + K + ") does not match video track CC (" + B + ")"), this.waitingFragment = null, this.state = S.IDLE)) : (this.state = S.FRAG_LOADING, this.onFragLoaded(this.waitingFragment), this.waitingFragment = null)
                            } else this.state = S.IDLE;
                            break;
                        case S.STOPPED:
                        case S.FRAG_LOADING:
                        case S.PARSING:
                        case S.PARSED:
                        case S.ENDED:
                    }
                }, e.prototype.onMediaAttached = function(t) {
                    var e = this.media = this.mediaBuffer = t.media;
                    this.onvseeking = this.onMediaSeeking.bind(this), this.onvended = this.onMediaEnded.bind(this), e.addEventListener("seeking", this.onvseeking), e.addEventListener("ended", this.onvended);
                    var r = this.config;
                    this.tracks && r.autoStartLoad && this.startLoad(r.startPosition)
                }, e.prototype.onMediaDetaching = function() {
                    var t = this.media;
                    t && t.ended && (p.b.log("MSE detaching and video ended, reset startPosition"), this.startPosition = this.lastCurrentTime = 0), t && (t.removeEventListener("seeking", this.onvseeking), t.removeEventListener("ended", this.onvended), this.onvseeking = this.onvseeked = this.onvended = null), this.media = this.mediaBuffer = this.videoBuffer = null, this.loadedmetadata = !1, this.stopLoad()
                }, e.prototype.onMediaSeeking = function() {
                    this.state === S.ENDED && (this.state = S.IDLE), this.media && (this.lastCurrentTime = this.media.currentTime), this.tick()
                }, e.prototype.onMediaEnded = function() {
                    this.startPosition = this.lastCurrentTime = 0
                }, e.prototype.onAudioTracksUpdated = function(t) {
                    p.b.log("audio tracks updated"), this.tracks = t.audioTracks
                }, e.prototype.onAudioTrackSwitching = function(t) {
                    var e = !!t.url;
                    this.trackId = t.id, this.fragCurrent = null, this.state = S.PAUSED, this.waitingFragment = null, e ? this.setInterval(100) : this.demuxer && (this.demuxer.destroy(), this.demuxer = null), e && (this.audioSwitch = !0, this.state = S.IDLE), this.tick()
                }, e.prototype.onAudioTrackLoaded = function(t) {
                    var e = t.details,
                        r = t.id,
                        i = this.tracks[r],
                        a = e.totalduration,
                        n = 0;
                    if (p.b.log("track " + r + " loaded [" + e.startSN + "," + e.endSN + "],duration:" + a), e.live) {
                        var s = i.details;
                        s && e.fragments.length > 0 ? (c.b(s, e), n = e.fragments[0].start, e.PTSKnown ? p.b.log("live audio playlist sliding:" + n.toFixed(3)) : p.b.log("live audio playlist - outdated PTS, unknown sliding")) : (e.PTSKnown = !1, p.b.log("live audio playlist - first load, unknown sliding"))
                    } else e.PTSKnown = !1;
                    if (i.details = e, !this.startFragRequested) {
                        if (-1 === this.startPosition) {
                            var l = e.startTimeOffset;
                            Object(o.a)(l) ? (p.b.log("start time offset found in playlist, adjust startPosition to " + l), this.startPosition = l) : this.startPosition = 0
                        }
                        this.nextLoadPosition = this.startPosition
                    }
                    this.state === S.WAITING_TRACK && (this.state = S.IDLE), this.tick()
                }, e.prototype.onKeyLoaded = function() {
                    this.state === S.KEY_LOADING && (this.state = S.IDLE, this.tick())
                }, e.prototype.onFragLoaded = function(t) {
                    var e = this.fragCurrent,
                        r = t.frag;
                    if (this.state === S.FRAG_LOADING && e && "audio" === r.type && r.level === e.level && r.sn === e.sn) {
                        var i = this.tracks[this.trackId],
                            a = i.details,
                            n = a.totalduration,
                            o = e.level,
                            s = e.sn,
                            l = e.cc,
                            c = this.config.defaultAudioCodec || i.audioCodec || "mp4a.40.2",
                            h = this.stats = t.stats;
                        if ("initSegment" === s) this.state = S.IDLE, h.tparsed = h.tbuffered = T.now(), a.initSegment.data = t.payload, this.hls.trigger(d.a.FRAG_BUFFERED, {
                            stats: h,
                            frag: e,
                            id: "audio"
                        }), this.tick();
                        else {
                            this.state = S.PARSING, this.appended = !1, this.demuxer || (this.demuxer = new u.a(this.hls, "audio"));
                            var f = this.initPTS[l],
                                g = a.initSegment ? a.initSegment.data : [];
                            if (a.initSegment || void 0 !== f) {
                                this.pendingBuffering = !0, p.b.log("Demuxing " + s + " of [" + a.startSN + " ," + a.endSN + "],track " + o);
                                this.demuxer.push(t.payload, g, c, null, e, n, !1, f)
                            } else p.b.log("unknown video PTS for continuity counter " + l + ", waiting for video PTS before demuxing audio frag " + s + " of [" + a.startSN + " ," + a.endSN + "],track " + o), this.waitingFragment = t, this.state = S.WAITING_INIT_PTS
                        }
                    }
                    this.fragLoadError = 0
                }, e.prototype.onFragParsingInitSegment = function(t) {
                    var e = this.fragCurrent,
                        r = t.frag;
                    if (e && "audio" === t.id && r.sn === e.sn && r.level === e.level && this.state === S.PARSING) {
                        var i = t.tracks,
                            a = void 0;
                        if (i.video && delete i.video, a = i.audio) {
                            a.levelCodec = a.codec, a.id = t.id, this.hls.trigger(d.a.BUFFER_CODECS, i), p.b.log("audio track:audio,container:" + a.container + ",codecs[level/parsed]=[" + a.levelCodec + "/" + a.codec + "]");
                            var n = a.initSegment;
                            if (n) {
                                var o = {
                                    type: "audio",
                                    data: n,
                                    parent: "audio",
                                    content: "initSegment"
                                };
                                this.audioSwitch ? this.pendingData = [o] : (this.appended = !0, this.pendingBuffering = !0, this.hls.trigger(d.a.BUFFER_APPENDING, o))
                            }
                            this.tick()
                        }
                    }
                }, e.prototype.onFragParsingData = function(t) {
                    var e = this,
                        r = this.fragCurrent,
                        i = t.frag;
                    if (r && "audio" === t.id && "audio" === t.type && i.sn === r.sn && i.level === r.level && this.state === S.PARSING) {
                        var a = this.trackId,
                            n = this.tracks[a],
                            s = this.hls;
                        Object(o.a)(t.endPTS) || (t.endPTS = t.startPTS + r.duration, t.endDTS = t.startDTS + r.duration), r.addElementaryStream(m.a.ElementaryStreamTypes.AUDIO), p.b.log("parsed " + t.type + ",PTS:[" + t.startPTS.toFixed(3) + "," + t.endPTS.toFixed(3) + "],DTS:[" + t.startDTS.toFixed(3) + "/" + t.endDTS.toFixed(3) + "],nb:" + t.nb), c.c(n.details, r, t.startPTS, t.endPTS);
                        var l = this.audioSwitch,
                            u = this.media,
                            h = !1;
                        if (l && u)
                            if (u.readyState) {
                                var g = u.currentTime;
                                p.b.log("switching audio track : currentTime:" + g), g >= t.startPTS && (p.b.log("switching audio track : flushing all audio"), this.state = S.BUFFER_FLUSHING, s.trigger(d.a.BUFFER_FLUSHING, {
                                    startOffset: 0,
                                    endOffset: Number.POSITIVE_INFINITY,
                                    type: "audio"
                                }), h = !0, this.audioSwitch = !1, s.trigger(d.a.AUDIO_TRACK_SWITCHED, {
                                    id: a
                                }))
                            } else this.audioSwitch = !1, s.trigger(d.a.AUDIO_TRACK_SWITCHED, {
                                id: a
                            });
                        var v = this.pendingData;
                        if (!v) return p.b.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"), void s.trigger(d.a.ERROR, {
                            type: f.b.MEDIA_ERROR,
                            details: null,
                            fatal: !0
                        });
                        this.audioSwitch || ([t.data1, t.data2].forEach(function(e) {
                            e && e.length && v.push({
                                type: t.type,
                                data: e,
                                parent: "audio",
                                content: "data"
                            })
                        }), !h && v.length && (v.forEach(function(t) {
                            e.state === S.PARSING && (e.pendingBuffering = !0, e.hls.trigger(d.a.BUFFER_APPENDING, t))
                        }), this.pendingData = [], this.appended = !0)), this.tick()
                    }
                }, e.prototype.onFragParsed = function(t) {
                    var e = this.fragCurrent,
                        r = t.frag;
                    e && "audio" === t.id && r.sn === e.sn && r.level === e.level && this.state === S.PARSING && (this.stats.tparsed = T.now(), this.state = S.PARSED, this._checkAppendedParsed())
                }, e.prototype.onBufferReset = function() {
                    this.mediaBuffer = this.videoBuffer = null, this.loadedmetadata = !1
                }, e.prototype.onBufferCreated = function(t) {
                    var e = t.tracks.audio;
                    e && (this.mediaBuffer = e.buffer, this.loadedmetadata = !0), t.tracks.video && (this.videoBuffer = t.tracks.video.buffer)
                }, e.prototype.onBufferAppended = function(t) {
                    if ("audio" === t.parent) {
                        var e = this.state;
                        e !== S.PARSING && e !== S.PARSED || (this.pendingBuffering = t.pending > 0, this._checkAppendedParsed())
                    }
                }, e.prototype._checkAppendedParsed = function() {
                    if (!(this.state !== S.PARSED || this.appended && this.pendingBuffering)) {
                        var t = this.fragCurrent,
                            e = this.stats,
                            r = this.hls;
                        if (t) {
                            this.fragPrevious = t, e.tbuffered = T.now(), r.trigger(d.a.FRAG_BUFFERED, {
                                stats: e,
                                frag: t,
                                id: "audio"
                            });
                            var i = this.mediaBuffer ? this.mediaBuffer : this.media;
                            p.b.log("audio buffered : " + h.a.toString(i.buffered)), this.audioSwitch && this.appended && (this.audioSwitch = !1, r.trigger(d.a.AUDIO_TRACK_SWITCHED, {
                                id: this.trackId
                            })), this.state = S.IDLE
                        }
                        this.tick()
                    }
                }, e.prototype.onError = function(t) {
                    var e = t.frag;
                    if (!e || "audio" === e.type) switch (t.details) {
                        case f.a.FRAG_LOAD_ERROR:
                        case f.a.FRAG_LOAD_TIMEOUT:
                            var r = t.frag;
                            if (r && "audio" !== r.type) break;
                            if (!t.fatal) {
                                var i = this.fragLoadError;
                                i ? i++ : i = 1;
                                var a = this.config;
                                if (i <= a.fragLoadingMaxRetry) {
                                    this.fragLoadError = i;
                                    var n = Math.min(Math.pow(2, i - 1) * a.fragLoadingRetryDelay, a.fragLoadingMaxRetryTimeout);
                                    p.b.warn("AudioStreamController: frag loading failed, retry in " + n + " ms"), this.retryDate = T.now() + n, this.state = S.FRAG_LOADING_WAITING_RETRY
                                } else p.b.error("AudioStreamController: " + t.details + " reaches max retry, redispatch as fatal ..."), t.fatal = !0, this.state = S.ERROR
                            }
                            break;
                        case f.a.AUDIO_TRACK_LOAD_ERROR:
                        case f.a.AUDIO_TRACK_LOAD_TIMEOUT:
                        case f.a.KEY_LOAD_ERROR:
                        case f.a.KEY_LOAD_TIMEOUT:
                            this.state !== S.ERROR && (this.state = t.fatal ? S.ERROR : S.IDLE, p.b.warn("AudioStreamController: " + t.details + " while loading frag, now switching to " + this.state + " state ..."));
                            break;
                        case f.a.BUFFER_FULL_ERROR:
                            if ("audio" === t.parent && (this.state === S.PARSING || this.state === S.PARSED)) {
                                var o = this.mediaBuffer,
                                    s = this.media.currentTime;
                                if (o && l.a.isBuffered(o, s) && l.a.isBuffered(o, s + .5)) {
                                    var u = this.config;
                                    u.maxMaxBufferLength >= u.maxBufferLength && (u.maxMaxBufferLength /= 2, p.b.warn("AudioStreamController: reduce max buffer length to " + u.maxMaxBufferLength + "s")), this.state = S.IDLE
                                } else p.b.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"), this.fragCurrent = null, this.state = S.BUFFER_FLUSHING, this.hls.trigger(d.a.BUFFER_FLUSHING, {
                                    startOffset: 0,
                                    endOffset: Number.POSITIVE_INFINITY,
                                    type: "audio"
                                })
                            }
                    }
                }, e.prototype.onBufferFlushed = function() {
                    var t = this,
                        e = this.pendingData;
                    e && e.length ? (p.b.log("AudioStreamController: appending pending audio data after buffer flushed"), e.forEach(function(e) {
                        t.hls.trigger(d.a.BUFFER_APPENDING, e)
                    }), this.appended = !0, this.pendingData = [], this.state = S.PARSED) : (this.state = S.IDLE, this.fragPrevious = null, this.tick())
                }, b(e, [{
                    key: "state",
                    set: function(t) {
                        if (this.state !== t) {
                            var e = this.state;
                            this._state = t, p.b.log("audio stream:" + e + "->" + t)
                        }
                    },
                    get: function() {
                        return this._state
                    }
                }]), e
            }(v.a);
        e.a = A
    }, function(t, e, r) {
        "use strict";

        function i(t, e, r, i) {
            for (var n = void 0, o = void 0, s = void 0, l = void 0, u = void 0, d = window.VTTCue || window.TextTrackCue, c = 0; c < i.rows.length; c++)
                if (n = i.rows[c], s = !0, l = 0, u = "", !n.isEmpty()) {
                    for (var h = 0; h < n.chars.length; h++) n.chars[h].uchar.match(/\s/) && s ? l++ : (u += n.chars[h].uchar, s = !1);
                    n.cueStartTime = e, e === r && (r += 1e-4), o = new d(e, r, Object(a.b)(u.trim())), l >= 16 ? l-- : l++, navigator.userAgent.match(/Firefox\//) ? o.line = c + 1 : o.line = c > 7 ? c - 2 : c + 1, o.align = "left", o.position = Math.max(0, Math.min(100, l / 32 * 100 + (navigator.userAgent.match(/Firefox\//) ? 50 : 0))), t.addCue(o)
                }
        }
        Object.defineProperty(e, "__esModule", {
            value: !0
        }), e.newCue = i;
        var a = r(28)
    }, function(t, e, r) {
        "use strict";
        e.a = function() {
            function t(t) {
                return "string" == typeof t && (!!n[t.toLowerCase()] && t.toLowerCase())
            }

            function e(t) {
                return "string" == typeof t && (!!o[t.toLowerCase()] && t.toLowerCase())
            }

            function r(t) {
                for (var e = 1; e < arguments.length; e++) {
                    var r = arguments[e];
                    for (var i in r) t[i] = r[i]
                }
                return t
            }

            function i(i, n, o) {
                var s = this,
                    l = function() {
                        if ("undefined" != typeof navigator) return /MSIE\s8\.0/.test(navigator.userAgent)
                    }(),
                    u = {};
                l ? s = document.createElement("custom") : u.enumerable = !0, s.hasBeenReset = !1;
                var d = "",
                    c = !1,
                    h = i,
                    f = n,
                    p = o,
                    g = null,
                    v = "",
                    y = !0,
                    m = "auto",
                    b = "start",
                    E = 50,
                    T = "middle",
                    S = 50,
                    A = "middle";
                if (Object.defineProperty(s, "id", r({}, u, {
                        get: function() {
                            return d
                        },
                        set: function(t) {
                            d = "" + t
                        }
                    })), Object.defineProperty(s, "pauseOnExit", r({}, u, {
                        get: function() {
                            return c
                        },
                        set: function(t) {
                            c = !!t
                        }
                    })), Object.defineProperty(s, "startTime", r({}, u, {
                        get: function() {
                            return h
                        },
                        set: function(t) {
                            if ("number" != typeof t) throw new TypeError("Start time must be set to a number.");
                            h = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "endTime", r({}, u, {
                        get: function() {
                            return f
                        },
                        set: function(t) {
                            if ("number" != typeof t) throw new TypeError("End time must be set to a number.");
                            f = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "text", r({}, u, {
                        get: function() {
                            return p
                        },
                        set: function(t) {
                            p = "" + t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "region", r({}, u, {
                        get: function() {
                            return g
                        },
                        set: function(t) {
                            g = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "vertical", r({}, u, {
                        get: function() {
                            return v
                        },
                        set: function(e) {
                            var r = t(e);
                            if (!1 === r) throw new SyntaxError("An invalid or illegal string was specified.");
                            v = r, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "snapToLines", r({}, u, {
                        get: function() {
                            return y
                        },
                        set: function(t) {
                            y = !!t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "line", r({}, u, {
                        get: function() {
                            return m
                        },
                        set: function(t) {
                            if ("number" != typeof t && t !== a) throw new SyntaxError("An invalid number or illegal string was specified.");
                            m = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "lineAlign", r({}, u, {
                        get: function() {
                            return b
                        },
                        set: function(t) {
                            var r = e(t);
                            if (!r) throw new SyntaxError("An invalid or illegal string was specified.");
                            b = r, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "position", r({}, u, {
                        get: function() {
                            return E
                        },
                        set: function(t) {
                            if (t < 0 || t > 100) throw new Error("Position must be between 0 and 100.");
                            E = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "positionAlign", r({}, u, {
                        get: function() {
                            return T
                        },
                        set: function(t) {
                            var r = e(t);
                            if (!r) throw new SyntaxError("An invalid or illegal string was specified.");
                            T = r, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "size", r({}, u, {
                        get: function() {
                            return S
                        },
                        set: function(t) {
                            if (t < 0 || t > 100) throw new Error("Size must be between 0 and 100.");
                            S = t, this.hasBeenReset = !0
                        }
                    })), Object.defineProperty(s, "align", r({}, u, {
                        get: function() {
                            return A
                        },
                        set: function(t) {
                            var r = e(t);
                            if (!r) throw new SyntaxError("An invalid or illegal string was specified.");
                            A = r, this.hasBeenReset = !0
                        }
                    })), s.displayState = void 0, l) return s
            }
            if ("undefined" != typeof window && window.VTTCue) return window.VTTCue;
            var a = "auto",
                n = {
                    "": !0,
                    lr: !0,
                    rl: !0
                },
                o = {
                    start: !0,
                    middle: !0,
                    end: !0,
                    left: !0,
                    right: !0
                };
            return i.prototype.getCueAsHTML = function() {
                return window.WebVTT.convertCueToDOMTree(window, this.text)
            }, i
        }()
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }

        function o(t, e) {
            return t && t.label === e.name && !(t.textTrack1 || t.textTrack2)
        }

        function s(t, e, r, i) {
            return Math.min(e, i) - Math.max(t, r)
        }
        var l = r(1),
            u = r(4),
            d = r(68),
            c = r(69),
            h = r(70),
            f = r(0),
            p = r(27),
            g = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, l.a.MEDIA_ATTACHING, l.a.MEDIA_DETACHING, l.a.FRAG_PARSING_USERDATA, l.a.FRAG_DECRYPTED, l.a.MANIFEST_LOADING, l.a.MANIFEST_LOADED, l.a.FRAG_LOADED, l.a.LEVEL_SWITCHING, l.a.INIT_PTS_FOUND));
                    if (n.hls = r, n.config = r.config, n.enabled = !0, n.Cues = r.config.cueHandler, n.textTracks = [], n.tracks = [], n.unparsedVttFrags = [], n.initPTS = void 0, n.cueRanges = [], n.captionsTracks = {}, n.captionsProperties = {
                            textTrack1: {
                                label: n.config.captionsTextTrack1Label,
                                languageCode: n.config.captionsTextTrack1LanguageCode
                            },
                            textTrack2: {
                                label: n.config.captionsTextTrack2Label,
                                languageCode: n.config.captionsTextTrack2LanguageCode
                            }
                        }, n.config.enableCEA708Captions) {
                        var o = new c.a(n, "textTrack1"),
                            s = new c.a(n, "textTrack2");
                        n.cea608Parser = new d.a(0, o, s)
                    }
                    return n
                }
                return n(e, t), e.prototype.addCues = function(t, e, r, i) {
                    for (var a = this.cueRanges, n = !1, o = a.length; o--;) {
                        var l = a[o],
                            u = s(l[0], l[1], e, r);
                        if (u >= 0 && (l[0] = Math.min(l[0], e), l[1] = Math.max(l[1], r), n = !0, u / (r - e) > .5)) return
                    }
                    n || a.push([e, r]), this.Cues.newCue(this.captionsTracks[t], e, r, i)
                }, e.prototype.onInitPtsFound = function(t) {
                    var e = this;
                    void 0 === this.initPTS && (this.initPTS = t.initPTS), this.unparsedVttFrags.length && (this.unparsedVttFrags.forEach(function(t) {
                        e.onFragLoaded(t)
                    }), this.unparsedVttFrags = [])
                }, e.prototype.getExistingTrack = function(t) {
                    var e = this.media;
                    if (e)
                        for (var r = 0; r < e.textTracks.length; r++) {
                            var i = e.textTracks[r];
                            if (i[t]) return i
                        }
                    return null
                }, e.prototype.createCaptionsTrack = function(t) {
                    var e = this.captionsProperties[t],
                        r = e.label,
                        i = e.languageCode,
                        a = this.captionsTracks;
                    if (!a[t]) {
                        var n = this.getExistingTrack(t);
                        if (n) a[t] = n, Object(p.a)(a[t]), Object(p.b)(a[t], this.media);
                        else {
                            var o = this.createTextTrack("captions", r, i);
                            o && (o[t] = !0, a[t] = o)
                        }
                    }
                }, e.prototype.createTextTrack = function(t, e, r) {
                    var i = this.media;
                    if (i) return i.addTextTrack(t, e, r)
                }, e.prototype.destroy = function() {
                    u.a.prototype.destroy.call(this)
                }, e.prototype.onMediaAttaching = function(t) {
                    this.media = t.media, this._cleanTracks()
                }, e.prototype.onMediaDetaching = function() {
                    var t = this.captionsTracks;
                    Object.keys(t).forEach(function(e) {
                        Object(p.a)(t[e]), delete t[e]
                    })
                }, e.prototype.onManifestLoading = function() {
                    this.lastSn = -1, this.prevCC = -1, this.vttCCs = {
                        ccOffset: 0,
                        presentationOffset: 0
                    }, this._cleanTracks()
                }, e.prototype._cleanTracks = function() {
                    var t = this.media;
                    if (t) {
                        var e = t.textTracks;
                        if (e)
                            for (var r = 0; r < e.length; r++) Object(p.a)(e[r])
                    }
                }, e.prototype.onManifestLoaded = function(t) {
                    var e = this;
                    if (this.textTracks = [], this.unparsedVttFrags = this.unparsedVttFrags || [], this.initPTS = void 0, this.cueRanges = [], this.config.enableWebVTT) {
                        this.tracks = t.subtitles || [];
                        var r = this.media ? this.media.textTracks : [];
                        this.tracks.forEach(function(t, i) {
                            var a = void 0;
                            if (i < r.length) {
                                var n = r[i];
                                o(n, t) && (a = n)
                            }
                            a || (a = e.createTextTrack("subtitles", t.name, t.lang)), t.default ? a.mode = e.hls.subtitleDisplay ? "showing" : "hidden" : a.mode = "disabled", e.textTracks.push(a)
                        })
                    }
                }, e.prototype.onLevelSwitching = function() {
                    this.enabled = "NONE" !== this.hls.currentLevel.closedCaptions
                }, e.prototype.onFragLoaded = function(t) {
                    var e = t.frag,
                        r = t.payload;
                    if ("main" === e.type) {
                        var i = e.sn;
                        if (i !== this.lastSn + 1) {
                            var a = this.cea608Parser;
                            a && a.reset()
                        }
                        this.lastSn = i
                    } else if ("subtitle" === e.type)
                        if (r.byteLength) {
                            if (void 0 === this.initPTS) return void this.unparsedVttFrags.push(t);
                            var n = e.decryptdata;
                            null != n && null != n.key && "AES-128" === n.method || this._parseVTTs(e, r)
                        } else this.hls.trigger(l.a.SUBTITLE_FRAG_PROCESSED, {
                            success: !1,
                            frag: e
                        })
                }, e.prototype._parseVTTs = function(t, e) {
                    var r = this.vttCCs;
                    r[t.cc] || (r[t.cc] = {
                        start: t.start,
                        prevCC: this.prevCC,
                        new: !0
                    }, this.prevCC = t.cc);
                    var i = this.textTracks,
                        a = this.hls;
                    h.a.parse(e, this.initPTS, r, t.cc, function(e) {
                        var r = i[t.trackId];
                        if ("disabled" === r.mode) return void a.trigger(l.a.SUBTITLE_FRAG_PROCESSED, {
                            success: !1,
                            frag: t
                        });
                        e.forEach(function(t) {
                            if (!r.cues.getCueById(t.id)) try {
                                r.addCue(t)
                            } catch (i) {
                                var e = new window.TextTrackCue(t.startTime, t.endTime, t.text);
                                e.id = t.id, r.addCue(e)
                            }
                        }), a.trigger(l.a.SUBTITLE_FRAG_PROCESSED, {
                            success: !0,
                            frag: t
                        })
                    }, function(e) {
                        f.b.log("Failed to parse VTT cue: " + e), a.trigger(l.a.SUBTITLE_FRAG_PROCESSED, {
                            success: !1,
                            frag: t
                        })
                    })
                }, e.prototype.onFragDecrypted = function(t) {
                    var e = t.payload,
                        r = t.frag;
                    if ("subtitle" === r.type) {
                        if (void 0 === this.initPTS) return void this.unparsedVttFrags.push(t);
                        this._parseVTTs(r, e)
                    }
                }, e.prototype.onFragParsingUserdata = function(t) {
                    if (this.enabled && this.config.enableCEA708Captions)
                        for (var e = 0; e < t.samples.length; e++) {
                            var r = this.extractCea608Data(t.samples[e].bytes);
                            this.cea608Parser.addData(t.samples[e].pts, r)
                        }
                }, e.prototype.extractCea608Data = function(t) {
                    for (var e = 31 & t[0], r = 2, i = void 0, a = void 0, n = void 0, o = void 0, s = void 0, l = [], u = 0; u < e; u++) i = t[r++], a = 127 & t[r++], n = 127 & t[r++], o = 0 != (4 & i), s = 3 & i, 0 === a && 0 === n || o && 0 === s && (l.push(a), l.push(n));
                    return l
                }, e
            }(u.a);
        e.a = g
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = {
                42: 225,
                92: 233,
                94: 237,
                95: 243,
                96: 250,
                123: 231,
                124: 247,
                125: 209,
                126: 241,
                127: 9608,
                128: 174,
                129: 176,
                130: 189,
                131: 191,
                132: 8482,
                133: 162,
                134: 163,
                135: 9834,
                136: 224,
                137: 32,
                138: 232,
                139: 226,
                140: 234,
                141: 238,
                142: 244,
                143: 251,
                144: 193,
                145: 201,
                146: 211,
                147: 218,
                148: 220,
                149: 252,
                150: 8216,
                151: 161,
                152: 42,
                153: 8217,
                154: 9473,
                155: 169,
                156: 8480,
                157: 8226,
                158: 8220,
                159: 8221,
                160: 192,
                161: 194,
                162: 199,
                163: 200,
                164: 202,
                165: 203,
                166: 235,
                167: 206,
                168: 207,
                169: 239,
                170: 212,
                171: 217,
                172: 249,
                173: 219,
                174: 171,
                175: 187,
                176: 195,
                177: 227,
                178: 205,
                179: 204,
                180: 236,
                181: 210,
                182: 242,
                183: 213,
                184: 245,
                185: 123,
                186: 125,
                187: 92,
                188: 94,
                189: 95,
                190: 124,
                191: 8764,
                192: 196,
                193: 228,
                194: 214,
                195: 246,
                196: 223,
                197: 165,
                198: 164,
                199: 9475,
                200: 197,
                201: 229,
                202: 216,
                203: 248,
                204: 9487,
                205: 9491,
                206: 9495,
                207: 9499
            },
            n = function(t) {
                var e = t;
                return a.hasOwnProperty(t) && (e = a[t]), String.fromCharCode(e)
            },
            o = 15,
            s = 100,
            l = {
                17: 1,
                18: 3,
                21: 5,
                22: 7,
                23: 9,
                16: 11,
                19: 12,
                20: 14
            },
            u = {
                17: 2,
                18: 4,
                21: 6,
                22: 8,
                23: 10,
                19: 13,
                20: 15
            },
            d = {
                25: 1,
                26: 3,
                29: 5,
                30: 7,
                31: 9,
                24: 11,
                27: 12,
                28: 14
            },
            c = {
                25: 2,
                26: 4,
                29: 6,
                30: 8,
                31: 10,
                27: 13,
                28: 15
            },
            h = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "black", "transparent"],
            f = {
                verboseFilter: {
                    DATA: 3,
                    DEBUG: 3,
                    INFO: 2,
                    WARNING: 2,
                    TEXT: 1,
                    ERROR: 0
                },
                time: null,
                verboseLevel: 0,
                setTime: function(t) {
                    this.time = t
                },
                log: function(t, e) {
                    this.verboseFilter[t];
                    this.verboseLevel
                }
            },
            p = function(t) {
                for (var e = [], r = 0; r < t.length; r++) e.push(t[r].toString(16));
                return e
            },
            g = function() {
                function t(e, r, a, n, o) {
                    i(this, t), this.foreground = e || "white", this.underline = r || !1, this.italics = a || !1, this.background = n || "black", this.flash = o || !1
                }
                return t.prototype.reset = function() {
                    this.foreground = "white", this.underline = !1, this.italics = !1, this.background = "black", this.flash = !1
                }, t.prototype.setStyles = function(t) {
                    for (var e = ["foreground", "underline", "italics", "background", "flash"], r = 0; r < e.length; r++) {
                        var i = e[r];
                        t.hasOwnProperty(i) && (this[i] = t[i])
                    }
                }, t.prototype.isDefault = function() {
                    return "white" === this.foreground && !this.underline && !this.italics && "black" === this.background && !this.flash
                }, t.prototype.equals = function(t) {
                    return this.foreground === t.foreground && this.underline === t.underline && this.italics === t.italics && this.background === t.background && this.flash === t.flash
                }, t.prototype.copy = function(t) {
                    this.foreground = t.foreground, this.underline = t.underline, this.italics = t.italics, this.background = t.background, this.flash = t.flash
                }, t.prototype.toString = function() {
                    return "color=" + this.foreground + ", underline=" + this.underline + ", italics=" + this.italics + ", background=" + this.background + ", flash=" + this.flash
                }, t
            }(),
            v = function() {
                function t(e, r, a, n, o, s) {
                    i(this, t), this.uchar = e || " ", this.penState = new g(r, a, n, o, s)
                }
                return t.prototype.reset = function() {
                    this.uchar = " ", this.penState.reset()
                }, t.prototype.setChar = function(t, e) {
                    this.uchar = t, this.penState.copy(e)
                }, t.prototype.setPenState = function(t) {
                    this.penState.copy(t)
                }, t.prototype.equals = function(t) {
                    return this.uchar === t.uchar && this.penState.equals(t.penState)
                }, t.prototype.copy = function(t) {
                    this.uchar = t.uchar, this.penState.copy(t.penState)
                }, t.prototype.isEmpty = function() {
                    return " " === this.uchar && this.penState.isDefault()
                }, t
            }(),
            y = function() {
                function t() {
                    i(this, t), this.chars = [];
                    for (var e = 0; e < s; e++) this.chars.push(new v);
                    this.pos = 0, this.currPenState = new g
                }
                return t.prototype.equals = function(t) {
                    for (var e = !0, r = 0; r < s; r++)
                        if (!this.chars[r].equals(t.chars[r])) {
                            e = !1;
                            break
                        } return e
                }, t.prototype.copy = function(t) {
                    for (var e = 0; e < s; e++) this.chars[e].copy(t.chars[e])
                }, t.prototype.isEmpty = function() {
                    for (var t = !0, e = 0; e < s; e++)
                        if (!this.chars[e].isEmpty()) {
                            t = !1;
                            break
                        } return t
                }, t.prototype.setCursor = function(t) {
                    this.pos !== t && (this.pos = t), this.pos < 0 ? (f.log("ERROR", "Negative cursor position " + this.pos), this.pos = 0) : this.pos > s && (f.log("ERROR", "Too large cursor position " + this.pos), this.pos = s)
                }, t.prototype.moveCursor = function(t) {
                    var e = this.pos + t;
                    if (t > 1)
                        for (var r = this.pos + 1; r < e + 1; r++) this.chars[r].setPenState(this.currPenState);
                    this.setCursor(e)
                }, t.prototype.backSpace = function() {
                    this.moveCursor(-1), this.chars[this.pos].setChar(" ", this.currPenState)
                }, t.prototype.insertChar = function(t) {
                    t >= 144 && this.backSpace();
                    var e = n(t);
                    if (this.pos >= s) return void f.log("ERROR", "Cannot insert " + t.toString(16) + " (" + e + ") at position " + this.pos + ". Skipping it!");
                    this.chars[this.pos].setChar(e, this.currPenState), this.moveCursor(1)
                }, t.prototype.clearFromPos = function(t) {
                    var e = void 0;
                    for (e = t; e < s; e++) this.chars[e].reset()
                }, t.prototype.clear = function() {
                    this.clearFromPos(0), this.pos = 0, this.currPenState.reset()
                }, t.prototype.clearToEndOfRow = function() {
                    this.clearFromPos(this.pos)
                }, t.prototype.getTextString = function() {
                    for (var t = [], e = !0, r = 0; r < s; r++) {
                        var i = this.chars[r].uchar;
                        " " !== i && (e = !1), t.push(i)
                    }
                    return e ? "" : t.join("")
                }, t.prototype.setPenStyles = function(t) {
                    this.currPenState.setStyles(t), this.chars[this.pos].setPenState(this.currPenState)
                }, t
            }(),
            m = function() {
                function t() {
                    i(this, t), this.rows = [];
                    for (var e = 0; e < o; e++) this.rows.push(new y);
                    this.currRow = o - 1, this.nrRollUpRows = null, this.reset()
                }
                return t.prototype.reset = function() {
                    for (var t = 0; t < o; t++) this.rows[t].clear();
                    this.currRow = o - 1
                }, t.prototype.equals = function(t) {
                    for (var e = !0, r = 0; r < o; r++)
                        if (!this.rows[r].equals(t.rows[r])) {
                            e = !1;
                            break
                        } return e
                }, t.prototype.copy = function(t) {
                    for (var e = 0; e < o; e++) this.rows[e].copy(t.rows[e])
                }, t.prototype.isEmpty = function() {
                    for (var t = !0, e = 0; e < o; e++)
                        if (!this.rows[e].isEmpty()) {
                            t = !1;
                            break
                        } return t
                }, t.prototype.backSpace = function() {
                    this.rows[this.currRow].backSpace()
                }, t.prototype.clearToEndOfRow = function() {
                    this.rows[this.currRow].clearToEndOfRow()
                }, t.prototype.insertChar = function(t) {
                    this.rows[this.currRow].insertChar(t)
                }, t.prototype.setPen = function(t) {
                    this.rows[this.currRow].setPenStyles(t)
                }, t.prototype.moveCursor = function(t) {
                    this.rows[this.currRow].moveCursor(t)
                }, t.prototype.setCursor = function(t) {
                    f.log("INFO", "setCursor: " + t), this.rows[this.currRow].setCursor(t)
                }, t.prototype.setPAC = function(t) {
                    f.log("INFO", "pacData = " + JSON.stringify(t));
                    var e = t.row - 1;
                    if (this.nrRollUpRows && e < this.nrRollUpRows - 1 && (e = this.nrRollUpRows - 1), this.nrRollUpRows && this.currRow !== e) {
                        for (var r = 0; r < o; r++) this.rows[r].clear();
                        var i = this.currRow + 1 - this.nrRollUpRows,
                            a = this.lastOutputScreen;
                        if (a) {
                            var n = a.rows[i].cueStartTime;
                            if (n && n < f.time)
                                for (var s = 0; s < this.nrRollUpRows; s++) this.rows[e - this.nrRollUpRows + s + 1].copy(a.rows[i + s])
                        }
                    }
                    this.currRow = e;
                    var l = this.rows[this.currRow];
                    if (null !== t.indent) {
                        var u = t.indent,
                            d = Math.max(u - 1, 0);
                        l.setCursor(t.indent), t.color = l.chars[d].penState.foreground
                    }
                    var c = {
                        foreground: t.color,
                        underline: t.underline,
                        italics: t.italics,
                        background: "black",
                        flash: !1
                    };
                    this.setPen(c)
                }, t.prototype.setBkgData = function(t) {
                    f.log("INFO", "bkgData = " + JSON.stringify(t)), this.backSpace(), this.setPen(t), this.insertChar(32)
                }, t.prototype.setRollUpRows = function(t) {
                    this.nrRollUpRows = t
                }, t.prototype.rollUp = function() {
                    if (null === this.nrRollUpRows) return void f.log("DEBUG", "roll_up but nrRollUpRows not set yet");
                    f.log("TEXT", this.getDisplayText());
                    var t = this.currRow + 1 - this.nrRollUpRows,
                        e = this.rows.splice(t, 1)[0];
                    e.clear(), this.rows.splice(this.currRow, 0, e), f.log("INFO", "Rolling up")
                }, t.prototype.getDisplayText = function(t) {
                    t = t || !1;
                    for (var e = [], r = "", i = -1, a = 0; a < o; a++) {
                        var n = this.rows[a].getTextString();
                        n && (i = a + 1, t ? e.push("Row " + i + ": '" + n + "'") : e.push(n.trim()))
                    }
                    return e.length > 0 && (r = t ? "[" + e.join(" | ") + "]" : e.join("\n")), r
                }, t.prototype.getTextAndFormat = function() {
                    return this.rows
                }, t
            }(),
            b = function() {
                function t(e, r) {
                    i(this, t), this.chNr = e, this.outputFilter = r, this.mode = null, this.verbose = 0, this.displayedMemory = new m, this.nonDisplayedMemory = new m, this.lastOutputScreen = new m, this.currRollUpRow = this.displayedMemory.rows[o - 1], this.writeScreen = this.displayedMemory, this.mode = null, this.cueStartTime = null
                }
                return t.prototype.reset = function() {
                    this.mode = null, this.displayedMemory.reset(), this.nonDisplayedMemory.reset(), this.lastOutputScreen.reset(), this.currRollUpRow = this.displayedMemory.rows[o - 1], this.writeScreen = this.displayedMemory, this.mode = null, this.cueStartTime = null, this.lastCueEndTime = null
                }, t.prototype.getHandler = function() {
                    return this.outputFilter
                }, t.prototype.setHandler = function(t) {
                    this.outputFilter = t
                }, t.prototype.setPAC = function(t) {
                    this.writeScreen.setPAC(t)
                }, t.prototype.setBkgData = function(t) {
                    this.writeScreen.setBkgData(t)
                }, t.prototype.setMode = function(t) {
                    t !== this.mode && (this.mode = t, f.log("INFO", "MODE=" + t), "MODE_POP-ON" === this.mode ? this.writeScreen = this.nonDisplayedMemory : (this.writeScreen = this.displayedMemory, this.writeScreen.reset()), "MODE_ROLL-UP" !== this.mode && (this.displayedMemory.nrRollUpRows = null, this.nonDisplayedMemory.nrRollUpRows = null), this.mode = t)
                }, t.prototype.insertChars = function(t) {
                    for (var e = 0; e < t.length; e++) this.writeScreen.insertChar(t[e]);
                    var r = this.writeScreen === this.displayedMemory ? "DISP" : "NON_DISP";
                    f.log("INFO", r + ": " + this.writeScreen.getDisplayText(!0)), "MODE_PAINT-ON" !== this.mode && "MODE_ROLL-UP" !== this.mode || (f.log("TEXT", "DISPLAYED: " + this.displayedMemory.getDisplayText(!0)), this.outputDataUpdate())
                }, t.prototype.ccRCL = function() {
                    f.log("INFO", "RCL - Resume Caption Loading"), this.setMode("MODE_POP-ON")
                }, t.prototype.ccBS = function() {
                    f.log("INFO", "BS - BackSpace"), "MODE_TEXT" !== this.mode && (this.writeScreen.backSpace(), this.writeScreen === this.displayedMemory && this.outputDataUpdate())
                }, t.prototype.ccAOF = function() {}, t.prototype.ccAON = function() {}, t.prototype.ccDER = function() {
                    f.log("INFO", "DER- Delete to End of Row"), this.writeScreen.clearToEndOfRow(), this.outputDataUpdate()
                }, t.prototype.ccRU = function(t) {
                    f.log("INFO", "RU(" + t + ") - Roll Up"), this.writeScreen = this.displayedMemory, this.setMode("MODE_ROLL-UP"), this.writeScreen.setRollUpRows(t)
                }, t.prototype.ccFON = function() {
                    f.log("INFO", "FON - Flash On"), this.writeScreen.setPen({
                        flash: !0
                    })
                }, t.prototype.ccRDC = function() {
                    f.log("INFO", "RDC - Resume Direct Captioning"), this.setMode("MODE_PAINT-ON")
                }, t.prototype.ccTR = function() {
                    f.log("INFO", "TR"), this.setMode("MODE_TEXT")
                }, t.prototype.ccRTD = function() {
                    f.log("INFO", "RTD"), this.setMode("MODE_TEXT")
                }, t.prototype.ccEDM = function() {
                    f.log("INFO", "EDM - Erase Displayed Memory"), this.displayedMemory.reset(), this.outputDataUpdate(!0)
                }, t.prototype.ccCR = function() {
                    f.log("CR - Carriage Return"), this.writeScreen.rollUp(), this.outputDataUpdate(!0)
                }, t.prototype.ccENM = function() {
                    f.log("INFO", "ENM - Erase Non-displayed Memory"), this.nonDisplayedMemory.reset()
                }, t.prototype.ccEOC = function() {
                    if (f.log("INFO", "EOC - End Of Caption"), "MODE_POP-ON" === this.mode) {
                        var t = this.displayedMemory;
                        this.displayedMemory = this.nonDisplayedMemory, this.nonDisplayedMemory = t, this.writeScreen = this.nonDisplayedMemory, f.log("TEXT", "DISP: " + this.displayedMemory.getDisplayText())
                    }
                    this.outputDataUpdate(!0)
                }, t.prototype.ccTO = function(t) {
                    f.log("INFO", "TO(" + t + ") - Tab Offset"), this.writeScreen.moveCursor(t)
                }, t.prototype.ccMIDROW = function(t) {
                    var e = {
                        flash: !1
                    };
                    if (e.underline = t % 2 == 1, e.italics = t >= 46, e.italics) e.foreground = "white";
                    else {
                        var r = Math.floor(t / 2) - 16,
                            i = ["white", "green", "blue", "cyan", "red", "yellow", "magenta"];
                        e.foreground = i[r]
                    }
                    f.log("INFO", "MIDROW: " + JSON.stringify(e)), this.writeScreen.setPen(e)
                }, t.prototype.outputDataUpdate = function() {
                    var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
                        e = f.time;
                    null !== e && this.outputFilter && (null !== this.cueStartTime || this.displayedMemory.isEmpty() ? this.displayedMemory.equals(this.lastOutputScreen) || (this.outputFilter.newCue && (this.outputFilter.newCue(this.cueStartTime, e, this.lastOutputScreen), !0 === t && this.outputFilter.dispatchCue && this.outputFilter.dispatchCue()), this.cueStartTime = this.displayedMemory.isEmpty() ? null : e) : this.cueStartTime = e, this.lastOutputScreen.copy(this.displayedMemory))
                }, t.prototype.cueSplitAtTime = function(t) {
                    this.outputFilter && (this.displayedMemory.isEmpty() || (this.outputFilter.newCue && this.outputFilter.newCue(this.cueStartTime, t, this.displayedMemory), this.cueStartTime = t))
                }, t
            }(),
            E = function() {
                function t(e, r, a) {
                    i(this, t), this.field = e || 1, this.outputs = [r, a], this.channels = [new b(1, r), new b(2, a)], this.currChNr = -1, this.lastCmdA = null, this.lastCmdB = null, this.bufferedData = [], this.startTime = null, this.lastTime = null, this.dataCounters = {
                        padding: 0,
                        char: 0,
                        cmd: 0,
                        other: 0
                    }
                }
                return t.prototype.getHandler = function(t) {
                    return this.channels[t].getHandler()
                }, t.prototype.setHandler = function(t, e) {
                    this.channels[t].setHandler(e)
                }, t.prototype.addData = function(t, e) {
                    var r = void 0,
                        i = void 0,
                        a = void 0,
                        n = !1;
                    this.lastTime = t, f.setTime(t);
                    for (var o = 0; o < e.length; o += 2)
                        if (i = 127 & e[o], a = 127 & e[o + 1], 0 !== i || 0 !== a) {
                            if (f.log("DATA", "[" + p([e[o], e[o + 1]]) + "] -> (" + p([i, a]) + ")"), r = this.parseCmd(i, a), r || (r = this.parseMidrow(i, a)), r || (r = this.parsePAC(i, a)), r || (r = this.parseBackgroundAttributes(i, a)), !r && (n = this.parseChars(i, a)))
                                if (this.currChNr && this.currChNr >= 0) {
                                    var s = this.channels[this.currChNr - 1];
                                    s.insertChars(n)
                                } else f.log("WARNING", "No channel found yet. TEXT-MODE?");
                            r ? this.dataCounters.cmd += 2 : n ? this.dataCounters.char += 2 : (this.dataCounters.other += 2, f.log("WARNING", "Couldn't parse cleaned data " + p([i, a]) + " orig: " + p([e[o], e[o + 1]])))
                        } else this.dataCounters.padding += 2
                }, t.prototype.parseCmd = function(t, e) {
                    var r = null,
                        i = (20 === t || 28 === t) && e >= 32 && e <= 47,
                        a = (23 === t || 31 === t) && e >= 33 && e <= 35;
                    if (!i && !a) return !1;
                    if (t === this.lastCmdA && e === this.lastCmdB) return this.lastCmdA = null, this.lastCmdB = null, f.log("DEBUG", "Repeated command (" + p([t, e]) + ") is dropped"), !0;
                    r = 20 === t || 23 === t ? 1 : 2;
                    var n = this.channels[r - 1];
                    return 20 === t || 28 === t ? 32 === e ? n.ccRCL() : 33 === e ? n.ccBS() : 34 === e ? n.ccAOF() : 35 === e ? n.ccAON() : 36 === e ? n.ccDER() : 37 === e ? n.ccRU(2) : 38 === e ? n.ccRU(3) : 39 === e ? n.ccRU(4) : 40 === e ? n.ccFON() : 41 === e ? n.ccRDC() : 42 === e ? n.ccTR() : 43 === e ? n.ccRTD() : 44 === e ? n.ccEDM() : 45 === e ? n.ccCR() : 46 === e ? n.ccENM() : 47 === e && n.ccEOC() : n.ccTO(e - 32), this.lastCmdA = t, this.lastCmdB = e, this.currChNr = r, !0
                }, t.prototype.parseMidrow = function(t, e) {
                    var r = null;
                    if ((17 === t || 25 === t) && e >= 32 && e <= 47) {
                        if ((r = 17 === t ? 1 : 2) !== this.currChNr) return f.log("ERROR", "Mismatch channel in midrow parsing"), !1;
                        return this.channels[r - 1].ccMIDROW(e), f.log("DEBUG", "MIDROW (" + p([t, e]) + ")"), !0
                    }
                    return !1
                }, t.prototype.parsePAC = function(t, e) {
                    var r = null,
                        i = null,
                        a = (t >= 17 && t <= 23 || t >= 25 && t <= 31) && e >= 64 && e <= 127,
                        n = (16 === t || 24 === t) && e >= 64 && e <= 95;
                    if (!a && !n) return !1;
                    if (t === this.lastCmdA && e === this.lastCmdB) return this.lastCmdA = null, this.lastCmdB = null, !0;
                    r = t <= 23 ? 1 : 2, i = e >= 64 && e <= 95 ? 1 === r ? l[t] : d[t] : 1 === r ? u[t] : c[t];
                    var o = this.interpretPAC(i, e);
                    return this.channels[r - 1].setPAC(o), this.lastCmdA = t, this.lastCmdB = e, this.currChNr = r, !0
                }, t.prototype.interpretPAC = function(t, e) {
                    var r = e,
                        i = {
                            color: null,
                            italics: !1,
                            indent: null,
                            underline: !1,
                            row: t
                        };
                    return r = e > 95 ? e - 96 : e - 64, i.underline = 1 == (1 & r), r <= 13 ? i.color = ["white", "green", "blue", "cyan", "red", "yellow", "magenta", "white"][Math.floor(r / 2)] : r <= 15 ? (i.italics = !0, i.color = "white") : i.indent = 4 * Math.floor((r - 16) / 2), i
                }, t.prototype.parseChars = function(t, e) {
                    var r = null,
                        i = null,
                        a = null;
                    if (t >= 25 ? (r = 2, a = t - 8) : (r = 1, a = t), a >= 17 && a <= 19) {
                        var o = e;
                        o = 17 === a ? e + 80 : 18 === a ? e + 112 : e + 144, f.log("INFO", "Special char '" + n(o) + "' in channel " + r), i = [o]
                    } else t >= 32 && t <= 127 && (i = 0 === e ? [t] : [t, e]);
                    if (i) {
                        var s = p(i);
                        f.log("DEBUG", "Char codes =  " + s.join(",")), this.lastCmdA = null, this.lastCmdB = null
                    }
                    return i
                }, t.prototype.parseBackgroundAttributes = function(t, e) {
                    var r = void 0,
                        i = void 0,
                        a = void 0,
                        n = void 0,
                        o = (16 === t || 24 === t) && e >= 32 && e <= 47,
                        s = (23 === t || 31 === t) && e >= 45 && e <= 47;
                    return !(!o && !s) && (r = {}, 16 === t || 24 === t ? (i = Math.floor((e - 32) / 2), r.background = h[i], e % 2 == 1 && (r.background = r.background + "_semi")) : 45 === e ? r.background = "transparent" : (r.foreground = "black", 47 === e && (r.underline = !0)), a = t < 24 ? 1 : 2, n = this.channels[a - 1], n.setBkgData(r), this.lastCmdA = null, this.lastCmdB = null, !0)
                }, t.prototype.reset = function() {
                    for (var t = 0; t < this.channels.length; t++) this.channels[t] && this.channels[t].reset();
                    this.lastCmdA = null, this.lastCmdB = null
                }, t.prototype.cueSplitAtTime = function(t) {
                    for (var e = 0; e < this.channels.length; e++) this.channels[e] && this.channels[e].cueSplitAtTime(t)
                }, t
            }();
        e.a = E
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }
        var a = function() {
            function t(e, r) {
                i(this, t), this.timelineController = e, this.trackName = r, this.startTime = null, this.endTime = null, this.screen = null
            }
            return t.prototype.dispatchCue = function() {
                null !== this.startTime && (this.timelineController.addCues(this.trackName, this.startTime, this.endTime, this.screen), this.startTime = null)
            }, t.prototype.newCue = function(t, e, r) {
                (null === this.startTime || this.startTime > t) && (this.startTime = t), this.endTime = e, this.screen = r, this.timelineController.createCaptionsTrack(this.trackName)
            }, t
        }();
        e.a = a
    }, function(t, e, r) {
        "use strict";
        var i = r(3),
            a = r(28),
            n = r(9),
            o = function(t, e, r) {
                return t.substr(r || 0, e.length) === e
            },
            s = function(t) {
                var e = parseInt(t.substr(-3)),
                    r = parseInt(t.substr(-6, 2)),
                    a = parseInt(t.substr(-9, 2)),
                    n = t.length > 9 ? parseInt(t.substr(0, t.indexOf(":"))) : 0;
                return Object(i.a)(e) && Object(i.a)(r) && Object(i.a)(a) && Object(i.a)(n) ? (e += 1e3 * r, e += 6e4 * a, e += 36e5 * n) : -1
            },
            l = function(t) {
                for (var e = 5381, r = t.length; r;) e = 33 * e ^ t.charCodeAt(--r);
                return (e >>> 0).toString()
            },
            u = function(t, e, r) {
                var i = t[e],
                    a = t[i.prevCC];
                if (!a || !a.new && i.new) return t.ccOffset = t.presentationOffset = i.start, void(i.new = !1);
                for (; a && a.new;) t.ccOffset += i.start - a.start, i.new = !1, i = a, a = t[i.prevCC];
                t.presentationOffset = r
            },
            d = {
                parse: function(t, e, r, i, d, c) {
                    var h = /\r\n|\n\r|\n|\r/g,
                        f = Object(n.b)(new Uint8Array(t)).trim().replace(h, "\n").split("\n"),
                        p = "00:00.000",
                        g = 0,
                        v = 0,
                        y = 0,
                        m = [],
                        b = void 0,
                        E = !0,
                        T = new a.a;
                    T.oncue = function(t) {
                        var e = r[i],
                            a = r.ccOffset;
                        e && e.new && (void 0 !== v ? a = r.ccOffset = e.start : u(r, i, y)), y && (a = y + r.ccOffset - r.presentationOffset), t.startTime += a - v, t.endTime += a - v, t.id = l(t.startTime.toString()) + l(t.endTime.toString()) + l(t.text), t.text = decodeURIComponent(encodeURIComponent(t.text)), t.endTime > 0 && m.push(t)
                    }, T.onparsingerror = function(t) {
                        b = t
                    }, T.onflush = function() {
                        if (b && c) return void c(b);
                        d(m)
                    }, f.forEach(function(t) {
                        if (E) {
                            if (o(t, "X-TIMESTAMP-MAP=")) {
                                E = !1, t.substr(16).split(",").forEach(function(t) {
                                    o(t, "LOCAL:") ? p = t.substr(6) : o(t, "MPEGTS:") && (g = parseInt(t.substr(7)))
                                });
                                try {
                                    e = e < 0 ? e + 8589934592 : e, g -= e, v = s(p) / 1e3, y = g / 9e4, -1 === v && (b = new Error("Malformed X-TIMESTAMP-MAP: " + t))
                                } catch (e) {
                                    b = new Error("Malformed X-TIMESTAMP-MAP: " + t)
                                }
                                return
                            }
                            "" === t && (E = !1)
                        }
                        T.parse(t + "\n")
                    }), T.flush()
                }
            };
        e.a = d
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }

        function o(t) {
            for (var e = [], r = 0; r < t.length; r++) "subtitles" === t[r].kind && e.push(t[r]);
            return e
        }
        var s = r(1),
            l = r(4),
            u = r(0),
            d = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            c = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, s.a.MEDIA_ATTACHED, s.a.MEDIA_DETACHING, s.a.MANIFEST_LOADING, s.a.MANIFEST_LOADED, s.a.SUBTITLE_TRACK_LOADED));
                    return n.tracks = [], n.trackId = -1, n.media = null, n.subtitleDisplay = !0, n
                }
                return n(e, t), e.prototype._onTextTracksChanged = function() {
                    if (this.media) {
                        for (var t = -1, e = o(this.media.textTracks), r = 0; r < e.length; r++)
                            if ("hidden" === e[r].mode) t = r;
                            else if ("showing" === e[r].mode) {
                            t = r;
                            break
                        }
                        this.subtitleTrack = t
                    }
                }, e.prototype.destroy = function() {
                    l.a.prototype.destroy.call(this)
                }, e.prototype.onMediaAttached = function(t) {
                    var e = this;
                    this.media = t.media, this.media && (this.queuedDefaultTrack && (this.subtitleTrack = this.queuedDefaultTrack, delete this.queuedDefaultTrack), this.trackChangeListener = this._onTextTracksChanged.bind(this), this.useTextTrackPolling = !(this.media.textTracks && "onchange" in this.media.textTracks), this.useTextTrackPolling ? this.subtitlePollingInterval = setInterval(function() {
                        e.trackChangeListener()
                    }, 500) : this.media.textTracks.addEventListener("change", this.trackChangeListener))
                }, e.prototype.onMediaDetaching = function() {
                    this.media && (this.useTextTrackPolling ? clearInterval(this.subtitlePollingInterval) : this.media.textTracks.removeEventListener("change", this.trackChangeListener), this.media = null)
                }, e.prototype.onManifestLoading = function() {
                    this.tracks = [], this.trackId = -1
                }, e.prototype.onManifestLoaded = function(t) {
                    var e = this,
                        r = t.subtitles || [];
                    this.tracks = r, this.trackId = -1, this.hls.trigger(s.a.SUBTITLE_TRACKS_UPDATED, {
                        subtitleTracks: r
                    }), r.forEach(function(t) {
                        t.default && (e.media ? e.subtitleTrack = t.id : e.queuedDefaultTrack = t.id)
                    })
                }, e.prototype.onTick = function() {
                    var t = this.trackId,
                        e = this.tracks[t];
                    if (e) {
                        var r = e.details;
                        r && !r.live || (u.b.log("(re)loading playlist for subtitle track " + t), this.hls.trigger(s.a.SUBTITLE_TRACK_LOADING, {
                            url: e.url,
                            id: t
                        }))
                    }
                }, e.prototype.onSubtitleTrackLoaded = function(t) {
                    var e = this;
                    t.id < this.tracks.length && (u.b.log("subtitle track " + t.id + " loaded"), this.tracks[t.id].details = t.details, t.details.live && !this.timer && (this.timer = setInterval(function() {
                        e.onTick()
                    }, 1e3 * t.details.targetduration, this)), !t.details.live && this.timer && this._stopTimer())
                }, e.prototype.setSubtitleTrackInternal = function(t) {
                    var e = this.hls,
                        r = this.tracks;
                    if (!("number" != typeof t || t < -1 || t >= r.length) && (this._stopTimer(), this.trackId = t, u.b.log("switching to subtitle track " + t), e.trigger(s.a.SUBTITLE_TRACK_SWITCH, {
                            id: t
                        }), -1 !== t)) {
                        var i = r[t],
                            a = i.details;
                        a && !a.live || (u.b.log("(re)loading playlist for subtitle track " + t), e.trigger(s.a.SUBTITLE_TRACK_LOADING, {
                            url: i.url,
                            id: t
                        }))
                    }
                }, e.prototype._stopTimer = function() {
                    this.timer && (clearInterval(this.timer), this.timer = null)
                }, e.prototype._toggleTrackModes = function(t) {
                    var e = this.media,
                        r = this.subtitleDisplay,
                        i = this.trackId;
                    if (e) {
                        var a = o(e.textTracks);
                        if (-1 === t)[].slice.call(a).forEach(function(t) {
                            t.mode = "disabled"
                        });
                        else {
                            var n = a[i];
                            n && (n.mode = "disabled")
                        }
                        var s = a[t];
                        s && (s.mode = r ? "showing" : "hidden")
                    }
                }, d(e, [{
                    key: "subtitleTracks",
                    get: function() {
                        return this.tracks
                    }
                }, {
                    key: "subtitleTrack",
                    get: function() {
                        return this.trackId
                    },
                    set: function(t) {
                        this.trackId !== t && (this._toggleTrackModes(t), this.setSubtitleTrackInternal(t))
                    }
                }]), e
            }(l.a);
        e.a = c
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(1),
            s = r(0),
            l = r(14),
            u = r(10),
            d = window,
            c = d.performance,
            h = {
                STOPPED: "STOPPED",
                IDLE: "IDLE",
                KEY_LOADING: "KEY_LOADING",
                FRAG_LOADING: "FRAG_LOADING"
            },
            f = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, o.a.MEDIA_ATTACHED, o.a.ERROR, o.a.KEY_LOADED, o.a.FRAG_LOADED, o.a.SUBTITLE_TRACKS_UPDATED, o.a.SUBTITLE_TRACK_SWITCH, o.a.SUBTITLE_TRACK_LOADED, o.a.SUBTITLE_FRAG_PROCESSED));
                    return n.config = r.config, n.vttFragSNsProcessed = {}, n.vttFragQueues = void 0, n.currentlyProcessing = null, n.state = h.STOPPED, n.currentTrackId = -1, n.decrypter = new l.a(r.observer, r.config), n
                }
                return n(e, t), e.prototype.onHandlerDestroyed = function() {
                    this.state = h.STOPPED
                }, e.prototype.clearVttFragQueues = function() {
                    var t = this;
                    this.vttFragQueues = {}, this.tracks.forEach(function(e) {
                        t.vttFragQueues[e.id] = []
                    })
                }, e.prototype.nextFrag = function() {
                    if (null === this.currentlyProcessing && this.currentTrackId > -1 && this.vttFragQueues[this.currentTrackId].length) {
                        var t = this.currentlyProcessing = this.vttFragQueues[this.currentTrackId].shift();
                        this.fragCurrent = t, this.hls.trigger(o.a.FRAG_LOADING, {
                            frag: t
                        }), this.state = h.FRAG_LOADING
                    }
                }, e.prototype.onSubtitleFragProcessed = function(t) {
                    t.success && this.vttFragSNsProcessed[t.frag.trackId].push(t.frag.sn), this.currentlyProcessing = null, this.state = h.IDLE, this.nextFrag()
                }, e.prototype.onMediaAttached = function() {
                    this.state = h.IDLE
                }, e.prototype.onError = function(t) {
                    var e = t.frag;
                    e && "subtitle" !== e.type || this.currentlyProcessing && (this.currentlyProcessing = null, this.nextFrag())
                }, e.prototype.doTick = function() {
                    var t = this;
                    switch (this.state) {
                        case h.IDLE:
                            var e = this.tracks,
                                r = this.currentTrackId,
                                i = this.vttFragSNsProcessed[r],
                                a = this.vttFragQueues[r],
                                n = this.currentlyProcessing ? this.currentlyProcessing.sn : -1,
                                l = function(t) {
                                    return i.indexOf(t.sn) > -1
                                },
                                u = function(t) {
                                    return a.some(function(e) {
                                        return e.sn === t.sn
                                    })
                                };
                            if (!e) break;
                            var d;
                            if (r < e.length && (d = e[r].details), void 0 === d) break;
                            d.fragments.forEach(function(e) {
                                l(e) || e.sn === n || u(e) || (e.encrypted ? (s.b.log("Loading key for " + e.sn), t.state = h.KEY_LOADING, t.hls.trigger(o.a.KEY_LOADING, {
                                    frag: e
                                })) : (e.trackId = r, a.push(e), t.nextFrag()))
                            })
                    }
                }, e.prototype.onSubtitleTracksUpdated = function(t) {
                    var e = this;
                    s.b.log("subtitle tracks updated"), this.tracks = t.subtitleTracks, this.clearVttFragQueues(), this.vttFragSNsProcessed = {}, this.tracks.forEach(function(t) {
                        e.vttFragSNsProcessed[t.id] = []
                    })
                }, e.prototype.onSubtitleTrackSwitch = function(t) {
                    if (this.currentTrackId = t.id, this.tracks && -1 !== this.currentTrackId) {
                        var e = this.tracks[this.currentTrackId];
                        e && e.details && this.tick()
                    }
                }, e.prototype.onSubtitleTrackLoaded = function() {
                    this.tick()
                }, e.prototype.onKeyLoaded = function() {
                    this.state === h.KEY_LOADING && (this.state = h.IDLE, this.tick())
                }, e.prototype.onFragLoaded = function(t) {
                    var e = this.fragCurrent,
                        r = t.frag.decryptdata,
                        i = t.frag,
                        a = this.hls;
                    if (this.state === h.FRAG_LOADING && e && "subtitle" === t.frag.type && e.sn === t.frag.sn && t.payload.byteLength > 0 && null != r && null != r.key && "AES-128" === r.method) {
                        var n = void 0;
                        try {
                            n = c.now()
                        } catch (t) {
                            n = Date.now()
                        }
                        this.decrypter.decrypt(t.payload, r.key.buffer, r.iv.buffer, function(t) {
                            var e = void 0;
                            try {
                                e = c.now()
                            } catch (t) {
                                e = Date.now()
                            }
                            a.trigger(o.a.FRAG_DECRYPTED, {
                                frag: i,
                                payload: t,
                                stats: {
                                    tstart: n,
                                    tdecrypt: e
                                }
                            })
                        })
                    }
                }, e
            }(u.a);
        e.a = f
    }, function(t, e, r) {
        "use strict";

        function i(t, e) {
            if (!(t instanceof e)) throw new TypeError("Cannot call a class as a function")
        }

        function a(t, e) {
            if (!t) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !e || "object" != typeof e && "function" != typeof e ? t : e
        }

        function n(t, e) {
            if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function, not " + typeof e);
            t.prototype = Object.create(e && e.prototype, {
                constructor: {
                    value: t,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), e && (Object.setPrototypeOf ? Object.setPrototypeOf(t, e) : t.__proto__ = e)
        }
        var o = r(4),
            s = r(1),
            l = r(2),
            u = r(0),
            d = function() {
                function t(t, e) {
                    for (var r = 0; r < e.length; r++) {
                        var i = e[r];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(t, i.key, i)
                    }
                }
                return function(e, r, i) {
                    return r && t(e.prototype, r), i && t(e, i), e
                }
            }(),
            c = window,
            h = c.XMLHttpRequest,
            f = {
                WIDEVINE: "com.widevine.alpha",
                PLAYREADY: "com.microsoft.playready"
            },
            p = function(t, e, r) {
                var i = {
                    videoCapabilities: []
                };
                return e.forEach(function(t) {
                    i.videoCapabilities.push({
                        contentType: 'video/mp4; codecs="' + t + '"'
                    })
                }), [i]
            },
            g = function(t, e, r) {
                switch (t) {
                    case f.WIDEVINE:
                        return p(0, r);
                    default:
                        throw Error("Unknown key-system: " + t)
                }
            },
            v = function(t) {
                function e(r) {
                    i(this, e);
                    var n = a(this, t.call(this, r, s.a.MEDIA_ATTACHED, s.a.MANIFEST_PARSED));
                    return n._widevineLicenseUrl = r.config.widevineLicenseUrl, n._licenseXhrSetup = r.config.licenseXhrSetup, n._emeEnabled = r.config.emeEnabled, n._requestMediaKeySystemAccess = r.config.requestMediaKeySystemAccessFunc, n._mediaKeysList = [], n._media = null, n._hasSetMediaKeys = !1, n._isMediaEncrypted = !1, n._requestLicenseFailureCount = 0, n
                }
                return n(e, t), e.prototype.getLicenseServerUrl = function(t) {
                    var e = void 0;
                    switch (t) {
                        case f.WIDEVINE:
                            e = this._widevineLicenseUrl;
                            break;
                        default:
                            e = null
                    }
                    return e || (u.b.error('No license server URL configured for key-system "' + t + '"'), this.hls.trigger(s.a.ERROR, {
                        type: l.b.KEY_SYSTEM_ERROR,
                        details: l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                        fatal: !0
                    })), e
                }, e.prototype._attemptKeySystemAccess = function(t, e, r) {
                    var i = this,
                        a = g(t, 0, r);
                    if (!a) return void u.b.warn("Can not create config for key-system (maybe because platform is not supported):", t);
                    u.b.log("Requesting encrypted media key-system access"), this.requestMediaKeySystemAccess(t, a).then(function(e) {
                        i._onMediaKeySystemAccessObtained(t, e)
                    }).catch(function(e) {
                        u.b.error('Failed to obtain key-system "' + t + '" access:', e)
                    })
                }, e.prototype._onMediaKeySystemAccessObtained = function(t, e) {
                    var r = this;
                    u.b.log('Access for key-system "' + t + '" obtained');
                    var i = {
                        mediaKeys: null,
                        mediaKeysSession: null,
                        mediaKeysSessionInitialized: !1,
                        mediaKeySystemAccess: e,
                        mediaKeySystemDomain: t
                    };
                    this._mediaKeysList.push(i), e.createMediaKeys().then(function(e) {
                        i.mediaKeys = e, u.b.log('Media-keys created for key-system "' + t + '"'), r._onMediaKeysCreated()
                    }).catch(function(t) {
                        u.b.error("Failed to create media-keys:", t)
                    })
                }, e.prototype._onMediaKeysCreated = function() {
                    var t = this;
                    this._mediaKeysList.forEach(function(e) {
                        e.mediaKeysSession || (e.mediaKeysSession = e.mediaKeys.createSession(), t._onNewMediaKeySession(e.mediaKeysSession))
                    })
                }, e.prototype._onNewMediaKeySession = function(t) {
                    var e = this;
                    u.b.log("New key-system session " + t.sessionId), t.addEventListener("message", function(r) {
                        e._onKeySessionMessage(t, r.message)
                    }, !1)
                }, e.prototype._onKeySessionMessage = function(t, e) {
                    u.b.log("Got EME message event, creating license request"), this._requestLicense(e, function(e) {
                        u.b.log("Received license data, updating key-session"), t.update(e)
                    })
                }, e.prototype._onMediaEncrypted = function(t, e) {
                    u.b.log('Media is encrypted using "' + t + '" init data type'), this._isMediaEncrypted = !0, this._mediaEncryptionInitDataType = t, this._mediaEncryptionInitData = e, this._attemptSetMediaKeys(), this._generateRequestWithPreferredKeySession()
                }, e.prototype._attemptSetMediaKeys = function() {
                    if (!this._hasSetMediaKeys) {
                        var t = this._mediaKeysList[0];
                        if (!t || !t.mediaKeys) return u.b.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"), void this.hls.trigger(s.a.ERROR, {
                            type: l.b.KEY_SYSTEM_ERROR,
                            details: l.a.KEY_SYSTEM_NO_KEYS,
                            fatal: !0
                        });
                        u.b.log("Setting keys for encrypted media"), this._media.setMediaKeys(t.mediaKeys), this._hasSetMediaKeys = !0
                    }
                }, e.prototype._generateRequestWithPreferredKeySession = function() {
                    var t = this,
                        e = this._mediaKeysList[0];
                    if (!e) return u.b.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"), void this.hls.trigger(s.a.ERROR, {
                        type: l.b.KEY_SYSTEM_ERROR,
                        details: l.a.KEY_SYSTEM_NO_ACCESS,
                        fatal: !0
                    });
                    if (e.mediaKeysSessionInitialized) return void u.b.warn("Key-Session already initialized but requested again");
                    var r = e.mediaKeysSession;
                    r || (u.b.error("Fatal: Media is encrypted but no key-session existing"), this.hls.trigger(s.a.ERROR, {
                        type: l.b.KEY_SYSTEM_ERROR,
                        details: l.a.KEY_SYSTEM_NO_SESSION,
                        fatal: !0
                    }));
                    var i = this._mediaEncryptionInitDataType,
                        a = this._mediaEncryptionInitData;
                    u.b.log('Generating key-session request for "' + i + '" init data type'), e.mediaKeysSessionInitialized = !0, r.generateRequest(i, a).then(function() {
                        u.b.debug("Key-session generation succeeded")
                    }).catch(function(e) {
                        u.b.error("Error generating key-session request:", e), t.hls.trigger(s.a.ERROR, {
                            type: l.b.KEY_SYSTEM_ERROR,
                            details: l.a.KEY_SYSTEM_NO_SESSION,
                            fatal: !1
                        })
                    })
                }, e.prototype._createLicenseXhr = function(t, e, r) {
                    var i = new h,
                        a = this._licenseXhrSetup;
                    try {
                        if (a) try {
                            a(i, t)
                        } catch (e) {
                            i.open("POST", t, !0), a(i, t)
                        }
                        i.readyState || i.open("POST", t, !0)
                    } catch (t) {
                        return u.b.error("Error setting up key-system license XHR", t), void this.hls.trigger(s.a.ERROR, {
                            type: l.b.KEY_SYSTEM_ERROR,
                            details: l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                            fatal: !0
                        })
                    }
                    return i.responseType = "arraybuffer", i.onreadystatechange = this._onLicenseRequestReadyStageChange.bind(this, i, t, e, r), i
                }, e.prototype._onLicenseRequestReadyStageChange = function(t, e, r, i) {
                    switch (t.readyState) {
                        case 4:
                            if (200 === t.status) this._requestLicenseFailureCount = 0, u.b.log("License request succeeded"), i(t.response);
                            else {
                                if (u.b.error("License Request XHR failed (" + e + "). Status: " + t.status + " (" + t.statusText + ")"), ++this._requestLicenseFailureCount <= 3) {
                                    var a = 3 - this._requestLicenseFailureCount + 1;
                                    return u.b.warn("Retrying license request, " + a + " attempts left"), void this._requestLicense(r, i)
                                }
                                this.hls.trigger(s.a.ERROR, {
                                    type: l.b.KEY_SYSTEM_ERROR,
                                    details: l.a.KEY_SYSTEM_LICENSE_REQUEST_FAILED,
                                    fatal: !0
                                })
                            }
                    }
                }, e.prototype._generateLicenseRequestChallenge = function(t, e) {
                    var r = void 0;
                    return t.mediaKeySystemDomain === f.PLAYREADY ? u.b.error("PlayReady is not supported (yet)") : t.mediaKeySystemDomain === f.WIDEVINE ? r = e : u.b.error("Unsupported key-system:", t.mediaKeySystemDomain), r
                }, e.prototype._requestLicense = function(t, e) {
                    u.b.log("Requesting content license for key-system");
                    var r = this._mediaKeysList[0];
                    if (!r) return u.b.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"), void this.hls.trigger(s.a.ERROR, {
                        type: l.b.KEY_SYSTEM_ERROR,
                        details: l.a.KEY_SYSTEM_NO_ACCESS,
                        fatal: !0
                    });
                    var i = this.getLicenseServerUrl(r.mediaKeySystemDomain),
                        a = this._createLicenseXhr(i, t, e);
                    u.b.log("Sending license request to URL: " + i), a.send(this._generateLicenseRequestChallenge(r, t))
                }, e.prototype.onMediaAttached = function(t) {
                    var e = this;
                    if (this._emeEnabled) {
                        var r = t.media;
                        this._media = r, r.addEventListener("encrypted", function(t) {
                            e._onMediaEncrypted(t.initDataType, t.initData)
                        })
                    }
                }, e.prototype.onManifestParsed = function(t) {
                    if (this._emeEnabled) {
                        var e = t.levels.map(function(t) {
                                return t.audioCodec
                            }),
                            r = t.levels.map(function(t) {
                                return t.videoCodec
                            });
                        this._attemptKeySystemAccess(f.WIDEVINE, e, r)
                    }
                }, d(e, [{
                    key: "requestMediaKeySystemAccess",
                    get: function() {
                        if (!this._requestMediaKeySystemAccess) throw new Error("No requestMediaKeySystemAccess function configured");
                        return this._requestMediaKeySystemAccess
                    }
                }]), e
            }(o.a);
        e.a = v
    }, function(t, e, r) {
        "use strict";
        r.d(e, "a", function() {
            return i
        });
        var i = function() {
            return "undefined" != typeof window && window.navigator && window.navigator.requestMediaKeySystemAccess ? window.navigator.requestMediaKeySystemAccess.bind(window.navigator) : null
        }()
    }, function(t, e) { /*! http://mths.be/endswith v0.2.0 by @mathias */
        String.prototype.endsWith || function() {
            "use strict";
            var t = function() {
                    try {
                        var t = {},
                            e = Object.defineProperty,
                            r = e(t, t, t) && e
                    } catch (t) {}
                    return r
                }(),
                e = {}.toString,
                r = function(t) {
                    if (null == this) throw TypeError();
                    var r = String(this);
                    if (t && "[object RegExp]" == e.call(t)) throw TypeError();
                    var i = r.length,
                        a = String(t),
                        n = a.length,
                        o = i;
                    if (arguments.length > 1) {
                        var s = arguments[1];
                        void 0 !== s && (o = s ? Number(s) : 0) != o && (o = 0)
                    }
                    var l = Math.min(Math.max(o, 0), i),
                        u = l - n;
                    if (u < 0) return !1;
                    for (var d = -1; ++d < n;)
                        if (r.charCodeAt(u + d) != a.charCodeAt(d)) return !1;
                    return !0
                };
            t ? t(String.prototype, "endsWith", {
                value: r,
                configurable: !0,
                writable: !0
            }) : String.prototype.endsWith = r
        }()
    }]).default
});